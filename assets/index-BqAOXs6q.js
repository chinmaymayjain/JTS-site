(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const y of a.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var DL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var VT={exports:{}},Ry={},GT={exports:{}},gn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf=Symbol.for("react.element"),NL=Symbol.for("react.portal"),UL=Symbol.for("react.fragment"),FL=Symbol.for("react.strict_mode"),BL=Symbol.for("react.profiler"),zL=Symbol.for("react.provider"),VL=Symbol.for("react.context"),GL=Symbol.for("react.forward_ref"),HL=Symbol.for("react.suspense"),WL=Symbol.for("react.memo"),XL=Symbol.for("react.lazy"),bS=Symbol.iterator;function qL(r){return r===null||typeof r!="object"?null:(r=bS&&r[bS]||r["@@iterator"],typeof r=="function"?r:null)}var HT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WT=Object.assign,XT={};function Wc(r,t,n){this.props=r,this.context=t,this.refs=XT,this.updater=n||HT}Wc.prototype.isReactComponent={};Wc.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};Wc.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function qT(){}qT.prototype=Wc.prototype;function W_(r,t,n){this.props=r,this.context=t,this.refs=XT,this.updater=n||HT}var X_=W_.prototype=new qT;X_.constructor=W_;WT(X_,Wc.prototype);X_.isPureReactComponent=!0;var wS=Array.isArray,YT=Object.prototype.hasOwnProperty,q_={current:null},ZT={key:!0,ref:!0,__self:!0,__source:!0};function KT(r,t,n){var s,o={},a=null,y=null;if(t!=null)for(s in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(a=""+t.key),t)YT.call(t,s)&&!ZT.hasOwnProperty(s)&&(o[s]=t[s]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var _=Array(i),g=0;g<i;g++)_[g]=arguments[g+2];o.children=_}if(r&&r.defaultProps)for(s in i=r.defaultProps,i)o[s]===void 0&&(o[s]=i[s]);return{$$typeof:lf,type:r,key:a,ref:y,props:o,_owner:q_.current}}function YL(r,t){return{$$typeof:lf,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function Y_(r){return typeof r=="object"&&r!==null&&r.$$typeof===lf}function ZL(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(n){return t[n]})}var SS=/\/+/g;function h0(r,t){return typeof r=="object"&&r!==null&&r.key!=null?ZL(""+r.key):t.toString(36)}function Sm(r,t,n,s,o){var a=typeof r;(a==="undefined"||a==="boolean")&&(r=null);var y=!1;if(r===null)y=!0;else switch(a){case"string":case"number":y=!0;break;case"object":switch(r.$$typeof){case lf:case NL:y=!0}}if(y)return y=r,o=o(y),r=s===""?"."+h0(y,0):s,wS(o)?(n="",r!=null&&(n=r.replace(SS,"$&/")+"/"),Sm(o,t,n,"",function(g){return g})):o!=null&&(Y_(o)&&(o=YL(o,n+(!o.key||y&&y.key===o.key?"":(""+o.key).replace(SS,"$&/")+"/")+r)),t.push(o)),1;if(y=0,s=s===""?".":s+":",wS(r))for(var i=0;i<r.length;i++){a=r[i];var _=s+h0(a,i);y+=Sm(a,t,n,_,o)}else if(_=qL(r),typeof _=="function")for(r=_.call(r),i=0;!(a=r.next()).done;)a=a.value,_=s+h0(a,i++),y+=Sm(a,t,n,_,o);else if(a==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function up(r,t,n){if(r==null)return r;var s=[],o=0;return Sm(r,s,"","",function(a){return t.call(n,a,o++)}),s}function KL(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(n){(r._status===0||r._status===-1)&&(r._status=1,r._result=n)},function(n){(r._status===0||r._status===-1)&&(r._status=2,r._result=n)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var wi={current:null},Mm={transition:null},JL={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Mm,ReactCurrentOwner:q_};function JT(){throw Error("act(...) is not supported in production builds of React.")}gn.Children={map:up,forEach:function(r,t,n){up(r,function(){t.apply(this,arguments)},n)},count:function(r){var t=0;return up(r,function(){t++}),t},toArray:function(r){return up(r,function(t){return t})||[]},only:function(r){if(!Y_(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};gn.Component=Wc;gn.Fragment=UL;gn.Profiler=BL;gn.PureComponent=W_;gn.StrictMode=FL;gn.Suspense=HL;gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JL;gn.act=JT;gn.cloneElement=function(r,t,n){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var s=WT({},r.props),o=r.key,a=r.ref,y=r._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,y=q_.current),t.key!==void 0&&(o=""+t.key),r.type&&r.type.defaultProps)var i=r.type.defaultProps;for(_ in t)YT.call(t,_)&&!ZT.hasOwnProperty(_)&&(s[_]=t[_]===void 0&&i!==void 0?i[_]:t[_])}var _=arguments.length-2;if(_===1)s.children=n;else if(1<_){i=Array(_);for(var g=0;g<_;g++)i[g]=arguments[g+2];s.children=i}return{$$typeof:lf,type:r.type,key:o,ref:a,props:s,_owner:y}};gn.createContext=function(r){return r={$$typeof:VL,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:zL,_context:r},r.Consumer=r};gn.createElement=KT;gn.createFactory=function(r){var t=KT.bind(null,r);return t.type=r,t};gn.createRef=function(){return{current:null}};gn.forwardRef=function(r){return{$$typeof:GL,render:r}};gn.isValidElement=Y_;gn.lazy=function(r){return{$$typeof:XL,_payload:{_status:-1,_result:r},_init:KL}};gn.memo=function(r,t){return{$$typeof:WL,type:r,compare:t===void 0?null:t}};gn.startTransition=function(r){var t=Mm.transition;Mm.transition={};try{r()}finally{Mm.transition=t}};gn.unstable_act=JT;gn.useCallback=function(r,t){return wi.current.useCallback(r,t)};gn.useContext=function(r){return wi.current.useContext(r)};gn.useDebugValue=function(){};gn.useDeferredValue=function(r){return wi.current.useDeferredValue(r)};gn.useEffect=function(r,t){return wi.current.useEffect(r,t)};gn.useId=function(){return wi.current.useId()};gn.useImperativeHandle=function(r,t,n){return wi.current.useImperativeHandle(r,t,n)};gn.useInsertionEffect=function(r,t){return wi.current.useInsertionEffect(r,t)};gn.useLayoutEffect=function(r,t){return wi.current.useLayoutEffect(r,t)};gn.useMemo=function(r,t){return wi.current.useMemo(r,t)};gn.useReducer=function(r,t,n){return wi.current.useReducer(r,t,n)};gn.useRef=function(r){return wi.current.useRef(r)};gn.useState=function(r){return wi.current.useState(r)};gn.useSyncExternalStore=function(r,t,n){return wi.current.useSyncExternalStore(r,t,n)};gn.useTransition=function(){return wi.current.useTransition()};gn.version="18.3.1";GT.exports=gn;var at=GT.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QL=at,$L=Symbol.for("react.element"),ek=Symbol.for("react.fragment"),tk=Object.prototype.hasOwnProperty,nk=QL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rk={key:!0,ref:!0,__self:!0,__source:!0};function QT(r,t,n){var s,o={},a=null,y=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(y=t.ref);for(s in t)tk.call(t,s)&&!rk.hasOwnProperty(s)&&(o[s]=t[s]);if(r&&r.defaultProps)for(s in t=r.defaultProps,t)o[s]===void 0&&(o[s]=t[s]);return{$$typeof:$L,type:r,key:a,ref:y,props:o,_owner:nk.current}}Ry.Fragment=ek;Ry.jsx=QT;Ry.jsxs=QT;VT.exports=Ry;var gt=VT.exports,$T={exports:{}},ts={},eA={exports:{}},tA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(N,O){var H=N.length;N.push(O);e:for(;0<H;){var q=H-1>>>1,K=N[q];if(0<o(K,O))N[q]=O,N[H]=K,H=q;else break e}}function n(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var O=N[0],H=N.pop();if(H!==O){N[0]=H;e:for(var q=0,K=N.length,ne=K>>>1;q<ne;){var ee=2*(q+1)-1,se=N[ee],me=ee+1,X=N[me];if(0>o(se,H))me<K&&0>o(X,se)?(N[q]=X,N[me]=H,q=me):(N[q]=se,N[ee]=H,q=ee);else if(me<K&&0>o(X,H))N[q]=X,N[me]=H,q=me;else break e}}return O}function o(N,O){var H=N.sortIndex-O.sortIndex;return H!==0?H:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var y=Date,i=y.now();r.unstable_now=function(){return y.now()-i}}var _=[],g=[],h=1,l=null,d=3,v=!1,x=!1,p=!1,f=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var O=n(g);O!==null;){if(O.callback===null)s(g);else if(O.startTime<=N)s(g),O.sortIndex=O.expirationTime,t(_,O);else break;O=n(g)}}function b(N){if(p=!1,m(N),!x)if(n(_)!==null)x=!0,z(S);else{var O=n(g);O!==null&&G(b,O.startTime-N)}}function S(N,O){x=!1,p&&(p=!1,u(A),A=-1),v=!0;var H=d;try{for(m(O),l=n(_);l!==null&&(!(l.expirationTime>O)||N&&!k());){var q=l.callback;if(typeof q=="function"){l.callback=null,d=l.priorityLevel;var K=q(l.expirationTime<=O);O=r.unstable_now(),typeof K=="function"?l.callback=K:l===n(_)&&s(_),m(O)}else s(_);l=n(_)}if(l!==null)var ne=!0;else{var ee=n(g);ee!==null&&G(b,ee.startTime-O),ne=!1}return ne}finally{l=null,d=H,v=!1}}var w=!1,M=null,A=-1,P=5,R=-1;function k(){return!(r.unstable_now()-R<P)}function L(){if(M!==null){var N=r.unstable_now();R=N;var O=!0;try{O=M(!0,N)}finally{O?B():(w=!1,M=null)}}else w=!1}var B;if(typeof c=="function")B=function(){c(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=L,B=function(){F.postMessage(null)}}else B=function(){f(L,0)};function z(N){M=N,w||(w=!0,B())}function G(N,O){A=f(function(){N(r.unstable_now())},O)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,z(S))},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return n(_)},r.unstable_next=function(N){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var H=d;d=O;try{return N()}finally{d=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=d;d=N;try{return O()}finally{d=H}},r.unstable_scheduleCallback=function(N,O,H){var q=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,N={id:h++,callback:O,priorityLevel:N,startTime:H,expirationTime:K,sortIndex:-1},H>q?(N.sortIndex=H,t(g,N),n(_)===null&&N===n(g)&&(p?(u(A),A=-1):p=!0,G(b,H-q))):(N.sortIndex=K,t(_,N),x||v||(x=!0,z(S))),N},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(N){var O=d;return function(){var H=d;d=O;try{return N.apply(this,arguments)}finally{d=H}}}})(tA);eA.exports=tA;var ik=eA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=at,$i=ik;function xt(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nA=new Set,gh={};function tu(r,t){Rc(r,t),Rc(r+"Capture",t)}function Rc(r,t){for(gh[r]=t,r=0;r<t.length;r++)nA.add(t[r])}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hv=Object.prototype.hasOwnProperty,ok=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,MS={},ES={};function ak(r){return Hv.call(ES,r)?!0:Hv.call(MS,r)?!1:ok.test(r)?ES[r]=!0:(MS[r]=!0,!1)}function lk(r,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function uk(r,t,n,s){if(t===null||typeof t>"u"||lk(r,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Si(r,t,n,s,o,a,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=r,this.type=t,this.sanitizeURL=a,this.removeEmptyString=y}var Yr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Yr[r]=new Si(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];Yr[t]=new Si(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Yr[r]=new Si(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Yr[r]=new Si(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Yr[r]=new Si(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Yr[r]=new Si(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Yr[r]=new Si(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Yr[r]=new Si(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Yr[r]=new Si(r,5,!1,r.toLowerCase(),null,!1,!1)});var Z_=/[\-:]([a-z])/g;function K_(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(Z_,K_);Yr[t]=new Si(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(Z_,K_);Yr[t]=new Si(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(Z_,K_);Yr[t]=new Si(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Yr[r]=new Si(r,1,!1,r.toLowerCase(),null,!1,!1)});Yr.xlinkHref=new Si("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Yr[r]=new Si(r,1,!1,r.toLowerCase(),null,!0,!0)});function J_(r,t,n,s){var o=Yr.hasOwnProperty(t)?Yr[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uk(t,n,o,s)&&(n=null),s||o===null?ak(t)&&(n===null?r.removeAttribute(t):r.setAttribute(t,""+n)):o.mustUseProperty?r[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,s=o.attributeNamespace,n===null?r.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,s?r.setAttributeNS(s,t,n):r.setAttribute(t,n))))}var Wo=sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cp=Symbol.for("react.element"),ec=Symbol.for("react.portal"),tc=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),Wv=Symbol.for("react.profiler"),rA=Symbol.for("react.provider"),iA=Symbol.for("react.context"),$_=Symbol.for("react.forward_ref"),Xv=Symbol.for("react.suspense"),qv=Symbol.for("react.suspense_list"),ex=Symbol.for("react.memo"),pa=Symbol.for("react.lazy"),sA=Symbol.for("react.offscreen"),TS=Symbol.iterator;function Sd(r){return r===null||typeof r!="object"?null:(r=TS&&r[TS]||r["@@iterator"],typeof r=="function"?r:null)}var ar=Object.assign,f0;function Wd(r){if(f0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);f0=t&&t[1]||""}return`
`+f0+r}var p0=!1;function m0(r,t){if(!r||p0)return"";p0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var s=g}Reflect.construct(r,[],t)}else{try{t.call()}catch(g){s=g}r.call(t.prototype)}else{try{throw Error()}catch(g){s=g}r()}}catch(g){if(g&&s&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),a=s.stack.split(`
`),y=o.length-1,i=a.length-1;1<=y&&0<=i&&o[y]!==a[i];)i--;for(;1<=y&&0<=i;y--,i--)if(o[y]!==a[i]){if(y!==1||i!==1)do if(y--,i--,0>i||o[y]!==a[i]){var _=`
`+o[y].replace(" at new "," at ");return r.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",r.displayName)),_}while(1<=y&&0<=i);break}}}finally{p0=!1,Error.prepareStackTrace=n}return(r=r?r.displayName||r.name:"")?Wd(r):""}function ck(r){switch(r.tag){case 5:return Wd(r.type);case 16:return Wd("Lazy");case 13:return Wd("Suspense");case 19:return Wd("SuspenseList");case 0:case 2:case 15:return r=m0(r.type,!1),r;case 11:return r=m0(r.type.render,!1),r;case 1:return r=m0(r.type,!0),r;default:return""}}function Yv(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case tc:return"Fragment";case ec:return"Portal";case Wv:return"Profiler";case Q_:return"StrictMode";case Xv:return"Suspense";case qv:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case iA:return(r.displayName||"Context")+".Consumer";case rA:return(r._context.displayName||"Context")+".Provider";case $_:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ex:return t=r.displayName||null,t!==null?t:Yv(r.type)||"Memo";case pa:t=r._payload,r=r._init;try{return Yv(r(t))}catch{}}return null}function dk(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yv(t);case 8:return t===Q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ia(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function oA(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hk(r){var t=oA(r)?"checked":"value",n=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),s=""+r[t];if(!r.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return o.call(this)},set:function(y){s=""+y,a.call(this,y)}}),Object.defineProperty(r,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function dp(r){r._valueTracker||(r._valueTracker=hk(r))}function aA(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return r&&(s=oA(r)?r.checked?"true":"false":r.value),r=s,r!==n?(t.setValue(r),!0):!1}function Xm(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Zv(r,t){var n=t.checked;return ar({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??r._wrapperState.initialChecked})}function AS(r,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Ia(t.value!=null?t.value:n),r._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lA(r,t){t=t.checked,t!=null&&J_(r,"checked",t,!1)}function Kv(r,t){lA(r,t);var n=Ia(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&r.value===""||r.value!=n)&&(r.value=""+n):r.value!==""+n&&(r.value=""+n);else if(s==="submit"||s==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?Jv(r,t.type,n):t.hasOwnProperty("defaultValue")&&Jv(r,t.type,Ia(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function CS(r,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,n||t===r.value||(r.value=t),r.defaultValue=t}n=r.name,n!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,n!==""&&(r.name=n)}function Jv(r,t,n){(t!=="number"||Xm(r.ownerDocument)!==r)&&(n==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+n&&(r.defaultValue=""+n))}var Xd=Array.isArray;function Sc(r,t,n,s){if(r=r.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<r.length;n++)o=t.hasOwnProperty("$"+r[n].value),r[n].selected!==o&&(r[n].selected=o),o&&s&&(r[n].defaultSelected=!0)}else{for(n=""+Ia(n),t=null,o=0;o<r.length;o++){if(r[o].value===n){r[o].selected=!0,s&&(r[o].defaultSelected=!0);return}t!==null||r[o].disabled||(t=r[o])}t!==null&&(t.selected=!0)}}function Qv(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xt(91));return ar({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function PS(r,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(xt(92));if(Xd(n)){if(1<n.length)throw Error(xt(93));n=n[0]}t=n}t==null&&(t=""),n=t}r._wrapperState={initialValue:Ia(n)}}function uA(r,t){var n=Ia(t.value),s=Ia(t.defaultValue);n!=null&&(n=""+n,n!==r.value&&(r.value=n),t.defaultValue==null&&r.defaultValue!==n&&(r.defaultValue=n)),s!=null&&(r.defaultValue=""+s)}function RS(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function cA(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $v(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?cA(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var hp,dA=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,o){MSApp.execUnsafeLocalFunction(function(){return r(t,n,s,o)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(hp=hp||document.createElement("div"),hp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hp.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function vh(r,t){if(t){var n=r.firstChild;if(n&&n===r.lastChild&&n.nodeType===3){n.nodeValue=t;return}}r.textContent=t}var $d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fk=["Webkit","ms","Moz","O"];Object.keys($d).forEach(function(r){fk.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),$d[t]=$d[r]})});function hA(r,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$d.hasOwnProperty(r)&&$d[r]?(""+t).trim():t+"px"}function fA(r,t){r=r.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,o=hA(n,t[n],s);n==="float"&&(n="cssFloat"),s?r.setProperty(n,o):r[n]=o}}var pk=ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e1(r,t){if(t){if(pk[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xt(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xt(62))}}function t1(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n1=null;function tx(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var r1=null,Mc=null,Ec=null;function jS(r){if(r=df(r)){if(typeof r1!="function")throw Error(xt(280));var t=r.stateNode;t&&(t=Oy(t),r1(r.stateNode,r.type,t))}}function pA(r){Mc?Ec?Ec.push(r):Ec=[r]:Mc=r}function mA(){if(Mc){var r=Mc,t=Ec;if(Ec=Mc=null,jS(r),t)for(r=0;r<t.length;r++)jS(t[r])}}function yA(r,t){return r(t)}function gA(){}var y0=!1;function vA(r,t,n){if(y0)return r(t,n);y0=!0;try{return yA(r,t,n)}finally{y0=!1,(Mc!==null||Ec!==null)&&(gA(),mA())}}function _h(r,t){var n=r.stateNode;if(n===null)return null;var s=Oy(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(r=r.type,s=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!s;break e;default:r=!1}if(r)return null;if(n&&typeof n!="function")throw Error(xt(231,t,typeof n));return n}var i1=!1;if(No)try{var Md={};Object.defineProperty(Md,"passive",{get:function(){i1=!0}}),window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{i1=!1}function mk(r,t,n,s,o,a,y,i,_){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(h){this.onError(h)}}var eh=!1,qm=null,Ym=!1,s1=null,yk={onError:function(r){eh=!0,qm=r}};function gk(r,t,n,s,o,a,y,i,_){eh=!1,qm=null,mk.apply(yk,arguments)}function vk(r,t,n,s,o,a,y,i,_){if(gk.apply(this,arguments),eh){if(eh){var g=qm;eh=!1,qm=null}else throw Error(xt(198));Ym||(Ym=!0,s1=g)}}function nu(r){var t=r,n=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(n=t.return),r=t.return;while(r)}return t.tag===3?n:null}function _A(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function LS(r){if(nu(r)!==r)throw Error(xt(188))}function _k(r){var t=r.alternate;if(!t){if(t=nu(r),t===null)throw Error(xt(188));return t!==r?null:r}for(var n=r,s=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return LS(o),r;if(a===s)return LS(o),t;a=a.sibling}throw Error(xt(188))}if(n.return!==s.return)n=o,s=a;else{for(var y=!1,i=o.child;i;){if(i===n){y=!0,n=o,s=a;break}if(i===s){y=!0,s=o,n=a;break}i=i.sibling}if(!y){for(i=a.child;i;){if(i===n){y=!0,n=a,s=o;break}if(i===s){y=!0,s=a,n=o;break}i=i.sibling}if(!y)throw Error(xt(189))}}if(n.alternate!==s)throw Error(xt(190))}if(n.tag!==3)throw Error(xt(188));return n.stateNode.current===n?r:t}function xA(r){return r=_k(r),r!==null?bA(r):null}function bA(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=bA(r);if(t!==null)return t;r=r.sibling}return null}var wA=$i.unstable_scheduleCallback,kS=$i.unstable_cancelCallback,xk=$i.unstable_shouldYield,bk=$i.unstable_requestPaint,_r=$i.unstable_now,wk=$i.unstable_getCurrentPriorityLevel,nx=$i.unstable_ImmediatePriority,SA=$i.unstable_UserBlockingPriority,Zm=$i.unstable_NormalPriority,Sk=$i.unstable_LowPriority,MA=$i.unstable_IdlePriority,jy=null,ro=null;function Mk(r){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(jy,r,void 0,(r.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:Ak,Ek=Math.log,Tk=Math.LN2;function Ak(r){return r>>>=0,r===0?32:31-(Ek(r)/Tk|0)|0}var fp=64,pp=4194304;function qd(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Km(r,t){var n=r.pendingLanes;if(n===0)return 0;var s=0,o=r.suspendedLanes,a=r.pingedLanes,y=n&268435455;if(y!==0){var i=y&~o;i!==0?s=qd(i):(a&=y,a!==0&&(s=qd(a)))}else y=n&~o,y!==0?s=qd(y):a!==0&&(s=qd(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&o)&&(o=s&-s,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=s;0<t;)n=31-zs(t),o=1<<n,s|=r[n],t&=~o;return s}function Ck(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pk(r,t){for(var n=r.suspendedLanes,s=r.pingedLanes,o=r.expirationTimes,a=r.pendingLanes;0<a;){var y=31-zs(a),i=1<<y,_=o[y];_===-1?(!(i&n)||i&s)&&(o[y]=Ck(i,t)):_<=t&&(r.expiredLanes|=i),a&=~i}}function o1(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function EA(){var r=fp;return fp<<=1,!(fp&4194240)&&(fp=64),r}function g0(r){for(var t=[],n=0;31>n;n++)t.push(r);return t}function uf(r,t,n){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-zs(t),r[t]=n}function Rk(r,t){var n=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var s=r.eventTimes;for(r=r.expirationTimes;0<n;){var o=31-zs(n),a=1<<o;t[o]=0,s[o]=-1,r[o]=-1,n&=~a}}function rx(r,t){var n=r.entangledLanes|=t;for(r=r.entanglements;n;){var s=31-zs(n),o=1<<s;o&t|r[s]&t&&(r[s]|=t),n&=~o}}var Fn=0;function TA(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var AA,ix,CA,PA,RA,a1=!1,mp=[],Sa=null,Ma=null,Ea=null,xh=new Map,bh=new Map,ga=[],jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IS(r,t){switch(r){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":xh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bh.delete(t.pointerId)}}function Ed(r,t,n,s,o,a){return r===null||r.nativeEvent!==a?(r={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[o]},t!==null&&(t=df(t),t!==null&&ix(t)),r):(r.eventSystemFlags|=s,t=r.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),r)}function Lk(r,t,n,s,o){switch(t){case"focusin":return Sa=Ed(Sa,r,t,n,s,o),!0;case"dragenter":return Ma=Ed(Ma,r,t,n,s,o),!0;case"mouseover":return Ea=Ed(Ea,r,t,n,s,o),!0;case"pointerover":var a=o.pointerId;return xh.set(a,Ed(xh.get(a)||null,r,t,n,s,o)),!0;case"gotpointercapture":return a=o.pointerId,bh.set(a,Ed(bh.get(a)||null,r,t,n,s,o)),!0}return!1}function jA(r){var t=Rl(r.target);if(t!==null){var n=nu(t);if(n!==null){if(t=n.tag,t===13){if(t=_A(n),t!==null){r.blockedOn=t,RA(r.priority,function(){CA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){r.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Em(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var n=l1(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(n===null){n=r.nativeEvent;var s=new n.constructor(n.type,n);n1=s,n.target.dispatchEvent(s),n1=null}else return t=df(n),t!==null&&ix(t),r.blockedOn=n,!1;t.shift()}return!0}function OS(r,t,n){Em(r)&&n.delete(t)}function kk(){a1=!1,Sa!==null&&Em(Sa)&&(Sa=null),Ma!==null&&Em(Ma)&&(Ma=null),Ea!==null&&Em(Ea)&&(Ea=null),xh.forEach(OS),bh.forEach(OS)}function Td(r,t){r.blockedOn===t&&(r.blockedOn=null,a1||(a1=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,kk)))}function wh(r){function t(o){return Td(o,r)}if(0<mp.length){Td(mp[0],r);for(var n=1;n<mp.length;n++){var s=mp[n];s.blockedOn===r&&(s.blockedOn=null)}}for(Sa!==null&&Td(Sa,r),Ma!==null&&Td(Ma,r),Ea!==null&&Td(Ea,r),xh.forEach(t),bh.forEach(t),n=0;n<ga.length;n++)s=ga[n],s.blockedOn===r&&(s.blockedOn=null);for(;0<ga.length&&(n=ga[0],n.blockedOn===null);)jA(n),n.blockedOn===null&&ga.shift()}var Tc=Wo.ReactCurrentBatchConfig,Jm=!0;function Ik(r,t,n,s){var o=Fn,a=Tc.transition;Tc.transition=null;try{Fn=1,sx(r,t,n,s)}finally{Fn=o,Tc.transition=a}}function Ok(r,t,n,s){var o=Fn,a=Tc.transition;Tc.transition=null;try{Fn=4,sx(r,t,n,s)}finally{Fn=o,Tc.transition=a}}function sx(r,t,n,s){if(Jm){var o=l1(r,t,n,s);if(o===null)A0(r,t,s,Qm,n),IS(r,s);else if(Lk(o,r,t,n,s))s.stopPropagation();else if(IS(r,s),t&4&&-1<jk.indexOf(r)){for(;o!==null;){var a=df(o);if(a!==null&&AA(a),a=l1(r,t,n,s),a===null&&A0(r,t,s,Qm,n),a===o)break;o=a}o!==null&&s.stopPropagation()}else A0(r,t,s,null,n)}}var Qm=null;function l1(r,t,n,s){if(Qm=null,r=tx(s),r=Rl(r),r!==null)if(t=nu(r),t===null)r=null;else if(n=t.tag,n===13){if(r=_A(t),r!==null)return r;r=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return Qm=r,null}function LA(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wk()){case nx:return 1;case SA:return 4;case Zm:case Sk:return 16;case MA:return 536870912;default:return 16}default:return 16}}var ba=null,ox=null,Tm=null;function kA(){if(Tm)return Tm;var r,t=ox,n=t.length,s,o="value"in ba?ba.value:ba.textContent,a=o.length;for(r=0;r<n&&t[r]===o[r];r++);var y=n-r;for(s=1;s<=y&&t[n-s]===o[a-s];s++);return Tm=o.slice(r,1<s?1-s:void 0)}function Am(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function yp(){return!0}function DS(){return!1}function ns(r){function t(n,s,o,a,y){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=a,this.target=y,this.currentTarget=null;for(var i in r)r.hasOwnProperty(i)&&(n=r[i],this[i]=n?n(a):a[i]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yp:DS,this.isPropagationStopped=DS,this}return ar(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yp)},persist:function(){},isPersistent:yp}),t}var Xc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ax=ns(Xc),cf=ar({},Xc,{view:0,detail:0}),Dk=ns(cf),v0,_0,Ad,Ly=ar({},cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lx,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ad&&(Ad&&r.type==="mousemove"?(v0=r.screenX-Ad.screenX,_0=r.screenY-Ad.screenY):_0=v0=0,Ad=r),v0)},movementY:function(r){return"movementY"in r?r.movementY:_0}}),NS=ns(Ly),Nk=ar({},Ly,{dataTransfer:0}),Uk=ns(Nk),Fk=ar({},cf,{relatedTarget:0}),x0=ns(Fk),Bk=ar({},Xc,{animationName:0,elapsedTime:0,pseudoElement:0}),zk=ns(Bk),Vk=ar({},Xc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Gk=ns(Vk),Hk=ar({},Xc,{data:0}),US=ns(Hk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yk(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=qk[r])?!!t[r]:!1}function lx(){return Yk}var Zk=ar({},cf,{key:function(r){if(r.key){var t=Wk[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=Am(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Xk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lx,charCode:function(r){return r.type==="keypress"?Am(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Am(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Kk=ns(Zk),Jk=ar({},Ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FS=ns(Jk),Qk=ar({},cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lx}),$k=ns(Qk),eI=ar({},Xc,{propertyName:0,elapsedTime:0,pseudoElement:0}),tI=ns(eI),nI=ar({},Ly,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),rI=ns(nI),iI=[9,13,27,32],ux=No&&"CompositionEvent"in window,th=null;No&&"documentMode"in document&&(th=document.documentMode);var sI=No&&"TextEvent"in window&&!th,IA=No&&(!ux||th&&8<th&&11>=th),BS=" ",zS=!1;function OA(r,t){switch(r){case"keyup":return iI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DA(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var nc=!1;function oI(r,t){switch(r){case"compositionend":return DA(t);case"keypress":return t.which!==32?null:(zS=!0,BS);case"textInput":return r=t.data,r===BS&&zS?null:r;default:return null}}function aI(r,t){if(nc)return r==="compositionend"||!ux&&OA(r,t)?(r=kA(),Tm=ox=ba=null,nc=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return IA&&t.locale!=="ko"?null:t.data;default:return null}}var lI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VS(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!lI[r.type]:t==="textarea"}function NA(r,t,n,s){pA(s),t=$m(t,"onChange"),0<t.length&&(n=new ax("onChange","change",null,n,s),r.push({event:n,listeners:t}))}var nh=null,Sh=null;function uI(r){YA(r,0)}function ky(r){var t=sc(r);if(aA(t))return r}function cI(r,t){if(r==="change")return t}var UA=!1;if(No){var b0;if(No){var w0="oninput"in document;if(!w0){var GS=document.createElement("div");GS.setAttribute("oninput","return;"),w0=typeof GS.oninput=="function"}b0=w0}else b0=!1;UA=b0&&(!document.documentMode||9<document.documentMode)}function HS(){nh&&(nh.detachEvent("onpropertychange",FA),Sh=nh=null)}function FA(r){if(r.propertyName==="value"&&ky(Sh)){var t=[];NA(t,Sh,r,tx(r)),vA(uI,t)}}function dI(r,t,n){r==="focusin"?(HS(),nh=t,Sh=n,nh.attachEvent("onpropertychange",FA)):r==="focusout"&&HS()}function hI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ky(Sh)}function fI(r,t){if(r==="click")return ky(t)}function pI(r,t){if(r==="input"||r==="change")return ky(t)}function mI(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var Gs=typeof Object.is=="function"?Object.is:mI;function Mh(r,t){if(Gs(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var n=Object.keys(r),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!Hv.call(t,o)||!Gs(r[o],t[o]))return!1}return!0}function WS(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function XS(r,t){var n=WS(r);r=0;for(var s;n;){if(n.nodeType===3){if(s=r+n.textContent.length,r<=t&&s>=t)return{node:n,offset:t-r};r=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=WS(n)}}function BA(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?BA(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function zA(){for(var r=window,t=Xm();t instanceof r.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)r=t.contentWindow;else break;t=Xm(r.document)}return t}function cx(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function yI(r){var t=zA(),n=r.focusedElem,s=r.selectionRange;if(t!==n&&n&&n.ownerDocument&&BA(n.ownerDocument.documentElement,n)){if(s!==null&&cx(n)){if(t=s.start,r=s.end,r===void 0&&(r=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(r,n.value.length);else if(r=(t=n.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var o=n.textContent.length,a=Math.min(s.start,o);s=s.end===void 0?a:Math.min(s.end,o),!r.extend&&a>s&&(o=s,s=a,a=o),o=XS(n,a);var y=XS(n,s);o&&y&&(r.rangeCount!==1||r.anchorNode!==o.node||r.anchorOffset!==o.offset||r.focusNode!==y.node||r.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),r.removeAllRanges(),a>s?(r.addRange(t),r.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),r.addRange(t)))}}for(t=[],r=n;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)r=t[n],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var gI=No&&"documentMode"in document&&11>=document.documentMode,rc=null,u1=null,rh=null,c1=!1;function qS(r,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;c1||rc==null||rc!==Xm(s)||(s=rc,"selectionStart"in s&&cx(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),rh&&Mh(rh,s)||(rh=s,s=$m(u1,"onSelect"),0<s.length&&(t=new ax("onSelect","select",null,t,n),r.push({event:t,listeners:s}),t.target=rc)))}function gp(r,t){var n={};return n[r.toLowerCase()]=t.toLowerCase(),n["Webkit"+r]="webkit"+t,n["Moz"+r]="moz"+t,n}var ic={animationend:gp("Animation","AnimationEnd"),animationiteration:gp("Animation","AnimationIteration"),animationstart:gp("Animation","AnimationStart"),transitionend:gp("Transition","TransitionEnd")},S0={},VA={};No&&(VA=document.createElement("div").style,"AnimationEvent"in window||(delete ic.animationend.animation,delete ic.animationiteration.animation,delete ic.animationstart.animation),"TransitionEvent"in window||delete ic.transitionend.transition);function Iy(r){if(S0[r])return S0[r];if(!ic[r])return r;var t=ic[r],n;for(n in t)if(t.hasOwnProperty(n)&&n in VA)return S0[r]=t[n];return r}var GA=Iy("animationend"),HA=Iy("animationiteration"),WA=Iy("animationstart"),XA=Iy("transitionend"),qA=new Map,YS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(r,t){qA.set(r,t),tu(t,[r])}for(var M0=0;M0<YS.length;M0++){var E0=YS[M0],vI=E0.toLowerCase(),_I=E0[0].toUpperCase()+E0.slice(1);Ba(vI,"on"+_I)}Ba(GA,"onAnimationEnd");Ba(HA,"onAnimationIteration");Ba(WA,"onAnimationStart");Ba("dblclick","onDoubleClick");Ba("focusin","onFocus");Ba("focusout","onBlur");Ba(XA,"onTransitionEnd");Rc("onMouseEnter",["mouseout","mouseover"]);Rc("onMouseLeave",["mouseout","mouseover"]);Rc("onPointerEnter",["pointerout","pointerover"]);Rc("onPointerLeave",["pointerout","pointerover"]);tu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tu("onBeforeInput",["compositionend","keypress","textInput","paste"]);tu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yd));function ZS(r,t,n){var s=r.type||"unknown-event";r.currentTarget=n,vk(s,t,void 0,r),r.currentTarget=null}function YA(r,t){t=(t&4)!==0;for(var n=0;n<r.length;n++){var s=r[n],o=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var y=s.length-1;0<=y;y--){var i=s[y],_=i.instance,g=i.currentTarget;if(i=i.listener,_!==a&&o.isPropagationStopped())break e;ZS(o,i,g),a=_}else for(y=0;y<s.length;y++){if(i=s[y],_=i.instance,g=i.currentTarget,i=i.listener,_!==a&&o.isPropagationStopped())break e;ZS(o,i,g),a=_}}}if(Ym)throw r=s1,Ym=!1,s1=null,r}function qn(r,t){var n=t[m1];n===void 0&&(n=t[m1]=new Set);var s=r+"__bubble";n.has(s)||(ZA(t,r,2,!1),n.add(s))}function T0(r,t,n){var s=0;t&&(s|=4),ZA(n,r,s,t)}var vp="_reactListening"+Math.random().toString(36).slice(2);function Eh(r){if(!r[vp]){r[vp]=!0,nA.forEach(function(n){n!=="selectionchange"&&(xI.has(n)||T0(n,!1,r),T0(n,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[vp]||(t[vp]=!0,T0("selectionchange",!1,t))}}function ZA(r,t,n,s){switch(LA(t)){case 1:var o=Ik;break;case 4:o=Ok;break;default:o=sx}n=o.bind(null,t,n,r),o=void 0,!i1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?r.addEventListener(t,n,{capture:!0,passive:o}):r.addEventListener(t,n,!0):o!==void 0?r.addEventListener(t,n,{passive:o}):r.addEventListener(t,n,!1)}function A0(r,t,n,s,o){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var i=s.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(y===4)for(y=s.return;y!==null;){var _=y.tag;if((_===3||_===4)&&(_=y.stateNode.containerInfo,_===o||_.nodeType===8&&_.parentNode===o))return;y=y.return}for(;i!==null;){if(y=Rl(i),y===null)return;if(_=y.tag,_===5||_===6){s=a=y;continue e}i=i.parentNode}}s=s.return}vA(function(){var g=a,h=tx(n),l=[];e:{var d=qA.get(r);if(d!==void 0){var v=ax,x=r;switch(r){case"keypress":if(Am(n)===0)break e;case"keydown":case"keyup":v=Kk;break;case"focusin":x="focus",v=x0;break;case"focusout":x="blur",v=x0;break;case"beforeblur":case"afterblur":v=x0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=NS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Uk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=$k;break;case GA:case HA:case WA:v=zk;break;case XA:v=tI;break;case"scroll":v=Dk;break;case"wheel":v=rI;break;case"copy":case"cut":case"paste":v=Gk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=FS}var p=(t&4)!==0,f=!p&&r==="scroll",u=p?d!==null?d+"Capture":null:d;p=[];for(var c=g,m;c!==null;){m=c;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,u!==null&&(b=_h(c,u),b!=null&&p.push(Th(c,b,m)))),f)break;c=c.return}0<p.length&&(d=new v(d,x,null,n,h),l.push({event:d,listeners:p}))}}if(!(t&7)){e:{if(d=r==="mouseover"||r==="pointerover",v=r==="mouseout"||r==="pointerout",d&&n!==n1&&(x=n.relatedTarget||n.fromElement)&&(Rl(x)||x[Uo]))break e;if((v||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=g,x=x?Rl(x):null,x!==null&&(f=nu(x),x!==f||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=g),v!==x)){if(p=NS,b="onMouseLeave",u="onMouseEnter",c="mouse",(r==="pointerout"||r==="pointerover")&&(p=FS,b="onPointerLeave",u="onPointerEnter",c="pointer"),f=v==null?d:sc(v),m=x==null?d:sc(x),d=new p(b,c+"leave",v,n,h),d.target=f,d.relatedTarget=m,b=null,Rl(h)===g&&(p=new p(u,c+"enter",x,n,h),p.target=m,p.relatedTarget=f,b=p),f=b,v&&x)t:{for(p=v,u=x,c=0,m=p;m;m=Cu(m))c++;for(m=0,b=u;b;b=Cu(b))m++;for(;0<c-m;)p=Cu(p),c--;for(;0<m-c;)u=Cu(u),m--;for(;c--;){if(p===u||u!==null&&p===u.alternate)break t;p=Cu(p),u=Cu(u)}p=null}else p=null;v!==null&&KS(l,d,v,p,!1),x!==null&&f!==null&&KS(l,f,x,p,!0)}}e:{if(d=g?sc(g):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var S=cI;else if(VS(d))if(UA)S=pI;else{S=hI;var w=dI}else(v=d.nodeName)&&v.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=fI);if(S&&(S=S(r,g))){NA(l,S,n,h);break e}w&&w(r,d,g),r==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&Jv(d,"number",d.value)}switch(w=g?sc(g):window,r){case"focusin":(VS(w)||w.contentEditable==="true")&&(rc=w,u1=g,rh=null);break;case"focusout":rh=u1=rc=null;break;case"mousedown":c1=!0;break;case"contextmenu":case"mouseup":case"dragend":c1=!1,qS(l,n,h);break;case"selectionchange":if(gI)break;case"keydown":case"keyup":qS(l,n,h)}var M;if(ux)e:{switch(r){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else nc?OA(r,n)&&(A="onCompositionEnd"):r==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(IA&&n.locale!=="ko"&&(nc||A!=="onCompositionStart"?A==="onCompositionEnd"&&nc&&(M=kA()):(ba=h,ox="value"in ba?ba.value:ba.textContent,nc=!0)),w=$m(g,A),0<w.length&&(A=new US(A,r,null,n,h),l.push({event:A,listeners:w}),M?A.data=M:(M=DA(n),M!==null&&(A.data=M)))),(M=sI?oI(r,n):aI(r,n))&&(g=$m(g,"onBeforeInput"),0<g.length&&(h=new US("onBeforeInput","beforeinput",null,n,h),l.push({event:h,listeners:g}),h.data=M))}YA(l,t)})}function Th(r,t,n){return{instance:r,listener:t,currentTarget:n}}function $m(r,t){for(var n=t+"Capture",s=[];r!==null;){var o=r,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=_h(r,n),a!=null&&s.unshift(Th(r,a,o)),a=_h(r,t),a!=null&&s.push(Th(r,a,o))),r=r.return}return s}function Cu(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function KS(r,t,n,s,o){for(var a=t._reactName,y=[];n!==null&&n!==s;){var i=n,_=i.alternate,g=i.stateNode;if(_!==null&&_===s)break;i.tag===5&&g!==null&&(i=g,o?(_=_h(n,a),_!=null&&y.unshift(Th(n,_,i))):o||(_=_h(n,a),_!=null&&y.push(Th(n,_,i)))),n=n.return}y.length!==0&&r.push({event:t,listeners:y})}var bI=/\r\n?/g,wI=/\u0000|\uFFFD/g;function JS(r){return(typeof r=="string"?r:""+r).replace(bI,`
`).replace(wI,"")}function _p(r,t,n){if(t=JS(t),JS(r)!==t&&n)throw Error(xt(425))}function ey(){}var d1=null,h1=null;function f1(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var p1=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,QS=typeof Promise=="function"?Promise:void 0,MI=typeof queueMicrotask=="function"?queueMicrotask:typeof QS<"u"?function(r){return QS.resolve(null).then(r).catch(EI)}:p1;function EI(r){setTimeout(function(){throw r})}function C0(r,t){var n=t,s=0;do{var o=n.nextSibling;if(r.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){r.removeChild(o),wh(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);wh(t)}function Ta(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function $S(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var n=r.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return r;t--}else n==="/$"&&t++}r=r.previousSibling}return null}var qc=Math.random().toString(36).slice(2),$s="__reactFiber$"+qc,Ah="__reactProps$"+qc,Uo="__reactContainer$"+qc,m1="__reactEvents$"+qc,TI="__reactListeners$"+qc,AI="__reactHandles$"+qc;function Rl(r){var t=r[$s];if(t)return t;for(var n=r.parentNode;n;){if(t=n[Uo]||n[$s]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(r=$S(r);r!==null;){if(n=r[$s])return n;r=$S(r)}return t}r=n,n=r.parentNode}return null}function df(r){return r=r[$s]||r[Uo],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function sc(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(xt(33))}function Oy(r){return r[Ah]||null}var y1=[],oc=-1;function za(r){return{current:r}}function Zn(r){0>oc||(r.current=y1[oc],y1[oc]=null,oc--)}function Wn(r,t){oc++,y1[oc]=r.current,r.current=t}var Oa={},ui=za(Oa),ki=za(!1),ql=Oa;function jc(r,t){var n=r.type.contextTypes;if(!n)return Oa;var s=r.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return s&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=o),o}function Ii(r){return r=r.childContextTypes,r!=null}function ty(){Zn(ki),Zn(ui)}function e2(r,t,n){if(ui.current!==Oa)throw Error(xt(168));Wn(ui,t),Wn(ki,n)}function KA(r,t,n){var s=r.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(xt(108,dk(r)||"Unknown",o));return ar({},n,s)}function ny(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Oa,ql=ui.current,Wn(ui,r),Wn(ki,ki.current),!0}function t2(r,t,n){var s=r.stateNode;if(!s)throw Error(xt(169));n?(r=KA(r,t,ql),s.__reactInternalMemoizedMergedChildContext=r,Zn(ki),Zn(ui),Wn(ui,r)):Zn(ki),Wn(ki,n)}var Ao=null,Dy=!1,P0=!1;function JA(r){Ao===null?Ao=[r]:Ao.push(r)}function CI(r){Dy=!0,JA(r)}function Va(){if(!P0&&Ao!==null){P0=!0;var r=0,t=Fn;try{var n=Ao;for(Fn=1;r<n.length;r++){var s=n[r];do s=s(!0);while(s!==null)}Ao=null,Dy=!1}catch(o){throw Ao!==null&&(Ao=Ao.slice(r+1)),wA(nx,Va),o}finally{Fn=t,P0=!1}}return null}var ac=[],lc=0,ry=null,iy=0,ps=[],ms=0,Yl=null,Po=1,Ro="";function wl(r,t){ac[lc++]=iy,ac[lc++]=ry,ry=r,iy=t}function QA(r,t,n){ps[ms++]=Po,ps[ms++]=Ro,ps[ms++]=Yl,Yl=r;var s=Po;r=Ro;var o=32-zs(s)-1;s&=~(1<<o),n+=1;var a=32-zs(t)+o;if(30<a){var y=o-o%5;a=(s&(1<<y)-1).toString(32),s>>=y,o-=y,Po=1<<32-zs(t)+o|n<<o|s,Ro=a+r}else Po=1<<a|n<<o|s,Ro=r}function dx(r){r.return!==null&&(wl(r,1),QA(r,1,0))}function hx(r){for(;r===ry;)ry=ac[--lc],ac[lc]=null,iy=ac[--lc],ac[lc]=null;for(;r===Yl;)Yl=ps[--ms],ps[ms]=null,Ro=ps[--ms],ps[ms]=null,Po=ps[--ms],ps[ms]=null}var Ki=null,Zi=null,Qn=!1,Fs=null;function $A(r,t){var n=gs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=r,t=r.deletions,t===null?(r.deletions=[n],r.flags|=16):t.push(n)}function n2(r,t){switch(r.tag){case 5:var n=r.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Ki=r,Zi=Ta(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Ki=r,Zi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Yl!==null?{id:Po,overflow:Ro}:null,r.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gs(18,null,null,0),n.stateNode=t,n.return=r,r.child=n,Ki=r,Zi=null,!0):!1;default:return!1}}function g1(r){return(r.mode&1)!==0&&(r.flags&128)===0}function v1(r){if(Qn){var t=Zi;if(t){var n=t;if(!n2(r,t)){if(g1(r))throw Error(xt(418));t=Ta(n.nextSibling);var s=Ki;t&&n2(r,t)?$A(s,n):(r.flags=r.flags&-4097|2,Qn=!1,Ki=r)}}else{if(g1(r))throw Error(xt(418));r.flags=r.flags&-4097|2,Qn=!1,Ki=r}}}function r2(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ki=r}function xp(r){if(r!==Ki)return!1;if(!Qn)return r2(r),Qn=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!f1(r.type,r.memoizedProps)),t&&(t=Zi)){if(g1(r))throw eC(),Error(xt(418));for(;t;)$A(r,t),t=Ta(t.nextSibling)}if(r2(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(xt(317));e:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var n=r.data;if(n==="/$"){if(t===0){Zi=Ta(r.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}r=r.nextSibling}Zi=null}}else Zi=Ki?Ta(r.stateNode.nextSibling):null;return!0}function eC(){for(var r=Zi;r;)r=Ta(r.nextSibling)}function Lc(){Zi=Ki=null,Qn=!1}function fx(r){Fs===null?Fs=[r]:Fs.push(r)}var PI=Wo.ReactCurrentBatchConfig;function Cd(r,t,n){if(r=n.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(xt(309));var s=n.stateNode}if(!s)throw Error(xt(147,r));var o=s,a=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(y){var i=o.refs;y===null?delete i[a]:i[a]=y},t._stringRef=a,t)}if(typeof r!="string")throw Error(xt(284));if(!n._owner)throw Error(xt(290,r))}return r}function bp(r,t){throw r=Object.prototype.toString.call(t),Error(xt(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function i2(r){var t=r._init;return t(r._payload)}function tC(r){function t(u,c){if(r){var m=u.deletions;m===null?(u.deletions=[c],u.flags|=16):m.push(c)}}function n(u,c){if(!r)return null;for(;c!==null;)t(u,c),c=c.sibling;return null}function s(u,c){for(u=new Map;c!==null;)c.key!==null?u.set(c.key,c):u.set(c.index,c),c=c.sibling;return u}function o(u,c){return u=Ra(u,c),u.index=0,u.sibling=null,u}function a(u,c,m){return u.index=m,r?(m=u.alternate,m!==null?(m=m.index,m<c?(u.flags|=2,c):m):(u.flags|=2,c)):(u.flags|=1048576,c)}function y(u){return r&&u.alternate===null&&(u.flags|=2),u}function i(u,c,m,b){return c===null||c.tag!==6?(c=D0(m,u.mode,b),c.return=u,c):(c=o(c,m),c.return=u,c)}function _(u,c,m,b){var S=m.type;return S===tc?h(u,c,m.props.children,b,m.key):c!==null&&(c.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pa&&i2(S)===c.type)?(b=o(c,m.props),b.ref=Cd(u,c,m),b.return=u,b):(b=Im(m.type,m.key,m.props,null,u.mode,b),b.ref=Cd(u,c,m),b.return=u,b)}function g(u,c,m,b){return c===null||c.tag!==4||c.stateNode.containerInfo!==m.containerInfo||c.stateNode.implementation!==m.implementation?(c=N0(m,u.mode,b),c.return=u,c):(c=o(c,m.children||[]),c.return=u,c)}function h(u,c,m,b,S){return c===null||c.tag!==7?(c=Fl(m,u.mode,b,S),c.return=u,c):(c=o(c,m),c.return=u,c)}function l(u,c,m){if(typeof c=="string"&&c!==""||typeof c=="number")return c=D0(""+c,u.mode,m),c.return=u,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case cp:return m=Im(c.type,c.key,c.props,null,u.mode,m),m.ref=Cd(u,null,c),m.return=u,m;case ec:return c=N0(c,u.mode,m),c.return=u,c;case pa:var b=c._init;return l(u,b(c._payload),m)}if(Xd(c)||Sd(c))return c=Fl(c,u.mode,m,null),c.return=u,c;bp(u,c)}return null}function d(u,c,m,b){var S=c!==null?c.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:i(u,c,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case cp:return m.key===S?_(u,c,m,b):null;case ec:return m.key===S?g(u,c,m,b):null;case pa:return S=m._init,d(u,c,S(m._payload),b)}if(Xd(m)||Sd(m))return S!==null?null:h(u,c,m,b,null);bp(u,m)}return null}function v(u,c,m,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return u=u.get(m)||null,i(c,u,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cp:return u=u.get(b.key===null?m:b.key)||null,_(c,u,b,S);case ec:return u=u.get(b.key===null?m:b.key)||null,g(c,u,b,S);case pa:var w=b._init;return v(u,c,m,w(b._payload),S)}if(Xd(b)||Sd(b))return u=u.get(m)||null,h(c,u,b,S,null);bp(c,b)}return null}function x(u,c,m,b){for(var S=null,w=null,M=c,A=c=0,P=null;M!==null&&A<m.length;A++){M.index>A?(P=M,M=null):P=M.sibling;var R=d(u,M,m[A],b);if(R===null){M===null&&(M=P);break}r&&M&&R.alternate===null&&t(u,M),c=a(R,c,A),w===null?S=R:w.sibling=R,w=R,M=P}if(A===m.length)return n(u,M),Qn&&wl(u,A),S;if(M===null){for(;A<m.length;A++)M=l(u,m[A],b),M!==null&&(c=a(M,c,A),w===null?S=M:w.sibling=M,w=M);return Qn&&wl(u,A),S}for(M=s(u,M);A<m.length;A++)P=v(M,u,A,m[A],b),P!==null&&(r&&P.alternate!==null&&M.delete(P.key===null?A:P.key),c=a(P,c,A),w===null?S=P:w.sibling=P,w=P);return r&&M.forEach(function(k){return t(u,k)}),Qn&&wl(u,A),S}function p(u,c,m,b){var S=Sd(m);if(typeof S!="function")throw Error(xt(150));if(m=S.call(m),m==null)throw Error(xt(151));for(var w=S=null,M=c,A=c=0,P=null,R=m.next();M!==null&&!R.done;A++,R=m.next()){M.index>A?(P=M,M=null):P=M.sibling;var k=d(u,M,R.value,b);if(k===null){M===null&&(M=P);break}r&&M&&k.alternate===null&&t(u,M),c=a(k,c,A),w===null?S=k:w.sibling=k,w=k,M=P}if(R.done)return n(u,M),Qn&&wl(u,A),S;if(M===null){for(;!R.done;A++,R=m.next())R=l(u,R.value,b),R!==null&&(c=a(R,c,A),w===null?S=R:w.sibling=R,w=R);return Qn&&wl(u,A),S}for(M=s(u,M);!R.done;A++,R=m.next())R=v(M,u,A,R.value,b),R!==null&&(r&&R.alternate!==null&&M.delete(R.key===null?A:R.key),c=a(R,c,A),w===null?S=R:w.sibling=R,w=R);return r&&M.forEach(function(L){return t(u,L)}),Qn&&wl(u,A),S}function f(u,c,m,b){if(typeof m=="object"&&m!==null&&m.type===tc&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case cp:e:{for(var S=m.key,w=c;w!==null;){if(w.key===S){if(S=m.type,S===tc){if(w.tag===7){n(u,w.sibling),c=o(w,m.props.children),c.return=u,u=c;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===pa&&i2(S)===w.type){n(u,w.sibling),c=o(w,m.props),c.ref=Cd(u,w,m),c.return=u,u=c;break e}n(u,w);break}else t(u,w);w=w.sibling}m.type===tc?(c=Fl(m.props.children,u.mode,b,m.key),c.return=u,u=c):(b=Im(m.type,m.key,m.props,null,u.mode,b),b.ref=Cd(u,c,m),b.return=u,u=b)}return y(u);case ec:e:{for(w=m.key;c!==null;){if(c.key===w)if(c.tag===4&&c.stateNode.containerInfo===m.containerInfo&&c.stateNode.implementation===m.implementation){n(u,c.sibling),c=o(c,m.children||[]),c.return=u,u=c;break e}else{n(u,c);break}else t(u,c);c=c.sibling}c=N0(m,u.mode,b),c.return=u,u=c}return y(u);case pa:return w=m._init,f(u,c,w(m._payload),b)}if(Xd(m))return x(u,c,m,b);if(Sd(m))return p(u,c,m,b);bp(u,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,c!==null&&c.tag===6?(n(u,c.sibling),c=o(c,m),c.return=u,u=c):(n(u,c),c=D0(m,u.mode,b),c.return=u,u=c),y(u)):n(u,c)}return f}var kc=tC(!0),nC=tC(!1),sy=za(null),oy=null,uc=null,px=null;function mx(){px=uc=oy=null}function yx(r){var t=sy.current;Zn(sy),r._currentValue=t}function _1(r,t,n){for(;r!==null;){var s=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),r===n)break;r=r.return}}function Ac(r,t){oy=r,px=uc=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Li=!0),r.firstContext=null)}function _s(r){var t=r._currentValue;if(px!==r)if(r={context:r,memoizedValue:t,next:null},uc===null){if(oy===null)throw Error(xt(308));uc=r,oy.dependencies={lanes:0,firstContext:r}}else uc=uc.next=r;return t}var jl=null;function gx(r){jl===null?jl=[r]:jl.push(r)}function rC(r,t,n,s){var o=t.interleaved;return o===null?(n.next=n,gx(t)):(n.next=o.next,o.next=n),t.interleaved=n,Fo(r,s)}function Fo(r,t){r.lanes|=t;var n=r.alternate;for(n!==null&&(n.lanes|=t),n=r,r=r.return;r!==null;)r.childLanes|=t,n=r.alternate,n!==null&&(n.childLanes|=t),n=r,r=r.return;return n.tag===3?n.stateNode:null}var ma=!1;function vx(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iC(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ko(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function Aa(r,t,n){var s=r.updateQueue;if(s===null)return null;if(s=s.shared,Tn&2){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,Fo(r,n)}return o=s.interleaved,o===null?(t.next=t,gx(s)):(t.next=o.next,o.next=t),s.interleaved=t,Fo(r,n)}function Cm(r,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=r.pendingLanes,n|=s,t.lanes=n,rx(r,n)}}function s2(r,t){var n=r.updateQueue,s=r.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var y={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=y:a=a.next=y,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:s.shared,effects:s.effects},r.updateQueue=n;return}r=n.lastBaseUpdate,r===null?n.firstBaseUpdate=t:r.next=t,n.lastBaseUpdate=t}function ay(r,t,n,s){var o=r.updateQueue;ma=!1;var a=o.firstBaseUpdate,y=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var _=i,g=_.next;_.next=null,y===null?a=g:y.next=g,y=_;var h=r.alternate;h!==null&&(h=h.updateQueue,i=h.lastBaseUpdate,i!==y&&(i===null?h.firstBaseUpdate=g:i.next=g,h.lastBaseUpdate=_))}if(a!==null){var l=o.baseState;y=0,h=g=_=null,i=a;do{var d=i.lane,v=i.eventTime;if((s&d)===d){h!==null&&(h=h.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var x=r,p=i;switch(d=t,v=n,p.tag){case 1:if(x=p.payload,typeof x=="function"){l=x.call(v,l,d);break e}l=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,d=typeof x=="function"?x.call(v,l,d):x,d==null)break e;l=ar({},l,d);break e;case 2:ma=!0}}i.callback!==null&&i.lane!==0&&(r.flags|=64,d=o.effects,d===null?o.effects=[i]:d.push(i))}else v={eventTime:v,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},h===null?(g=h=v,_=l):h=h.next=v,y|=d;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;d=i,i=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(h===null&&(_=l),o.baseState=_,o.firstBaseUpdate=g,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do y|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Kl|=y,r.lanes=y,r.memoizedState=l}}function o2(r,t,n){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var s=r[t],o=s.callback;if(o!==null){if(s.callback=null,s=n,typeof o!="function")throw Error(xt(191,o));o.call(s)}}}var hf={},io=za(hf),Ch=za(hf),Ph=za(hf);function Ll(r){if(r===hf)throw Error(xt(174));return r}function _x(r,t){switch(Wn(Ph,t),Wn(Ch,r),Wn(io,hf),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$v(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=$v(t,r)}Zn(io),Wn(io,t)}function Ic(){Zn(io),Zn(Ch),Zn(Ph)}function sC(r){Ll(Ph.current);var t=Ll(io.current),n=$v(t,r.type);t!==n&&(Wn(Ch,r),Wn(io,n))}function xx(r){Ch.current===r&&(Zn(io),Zn(Ch))}var nr=za(0);function ly(r){for(var t=r;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var R0=[];function bx(){for(var r=0;r<R0.length;r++)R0[r]._workInProgressVersionPrimary=null;R0.length=0}var Pm=Wo.ReactCurrentDispatcher,j0=Wo.ReactCurrentBatchConfig,Zl=0,or=null,jr=null,Fr=null,uy=!1,ih=!1,Rh=0,RI=0;function $r(){throw Error(xt(321))}function wx(r,t){if(t===null)return!1;for(var n=0;n<t.length&&n<r.length;n++)if(!Gs(r[n],t[n]))return!1;return!0}function Sx(r,t,n,s,o,a){if(Zl=a,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pm.current=r===null||r.memoizedState===null?II:OI,r=n(s,o),ih){a=0;do{if(ih=!1,Rh=0,25<=a)throw Error(xt(301));a+=1,Fr=jr=null,t.updateQueue=null,Pm.current=DI,r=n(s,o)}while(ih)}if(Pm.current=cy,t=jr!==null&&jr.next!==null,Zl=0,Fr=jr=or=null,uy=!1,t)throw Error(xt(300));return r}function Mx(){var r=Rh!==0;return Rh=0,r}function Qs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?or.memoizedState=Fr=r:Fr=Fr.next=r,Fr}function xs(){if(jr===null){var r=or.alternate;r=r!==null?r.memoizedState:null}else r=jr.next;var t=Fr===null?or.memoizedState:Fr.next;if(t!==null)Fr=t,jr=r;else{if(r===null)throw Error(xt(310));jr=r,r={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},Fr===null?or.memoizedState=Fr=r:Fr=Fr.next=r}return Fr}function jh(r,t){return typeof t=="function"?t(r):t}function L0(r){var t=xs(),n=t.queue;if(n===null)throw Error(xt(311));n.lastRenderedReducer=r;var s=jr,o=s.baseQueue,a=n.pending;if(a!==null){if(o!==null){var y=o.next;o.next=a.next,a.next=y}s.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,s=s.baseState;var i=y=null,_=null,g=a;do{var h=g.lane;if((Zl&h)===h)_!==null&&(_=_.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),s=g.hasEagerState?g.eagerState:r(s,g.action);else{var l={lane:h,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};_===null?(i=_=l,y=s):_=_.next=l,or.lanes|=h,Kl|=h}g=g.next}while(g!==null&&g!==a);_===null?y=s:_.next=i,Gs(s,t.memoizedState)||(Li=!0),t.memoizedState=s,t.baseState=y,t.baseQueue=_,n.lastRenderedState=s}if(r=n.interleaved,r!==null){o=r;do a=o.lane,or.lanes|=a,Kl|=a,o=o.next;while(o!==r)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function k0(r){var t=xs(),n=t.queue;if(n===null)throw Error(xt(311));n.lastRenderedReducer=r;var s=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var y=o=o.next;do a=r(a,y.action),y=y.next;while(y!==o);Gs(a,t.memoizedState)||(Li=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function oC(){}function aC(r,t){var n=or,s=xs(),o=t(),a=!Gs(s.memoizedState,o);if(a&&(s.memoizedState=o,Li=!0),s=s.queue,Ex(cC.bind(null,n,s,r),[r]),s.getSnapshot!==t||a||Fr!==null&&Fr.memoizedState.tag&1){if(n.flags|=2048,Lh(9,uC.bind(null,n,s,o,t),void 0,null),zr===null)throw Error(xt(349));Zl&30||lC(n,t,o)}return o}function lC(r,t,n){r.flags|=16384,r={getSnapshot:t,value:n},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.stores=[r]):(n=t.stores,n===null?t.stores=[r]:n.push(r))}function uC(r,t,n,s){t.value=n,t.getSnapshot=s,dC(t)&&hC(r)}function cC(r,t,n){return n(function(){dC(t)&&hC(r)})}function dC(r){var t=r.getSnapshot;r=r.value;try{var n=t();return!Gs(r,n)}catch{return!0}}function hC(r){var t=Fo(r,1);t!==null&&Vs(t,r,1,-1)}function a2(r){var t=Qs();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jh,lastRenderedState:r},t.queue=r,r=r.dispatch=kI.bind(null,or,r),[t.memoizedState,r]}function Lh(r,t,n,s){return r={tag:r,create:t,destroy:n,deps:s,next:null},t=or.updateQueue,t===null?(t={lastEffect:null,stores:null},or.updateQueue=t,t.lastEffect=r.next=r):(n=t.lastEffect,n===null?t.lastEffect=r.next=r:(s=n.next,n.next=r,r.next=s,t.lastEffect=r)),r}function fC(){return xs().memoizedState}function Rm(r,t,n,s){var o=Qs();or.flags|=r,o.memoizedState=Lh(1|t,n,void 0,s===void 0?null:s)}function Ny(r,t,n,s){var o=xs();s=s===void 0?null:s;var a=void 0;if(jr!==null){var y=jr.memoizedState;if(a=y.destroy,s!==null&&wx(s,y.deps)){o.memoizedState=Lh(t,n,a,s);return}}or.flags|=r,o.memoizedState=Lh(1|t,n,a,s)}function l2(r,t){return Rm(8390656,8,r,t)}function Ex(r,t){return Ny(2048,8,r,t)}function pC(r,t){return Ny(4,2,r,t)}function mC(r,t){return Ny(4,4,r,t)}function yC(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function gC(r,t,n){return n=n!=null?n.concat([r]):null,Ny(4,4,yC.bind(null,t,r),n)}function Tx(){}function vC(r,t){var n=xs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&wx(t,s[1])?s[0]:(n.memoizedState=[r,t],r)}function _C(r,t){var n=xs();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&wx(t,s[1])?s[0]:(r=r(),n.memoizedState=[r,t],r)}function xC(r,t,n){return Zl&21?(Gs(n,t)||(n=EA(),or.lanes|=n,Kl|=n,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Li=!0),r.memoizedState=n)}function jI(r,t){var n=Fn;Fn=n!==0&&4>n?n:4,r(!0);var s=j0.transition;j0.transition={};try{r(!1),t()}finally{Fn=n,j0.transition=s}}function bC(){return xs().memoizedState}function LI(r,t,n){var s=Pa(r);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},wC(r))SC(t,n);else if(n=rC(r,t,n,s),n!==null){var o=_i();Vs(n,r,s,o),MC(n,t,s)}}function kI(r,t,n){var s=Pa(r),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(wC(r))SC(t,o);else{var a=r.alternate;if(r.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var y=t.lastRenderedState,i=a(y,n);if(o.hasEagerState=!0,o.eagerState=i,Gs(i,y)){var _=t.interleaved;_===null?(o.next=o,gx(t)):(o.next=_.next,_.next=o),t.interleaved=o;return}}catch{}finally{}n=rC(r,t,o,s),n!==null&&(o=_i(),Vs(n,r,s,o),MC(n,t,s))}}function wC(r){var t=r.alternate;return r===or||t!==null&&t===or}function SC(r,t){ih=uy=!0;var n=r.pending;n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t}function MC(r,t,n){if(n&4194240){var s=t.lanes;s&=r.pendingLanes,n|=s,t.lanes=n,rx(r,n)}}var cy={readContext:_s,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},II={readContext:_s,useCallback:function(r,t){return Qs().memoizedState=[r,t===void 0?null:t],r},useContext:_s,useEffect:l2,useImperativeHandle:function(r,t,n){return n=n!=null?n.concat([r]):null,Rm(4194308,4,yC.bind(null,t,r),n)},useLayoutEffect:function(r,t){return Rm(4194308,4,r,t)},useInsertionEffect:function(r,t){return Rm(4,2,r,t)},useMemo:function(r,t){var n=Qs();return t=t===void 0?null:t,r=r(),n.memoizedState=[r,t],r},useReducer:function(r,t,n){var s=Qs();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},s.queue=r,r=r.dispatch=LI.bind(null,or,r),[s.memoizedState,r]},useRef:function(r){var t=Qs();return r={current:r},t.memoizedState=r},useState:a2,useDebugValue:Tx,useDeferredValue:function(r){return Qs().memoizedState=r},useTransition:function(){var r=a2(!1),t=r[0];return r=jI.bind(null,r[1]),Qs().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,n){var s=or,o=Qs();if(Qn){if(n===void 0)throw Error(xt(407));n=n()}else{if(n=t(),zr===null)throw Error(xt(349));Zl&30||lC(s,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,l2(cC.bind(null,s,a,r),[r]),s.flags|=2048,Lh(9,uC.bind(null,s,a,n,t),void 0,null),n},useId:function(){var r=Qs(),t=zr.identifierPrefix;if(Qn){var n=Ro,s=Po;n=(s&~(1<<32-zs(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Rh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=RI++,t=":"+t+"r"+n.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},OI={readContext:_s,useCallback:vC,useContext:_s,useEffect:Ex,useImperativeHandle:gC,useInsertionEffect:pC,useLayoutEffect:mC,useMemo:_C,useReducer:L0,useRef:fC,useState:function(){return L0(jh)},useDebugValue:Tx,useDeferredValue:function(r){var t=xs();return xC(t,jr.memoizedState,r)},useTransition:function(){var r=L0(jh)[0],t=xs().memoizedState;return[r,t]},useMutableSource:oC,useSyncExternalStore:aC,useId:bC,unstable_isNewReconciler:!1},DI={readContext:_s,useCallback:vC,useContext:_s,useEffect:Ex,useImperativeHandle:gC,useInsertionEffect:pC,useLayoutEffect:mC,useMemo:_C,useReducer:k0,useRef:fC,useState:function(){return k0(jh)},useDebugValue:Tx,useDeferredValue:function(r){var t=xs();return jr===null?t.memoizedState=r:xC(t,jr.memoizedState,r)},useTransition:function(){var r=k0(jh)[0],t=xs().memoizedState;return[r,t]},useMutableSource:oC,useSyncExternalStore:aC,useId:bC,unstable_isNewReconciler:!1};function Ds(r,t){if(r&&r.defaultProps){t=ar({},t),r=r.defaultProps;for(var n in r)t[n]===void 0&&(t[n]=r[n]);return t}return t}function x1(r,t,n,s){t=r.memoizedState,n=n(s,t),n=n==null?t:ar({},t,n),r.memoizedState=n,r.lanes===0&&(r.updateQueue.baseState=n)}var Uy={isMounted:function(r){return(r=r._reactInternals)?nu(r)===r:!1},enqueueSetState:function(r,t,n){r=r._reactInternals;var s=_i(),o=Pa(r),a=ko(s,o);a.payload=t,n!=null&&(a.callback=n),t=Aa(r,a,o),t!==null&&(Vs(t,r,o,s),Cm(t,r,o))},enqueueReplaceState:function(r,t,n){r=r._reactInternals;var s=_i(),o=Pa(r),a=ko(s,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Aa(r,a,o),t!==null&&(Vs(t,r,o,s),Cm(t,r,o))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var n=_i(),s=Pa(r),o=ko(n,s);o.tag=2,t!=null&&(o.callback=t),t=Aa(r,o,s),t!==null&&(Vs(t,r,s,n),Cm(t,r,s))}};function u2(r,t,n,s,o,a,y){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(s,a,y):t.prototype&&t.prototype.isPureReactComponent?!Mh(n,s)||!Mh(o,a):!0}function EC(r,t,n){var s=!1,o=Oa,a=t.contextType;return typeof a=="object"&&a!==null?a=_s(a):(o=Ii(t)?ql:ui.current,s=t.contextTypes,a=(s=s!=null)?jc(r,o):Oa),t=new t(n,a),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uy,r.stateNode=t,t._reactInternals=r,s&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=a),t}function c2(r,t,n,s){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==r&&Uy.enqueueReplaceState(t,t.state,null)}function b1(r,t,n,s){var o=r.stateNode;o.props=n,o.state=r.memoizedState,o.refs={},vx(r);var a=t.contextType;typeof a=="object"&&a!==null?o.context=_s(a):(a=Ii(t)?ql:ui.current,o.context=jc(r,a)),o.state=r.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(x1(r,t,a,n),o.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Uy.enqueueReplaceState(o,o.state,null),ay(r,n,o,s),o.state=r.memoizedState),typeof o.componentDidMount=="function"&&(r.flags|=4194308)}function Oc(r,t){try{var n="",s=t;do n+=ck(s),s=s.return;while(s);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:r,source:t,stack:o,digest:null}}function I0(r,t,n){return{value:r,source:null,stack:n??null,digest:t??null}}function w1(r,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var NI=typeof WeakMap=="function"?WeakMap:Map;function TC(r,t,n){n=ko(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){hy||(hy=!0,L1=s),w1(r,t)},n}function AC(r,t,n){n=ko(-1,n),n.tag=3;var s=r.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;n.payload=function(){return s(o)},n.callback=function(){w1(r,t)}}var a=r.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){w1(r,t),typeof s!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),n}function d2(r,t,n){var s=r.pingCache;if(s===null){s=r.pingCache=new NI;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(n)||(o.add(n),r=JI.bind(null,r,t,n),t.then(r,r))}function h2(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function f2(r,t,n,s,o){return r.mode&1?(r.flags|=65536,r.lanes=o,r):(r===t?r.flags|=65536:(r.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ko(-1,1),t.tag=2,Aa(n,t,1))),n.lanes|=1),r)}var UI=Wo.ReactCurrentOwner,Li=!1;function yi(r,t,n,s){t.child=r===null?nC(t,null,n,s):kc(t,r.child,n,s)}function p2(r,t,n,s,o){n=n.render;var a=t.ref;return Ac(t,o),s=Sx(r,t,n,s,a,o),n=Mx(),r!==null&&!Li?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~o,Bo(r,t,o)):(Qn&&n&&dx(t),t.flags|=1,yi(r,t,s,o),t.child)}function m2(r,t,n,s,o){if(r===null){var a=n.type;return typeof a=="function"&&!Ix(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,CC(r,t,a,s,o)):(r=Im(n.type,null,s,t,t.mode,o),r.ref=t.ref,r.return=t,t.child=r)}if(a=r.child,!(r.lanes&o)){var y=a.memoizedProps;if(n=n.compare,n=n!==null?n:Mh,n(y,s)&&r.ref===t.ref)return Bo(r,t,o)}return t.flags|=1,r=Ra(a,s),r.ref=t.ref,r.return=t,t.child=r}function CC(r,t,n,s,o){if(r!==null){var a=r.memoizedProps;if(Mh(a,s)&&r.ref===t.ref)if(Li=!1,t.pendingProps=s=a,(r.lanes&o)!==0)r.flags&131072&&(Li=!0);else return t.lanes=r.lanes,Bo(r,t,o)}return S1(r,t,n,s,o)}function PC(r,t,n){var s=t.pendingProps,o=s.children,a=r!==null?r.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wn(dc,Xi),Xi|=n;else{if(!(n&1073741824))return r=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,Wn(dc,Xi),Xi|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Wn(dc,Xi),Xi|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,Wn(dc,Xi),Xi|=s;return yi(r,t,o,n),t.child}function RC(r,t){var n=t.ref;(r===null&&n!==null||r!==null&&r.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function S1(r,t,n,s,o){var a=Ii(n)?ql:ui.current;return a=jc(t,a),Ac(t,o),n=Sx(r,t,n,s,a,o),s=Mx(),r!==null&&!Li?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~o,Bo(r,t,o)):(Qn&&s&&dx(t),t.flags|=1,yi(r,t,n,o),t.child)}function y2(r,t,n,s,o){if(Ii(n)){var a=!0;ny(t)}else a=!1;if(Ac(t,o),t.stateNode===null)jm(r,t),EC(t,n,s),b1(t,n,s,o),s=!0;else if(r===null){var y=t.stateNode,i=t.memoizedProps;y.props=i;var _=y.context,g=n.contextType;typeof g=="object"&&g!==null?g=_s(g):(g=Ii(n)?ql:ui.current,g=jc(t,g));var h=n.getDerivedStateFromProps,l=typeof h=="function"||typeof y.getSnapshotBeforeUpdate=="function";l||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(i!==s||_!==g)&&c2(t,y,s,g),ma=!1;var d=t.memoizedState;y.state=d,ay(t,s,y,o),_=t.memoizedState,i!==s||d!==_||ki.current||ma?(typeof h=="function"&&(x1(t,n,h,s),_=t.memoizedState),(i=ma||u2(t,n,i,s,d,_,g))?(l||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=_),y.props=s,y.state=_,y.context=g,s=i):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{y=t.stateNode,iC(r,t),i=t.memoizedProps,g=t.type===t.elementType?i:Ds(t.type,i),y.props=g,l=t.pendingProps,d=y.context,_=n.contextType,typeof _=="object"&&_!==null?_=_s(_):(_=Ii(n)?ql:ui.current,_=jc(t,_));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(i!==l||d!==_)&&c2(t,y,s,_),ma=!1,d=t.memoizedState,y.state=d,ay(t,s,y,o);var x=t.memoizedState;i!==l||d!==x||ki.current||ma?(typeof v=="function"&&(x1(t,n,v,s),x=t.memoizedState),(g=ma||u2(t,n,g,s,d,x,_)||!1)?(h||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,x,_),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,x,_)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||i===r.memoizedProps&&d===r.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||i===r.memoizedProps&&d===r.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=x),y.props=s,y.state=x,y.context=_,s=g):(typeof y.componentDidUpdate!="function"||i===r.memoizedProps&&d===r.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||i===r.memoizedProps&&d===r.memoizedState||(t.flags|=1024),s=!1)}return M1(r,t,n,s,a,o)}function M1(r,t,n,s,o,a){RC(r,t);var y=(t.flags&128)!==0;if(!s&&!y)return o&&t2(t,n,!1),Bo(r,t,a);s=t.stateNode,UI.current=t;var i=y&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,r!==null&&y?(t.child=kc(t,r.child,null,a),t.child=kc(t,null,i,a)):yi(r,t,i,a),t.memoizedState=s.state,o&&t2(t,n,!0),t.child}function jC(r){var t=r.stateNode;t.pendingContext?e2(r,t.pendingContext,t.pendingContext!==t.context):t.context&&e2(r,t.context,!1),_x(r,t.containerInfo)}function g2(r,t,n,s,o){return Lc(),fx(o),t.flags|=256,yi(r,t,n,s),t.child}var E1={dehydrated:null,treeContext:null,retryLane:0};function T1(r){return{baseLanes:r,cachePool:null,transitions:null}}function LC(r,t,n){var s=t.pendingProps,o=nr.current,a=!1,y=(t.flags&128)!==0,i;if((i=y)||(i=r!==null&&r.memoizedState===null?!1:(o&2)!==0),i?(a=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(o|=1),Wn(nr,o&1),r===null)return v1(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=s.children,r=s.fallback,a?(s=t.mode,a=t.child,y={mode:"hidden",children:y},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=y):a=zy(y,s,0,null),r=Fl(r,s,n,null),a.return=t,r.return=t,a.sibling=r,t.child=a,t.child.memoizedState=T1(n),t.memoizedState=E1,r):Ax(t,y));if(o=r.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return FI(r,t,y,s,i,o,n);if(a){a=s.fallback,y=t.mode,o=r.child,i=o.sibling;var _={mode:"hidden",children:s.children};return!(y&1)&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=_,t.deletions=null):(s=Ra(o,_),s.subtreeFlags=o.subtreeFlags&14680064),i!==null?a=Ra(i,a):(a=Fl(a,y,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,y=r.child.memoizedState,y=y===null?T1(n):{baseLanes:y.baseLanes|n,cachePool:null,transitions:y.transitions},a.memoizedState=y,a.childLanes=r.childLanes&~n,t.memoizedState=E1,s}return a=r.child,r=a.sibling,s=Ra(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,r!==null&&(n=t.deletions,n===null?(t.deletions=[r],t.flags|=16):n.push(r)),t.child=s,t.memoizedState=null,s}function Ax(r,t){return t=zy({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function wp(r,t,n,s){return s!==null&&fx(s),kc(t,r.child,null,n),r=Ax(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function FI(r,t,n,s,o,a,y){if(n)return t.flags&256?(t.flags&=-257,s=I0(Error(xt(422))),wp(r,t,y,s)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(a=s.fallback,o=t.mode,s=zy({mode:"visible",children:s.children},o,0,null),a=Fl(a,o,y,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&kc(t,r.child,null,y),t.child.memoizedState=T1(y),t.memoizedState=E1,a);if(!(t.mode&1))return wp(r,t,y,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var i=s.dgst;return s=i,a=Error(xt(419)),s=I0(a,s,void 0),wp(r,t,y,s)}if(i=(y&r.childLanes)!==0,Li||i){if(s=zr,s!==null){switch(y&-y){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(s.suspendedLanes|y)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Fo(r,o),Vs(s,r,o,-1))}return kx(),s=I0(Error(xt(421))),wp(r,t,y,s)}return o.data==="$?"?(t.flags|=128,t.child=r.child,t=QI.bind(null,r),o._reactRetry=t,null):(r=a.treeContext,Zi=Ta(o.nextSibling),Ki=t,Qn=!0,Fs=null,r!==null&&(ps[ms++]=Po,ps[ms++]=Ro,ps[ms++]=Yl,Po=r.id,Ro=r.overflow,Yl=t),t=Ax(t,s.children),t.flags|=4096,t)}function v2(r,t,n){r.lanes|=t;var s=r.alternate;s!==null&&(s.lanes|=t),_1(r.return,t,n)}function O0(r,t,n,s,o){var a=r.memoizedState;a===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=o)}function kC(r,t,n){var s=t.pendingProps,o=s.revealOrder,a=s.tail;if(yi(r,t,s.children,n),s=nr.current,s&2)s=s&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&v2(r,n,t);else if(r.tag===19)v2(r,n,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}s&=1}if(Wn(nr,s),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)r=n.alternate,r!==null&&ly(r)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),O0(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(r=o.alternate,r!==null&&ly(r)===null){t.child=o;break}r=o.sibling,o.sibling=n,n=o,o=r}O0(t,!0,n,null,a);break;case"together":O0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jm(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Bo(r,t,n){if(r!==null&&(t.dependencies=r.dependencies),Kl|=t.lanes,!(n&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(xt(153));if(t.child!==null){for(r=t.child,n=Ra(r,r.pendingProps),t.child=n,n.return=t;r.sibling!==null;)r=r.sibling,n=n.sibling=Ra(r,r.pendingProps),n.return=t;n.sibling=null}return t.child}function BI(r,t,n){switch(t.tag){case 3:jC(t),Lc();break;case 5:sC(t);break;case 1:Ii(t.type)&&ny(t);break;case 4:_x(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;Wn(sy,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Wn(nr,nr.current&1),t.flags|=128,null):n&t.child.childLanes?LC(r,t,n):(Wn(nr,nr.current&1),r=Bo(r,t,n),r!==null?r.sibling:null);Wn(nr,nr.current&1);break;case 19:if(s=(n&t.childLanes)!==0,r.flags&128){if(s)return kC(r,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Wn(nr,nr.current),s)break;return null;case 22:case 23:return t.lanes=0,PC(r,t,n)}return Bo(r,t,n)}var IC,A1,OC,DC;IC=function(r,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)r.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};A1=function(){};OC=function(r,t,n,s){var o=r.memoizedProps;if(o!==s){r=t.stateNode,Ll(io.current);var a=null;switch(n){case"input":o=Zv(r,o),s=Zv(r,s),a=[];break;case"select":o=ar({},o,{value:void 0}),s=ar({},s,{value:void 0}),a=[];break;case"textarea":o=Qv(r,o),s=Qv(r,s),a=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(r.onclick=ey)}e1(n,s);var y;n=null;for(g in o)if(!s.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var i=o[g];for(y in i)i.hasOwnProperty(y)&&(n||(n={}),n[y]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(gh.hasOwnProperty(g)?a||(a=[]):(a=a||[]).push(g,null));for(g in s){var _=s[g];if(i=o!=null?o[g]:void 0,s.hasOwnProperty(g)&&_!==i&&(_!=null||i!=null))if(g==="style")if(i){for(y in i)!i.hasOwnProperty(y)||_&&_.hasOwnProperty(y)||(n||(n={}),n[y]="");for(y in _)_.hasOwnProperty(y)&&i[y]!==_[y]&&(n||(n={}),n[y]=_[y])}else n||(a||(a=[]),a.push(g,n)),n=_;else g==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,i=i?i.__html:void 0,_!=null&&i!==_&&(a=a||[]).push(g,_)):g==="children"?typeof _!="string"&&typeof _!="number"||(a=a||[]).push(g,""+_):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(gh.hasOwnProperty(g)?(_!=null&&g==="onScroll"&&qn("scroll",r),a||i===_||(a=[])):(a=a||[]).push(g,_))}n&&(a=a||[]).push("style",n);var g=a;(t.updateQueue=g)&&(t.flags|=4)}};DC=function(r,t,n,s){n!==s&&(t.flags|=4)};function Pd(r,t){if(!Qn)switch(r.tailMode){case"hidden":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?r.tail=null:n.sibling=null;break;case"collapsed":n=r.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:s.sibling=null}}function ei(r){var t=r.alternate!==null&&r.alternate.child===r.child,n=0,s=0;if(t)for(var o=r.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=r,o=o.sibling;else for(o=r.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=r,o=o.sibling;return r.subtreeFlags|=s,r.childLanes=n,t}function zI(r,t,n){var s=t.pendingProps;switch(hx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(t),null;case 1:return Ii(t.type)&&ty(),ei(t),null;case 3:return s=t.stateNode,Ic(),Zn(ki),Zn(ui),bx(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(r===null||r.child===null)&&(xp(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fs!==null&&(O1(Fs),Fs=null))),A1(r,t),ei(t),null;case 5:xx(t);var o=Ll(Ph.current);if(n=t.type,r!==null&&t.stateNode!=null)OC(r,t,n,s,o),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(xt(166));return ei(t),null}if(r=Ll(io.current),xp(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[$s]=t,s[Ah]=a,r=(t.mode&1)!==0,n){case"dialog":qn("cancel",s),qn("close",s);break;case"iframe":case"object":case"embed":qn("load",s);break;case"video":case"audio":for(o=0;o<Yd.length;o++)qn(Yd[o],s);break;case"source":qn("error",s);break;case"img":case"image":case"link":qn("error",s),qn("load",s);break;case"details":qn("toggle",s);break;case"input":AS(s,a),qn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},qn("invalid",s);break;case"textarea":PS(s,a),qn("invalid",s)}e1(n,a),o=null;for(var y in a)if(a.hasOwnProperty(y)){var i=a[y];y==="children"?typeof i=="string"?s.textContent!==i&&(a.suppressHydrationWarning!==!0&&_p(s.textContent,i,r),o=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(a.suppressHydrationWarning!==!0&&_p(s.textContent,i,r),o=["children",""+i]):gh.hasOwnProperty(y)&&i!=null&&y==="onScroll"&&qn("scroll",s)}switch(n){case"input":dp(s),CS(s,a,!0);break;case"textarea":dp(s),RS(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=ey)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{y=o.nodeType===9?o:o.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=cA(n)),r==="http://www.w3.org/1999/xhtml"?n==="script"?(r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof s.is=="string"?r=y.createElement(n,{is:s.is}):(r=y.createElement(n),n==="select"&&(y=r,s.multiple?y.multiple=!0:s.size&&(y.size=s.size))):r=y.createElementNS(r,n),r[$s]=t,r[Ah]=s,IC(r,t,!1,!1),t.stateNode=r;e:{switch(y=t1(n,s),n){case"dialog":qn("cancel",r),qn("close",r),o=s;break;case"iframe":case"object":case"embed":qn("load",r),o=s;break;case"video":case"audio":for(o=0;o<Yd.length;o++)qn(Yd[o],r);o=s;break;case"source":qn("error",r),o=s;break;case"img":case"image":case"link":qn("error",r),qn("load",r),o=s;break;case"details":qn("toggle",r),o=s;break;case"input":AS(r,s),o=Zv(r,s),qn("invalid",r);break;case"option":o=s;break;case"select":r._wrapperState={wasMultiple:!!s.multiple},o=ar({},s,{value:void 0}),qn("invalid",r);break;case"textarea":PS(r,s),o=Qv(r,s),qn("invalid",r);break;default:o=s}e1(n,o),i=o;for(a in i)if(i.hasOwnProperty(a)){var _=i[a];a==="style"?fA(r,_):a==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&dA(r,_)):a==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&vh(r,_):typeof _=="number"&&vh(r,""+_):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(gh.hasOwnProperty(a)?_!=null&&a==="onScroll"&&qn("scroll",r):_!=null&&J_(r,a,_,y))}switch(n){case"input":dp(r),CS(r,s,!1);break;case"textarea":dp(r),RS(r);break;case"option":s.value!=null&&r.setAttribute("value",""+Ia(s.value));break;case"select":r.multiple=!!s.multiple,a=s.value,a!=null?Sc(r,!!s.multiple,a,!1):s.defaultValue!=null&&Sc(r,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(r.onclick=ey)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ei(t),null;case 6:if(r&&t.stateNode!=null)DC(r,t,r.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(xt(166));if(n=Ll(Ph.current),Ll(io.current),xp(t)){if(s=t.stateNode,n=t.memoizedProps,s[$s]=t,(a=s.nodeValue!==n)&&(r=Ki,r!==null))switch(r.tag){case 3:_p(s.nodeValue,n,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_p(s.nodeValue,n,(r.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[$s]=t,t.stateNode=s}return ei(t),null;case 13:if(Zn(nr),s=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Qn&&Zi!==null&&t.mode&1&&!(t.flags&128))eC(),Lc(),t.flags|=98560,a=!1;else if(a=xp(t),s!==null&&s.dehydrated!==null){if(r===null){if(!a)throw Error(xt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(xt(317));a[$s]=t}else Lc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ei(t),a=!1}else Fs!==null&&(O1(Fs),Fs=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(r!==null&&r.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(r===null||nr.current&1?kr===0&&(kr=3):kx())),t.updateQueue!==null&&(t.flags|=4),ei(t),null);case 4:return Ic(),A1(r,t),r===null&&Eh(t.stateNode.containerInfo),ei(t),null;case 10:return yx(t.type._context),ei(t),null;case 17:return Ii(t.type)&&ty(),ei(t),null;case 19:if(Zn(nr),a=t.memoizedState,a===null)return ei(t),null;if(s=(t.flags&128)!==0,y=a.rendering,y===null)if(s)Pd(a,!1);else{if(kr!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(y=ly(r),y!==null){for(t.flags|=128,Pd(a,!1),s=y.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,r=s,a.flags&=14680066,y=a.alternate,y===null?(a.childLanes=0,a.lanes=r,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=y.childLanes,a.lanes=y.lanes,a.child=y.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=y.memoizedProps,a.memoizedState=y.memoizedState,a.updateQueue=y.updateQueue,a.type=y.type,r=y.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n=n.sibling;return Wn(nr,nr.current&1|2),t.child}r=r.sibling}a.tail!==null&&_r()>Dc&&(t.flags|=128,s=!0,Pd(a,!1),t.lanes=4194304)}else{if(!s)if(r=ly(y),r!==null){if(t.flags|=128,s=!0,n=r.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pd(a,!0),a.tail===null&&a.tailMode==="hidden"&&!y.alternate&&!Qn)return ei(t),null}else 2*_r()-a.renderingStartTime>Dc&&n!==1073741824&&(t.flags|=128,s=!0,Pd(a,!1),t.lanes=4194304);a.isBackwards?(y.sibling=t.child,t.child=y):(n=a.last,n!==null?n.sibling=y:t.child=y,a.last=y)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=_r(),t.sibling=null,n=nr.current,Wn(nr,s?n&1|2:n&1),t):(ei(t),null);case 22:case 23:return Lx(),s=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Xi&1073741824&&(ei(t),t.subtreeFlags&6&&(t.flags|=8192)):ei(t),null;case 24:return null;case 25:return null}throw Error(xt(156,t.tag))}function VI(r,t){switch(hx(t),t.tag){case 1:return Ii(t.type)&&ty(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return Ic(),Zn(ki),Zn(ui),bx(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return xx(t),null;case 13:if(Zn(nr),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(xt(340));Lc()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return Zn(nr),null;case 4:return Ic(),null;case 10:return yx(t.type._context),null;case 22:case 23:return Lx(),null;case 24:return null;default:return null}}var Sp=!1,si=!1,GI=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function cc(r,t){var n=r.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){dr(r,t,s)}else n.current=null}function C1(r,t,n){try{n()}catch(s){dr(r,t,s)}}var _2=!1;function HI(r,t){if(d1=Jm,r=zA(),cx(r)){if("selectionStart"in r)var n={start:r.selectionStart,end:r.selectionEnd};else e:{n=(n=r.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var y=0,i=-1,_=-1,g=0,h=0,l=r,d=null;t:for(;;){for(var v;l!==n||o!==0&&l.nodeType!==3||(i=y+o),l!==a||s!==0&&l.nodeType!==3||(_=y+s),l.nodeType===3&&(y+=l.nodeValue.length),(v=l.firstChild)!==null;)d=l,l=v;for(;;){if(l===r)break t;if(d===n&&++g===o&&(i=y),d===a&&++h===s&&(_=y),(v=l.nextSibling)!==null)break;l=d,d=l.parentNode}l=v}n=i===-1||_===-1?null:{start:i,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(h1={focusedElem:r,selectionRange:n},Jm=!1,Ut=t;Ut!==null;)if(t=Ut,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Ut=r;else for(;Ut!==null;){t=Ut;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,f=x.memoizedState,u=t.stateNode,c=u.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ds(t.type,p),f);u.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xt(163))}}catch(b){dr(t,t.return,b)}if(r=t.sibling,r!==null){r.return=t.return,Ut=r;break}Ut=t.return}return x=_2,_2=!1,x}function sh(r,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&r)===r){var a=o.destroy;o.destroy=void 0,a!==void 0&&C1(t,n,a)}o=o.next}while(o!==s)}}function Fy(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&r)===r){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function P1(r){var t=r.ref;if(t!==null){var n=r.stateNode;switch(r.tag){case 5:r=n;break;default:r=n}typeof t=="function"?t(r):t.current=r}}function NC(r){var t=r.alternate;t!==null&&(r.alternate=null,NC(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[$s],delete t[Ah],delete t[m1],delete t[TI],delete t[AI])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function UC(r){return r.tag===5||r.tag===3||r.tag===4}function x2(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||UC(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function R1(r,t,n){var s=r.tag;if(s===5||s===6)r=r.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(r,t):n.insertBefore(r,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(r,n)):(t=n,t.appendChild(r)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ey));else if(s!==4&&(r=r.child,r!==null))for(R1(r,t,n),r=r.sibling;r!==null;)R1(r,t,n),r=r.sibling}function j1(r,t,n){var s=r.tag;if(s===5||s===6)r=r.stateNode,t?n.insertBefore(r,t):n.appendChild(r);else if(s!==4&&(r=r.child,r!==null))for(j1(r,t,n),r=r.sibling;r!==null;)j1(r,t,n),r=r.sibling}var Wr=null,Us=!1;function ia(r,t,n){for(n=n.child;n!==null;)FC(r,t,n),n=n.sibling}function FC(r,t,n){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(jy,n)}catch{}switch(n.tag){case 5:si||cc(n,t);case 6:var s=Wr,o=Us;Wr=null,ia(r,t,n),Wr=s,Us=o,Wr!==null&&(Us?(r=Wr,n=n.stateNode,r.nodeType===8?r.parentNode.removeChild(n):r.removeChild(n)):Wr.removeChild(n.stateNode));break;case 18:Wr!==null&&(Us?(r=Wr,n=n.stateNode,r.nodeType===8?C0(r.parentNode,n):r.nodeType===1&&C0(r,n),wh(r)):C0(Wr,n.stateNode));break;case 4:s=Wr,o=Us,Wr=n.stateNode.containerInfo,Us=!0,ia(r,t,n),Wr=s,Us=o;break;case 0:case 11:case 14:case 15:if(!si&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var a=o,y=a.destroy;a=a.tag,y!==void 0&&(a&2||a&4)&&C1(n,t,y),o=o.next}while(o!==s)}ia(r,t,n);break;case 1:if(!si&&(cc(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(i){dr(n,t,i)}ia(r,t,n);break;case 21:ia(r,t,n);break;case 22:n.mode&1?(si=(s=si)||n.memoizedState!==null,ia(r,t,n),si=s):ia(r,t,n);break;default:ia(r,t,n)}}function b2(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var n=r.stateNode;n===null&&(n=r.stateNode=new GI),t.forEach(function(s){var o=$I.bind(null,r,s);n.has(s)||(n.add(s),s.then(o,o))})}}function js(r,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];try{var a=r,y=t,i=y;e:for(;i!==null;){switch(i.tag){case 5:Wr=i.stateNode,Us=!1;break e;case 3:Wr=i.stateNode.containerInfo,Us=!0;break e;case 4:Wr=i.stateNode.containerInfo,Us=!0;break e}i=i.return}if(Wr===null)throw Error(xt(160));FC(a,y,o),Wr=null,Us=!1;var _=o.alternate;_!==null&&(_.return=null),o.return=null}catch(g){dr(o,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BC(t,r),t=t.sibling}function BC(r,t){var n=r.alternate,s=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(js(t,r),Js(r),s&4){try{sh(3,r,r.return),Fy(3,r)}catch(p){dr(r,r.return,p)}try{sh(5,r,r.return)}catch(p){dr(r,r.return,p)}}break;case 1:js(t,r),Js(r),s&512&&n!==null&&cc(n,n.return);break;case 5:if(js(t,r),Js(r),s&512&&n!==null&&cc(n,n.return),r.flags&32){var o=r.stateNode;try{vh(o,"")}catch(p){dr(r,r.return,p)}}if(s&4&&(o=r.stateNode,o!=null)){var a=r.memoizedProps,y=n!==null?n.memoizedProps:a,i=r.type,_=r.updateQueue;if(r.updateQueue=null,_!==null)try{i==="input"&&a.type==="radio"&&a.name!=null&&lA(o,a),t1(i,y);var g=t1(i,a);for(y=0;y<_.length;y+=2){var h=_[y],l=_[y+1];h==="style"?fA(o,l):h==="dangerouslySetInnerHTML"?dA(o,l):h==="children"?vh(o,l):J_(o,h,l,g)}switch(i){case"input":Kv(o,a);break;case"textarea":uA(o,a);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Sc(o,!!a.multiple,v,!1):d!==!!a.multiple&&(a.defaultValue!=null?Sc(o,!!a.multiple,a.defaultValue,!0):Sc(o,!!a.multiple,a.multiple?[]:"",!1))}o[Ah]=a}catch(p){dr(r,r.return,p)}}break;case 6:if(js(t,r),Js(r),s&4){if(r.stateNode===null)throw Error(xt(162));o=r.stateNode,a=r.memoizedProps;try{o.nodeValue=a}catch(p){dr(r,r.return,p)}}break;case 3:if(js(t,r),Js(r),s&4&&n!==null&&n.memoizedState.isDehydrated)try{wh(t.containerInfo)}catch(p){dr(r,r.return,p)}break;case 4:js(t,r),Js(r);break;case 13:js(t,r),Js(r),o=r.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(Rx=_r())),s&4&&b2(r);break;case 22:if(h=n!==null&&n.memoizedState!==null,r.mode&1?(si=(g=si)||h,js(t,r),si=g):js(t,r),Js(r),s&8192){if(g=r.memoizedState!==null,(r.stateNode.isHidden=g)&&!h&&r.mode&1)for(Ut=r,h=r.child;h!==null;){for(l=Ut=h;Ut!==null;){switch(d=Ut,v=d.child,d.tag){case 0:case 11:case 14:case 15:sh(4,d,d.return);break;case 1:cc(d,d.return);var x=d.stateNode;if(typeof x.componentWillUnmount=="function"){s=d,n=d.return;try{t=s,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(p){dr(s,n,p)}}break;case 5:cc(d,d.return);break;case 22:if(d.memoizedState!==null){S2(l);continue}}v!==null?(v.return=d,Ut=v):S2(l)}h=h.sibling}e:for(h=null,l=r;;){if(l.tag===5){if(h===null){h=l;try{o=l.stateNode,g?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(i=l.stateNode,_=l.memoizedProps.style,y=_!=null&&_.hasOwnProperty("display")?_.display:null,i.style.display=hA("display",y))}catch(p){dr(r,r.return,p)}}}else if(l.tag===6){if(h===null)try{l.stateNode.nodeValue=g?"":l.memoizedProps}catch(p){dr(r,r.return,p)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:js(t,r),Js(r),s&4&&b2(r);break;case 21:break;default:js(t,r),Js(r)}}function Js(r){var t=r.flags;if(t&2){try{e:{for(var n=r.return;n!==null;){if(UC(n)){var s=n;break e}n=n.return}throw Error(xt(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(vh(o,""),s.flags&=-33);var a=x2(r);j1(r,a,o);break;case 3:case 4:var y=s.stateNode.containerInfo,i=x2(r);R1(r,i,y);break;default:throw Error(xt(161))}}catch(_){dr(r,r.return,_)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function WI(r,t,n){Ut=r,zC(r)}function zC(r,t,n){for(var s=(r.mode&1)!==0;Ut!==null;){var o=Ut,a=o.child;if(o.tag===22&&s){var y=o.memoizedState!==null||Sp;if(!y){var i=o.alternate,_=i!==null&&i.memoizedState!==null||si;i=Sp;var g=si;if(Sp=y,(si=_)&&!g)for(Ut=o;Ut!==null;)y=Ut,_=y.child,y.tag===22&&y.memoizedState!==null?M2(o):_!==null?(_.return=y,Ut=_):M2(o);for(;a!==null;)Ut=a,zC(a),a=a.sibling;Ut=o,Sp=i,si=g}w2(r)}else o.subtreeFlags&8772&&a!==null?(a.return=o,Ut=a):w2(r)}}function w2(r){for(;Ut!==null;){var t=Ut;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:si||Fy(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!si)if(n===null)s.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ds(t.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&o2(t,a,s);break;case 3:var y=t.updateQueue;if(y!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}o2(t,y,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var h=g.memoizedState;if(h!==null){var l=h.dehydrated;l!==null&&wh(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xt(163))}si||t.flags&512&&P1(t)}catch(d){dr(t,t.return,d)}}if(t===r){Ut=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ut=n;break}Ut=t.return}}function S2(r){for(;Ut!==null;){var t=Ut;if(t===r){Ut=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ut=n;break}Ut=t.return}}function M2(r){for(;Ut!==null;){var t=Ut;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fy(4,t)}catch(_){dr(t,n,_)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(_){dr(t,o,_)}}var a=t.return;try{P1(t)}catch(_){dr(t,a,_)}break;case 5:var y=t.return;try{P1(t)}catch(_){dr(t,y,_)}}}catch(_){dr(t,t.return,_)}if(t===r){Ut=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ut=i;break}Ut=t.return}}var XI=Math.ceil,dy=Wo.ReactCurrentDispatcher,Cx=Wo.ReactCurrentOwner,vs=Wo.ReactCurrentBatchConfig,Tn=0,zr=null,Tr=null,qr=0,Xi=0,dc=za(0),kr=0,kh=null,Kl=0,By=0,Px=0,oh=null,ji=null,Rx=0,Dc=1/0,To=null,hy=!1,L1=null,Ca=null,Mp=!1,wa=null,fy=0,ah=0,k1=null,Lm=-1,km=0;function _i(){return Tn&6?_r():Lm!==-1?Lm:Lm=_r()}function Pa(r){return r.mode&1?Tn&2&&qr!==0?qr&-qr:PI.transition!==null?(km===0&&(km=EA()),km):(r=Fn,r!==0||(r=window.event,r=r===void 0?16:LA(r.type)),r):1}function Vs(r,t,n,s){if(50<ah)throw ah=0,k1=null,Error(xt(185));uf(r,n,s),(!(Tn&2)||r!==zr)&&(r===zr&&(!(Tn&2)&&(By|=n),kr===4&&va(r,qr)),Oi(r,s),n===1&&Tn===0&&!(t.mode&1)&&(Dc=_r()+500,Dy&&Va()))}function Oi(r,t){var n=r.callbackNode;Pk(r,t);var s=Km(r,r===zr?qr:0);if(s===0)n!==null&&kS(n),r.callbackNode=null,r.callbackPriority=0;else if(t=s&-s,r.callbackPriority!==t){if(n!=null&&kS(n),t===1)r.tag===0?CI(E2.bind(null,r)):JA(E2.bind(null,r)),MI(function(){!(Tn&6)&&Va()}),n=null;else{switch(TA(s)){case 1:n=nx;break;case 4:n=SA;break;case 16:n=Zm;break;case 536870912:n=MA;break;default:n=Zm}n=ZC(n,VC.bind(null,r))}r.callbackPriority=t,r.callbackNode=n}}function VC(r,t){if(Lm=-1,km=0,Tn&6)throw Error(xt(327));var n=r.callbackNode;if(Cc()&&r.callbackNode!==n)return null;var s=Km(r,r===zr?qr:0);if(s===0)return null;if(s&30||s&r.expiredLanes||t)t=py(r,s);else{t=s;var o=Tn;Tn|=2;var a=HC();(zr!==r||qr!==t)&&(To=null,Dc=_r()+500,Ul(r,t));do try{ZI();break}catch(i){GC(r,i)}while(!0);mx(),dy.current=a,Tn=o,Tr!==null?t=0:(zr=null,qr=0,t=kr)}if(t!==0){if(t===2&&(o=o1(r),o!==0&&(s=o,t=I1(r,o))),t===1)throw n=kh,Ul(r,0),va(r,s),Oi(r,_r()),n;if(t===6)va(r,s);else{if(o=r.current.alternate,!(s&30)&&!qI(o)&&(t=py(r,s),t===2&&(a=o1(r),a!==0&&(s=a,t=I1(r,a))),t===1))throw n=kh,Ul(r,0),va(r,s),Oi(r,_r()),n;switch(r.finishedWork=o,r.finishedLanes=s,t){case 0:case 1:throw Error(xt(345));case 2:Sl(r,ji,To);break;case 3:if(va(r,s),(s&130023424)===s&&(t=Rx+500-_r(),10<t)){if(Km(r,0)!==0)break;if(o=r.suspendedLanes,(o&s)!==s){_i(),r.pingedLanes|=r.suspendedLanes&o;break}r.timeoutHandle=p1(Sl.bind(null,r,ji,To),t);break}Sl(r,ji,To);break;case 4:if(va(r,s),(s&4194240)===s)break;for(t=r.eventTimes,o=-1;0<s;){var y=31-zs(s);a=1<<y,y=t[y],y>o&&(o=y),s&=~a}if(s=o,s=_r()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*XI(s/1960))-s,10<s){r.timeoutHandle=p1(Sl.bind(null,r,ji,To),s);break}Sl(r,ji,To);break;case 5:Sl(r,ji,To);break;default:throw Error(xt(329))}}}return Oi(r,_r()),r.callbackNode===n?VC.bind(null,r):null}function I1(r,t){var n=oh;return r.current.memoizedState.isDehydrated&&(Ul(r,t).flags|=256),r=py(r,t),r!==2&&(t=ji,ji=n,t!==null&&O1(t)),r}function O1(r){ji===null?ji=r:ji.push.apply(ji,r)}function qI(r){for(var t=r;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var o=n[s],a=o.getSnapshot;o=o.value;try{if(!Gs(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function va(r,t){for(t&=~Px,t&=~By,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var n=31-zs(t),s=1<<n;r[n]=-1,t&=~s}}function E2(r){if(Tn&6)throw Error(xt(327));Cc();var t=Km(r,0);if(!(t&1))return Oi(r,_r()),null;var n=py(r,t);if(r.tag!==0&&n===2){var s=o1(r);s!==0&&(t=s,n=I1(r,s))}if(n===1)throw n=kh,Ul(r,0),va(r,t),Oi(r,_r()),n;if(n===6)throw Error(xt(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,Sl(r,ji,To),Oi(r,_r()),null}function jx(r,t){var n=Tn;Tn|=1;try{return r(t)}finally{Tn=n,Tn===0&&(Dc=_r()+500,Dy&&Va())}}function Jl(r){wa!==null&&wa.tag===0&&!(Tn&6)&&Cc();var t=Tn;Tn|=1;var n=vs.transition,s=Fn;try{if(vs.transition=null,Fn=1,r)return r()}finally{Fn=s,vs.transition=n,Tn=t,!(Tn&6)&&Va()}}function Lx(){Xi=dc.current,Zn(dc)}function Ul(r,t){r.finishedWork=null,r.finishedLanes=0;var n=r.timeoutHandle;if(n!==-1&&(r.timeoutHandle=-1,SI(n)),Tr!==null)for(n=Tr.return;n!==null;){var s=n;switch(hx(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ty();break;case 3:Ic(),Zn(ki),Zn(ui),bx();break;case 5:xx(s);break;case 4:Ic();break;case 13:Zn(nr);break;case 19:Zn(nr);break;case 10:yx(s.type._context);break;case 22:case 23:Lx()}n=n.return}if(zr=r,Tr=r=Ra(r.current,null),qr=Xi=t,kr=0,kh=null,Px=By=Kl=0,ji=oh=null,jl!==null){for(t=0;t<jl.length;t++)if(n=jl[t],s=n.interleaved,s!==null){n.interleaved=null;var o=s.next,a=n.pending;if(a!==null){var y=a.next;a.next=o,s.next=y}n.pending=s}jl=null}return r}function GC(r,t){do{var n=Tr;try{if(mx(),Pm.current=cy,uy){for(var s=or.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}uy=!1}if(Zl=0,Fr=jr=or=null,ih=!1,Rh=0,Cx.current=null,n===null||n.return===null){kr=1,kh=t,Tr=null;break}e:{var a=r,y=n.return,i=n,_=t;if(t=qr,i.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var g=_,h=i,l=h.tag;if(!(h.mode&1)&&(l===0||l===11||l===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=h2(y);if(v!==null){v.flags&=-257,f2(v,y,i,a,t),v.mode&1&&d2(a,g,t),t=v,_=g;var x=t.updateQueue;if(x===null){var p=new Set;p.add(_),t.updateQueue=p}else x.add(_);break e}else{if(!(t&1)){d2(a,g,t),kx();break e}_=Error(xt(426))}}else if(Qn&&i.mode&1){var f=h2(y);if(f!==null){!(f.flags&65536)&&(f.flags|=256),f2(f,y,i,a,t),fx(Oc(_,i));break e}}a=_=Oc(_,i),kr!==4&&(kr=2),oh===null?oh=[a]:oh.push(a),a=y;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var u=TC(a,_,t);s2(a,u);break e;case 1:i=_;var c=a.type,m=a.stateNode;if(!(a.flags&128)&&(typeof c.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ca===null||!Ca.has(m)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=AC(a,i,t);s2(a,b);break e}}a=a.return}while(a!==null)}XC(n)}catch(S){t=S,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(!0)}function HC(){var r=dy.current;return dy.current=cy,r===null?cy:r}function kx(){(kr===0||kr===3||kr===2)&&(kr=4),zr===null||!(Kl&268435455)&&!(By&268435455)||va(zr,qr)}function py(r,t){var n=Tn;Tn|=2;var s=HC();(zr!==r||qr!==t)&&(To=null,Ul(r,t));do try{YI();break}catch(o){GC(r,o)}while(!0);if(mx(),Tn=n,dy.current=s,Tr!==null)throw Error(xt(261));return zr=null,qr=0,kr}function YI(){for(;Tr!==null;)WC(Tr)}function ZI(){for(;Tr!==null&&!xk();)WC(Tr)}function WC(r){var t=YC(r.alternate,r,Xi);r.memoizedProps=r.pendingProps,t===null?XC(r):Tr=t,Cx.current=null}function XC(r){var t=r;do{var n=t.alternate;if(r=t.return,t.flags&32768){if(n=VI(n,t),n!==null){n.flags&=32767,Tr=n;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{kr=6,Tr=null;return}}else if(n=zI(n,t,Xi),n!==null){Tr=n;return}if(t=t.sibling,t!==null){Tr=t;return}Tr=t=r}while(t!==null);kr===0&&(kr=5)}function Sl(r,t,n){var s=Fn,o=vs.transition;try{vs.transition=null,Fn=1,KI(r,t,n,s)}finally{vs.transition=o,Fn=s}return null}function KI(r,t,n,s){do Cc();while(wa!==null);if(Tn&6)throw Error(xt(327));n=r.finishedWork;var o=r.finishedLanes;if(n===null)return null;if(r.finishedWork=null,r.finishedLanes=0,n===r.current)throw Error(xt(177));r.callbackNode=null,r.callbackPriority=0;var a=n.lanes|n.childLanes;if(Rk(r,a),r===zr&&(Tr=zr=null,qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mp||(Mp=!0,ZC(Zm,function(){return Cc(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=vs.transition,vs.transition=null;var y=Fn;Fn=1;var i=Tn;Tn|=4,Cx.current=null,HI(r,n),BC(n,r),yI(h1),Jm=!!d1,h1=d1=null,r.current=n,WI(n),bk(),Tn=i,Fn=y,vs.transition=a}else r.current=n;if(Mp&&(Mp=!1,wa=r,fy=o),a=r.pendingLanes,a===0&&(Ca=null),Mk(n.stateNode),Oi(r,_r()),t!==null)for(s=r.onRecoverableError,n=0;n<t.length;n++)o=t[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(hy)throw hy=!1,r=L1,L1=null,r;return fy&1&&r.tag!==0&&Cc(),a=r.pendingLanes,a&1?r===k1?ah++:(ah=0,k1=r):ah=0,Va(),null}function Cc(){if(wa!==null){var r=TA(fy),t=vs.transition,n=Fn;try{if(vs.transition=null,Fn=16>r?16:r,wa===null)var s=!1;else{if(r=wa,wa=null,fy=0,Tn&6)throw Error(xt(331));var o=Tn;for(Tn|=4,Ut=r.current;Ut!==null;){var a=Ut,y=a.child;if(Ut.flags&16){var i=a.deletions;if(i!==null){for(var _=0;_<i.length;_++){var g=i[_];for(Ut=g;Ut!==null;){var h=Ut;switch(h.tag){case 0:case 11:case 15:sh(8,h,a)}var l=h.child;if(l!==null)l.return=h,Ut=l;else for(;Ut!==null;){h=Ut;var d=h.sibling,v=h.return;if(NC(h),h===g){Ut=null;break}if(d!==null){d.return=v,Ut=d;break}Ut=v}}}var x=a.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var f=p.sibling;p.sibling=null,p=f}while(p!==null)}}Ut=a}}if(a.subtreeFlags&2064&&y!==null)y.return=a,Ut=y;else e:for(;Ut!==null;){if(a=Ut,a.flags&2048)switch(a.tag){case 0:case 11:case 15:sh(9,a,a.return)}var u=a.sibling;if(u!==null){u.return=a.return,Ut=u;break e}Ut=a.return}}var c=r.current;for(Ut=c;Ut!==null;){y=Ut;var m=y.child;if(y.subtreeFlags&2064&&m!==null)m.return=y,Ut=m;else e:for(y=c;Ut!==null;){if(i=Ut,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Fy(9,i)}}catch(S){dr(i,i.return,S)}if(i===y){Ut=null;break e}var b=i.sibling;if(b!==null){b.return=i.return,Ut=b;break e}Ut=i.return}}if(Tn=o,Va(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(jy,r)}catch{}s=!0}return s}finally{Fn=n,vs.transition=t}}return!1}function T2(r,t,n){t=Oc(n,t),t=TC(r,t,1),r=Aa(r,t,1),t=_i(),r!==null&&(uf(r,1,t),Oi(r,t))}function dr(r,t,n){if(r.tag===3)T2(r,r,n);else for(;t!==null;){if(t.tag===3){T2(t,r,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ca===null||!Ca.has(s))){r=Oc(n,r),r=AC(t,r,1),t=Aa(t,r,1),r=_i(),t!==null&&(uf(t,1,r),Oi(t,r));break}}t=t.return}}function JI(r,t,n){var s=r.pingCache;s!==null&&s.delete(t),t=_i(),r.pingedLanes|=r.suspendedLanes&n,zr===r&&(qr&n)===n&&(kr===4||kr===3&&(qr&130023424)===qr&&500>_r()-Rx?Ul(r,0):Px|=n),Oi(r,t)}function qC(r,t){t===0&&(r.mode&1?(t=pp,pp<<=1,!(pp&130023424)&&(pp=4194304)):t=1);var n=_i();r=Fo(r,t),r!==null&&(uf(r,t,n),Oi(r,n))}function QI(r){var t=r.memoizedState,n=0;t!==null&&(n=t.retryLane),qC(r,n)}function $I(r,t){var n=0;switch(r.tag){case 13:var s=r.stateNode,o=r.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=r.stateNode;break;default:throw Error(xt(314))}s!==null&&s.delete(t),qC(r,n)}var YC;YC=function(r,t,n){if(r!==null)if(r.memoizedProps!==t.pendingProps||ki.current)Li=!0;else{if(!(r.lanes&n)&&!(t.flags&128))return Li=!1,BI(r,t,n);Li=!!(r.flags&131072)}else Li=!1,Qn&&t.flags&1048576&&QA(t,iy,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;jm(r,t),r=t.pendingProps;var o=jc(t,ui.current);Ac(t,n),o=Sx(null,t,s,r,o,n);var a=Mx();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(s)?(a=!0,ny(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,vx(t),o.updater=Uy,t.stateNode=o,o._reactInternals=t,b1(t,s,r,n),t=M1(null,t,s,!0,a,n)):(t.tag=0,Qn&&a&&dx(t),yi(null,t,o,n),t=t.child),t;case 16:s=t.elementType;e:{switch(jm(r,t),r=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=tO(s),r=Ds(s,r),o){case 0:t=S1(null,t,s,r,n);break e;case 1:t=y2(null,t,s,r,n);break e;case 11:t=p2(null,t,s,r,n);break e;case 14:t=m2(null,t,s,Ds(s.type,r),n);break e}throw Error(xt(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Ds(s,o),S1(r,t,s,o,n);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Ds(s,o),y2(r,t,s,o,n);case 3:e:{if(jC(t),r===null)throw Error(xt(387));s=t.pendingProps,a=t.memoizedState,o=a.element,iC(r,t),ay(t,s,null,n);var y=t.memoizedState;if(s=y.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Oc(Error(xt(423)),t),t=g2(r,t,s,n,o);break e}else if(s!==o){o=Oc(Error(xt(424)),t),t=g2(r,t,s,n,o);break e}else for(Zi=Ta(t.stateNode.containerInfo.firstChild),Ki=t,Qn=!0,Fs=null,n=nC(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lc(),s===o){t=Bo(r,t,n);break e}yi(r,t,s,n)}t=t.child}return t;case 5:return sC(t),r===null&&v1(t),s=t.type,o=t.pendingProps,a=r!==null?r.memoizedProps:null,y=o.children,f1(s,o)?y=null:a!==null&&f1(s,a)&&(t.flags|=32),RC(r,t),yi(r,t,y,n),t.child;case 6:return r===null&&v1(t),null;case 13:return LC(r,t,n);case 4:return _x(t,t.stateNode.containerInfo),s=t.pendingProps,r===null?t.child=kc(t,null,s,n):yi(r,t,s,n),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Ds(s,o),p2(r,t,s,o,n);case 7:return yi(r,t,t.pendingProps,n),t.child;case 8:return yi(r,t,t.pendingProps.children,n),t.child;case 12:return yi(r,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,a=t.memoizedProps,y=o.value,Wn(sy,s._currentValue),s._currentValue=y,a!==null)if(Gs(a.value,y)){if(a.children===o.children&&!ki.current){t=Bo(r,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){y=a.child;for(var _=i.firstContext;_!==null;){if(_.context===s){if(a.tag===1){_=ko(-1,n&-n),_.tag=2;var g=a.updateQueue;if(g!==null){g=g.shared;var h=g.pending;h===null?_.next=_:(_.next=h.next,h.next=_),g.pending=_}}a.lanes|=n,_=a.alternate,_!==null&&(_.lanes|=n),_1(a.return,n,t),i.lanes|=n;break}_=_.next}}else if(a.tag===10)y=a.type===t.type?null:a.child;else if(a.tag===18){if(y=a.return,y===null)throw Error(xt(341));y.lanes|=n,i=y.alternate,i!==null&&(i.lanes|=n),_1(y,n,t),y=a.sibling}else y=a.child;if(y!==null)y.return=a;else for(y=a;y!==null;){if(y===t){y=null;break}if(a=y.sibling,a!==null){a.return=y.return,y=a;break}y=y.return}a=y}yi(r,t,o.children,n),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,Ac(t,n),o=_s(o),s=s(o),t.flags|=1,yi(r,t,s,n),t.child;case 14:return s=t.type,o=Ds(s,t.pendingProps),o=Ds(s.type,o),m2(r,t,s,o,n);case 15:return CC(r,t,t.type,t.pendingProps,n);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:Ds(s,o),jm(r,t),t.tag=1,Ii(s)?(r=!0,ny(t)):r=!1,Ac(t,n),EC(t,s,o),b1(t,s,o,n),M1(null,t,s,!0,r,n);case 19:return kC(r,t,n);case 22:return PC(r,t,n)}throw Error(xt(156,t.tag))};function ZC(r,t){return wA(r,t)}function eO(r,t,n,s){this.tag=r,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(r,t,n,s){return new eO(r,t,n,s)}function Ix(r){return r=r.prototype,!(!r||!r.isReactComponent)}function tO(r){if(typeof r=="function")return Ix(r)?1:0;if(r!=null){if(r=r.$$typeof,r===$_)return 11;if(r===ex)return 14}return 2}function Ra(r,t){var n=r.alternate;return n===null?(n=gs(r.tag,t,r.key,r.mode),n.elementType=r.elementType,n.type=r.type,n.stateNode=r.stateNode,n.alternate=r,r.alternate=n):(n.pendingProps=t,n.type=r.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=r.flags&14680064,n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,t=r.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=r.sibling,n.index=r.index,n.ref=r.ref,n}function Im(r,t,n,s,o,a){var y=2;if(s=r,typeof r=="function")Ix(r)&&(y=1);else if(typeof r=="string")y=5;else e:switch(r){case tc:return Fl(n.children,o,a,t);case Q_:y=8,o|=8;break;case Wv:return r=gs(12,n,t,o|2),r.elementType=Wv,r.lanes=a,r;case Xv:return r=gs(13,n,t,o),r.elementType=Xv,r.lanes=a,r;case qv:return r=gs(19,n,t,o),r.elementType=qv,r.lanes=a,r;case sA:return zy(n,o,a,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case rA:y=10;break e;case iA:y=9;break e;case $_:y=11;break e;case ex:y=14;break e;case pa:y=16,s=null;break e}throw Error(xt(130,r==null?r:typeof r,""))}return t=gs(y,n,t,o),t.elementType=r,t.type=s,t.lanes=a,t}function Fl(r,t,n,s){return r=gs(7,r,s,t),r.lanes=n,r}function zy(r,t,n,s){return r=gs(22,r,s,t),r.elementType=sA,r.lanes=n,r.stateNode={isHidden:!1},r}function D0(r,t,n){return r=gs(6,r,null,t),r.lanes=n,r}function N0(r,t,n){return t=gs(4,r.children!==null?r.children:[],r.key,t),t.lanes=n,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function nO(r,t,n,s,o){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g0(0),this.expirationTimes=g0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g0(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ox(r,t,n,s,o,a,y,i,_){return r=new nO(r,t,n,i,_),t===1?(t=1,a===!0&&(t|=8)):t=0,a=gs(3,null,null,t),r.current=a,a.stateNode=r,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vx(a),r}function rO(r,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ec,key:s==null?null:""+s,children:r,containerInfo:t,implementation:n}}function KC(r){if(!r)return Oa;r=r._reactInternals;e:{if(nu(r)!==r||r.tag!==1)throw Error(xt(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xt(171))}if(r.tag===1){var n=r.type;if(Ii(n))return KA(r,n,t)}return t}function JC(r,t,n,s,o,a,y,i,_){return r=Ox(n,s,!0,r,o,a,y,i,_),r.context=KC(null),n=r.current,s=_i(),o=Pa(n),a=ko(s,o),a.callback=t??null,Aa(n,a,o),r.current.lanes=o,uf(r,o,s),Oi(r,s),r}function Vy(r,t,n,s){var o=t.current,a=_i(),y=Pa(o);return n=KC(n),t.context===null?t.context=n:t.pendingContext=n,t=ko(a,y),t.payload={element:r},s=s===void 0?null:s,s!==null&&(t.callback=s),r=Aa(o,t,y),r!==null&&(Vs(r,o,y,a),Cm(r,o,y)),y}function my(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function A2(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var n=r.retryLane;r.retryLane=n!==0&&n<t?n:t}}function Dx(r,t){A2(r,t),(r=r.alternate)&&A2(r,t)}function iO(){return null}var QC=typeof reportError=="function"?reportError:function(r){console.error(r)};function Nx(r){this._internalRoot=r}Gy.prototype.render=Nx.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(xt(409));Vy(r,t,null,null)};Gy.prototype.unmount=Nx.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;Jl(function(){Vy(null,r,null,null)}),t[Uo]=null}};function Gy(r){this._internalRoot=r}Gy.prototype.unstable_scheduleHydration=function(r){if(r){var t=PA();r={blockedOn:null,target:r,priority:t};for(var n=0;n<ga.length&&t!==0&&t<ga[n].priority;n++);ga.splice(n,0,r),n===0&&jA(r)}};function Ux(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Hy(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function C2(){}function sO(r,t,n,s,o){if(o){if(typeof s=="function"){var a=s;s=function(){var g=my(y);a.call(g)}}var y=JC(t,s,r,0,null,!1,!1,"",C2);return r._reactRootContainer=y,r[Uo]=y.current,Eh(r.nodeType===8?r.parentNode:r),Jl(),y}for(;o=r.lastChild;)r.removeChild(o);if(typeof s=="function"){var i=s;s=function(){var g=my(_);i.call(g)}}var _=Ox(r,0,!1,null,null,!1,!1,"",C2);return r._reactRootContainer=_,r[Uo]=_.current,Eh(r.nodeType===8?r.parentNode:r),Jl(function(){Vy(t,_,n,s)}),_}function Wy(r,t,n,s,o){var a=n._reactRootContainer;if(a){var y=a;if(typeof o=="function"){var i=o;o=function(){var _=my(y);i.call(_)}}Vy(t,y,r,o)}else y=sO(n,t,r,o,s);return my(y)}AA=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var n=qd(t.pendingLanes);n!==0&&(rx(t,n|1),Oi(t,_r()),!(Tn&6)&&(Dc=_r()+500,Va()))}break;case 13:Jl(function(){var s=Fo(r,1);if(s!==null){var o=_i();Vs(s,r,1,o)}}),Dx(r,1)}};ix=function(r){if(r.tag===13){var t=Fo(r,134217728);if(t!==null){var n=_i();Vs(t,r,134217728,n)}Dx(r,134217728)}};CA=function(r){if(r.tag===13){var t=Pa(r),n=Fo(r,t);if(n!==null){var s=_i();Vs(n,r,t,s)}Dx(r,t)}};PA=function(){return Fn};RA=function(r,t){var n=Fn;try{return Fn=r,t()}finally{Fn=n}};r1=function(r,t,n){switch(t){case"input":if(Kv(r,n),t=n.name,n.type==="radio"&&t!=null){for(n=r;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==r&&s.form===r.form){var o=Oy(s);if(!o)throw Error(xt(90));aA(s),Kv(s,o)}}}break;case"textarea":uA(r,n);break;case"select":t=n.value,t!=null&&Sc(r,!!n.multiple,t,!1)}};yA=jx;gA=Jl;var oO={usingClientEntryPoint:!1,Events:[df,sc,Oy,pA,mA,jx]},Rd={findFiberByHostInstance:Rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aO={bundleType:Rd.bundleType,version:Rd.version,rendererPackageName:Rd.rendererPackageName,rendererConfig:Rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=xA(r),r===null?null:r.stateNode},findFiberByHostInstance:Rd.findFiberByHostInstance||iO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ep=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ep.isDisabled&&Ep.supportsFiber)try{jy=Ep.inject(aO),ro=Ep}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oO;ts.createPortal=function(r,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ux(t))throw Error(xt(200));return rO(r,t,null,n)};ts.createRoot=function(r,t){if(!Ux(r))throw Error(xt(299));var n=!1,s="",o=QC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ox(r,1,!1,null,null,n,!1,s,o),r[Uo]=t.current,Eh(r.nodeType===8?r.parentNode:r),new Nx(t)};ts.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(xt(188)):(r=Object.keys(r).join(","),Error(xt(268,r)));return r=xA(t),r=r===null?null:r.stateNode,r};ts.flushSync=function(r){return Jl(r)};ts.hydrate=function(r,t,n){if(!Hy(t))throw Error(xt(200));return Wy(null,r,t,!0,n)};ts.hydrateRoot=function(r,t,n){if(!Ux(r))throw Error(xt(405));var s=n!=null&&n.hydratedSources||null,o=!1,a="",y=QC;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),t=JC(t,null,r,1,n??null,o,!1,a,y),r[Uo]=t.current,Eh(r),s)for(r=0;r<s.length;r++)n=s[r],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Gy(t)};ts.render=function(r,t,n){if(!Hy(t))throw Error(xt(200));return Wy(null,r,t,!1,n)};ts.unmountComponentAtNode=function(r){if(!Hy(r))throw Error(xt(40));return r._reactRootContainer?(Jl(function(){Wy(null,null,r,!1,function(){r._reactRootContainer=null,r[Uo]=null})}),!0):!1};ts.unstable_batchedUpdates=jx;ts.unstable_renderSubtreeIntoContainer=function(r,t,n,s){if(!Hy(n))throw Error(xt(200));if(r==null||r._reactInternals===void 0)throw Error(xt(38));return Wy(r,t,n,!1,s)};ts.version="18.3.1-next-f1338f8080-20240426";function $C(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($C)}catch(r){console.error(r)}}$C(),$T.exports=ts;var lO=$T.exports,eP,P2=lO;eP=P2.createRoot,P2.hydrateRoot;const Fx=at.createContext({});function Bx(r){const t=at.useRef(null);return t.current===null&&(t.current=r()),t.current}const Xy=at.createContext(null),zx=at.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class uO extends at.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cO({children:r,isPresent:t}){const n=at.useId(),s=at.useRef(null),o=at.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=at.useContext(zx);return at.useInsertionEffect(()=>{const{width:y,height:i,top:_,left:g}=o.current;if(t||!s.current||!y||!i)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return a&&(h.nonce=a),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${i}px !important;
            top: ${_}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),gt.jsx(uO,{isPresent:t,childRef:s,sizeRef:o,children:at.cloneElement(r,{ref:s})})}const dO=({children:r,initial:t,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:a,mode:y})=>{const i=Bx(hO),_=at.useId(),g=at.useCallback(l=>{i.set(l,!0);for(const d of i.values())if(!d)return;s&&s()},[i,s]),h=at.useMemo(()=>({id:_,initial:t,isPresent:n,custom:o,onExitComplete:g,register:l=>(i.set(l,!1),()=>i.delete(l))}),a?[Math.random(),g]:[n,g]);return at.useMemo(()=>{i.forEach((l,d)=>i.set(d,!1))},[n]),at.useEffect(()=>{!n&&!i.size&&s&&s()},[n]),y==="popLayout"&&(r=gt.jsx(cO,{isPresent:n,children:r})),gt.jsx(Xy.Provider,{value:h,children:r})};function hO(){return new Map}function tP(r=!0){const t=at.useContext(Xy);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,a=at.useId();at.useEffect(()=>{r&&o(a)},[r]);const y=at.useCallback(()=>r&&s&&s(a),[a,s,r]);return!n&&s?[!1,y]:[!0]}const Tp=r=>r.key||"";function R2(r){const t=[];return at.Children.forEach(r,n=>{at.isValidElement(n)&&t.push(n)}),t}const Vx=typeof window<"u",nP=Vx?at.useLayoutEffect:at.useEffect,fO=({children:r,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:a="sync",propagate:y=!1})=>{const[i,_]=tP(y),g=at.useMemo(()=>R2(r),[r]),h=y&&!i?[]:g.map(Tp),l=at.useRef(!0),d=at.useRef(g),v=Bx(()=>new Map),[x,p]=at.useState(g),[f,u]=at.useState(g);nP(()=>{l.current=!1,d.current=g;for(let b=0;b<f.length;b++){const S=Tp(f[b]);h.includes(S)?v.delete(S):v.get(S)!==!0&&v.set(S,!1)}},[f,h.length,h.join("-")]);const c=[];if(g!==x){let b=[...g];for(let S=0;S<f.length;S++){const w=f[S],M=Tp(w);h.includes(M)||(b.splice(S,0,w),c.push(w))}a==="wait"&&c.length&&(b=c),u(R2(b)),p(g);return}const{forceRender:m}=at.useContext(Fx);return gt.jsx(gt.Fragment,{children:f.map(b=>{const S=Tp(b),w=y&&!i?!1:g===f||h.includes(S),M=()=>{if(v.has(S))v.set(S,!0);else return;let A=!0;v.forEach(P=>{P||(A=!1)}),A&&(m==null||m(),u(d.current),y&&(_==null||_()),s&&s())};return gt.jsx(dO,{isPresent:w,initial:!l.current||n?void 0:!1,custom:w?void 0:t,presenceAffectsLayout:o,mode:a,onExitComplete:w?void 0:M,children:b},S)})})},Ji=r=>r;let D1=Ji;function Gx(r){let t;return()=>(t===void 0&&(t=r()),t)}const Nc=(r,t,n)=>{const s=t-r;return s===0?1:(n-r)/s},Io=r=>r*1e3,Oo=r=>r/1e3,pO={skipAnimations:!1,useManualTiming:!1};function mO(r){let t=new Set,n=new Set,s=!1,o=!1;const a=new WeakSet;let y={delta:0,timestamp:0,isProcessing:!1};function i(g){a.has(g)&&(_.schedule(g),r()),g(y)}const _={schedule:(g,h=!1,l=!1)=>{const v=l&&s?t:n;return h&&a.add(g),v.has(g)||v.add(g),g},cancel:g=>{n.delete(g),a.delete(g)},process:g=>{if(y=g,s){o=!0;return}s=!0,[t,n]=[n,t],t.forEach(i),t.clear(),s=!1,o&&(o=!1,_.process(g))}};return _}const Ap=["read","resolveKeyframes","update","preRender","render","postRender"],yO=40;function rP(r,t){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,y=Ap.reduce((u,c)=>(u[c]=mO(a),u),{}),{read:i,resolveKeyframes:_,update:g,preRender:h,render:l,postRender:d}=y,v=()=>{const u=performance.now();n=!1,o.delta=s?1e3/60:Math.max(Math.min(u-o.timestamp,yO),1),o.timestamp=u,o.isProcessing=!0,i.process(o),_.process(o),g.process(o),h.process(o),l.process(o),d.process(o),o.isProcessing=!1,n&&t&&(s=!1,r(v))},x=()=>{n=!0,s=!0,o.isProcessing||r(v)};return{schedule:Ap.reduce((u,c)=>{const m=y[c];return u[c]=(b,S=!1,w=!1)=>(n||x(),m.schedule(b,S,w)),u},{}),cancel:u=>{for(let c=0;c<Ap.length;c++)y[Ap[c]].cancel(u)},state:o,steps:y}}const{schedule:Kn,cancel:Da,state:Xr,steps:U0}=rP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ji,!0),iP=at.createContext({strict:!1}),j2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Uc={};for(const r in j2)Uc[r]={isEnabled:t=>j2[r].some(n=>!!t[n])};function gO(r){for(const t in r)Uc[t]={...Uc[t],...r[t]}}const vO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yy(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||vO.has(r)}let sP=r=>!yy(r);function _O(r){r&&(sP=t=>t.startsWith("on")?!yy(t):r(t))}try{_O(require("@emotion/is-prop-valid").default)}catch{}function xO(r,t,n){const s={};for(const o in r)o==="values"&&typeof r.values=="object"||(sP(o)||n===!0&&yy(o)||!t&&!yy(o)||r.draggable&&o.startsWith("onDrag"))&&(s[o]=r[o]);return s}function bO(r){if(typeof Proxy>"u")return r;const t=new Map,n=(...s)=>r(...s);return new Proxy(n,{get:(s,o)=>o==="create"?r:(t.has(o)||t.set(o,r(o)),t.get(o))})}const qy=at.createContext({});function Ih(r){return typeof r=="string"||Array.isArray(r)}function Yy(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const Hx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wx=["initial",...Hx];function Zy(r){return Yy(r.animate)||Wx.some(t=>Ih(r[t]))}function oP(r){return!!(Zy(r)||r.variants)}function wO(r,t){if(Zy(r)){const{initial:n,animate:s}=r;return{initial:n===!1||Ih(n)?n:void 0,animate:Ih(s)?s:void 0}}return r.inherit!==!1?t:{}}function SO(r){const{initial:t,animate:n}=wO(r,at.useContext(qy));return at.useMemo(()=>({initial:t,animate:n}),[L2(t),L2(n)])}function L2(r){return Array.isArray(r)?r.join(" "):r}const MO=Symbol.for("motionComponentSymbol");function hc(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function EO(r,t,n){return at.useCallback(s=>{s&&r.onMount&&r.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):hc(n)&&(n.current=s))},[t])}const Xx=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TO="framerAppearId",aP="data-"+Xx(TO),{schedule:qx,cancel:GH}=rP(queueMicrotask,!1),lP=at.createContext({});function AO(r,t,n,s,o){var a,y;const{visualElement:i}=at.useContext(qy),_=at.useContext(iP),g=at.useContext(Xy),h=at.useContext(zx).reducedMotion,l=at.useRef(null);s=s||_.renderer,!l.current&&s&&(l.current=s(r,{visualState:t,parent:i,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:h}));const d=l.current,v=at.useContext(lP);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&CO(l.current,n,o,v);const x=at.useRef(!1);at.useInsertionEffect(()=>{d&&x.current&&d.update(n,g)});const p=n[aP],f=at.useRef(!!p&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,p))&&((y=window.MotionHasOptimisedAnimation)===null||y===void 0?void 0:y.call(window,p)));return nP(()=>{d&&(x.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),qx.render(d.render),f.current&&d.animationState&&d.animationState.animateChanges())}),at.useEffect(()=>{d&&(!f.current&&d.animationState&&d.animationState.animateChanges(),f.current&&(queueMicrotask(()=>{var u;(u=window.MotionHandoffMarkAsComplete)===null||u===void 0||u.call(window,p)}),f.current=!1))}),d}function CO(r,t,n,s){const{layoutId:o,layout:a,drag:y,dragConstraints:i,layoutScroll:_,layoutRoot:g}=t;r.projection=new n(r.latestValues,t["data-framer-portal-id"]?void 0:uP(r.parent)),r.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!y||i&&hc(i),visualElement:r,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,layoutScroll:_,layoutRoot:g})}function uP(r){if(r)return r.options.allowProjection!==!1?r.projection:uP(r.parent)}function PO({preloadedFeatures:r,createVisualElement:t,useRender:n,useVisualState:s,Component:o}){var a,y;r&&gO(r);function i(g,h){let l;const d={...at.useContext(zx),...g,layoutId:RO(g)},{isStatic:v}=d,x=SO(g),p=s(g,v);if(!v&&Vx){jO();const f=LO(d);l=f.MeasureLayout,x.visualElement=AO(o,p,d,t,f.ProjectionNode)}return gt.jsxs(qy.Provider,{value:x,children:[l&&x.visualElement?gt.jsx(l,{visualElement:x.visualElement,...d}):null,n(o,g,EO(p,x.visualElement,h),p,v,x.visualElement)]})}i.displayName=`motion.${typeof o=="string"?o:`create(${(y=(a=o.displayName)!==null&&a!==void 0?a:o.name)!==null&&y!==void 0?y:""})`}`;const _=at.forwardRef(i);return _[MO]=o,_}function RO({layoutId:r}){const t=at.useContext(Fx).id;return t&&r!==void 0?t+"-"+r:r}function jO(r,t){at.useContext(iP).strict}function LO(r){const{drag:t,layout:n}=Uc;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(r)||n!=null&&n.isEnabled(r)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const kO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yx(r){return typeof r!="string"||r.includes("-")?!1:!!(kO.indexOf(r)>-1||/[A-Z]/u.test(r))}function k2(r){const t=[{},{}];return r==null||r.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function Zx(r,t,n,s){if(typeof t=="function"){const[o,a]=k2(s);t=t(n!==void 0?n:r.custom,o,a)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[o,a]=k2(s);t=t(n!==void 0?n:r.custom,o,a)}return t}const N1=r=>Array.isArray(r),IO=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),OO=r=>N1(r)?r[r.length-1]||0:r,ai=r=>!!(r&&r.getVelocity);function Om(r){const t=ai(r)?r.get():r;return IO(t)?t.toValue():t}function DO({scrapeMotionValuesFromProps:r,createRenderState:t,onUpdate:n},s,o,a){const y={latestValues:NO(s,o,a,r),renderState:t()};return n&&(y.onMount=i=>n({props:s,current:i,...y}),y.onUpdate=i=>n(i)),y}const cP=r=>(t,n)=>{const s=at.useContext(qy),o=at.useContext(Xy),a=()=>DO(r,t,s,o);return n?a():Bx(a)};function NO(r,t,n,s){const o={},a=s(r,{});for(const d in a)o[d]=Om(a[d]);let{initial:y,animate:i}=r;const _=Zy(r),g=oP(r);t&&g&&!_&&r.inherit!==!1&&(y===void 0&&(y=t.initial),i===void 0&&(i=t.animate));let h=n?n.initial===!1:!1;h=h||y===!1;const l=h?i:y;if(l&&typeof l!="boolean"&&!Yy(l)){const d=Array.isArray(l)?l:[l];for(let v=0;v<d.length;v++){const x=Zx(r,d[v]);if(x){const{transitionEnd:p,transition:f,...u}=x;for(const c in u){let m=u[c];if(Array.isArray(m)){const b=h?m.length-1:0;m=m[b]}m!==null&&(o[c]=m)}for(const c in p)o[c]=p[c]}}}return o}const Yc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ru=new Set(Yc),dP=r=>t=>typeof t=="string"&&t.startsWith(r),hP=dP("--"),UO=dP("var(--"),Kx=r=>UO(r)?FO.test(r.split("/*")[0].trim()):!1,FO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fP=(r,t)=>t&&typeof r=="number"?t.transform(r):r,zo=(r,t,n)=>n>t?t:n<r?r:n,Zc={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Oh={...Zc,transform:r=>zo(0,1,r)},Cp={...Zc,default:1},ff=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),fa=ff("deg"),so=ff("%"),qt=ff("px"),BO=ff("vh"),zO=ff("vw"),I2={...so,parse:r=>so.parse(r)/100,transform:r=>so.transform(r*100)},VO={borderWidth:qt,borderTopWidth:qt,borderRightWidth:qt,borderBottomWidth:qt,borderLeftWidth:qt,borderRadius:qt,radius:qt,borderTopLeftRadius:qt,borderTopRightRadius:qt,borderBottomRightRadius:qt,borderBottomLeftRadius:qt,width:qt,maxWidth:qt,height:qt,maxHeight:qt,top:qt,right:qt,bottom:qt,left:qt,padding:qt,paddingTop:qt,paddingRight:qt,paddingBottom:qt,paddingLeft:qt,margin:qt,marginTop:qt,marginRight:qt,marginBottom:qt,marginLeft:qt,backgroundPositionX:qt,backgroundPositionY:qt},GO={rotate:fa,rotateX:fa,rotateY:fa,rotateZ:fa,scale:Cp,scaleX:Cp,scaleY:Cp,scaleZ:Cp,skew:fa,skewX:fa,skewY:fa,distance:qt,translateX:qt,translateY:qt,translateZ:qt,x:qt,y:qt,z:qt,perspective:qt,transformPerspective:qt,opacity:Oh,originX:I2,originY:I2,originZ:qt},O2={...Zc,transform:Math.round},Jx={...VO,...GO,zIndex:O2,size:qt,fillOpacity:Oh,strokeOpacity:Oh,numOctaves:O2},HO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WO=Yc.length;function XO(r,t,n){let s="",o=!0;for(let a=0;a<WO;a++){const y=Yc[a],i=r[y];if(i===void 0)continue;let _=!0;if(typeof i=="number"?_=i===(y.startsWith("scale")?1:0):_=parseFloat(i)===0,!_||n){const g=fP(i,Jx[y]);if(!_){o=!1;const h=HO[y]||y;s+=`${h}(${g}) `}n&&(t[y]=g)}}return s=s.trim(),n?s=n(t,o?"":s):o&&(s="none"),s}function Qx(r,t,n){const{style:s,vars:o,transformOrigin:a}=r;let y=!1,i=!1;for(const _ in t){const g=t[_];if(ru.has(_)){y=!0;continue}else if(hP(_)){o[_]=g;continue}else{const h=fP(g,Jx[_]);_.startsWith("origin")?(i=!0,a[_]=h):s[_]=h}}if(t.transform||(y||n?s.transform=XO(t,r.transform,n):s.transform&&(s.transform="none")),i){const{originX:_="50%",originY:g="50%",originZ:h=0}=a;s.transformOrigin=`${_} ${g} ${h}`}}const qO={offset:"stroke-dashoffset",array:"stroke-dasharray"},YO={offset:"strokeDashoffset",array:"strokeDasharray"};function ZO(r,t,n=1,s=0,o=!0){r.pathLength=1;const a=o?qO:YO;r[a.offset]=qt.transform(-s);const y=qt.transform(t),i=qt.transform(n);r[a.array]=`${y} ${i}`}function D2(r,t,n){return typeof r=="string"?r:qt.transform(t+n*r)}function KO(r,t,n){const s=D2(t,r.x,r.width),o=D2(n,r.y,r.height);return`${s} ${o}`}function $x(r,{attrX:t,attrY:n,attrScale:s,originX:o,originY:a,pathLength:y,pathSpacing:i=1,pathOffset:_=0,...g},h,l){if(Qx(r,g,l),h){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:d,style:v,dimensions:x}=r;d.transform&&(x&&(v.transform=d.transform),delete d.transform),x&&(o!==void 0||a!==void 0||v.transform)&&(v.transformOrigin=KO(x,o!==void 0?o:.5,a!==void 0?a:.5)),t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),y!==void 0&&ZO(d,y,i,_,!1)}const eb=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),pP=()=>({...eb(),attrs:{}}),tb=r=>typeof r=="string"&&r.toLowerCase()==="svg";function mP(r,{style:t,vars:n},s,o){Object.assign(r.style,t,o&&o.getProjectionStyles(s));for(const a in n)r.style.setProperty(a,n[a])}const yP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gP(r,t,n,s){mP(r,t,void 0,s);for(const o in t.attrs)r.setAttribute(yP.has(o)?o:Xx(o),t.attrs[o])}const gy={};function JO(r){Object.assign(gy,r)}function vP(r,{layout:t,layoutId:n}){return ru.has(r)||r.startsWith("origin")||(t||n!==void 0)&&(!!gy[r]||r==="opacity")}function nb(r,t,n){var s;const{style:o}=r,a={};for(const y in o)(ai(o[y])||t.style&&ai(t.style[y])||vP(y,r)||((s=n==null?void 0:n.getValue(y))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[y]=o[y]);return a}function _P(r,t,n){const s=nb(r,t,n);for(const o in r)if(ai(r[o])||ai(t[o])){const a=Yc.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[a]=r[o]}return s}function QO(r,t){try{t.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const N2=["x","y","width","height","cx","cy","r"],$O={useVisualState:cP({scrapeMotionValuesFromProps:_P,createRenderState:pP,onUpdate:({props:r,prevProps:t,current:n,renderState:s,latestValues:o})=>{if(!n)return;let a=!!r.drag;if(!a){for(const i in o)if(ru.has(i)){a=!0;break}}if(!a)return;let y=!t;if(t)for(let i=0;i<N2.length;i++){const _=N2[i];r[_]!==t[_]&&(y=!0)}y&&Kn.read(()=>{QO(n,s),Kn.render(()=>{$x(s,o,tb(n.tagName),r.transformTemplate),gP(n,s)})})}})},eD={useVisualState:cP({scrapeMotionValuesFromProps:nb,createRenderState:eb})};function xP(r,t,n){for(const s in t)!ai(t[s])&&!vP(s,n)&&(r[s]=t[s])}function tD({transformTemplate:r},t){return at.useMemo(()=>{const n=eb();return Qx(n,t,r),Object.assign({},n.vars,n.style)},[t])}function nD(r,t){const n=r.style||{},s={};return xP(s,n,r),Object.assign(s,tD(r,t)),s}function rD(r,t){const n={},s=nD(r,t);return r.drag&&r.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(n.tabIndex=0),n.style=s,n}function iD(r,t,n,s){const o=at.useMemo(()=>{const a=pP();return $x(a,t,tb(s),r.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(r.style){const a={};xP(a,r.style,r),o.style={...a,...o.style}}return o}function sD(r=!1){return(n,s,o,{latestValues:a},y)=>{const _=(Yx(n)?iD:rD)(s,a,y,n),g=xO(s,typeof n=="string",r),h=n!==at.Fragment?{...g,..._,ref:o}:{},{children:l}=s,d=at.useMemo(()=>ai(l)?l.get():l,[l]);return at.createElement(n,{...h,children:d})}}function oD(r,t){return function(s,{forwardMotionProps:o}={forwardMotionProps:!1}){const y={...Yx(s)?$O:eD,preloadedFeatures:r,useRender:sD(o),createVisualElement:t,Component:s};return PO(y)}}function bP(r,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==r.length)return!1;for(let s=0;s<n;s++)if(t[s]!==r[s])return!1;return!0}function Ky(r,t,n){const s=r.getProps();return Zx(s,t,n!==void 0?n:s.custom,r)}const aD=Gx(()=>window.ScrollTimeline!==void 0);class lD{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(o=>{if(aD()&&o.attachTimeline)return o.attachTimeline(t);if(typeof n=="function")return n(o)});return()=>{s.forEach((o,a)=>{o&&o(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class uD extends lD{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function rb(r,t){return r?r[t]||r.default||r:void 0}const U1=2e4;function wP(r){let t=0;const n=50;let s=r.next(t);for(;!s.done&&t<U1;)t+=n,s=r.next(t);return t>=U1?1/0:t}function ib(r){return typeof r=="function"}function U2(r,t){r.timeline=t,r.onfinish=null}const sb=r=>Array.isArray(r)&&typeof r[0]=="number",cD={linearEasing:void 0};function dD(r,t){const n=Gx(r);return()=>{var s;return(s=cD[t])!==null&&s!==void 0?s:n()}}const vy=dD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),SP=(r,t,n=10)=>{let s="";const o=Math.max(Math.round(t/n),2);for(let a=0;a<o;a++)s+=r(Nc(0,o-1,a))+", ";return`linear(${s.substring(0,s.length-2)})`};function MP(r){return!!(typeof r=="function"&&vy()||!r||typeof r=="string"&&(r in F1||vy())||sb(r)||Array.isArray(r)&&r.every(MP))}const Zd=([r,t,n,s])=>`cubic-bezier(${r}, ${t}, ${n}, ${s})`,F1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zd([0,.65,.55,1]),circOut:Zd([.55,0,1,.45]),backIn:Zd([.31,.01,.66,-.59]),backOut:Zd([.33,1.53,.69,.99])};function EP(r,t){if(r)return typeof r=="function"&&vy()?SP(r,t):sb(r)?Zd(r):Array.isArray(r)?r.map(n=>EP(n,t)||F1.easeOut):F1[r]}const Os={x:!1,y:!1};function TP(){return Os.x||Os.y}function hD(r,t,n){var s;if(r instanceof Element)return[r];if(typeof r=="string"){let o=document;const a=(s=void 0)!==null&&s!==void 0?s:o.querySelectorAll(r);return a?Array.from(a):[]}return Array.from(r)}function AP(r,t){const n=hD(r),s=new AbortController,o={passive:!0,...t,signal:s.signal};return[n,o,()=>s.abort()]}function F2(r){return t=>{t.pointerType==="touch"||TP()||r(t)}}function fD(r,t,n={}){const[s,o,a]=AP(r,n),y=F2(i=>{const{target:_}=i,g=t(i);if(typeof g!="function"||!_)return;const h=F2(l=>{g(l),_.removeEventListener("pointerleave",h)});_.addEventListener("pointerleave",h,o)});return s.forEach(i=>{i.addEventListener("pointerenter",y,o)}),a}const CP=(r,t)=>t?r===t?!0:CP(r,t.parentElement):!1,ob=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,pD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mD(r){return pD.has(r.tagName)||r.tabIndex!==-1}const Kd=new WeakSet;function B2(r){return t=>{t.key==="Enter"&&r(t)}}function F0(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const yD=(r,t)=>{const n=r.currentTarget;if(!n)return;const s=B2(()=>{if(Kd.has(n))return;F0(n,"down");const o=B2(()=>{F0(n,"up")}),a=()=>F0(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function z2(r){return ob(r)&&!TP()}function gD(r,t,n={}){const[s,o,a]=AP(r,n),y=i=>{const _=i.currentTarget;if(!z2(i)||Kd.has(_))return;Kd.add(_);const g=t(i),h=(v,x)=>{window.removeEventListener("pointerup",l),window.removeEventListener("pointercancel",d),!(!z2(v)||!Kd.has(_))&&(Kd.delete(_),typeof g=="function"&&g(v,{success:x}))},l=v=>{h(v,n.useGlobalTarget||CP(_,v.target))},d=v=>{h(v,!1)};window.addEventListener("pointerup",l,o),window.addEventListener("pointercancel",d,o)};return s.forEach(i=>{!mD(i)&&i.getAttribute("tabindex")===null&&(i.tabIndex=0),(n.useGlobalTarget?window:i).addEventListener("pointerdown",y,o),i.addEventListener("focus",g=>yD(g,o),o)}),a}function vD(r){return r==="x"||r==="y"?Os[r]?null:(Os[r]=!0,()=>{Os[r]=!1}):Os.x||Os.y?null:(Os.x=Os.y=!0,()=>{Os.x=Os.y=!1})}const PP=new Set(["width","height","top","left","right","bottom",...Yc]);let Dm;function _D(){Dm=void 0}const oo={now:()=>(Dm===void 0&&oo.set(Xr.isProcessing||pO.useManualTiming?Xr.timestamp:performance.now()),Dm),set:r=>{Dm=r,queueMicrotask(_D)}};function ab(r,t){r.indexOf(t)===-1&&r.push(t)}function lb(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}class ub{constructor(){this.subscriptions=[]}add(t){return ab(this.subscriptions,t),()=>lb(this.subscriptions,t)}notify(t,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,s);else for(let a=0;a<o;a++){const y=this.subscriptions[a];y&&y(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function RP(r,t){return t?r*(1e3/t):0}const V2=30,xD=r=>!isNaN(parseFloat(r));class bD{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,o=!0)=>{const a=oo.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=oo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=xD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ub);const s=this.events[t].add(n);return t==="change"?()=>{s(),Kn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=oo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>V2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,V2);return RP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dh(r,t){return new bD(r,t)}function wD(r,t,n){r.hasValue(t)?r.getValue(t).set(n):r.addValue(t,Dh(n))}function SD(r,t){const n=Ky(r,t);let{transitionEnd:s={},transition:o={},...a}=n||{};a={...a,...s};for(const y in a){const i=OO(a[y]);wD(r,y,i)}}function MD(r){return!!(ai(r)&&r.add)}function B1(r,t){const n=r.getValue("willChange");if(MD(n))return n.add(t)}function jP(r){return r.props[aP]}const LP=(r,t,n)=>(((1-3*n+3*t)*r+(3*n-6*t))*r+3*t)*r,ED=1e-7,TD=12;function AD(r,t,n,s,o){let a,y,i=0;do y=t+(n-t)/2,a=LP(y,s,o)-r,a>0?n=y:t=y;while(Math.abs(a)>ED&&++i<TD);return y}function pf(r,t,n,s){if(r===t&&n===s)return Ji;const o=a=>AD(a,0,1,r,n);return a=>a===0||a===1?a:LP(o(a),t,s)}const kP=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,IP=r=>t=>1-r(1-t),OP=pf(.33,1.53,.69,.99),cb=IP(OP),DP=kP(cb),NP=r=>(r*=2)<1?.5*cb(r):.5*(2-Math.pow(2,-10*(r-1))),db=r=>1-Math.sin(Math.acos(r)),UP=IP(db),FP=kP(db),BP=r=>/^0[^.\s]+$/u.test(r);function CD(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||BP(r):!0}const lh=r=>Math.round(r*1e5)/1e5,hb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function PD(r){return r==null}const RD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fb=(r,t)=>n=>!!(typeof n=="string"&&RD.test(n)&&n.startsWith(r)||t&&!PD(n)&&Object.prototype.hasOwnProperty.call(n,t)),zP=(r,t,n)=>s=>{if(typeof s!="string")return s;const[o,a,y,i]=s.match(hb);return{[r]:parseFloat(o),[t]:parseFloat(a),[n]:parseFloat(y),alpha:i!==void 0?parseFloat(i):1}},jD=r=>zo(0,255,r),B0={...Zc,transform:r=>Math.round(jD(r))},kl={test:fb("rgb","red"),parse:zP("red","green","blue"),transform:({red:r,green:t,blue:n,alpha:s=1})=>"rgba("+B0.transform(r)+", "+B0.transform(t)+", "+B0.transform(n)+", "+lh(Oh.transform(s))+")"};function LD(r){let t="",n="",s="",o="";return r.length>5?(t=r.substring(1,3),n=r.substring(3,5),s=r.substring(5,7),o=r.substring(7,9)):(t=r.substring(1,2),n=r.substring(2,3),s=r.substring(3,4),o=r.substring(4,5),t+=t,n+=n,s+=s,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const z1={test:fb("#"),parse:LD,transform:kl.transform},fc={test:fb("hsl","hue"),parse:zP("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(r)+", "+so.transform(lh(t))+", "+so.transform(lh(n))+", "+lh(Oh.transform(s))+")"},ii={test:r=>kl.test(r)||z1.test(r)||fc.test(r),parse:r=>kl.test(r)?kl.parse(r):fc.test(r)?fc.parse(r):z1.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?kl.transform(r):fc.transform(r)},kD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ID(r){var t,n;return isNaN(r)&&typeof r=="string"&&(((t=r.match(hb))===null||t===void 0?void 0:t.length)||0)+(((n=r.match(kD))===null||n===void 0?void 0:n.length)||0)>0}const VP="number",GP="color",OD="var",DD="var(",G2="${}",ND=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nh(r){const t=r.toString(),n=[],s={color:[],number:[],var:[]},o=[];let a=0;const i=t.replace(ND,_=>(ii.test(_)?(s.color.push(a),o.push(GP),n.push(ii.parse(_))):_.startsWith(DD)?(s.var.push(a),o.push(OD),n.push(_)):(s.number.push(a),o.push(VP),n.push(parseFloat(_))),++a,G2)).split(G2);return{values:n,split:i,indexes:s,types:o}}function HP(r){return Nh(r).values}function WP(r){const{split:t,types:n}=Nh(r),s=t.length;return o=>{let a="";for(let y=0;y<s;y++)if(a+=t[y],o[y]!==void 0){const i=n[y];i===VP?a+=lh(o[y]):i===GP?a+=ii.transform(o[y]):a+=o[y]}return a}}const UD=r=>typeof r=="number"?0:r;function FD(r){const t=HP(r);return WP(r)(t.map(UD))}const Na={test:ID,parse:HP,createTransformer:WP,getAnimatableNone:FD},BD=new Set(["brightness","contrast","saturate","opacity"]);function zD(r){const[t,n]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[s]=n.match(hb)||[];if(!s)return r;const o=n.replace(s,"");let a=BD.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+o+")"}const VD=/\b([a-z-]*)\(.*?\)/gu,V1={...Na,getAnimatableNone:r=>{const t=r.match(VD);return t?t.map(zD).join(" "):r}},GD={...Jx,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:V1,WebkitFilter:V1},pb=r=>GD[r];function XP(r,t){let n=pb(r);return n!==V1&&(n=Na),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const HD=new Set(["auto","none","0"]);function WD(r,t,n){let s=0,o;for(;s<r.length&&!o;){const a=r[s];typeof a=="string"&&!HD.has(a)&&Nh(a).values.length&&(o=r[s]),s++}if(o&&n)for(const a of t)r[a]=XP(n,o)}const H2=r=>r===Zc||r===qt,W2=(r,t)=>parseFloat(r.split(", ")[t]),X2=(r,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const o=s.match(/^matrix3d\((.+)\)$/u);if(o)return W2(o[1],t);{const a=s.match(/^matrix\((.+)\)$/u);return a?W2(a[1],r):0}},XD=new Set(["x","y","z"]),qD=Yc.filter(r=>!XD.has(r));function YD(r){const t=[];return qD.forEach(n=>{const s=r.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Fc={width:({x:r},{paddingLeft:t="0",paddingRight:n="0"})=>r.max-r.min-parseFloat(t)-parseFloat(n),height:({y:r},{paddingTop:t="0",paddingBottom:n="0"})=>r.max-r.min-parseFloat(t)-parseFloat(n),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:X2(4,13),y:X2(5,14)};Fc.translateX=Fc.x;Fc.translateY=Fc.y;const Bl=new Set;let G1=!1,H1=!1;function qP(){if(H1){const r=Array.from(Bl).filter(s=>s.needsMeasurement),t=new Set(r.map(s=>s.element)),n=new Map;t.forEach(s=>{const o=YD(s);o.length&&(n.set(s,o),s.render())}),r.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([a,y])=>{var i;(i=s.getValue(a))===null||i===void 0||i.set(y)})}),r.forEach(s=>s.measureEndState()),r.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}H1=!1,G1=!1,Bl.forEach(r=>r.complete()),Bl.clear()}function YP(){Bl.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(H1=!0)})}function ZD(){YP(),qP()}class mb{constructor(t,n,s,o,a,y=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=o,this.element=a,this.isAsync=y}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Bl.add(this),G1||(G1=!0,Kn.read(YP),Kn.resolveKeyframes(qP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:o}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const y=o==null?void 0:o.get(),i=t[t.length-1];if(y!==void 0)t[0]=y;else if(s&&n){const _=s.readValue(n,i);_!=null&&(t[0]=_)}t[0]===void 0&&(t[0]=i),o&&y===void 0&&o.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Bl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Bl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ZP=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),KD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JD(r){const t=KD.exec(r);if(!t)return[,];const[,n,s,o]=t;return[`--${n??s}`,o]}function KP(r,t,n=1){const[s,o]=JD(r);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const y=a.trim();return ZP(y)?parseFloat(y):y}return Kx(o)?KP(o,t,n+1):o}const JP=r=>t=>t.test(r),QD={test:r=>r==="auto",parse:r=>r},QP=[Zc,qt,so,fa,zO,BO,QD],q2=r=>QP.find(JP(r));class $P extends mb{constructor(t,n,s,o,a){super(t,n,s,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let _=0;_<t.length;_++){let g=t[_];if(typeof g=="string"&&(g=g.trim(),Kx(g))){const h=KP(g,n.current);h!==void 0&&(t[_]=h),_===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!PP.has(s)||t.length!==2)return;const[o,a]=t,y=q2(o),i=q2(a);if(y!==i)if(H2(y)&&H2(i))for(let _=0;_<t.length;_++){const g=t[_];typeof g=="string"&&(t[_]=parseFloat(g))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let o=0;o<t.length;o++)CD(t[o])&&s.push(o);s.length&&WD(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fc[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(s,o).jump(o,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:o}=this;if(!n||!n.current)return;const a=n.getValue(s);a&&a.jump(this.measuredOrigin,!1);const y=o.length-1,i=o[y];o[y]=Fc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([_,g])=>{n.getValue(_).set(g)}),this.resolveNoneKeyframes()}}const Y2=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Na.test(r)||r==="0")&&!r.startsWith("url("));function $D(r){const t=r[0];if(r.length===1)return!0;for(let n=0;n<r.length;n++)if(r[n]!==t)return!0}function e4(r,t,n,s){const o=r[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const a=r[r.length-1],y=Y2(o,t),i=Y2(a,t);return!y||!i?!1:$D(r)||(n==="spring"||ib(n))&&s}const t4=r=>r!==null;function Jy(r,{repeat:t,repeatType:n="loop"},s){const o=r.filter(t4),a=t&&n!=="loop"&&t%2===1?0:o.length-1;return!a||s===void 0?o[a]:s}const n4=40;class eR{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:y="loop",...i}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=oo.now(),this.options={autoplay:t,delay:n,type:s,repeat:o,repeatDelay:a,repeatType:y,...i},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>n4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ZD(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=oo.now(),this.hasAttemptedResolve=!0;const{name:s,type:o,velocity:a,delay:y,onComplete:i,onUpdate:_,isGenerator:g}=this.options;if(!g&&!e4(t,s,o,a))if(y)this.options.duration=0;else{_&&_(Jy(t,this.options,n)),i&&i(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,n);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ir=(r,t,n)=>r+(t-r)*n;function z0(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(t-r)*6*n:n<1/2?t:n<2/3?r+(t-r)*(2/3-n)*6:r}function r4({hue:r,saturation:t,lightness:n,alpha:s}){r/=360,t/=100,n/=100;let o=0,a=0,y=0;if(!t)o=a=y=n;else{const i=n<.5?n*(1+t):n+t-n*t,_=2*n-i;o=z0(_,i,r+1/3),a=z0(_,i,r),y=z0(_,i,r-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(y*255),alpha:s}}function _y(r,t){return n=>n>0?t:r}const V0=(r,t,n)=>{const s=r*r,o=n*(t*t-s)+s;return o<0?0:Math.sqrt(o)},i4=[z1,kl,fc],s4=r=>i4.find(t=>t.test(r));function Z2(r){const t=s4(r);if(!t)return!1;let n=t.parse(r);return t===fc&&(n=r4(n)),n}const K2=(r,t)=>{const n=Z2(r),s=Z2(t);if(!n||!s)return _y(r,t);const o={...n};return a=>(o.red=V0(n.red,s.red,a),o.green=V0(n.green,s.green,a),o.blue=V0(n.blue,s.blue,a),o.alpha=ir(n.alpha,s.alpha,a),kl.transform(o))},o4=(r,t)=>n=>t(r(n)),mf=(...r)=>r.reduce(o4),W1=new Set(["none","hidden"]);function a4(r,t){return W1.has(r)?n=>n<=0?r:t:n=>n>=1?t:r}function l4(r,t){return n=>ir(r,t,n)}function yb(r){return typeof r=="number"?l4:typeof r=="string"?Kx(r)?_y:ii.test(r)?K2:d4:Array.isArray(r)?tR:typeof r=="object"?ii.test(r)?K2:u4:_y}function tR(r,t){const n=[...r],s=n.length,o=r.map((a,y)=>yb(a)(a,t[y]));return a=>{for(let y=0;y<s;y++)n[y]=o[y](a);return n}}function u4(r,t){const n={...r,...t},s={};for(const o in n)r[o]!==void 0&&t[o]!==void 0&&(s[o]=yb(r[o])(r[o],t[o]));return o=>{for(const a in s)n[a]=s[a](o);return n}}function c4(r,t){var n;const s=[],o={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const y=t.types[a],i=r.indexes[y][o[y]],_=(n=r.values[i])!==null&&n!==void 0?n:0;s[a]=_,o[y]++}return s}const d4=(r,t)=>{const n=Na.createTransformer(t),s=Nh(r),o=Nh(t);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?W1.has(r)&&!o.values.length||W1.has(t)&&!s.values.length?a4(r,t):mf(tR(c4(s,o),o.values),n):_y(r,t)};function nR(r,t,n){return typeof r=="number"&&typeof t=="number"&&typeof n=="number"?ir(r,t,n):yb(r)(r,t)}const h4=5;function rR(r,t,n){const s=Math.max(t-h4,0);return RP(n-r(s),t-s)}const cr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},G0=.001;function f4({duration:r=cr.duration,bounce:t=cr.bounce,velocity:n=cr.velocity,mass:s=cr.mass}){let o,a,y=1-t;y=zo(cr.minDamping,cr.maxDamping,y),r=zo(cr.minDuration,cr.maxDuration,Oo(r)),y<1?(o=g=>{const h=g*y,l=h*r,d=h-n,v=X1(g,y),x=Math.exp(-l);return G0-d/v*x},a=g=>{const l=g*y*r,d=l*n+n,v=Math.pow(y,2)*Math.pow(g,2)*r,x=Math.exp(-l),p=X1(Math.pow(g,2),y);return(-o(g)+G0>0?-1:1)*((d-v)*x)/p}):(o=g=>{const h=Math.exp(-g*r),l=(g-n)*r+1;return-G0+h*l},a=g=>{const h=Math.exp(-g*r),l=(n-g)*(r*r);return h*l});const i=5/r,_=m4(o,a,i);if(r=Io(r),isNaN(_))return{stiffness:cr.stiffness,damping:cr.damping,duration:r};{const g=Math.pow(_,2)*s;return{stiffness:g,damping:y*2*Math.sqrt(s*g),duration:r}}}const p4=12;function m4(r,t,n){let s=n;for(let o=1;o<p4;o++)s=s-r(s)/t(s);return s}function X1(r,t){return r*Math.sqrt(1-t*t)}const y4=["duration","bounce"],g4=["stiffness","damping","mass"];function J2(r,t){return t.some(n=>r[n]!==void 0)}function v4(r){let t={velocity:cr.velocity,stiffness:cr.stiffness,damping:cr.damping,mass:cr.mass,isResolvedFromDuration:!1,...r};if(!J2(r,g4)&&J2(r,y4))if(r.visualDuration){const n=r.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,a=2*zo(.05,1,1-(r.bounce||0))*Math.sqrt(o);t={...t,mass:cr.mass,stiffness:o,damping:a}}else{const n=f4(r);t={...t,...n,mass:cr.mass},t.isResolvedFromDuration=!0}return t}function iR(r=cr.visualDuration,t=cr.bounce){const n=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:s,restDelta:o}=n;const a=n.keyframes[0],y=n.keyframes[n.keyframes.length-1],i={done:!1,value:a},{stiffness:_,damping:g,mass:h,duration:l,velocity:d,isResolvedFromDuration:v}=v4({...n,velocity:-Oo(n.velocity||0)}),x=d||0,p=g/(2*Math.sqrt(_*h)),f=y-a,u=Oo(Math.sqrt(_/h)),c=Math.abs(f)<5;s||(s=c?cr.restSpeed.granular:cr.restSpeed.default),o||(o=c?cr.restDelta.granular:cr.restDelta.default);let m;if(p<1){const S=X1(u,p);m=w=>{const M=Math.exp(-p*u*w);return y-M*((x+p*u*f)/S*Math.sin(S*w)+f*Math.cos(S*w))}}else if(p===1)m=S=>y-Math.exp(-u*S)*(f+(x+u*f)*S);else{const S=u*Math.sqrt(p*p-1);m=w=>{const M=Math.exp(-p*u*w),A=Math.min(S*w,300);return y-M*((x+p*u*f)*Math.sinh(A)+S*f*Math.cosh(A))/S}}const b={calculatedDuration:v&&l||null,next:S=>{const w=m(S);if(v)i.done=S>=l;else{let M=0;p<1&&(M=S===0?Io(x):rR(m,S,w));const A=Math.abs(M)<=s,P=Math.abs(y-w)<=o;i.done=A&&P}return i.value=i.done?y:w,i},toString:()=>{const S=Math.min(wP(b),U1),w=SP(M=>b.next(S*M).value,S,30);return S+"ms "+w}};return b}function Q2({keyframes:r,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:y,min:i,max:_,restDelta:g=.5,restSpeed:h}){const l=r[0],d={done:!1,value:l},v=A=>i!==void 0&&A<i||_!==void 0&&A>_,x=A=>i===void 0?_:_===void 0||Math.abs(i-A)<Math.abs(_-A)?i:_;let p=n*t;const f=l+p,u=y===void 0?f:y(f);u!==f&&(p=u-l);const c=A=>-p*Math.exp(-A/s),m=A=>u+c(A),b=A=>{const P=c(A),R=m(A);d.done=Math.abs(P)<=g,d.value=d.done?u:R};let S,w;const M=A=>{v(d.value)&&(S=A,w=iR({keyframes:[d.value,x(d.value)],velocity:rR(m,A,d.value),damping:o,stiffness:a,restDelta:g,restSpeed:h}))};return M(0),{calculatedDuration:null,next:A=>{let P=!1;return!w&&S===void 0&&(P=!0,b(A),M(A)),S!==void 0&&A>=S?w.next(A-S):(!P&&b(A),d)}}}const _4=pf(.42,0,1,1),x4=pf(0,0,.58,1),sR=pf(.42,0,.58,1),b4=r=>Array.isArray(r)&&typeof r[0]!="number",$2={linear:Ji,easeIn:_4,easeInOut:sR,easeOut:x4,circIn:db,circInOut:FP,circOut:UP,backIn:cb,backInOut:DP,backOut:OP,anticipate:NP},eM=r=>{if(sb(r)){D1(r.length===4);const[t,n,s,o]=r;return pf(t,n,s,o)}else if(typeof r=="string")return D1($2[r]!==void 0),$2[r];return r};function w4(r,t,n){const s=[],o=n||nR,a=r.length-1;for(let y=0;y<a;y++){let i=o(r[y],r[y+1]);if(t){const _=Array.isArray(t)?t[y]||Ji:t;i=mf(_,i)}s.push(i)}return s}function S4(r,t,{clamp:n=!0,ease:s,mixer:o}={}){const a=r.length;if(D1(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const y=r[0]===r[1];r[0]>r[a-1]&&(r=[...r].reverse(),t=[...t].reverse());const i=w4(t,s,o),_=i.length,g=h=>{if(y&&h<r[0])return t[0];let l=0;if(_>1)for(;l<r.length-2&&!(h<r[l+1]);l++);const d=Nc(r[l],r[l+1],h);return i[l](d)};return n?h=>g(zo(r[0],r[a-1],h)):g}function M4(r,t){const n=r[r.length-1];for(let s=1;s<=t;s++){const o=Nc(0,t,s);r.push(ir(n,1,o))}}function E4(r){const t=[0];return M4(t,r.length-1),t}function T4(r,t){return r.map(n=>n*t)}function A4(r,t){return r.map(()=>t||sR).splice(0,r.length-1)}function xy({duration:r=300,keyframes:t,times:n,ease:s="easeInOut"}){const o=b4(s)?s.map(eM):eM(s),a={done:!1,value:t[0]},y=T4(n&&n.length===t.length?n:E4(t),r),i=S4(y,t,{ease:Array.isArray(o)?o:A4(t,o)});return{calculatedDuration:r,next:_=>(a.value=i(_),a.done=_>=r,a)}}const C4=r=>{const t=({timestamp:n})=>r(n);return{start:()=>Kn.update(t,!0),stop:()=>Da(t),now:()=>Xr.isProcessing?Xr.timestamp:oo.now()}},P4={decay:Q2,inertia:Q2,tween:xy,keyframes:xy,spring:iR},R4=r=>r/100;class gb extends eR{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:_}=this.options;_&&_()};const{name:n,motionValue:s,element:o,keyframes:a}=this.options,y=(o==null?void 0:o.KeyframeResolver)||mb,i=(_,g)=>this.onKeyframesResolved(_,g);this.resolver=new y(a,i,n,s,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a,velocity:y=0}=this.options,i=ib(n)?n:P4[n]||xy;let _,g;i!==xy&&typeof t[0]!="number"&&(_=mf(R4,nR(t[0],t[1])),t=[0,100]);const h=i({...this.options,keyframes:t});a==="mirror"&&(g=i({...this.options,keyframes:[...t].reverse(),velocity:-y})),h.calculatedDuration===null&&(h.calculatedDuration=wP(h));const{calculatedDuration:l}=h,d=l+o,v=d*(s+1)-o;return{generator:h,mirroredGenerator:g,mapPercentToKeyframes:_,calculatedDuration:l,resolvedDuration:d,totalDuration:v}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:o,generator:a,mirroredGenerator:y,mapPercentToKeyframes:i,keyframes:_,calculatedDuration:g,totalDuration:h,resolvedDuration:l}=s;if(this.startTime===null)return a.next(0);const{delay:d,repeat:v,repeatType:x,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const u=this.currentTime-d*(this.speed>=0?1:-1),c=this.speed>=0?u<0:u>h;this.currentTime=Math.max(u,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let m=this.currentTime,b=a;if(v){const A=Math.min(this.currentTime,h)/l;let P=Math.floor(A),R=A%1;!R&&A>=1&&(R=1),R===1&&P--,P=Math.min(P,v+1),!!(P%2)&&(x==="reverse"?(R=1-R,p&&(R-=p/l)):x==="mirror"&&(b=y)),m=zo(0,1,R)*l}const S=c?{done:!1,value:_[0]}:b.next(m);i&&(S.value=i(S.value));let{done:w}=S;!c&&g!==null&&(w=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return M&&o!==void 0&&(S.value=Jy(_,this.options,o)),f&&f(S.value),M&&this.finish(),S}get duration(){const{resolved:t}=this;return t?Oo(t.calculatedDuration):0}get time(){return Oo(this.currentTime)}set time(t){t=Io(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Oo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=C4,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const j4=new Set(["opacity","clipPath","filter","transform"]);function L4(r,t,n,{delay:s=0,duration:o=300,repeat:a=0,repeatType:y="loop",ease:i="easeInOut",times:_}={}){const g={[t]:n};_&&(g.offset=_);const h=EP(i,o);return Array.isArray(h)&&(g.easing=h),r.animate(g,{delay:s,duration:o,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:y==="reverse"?"alternate":"normal"})}const k4=Gx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),by=10,I4=2e4;function O4(r){return ib(r.type)||r.type==="spring"||!MP(r.ease)}function D4(r,t){const n=new gb({...t,keyframes:r,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:r[0]};const o=[];let a=0;for(;!s.done&&a<I4;)s=n.sample(a),o.push(s.value),a+=by;return{times:void 0,keyframes:o,duration:a-by,ease:"linear"}}const oR={anticipate:NP,backInOut:DP,circInOut:FP};function N4(r){return r in oR}class tM extends eR{constructor(t){super(t);const{name:n,motionValue:s,element:o,keyframes:a}=this.options;this.resolver=new $P(a,(y,i)=>this.onKeyframesResolved(y,i),n,s,o),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:s=300,times:o,ease:a,type:y,motionValue:i,name:_,startTime:g}=this.options;if(!i.owner||!i.owner.current)return!1;if(typeof a=="string"&&vy()&&N4(a)&&(a=oR[a]),O4(this.options)){const{onComplete:l,onUpdate:d,motionValue:v,element:x,...p}=this.options,f=D4(t,p);t=f.keyframes,t.length===1&&(t[1]=t[0]),s=f.duration,o=f.times,a=f.ease,y="keyframes"}const h=L4(i.owner.current,_,t,{...this.options,duration:s,times:o,ease:a});return h.startTime=g??this.calcStartTime(),this.pendingTimeline?(U2(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:l}=this.options;i.set(Jy(t,this.options,n)),l&&l(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:o,type:y,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Oo(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Oo(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Io(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Ji;const{animation:s}=n;U2(s,t)}return Ji}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:o,type:a,ease:y,times:i}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:g,onUpdate:h,onComplete:l,element:d,...v}=this.options,x=new gb({...v,keyframes:s,duration:o,type:a,ease:y,times:i,isGenerator:!0}),p=Io(this.time);g.setWithVelocity(x.sample(p-by).value,x.sample(p).value,by)}const{onStop:_}=this.options;_&&_(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:o,repeatType:a,damping:y,type:i}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:g}=n.owner.getProps();return k4()&&s&&j4.has(s)&&!_&&!g&&!o&&a!=="mirror"&&y!==0&&i!=="inertia"}}const U4={type:"spring",stiffness:500,damping:25,restSpeed:10},F4=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),B4={type:"keyframes",duration:.8},z4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V4=(r,{keyframes:t})=>t.length>2?B4:ru.has(r)?r.startsWith("scale")?F4(t[1]):U4:z4;function G4({when:r,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:o,repeat:a,repeatType:y,repeatDelay:i,from:_,elapsed:g,...h}){return!!Object.keys(h).length}const vb=(r,t,n,s={},o,a)=>y=>{const i=rb(s,r)||{},_=i.delay||s.delay||0;let{elapsed:g=0}=s;g=g-Io(_);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...i,delay:-g,onUpdate:d=>{t.set(d),i.onUpdate&&i.onUpdate(d)},onComplete:()=>{y(),i.onComplete&&i.onComplete()},name:r,motionValue:t,element:a?void 0:o};G4(i)||(h={...h,...V4(r,h)}),h.duration&&(h.duration=Io(h.duration)),h.repeatDelay&&(h.repeatDelay=Io(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let l=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(l=!0)),l&&!a&&t.get()!==void 0){const d=Jy(h.keyframes,i);if(d!==void 0)return Kn.update(()=>{h.onUpdate(d),h.onComplete()}),new uD([])}return!a&&tM.supports(h)?new tM(h):new gb(h)};function H4({protectedKeys:r,needsAnimating:t},n){const s=r.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function aR(r,t,{delay:n=0,transitionOverride:s,type:o}={}){var a;let{transition:y=r.getDefaultTransition(),transitionEnd:i,..._}=t;s&&(y=s);const g=[],h=o&&r.animationState&&r.animationState.getState()[o];for(const l in _){const d=r.getValue(l,(a=r.latestValues[l])!==null&&a!==void 0?a:null),v=_[l];if(v===void 0||h&&H4(h,l))continue;const x={delay:n,...rb(y||{},l)};let p=!1;if(window.MotionHandoffAnimation){const u=jP(r);if(u){const c=window.MotionHandoffAnimation(u,l,Kn);c!==null&&(x.startTime=c,p=!0)}}B1(r,l),d.start(vb(l,d,v,r.shouldReduceMotion&&PP.has(l)?{type:!1}:x,r,p));const f=d.animation;f&&g.push(f)}return i&&Promise.all(g).then(()=>{Kn.update(()=>{i&&SD(r,i)})}),g}function q1(r,t,n={}){var s;const o=Ky(r,t,n.type==="exit"?(s=r.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=r.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(a=n.transitionOverride);const y=o?()=>Promise.all(aR(r,o,n)):()=>Promise.resolve(),i=r.variantChildren&&r.variantChildren.size?(g=0)=>{const{delayChildren:h=0,staggerChildren:l,staggerDirection:d}=a;return W4(r,t,h+g,l,d,n)}:()=>Promise.resolve(),{when:_}=a;if(_){const[g,h]=_==="beforeChildren"?[y,i]:[i,y];return g().then(()=>h())}else return Promise.all([y(),i(n.delay)])}function W4(r,t,n=0,s=0,o=1,a){const y=[],i=(r.variantChildren.size-1)*s,_=o===1?(g=0)=>g*s:(g=0)=>i-g*s;return Array.from(r.variantChildren).sort(X4).forEach((g,h)=>{g.notify("AnimationStart",t),y.push(q1(g,t,{...a,delay:n+_(h)}).then(()=>g.notify("AnimationComplete",t)))}),Promise.all(y)}function X4(r,t){return r.sortNodePosition(t)}function q4(r,t,n={}){r.notify("AnimationStart",t);let s;if(Array.isArray(t)){const o=t.map(a=>q1(r,a,n));s=Promise.all(o)}else if(typeof t=="string")s=q1(r,t,n);else{const o=typeof t=="function"?Ky(r,t,n.custom):t;s=Promise.all(aR(r,o,n))}return s.then(()=>{r.notify("AnimationComplete",t)})}const Y4=Wx.length;function lR(r){if(!r)return;if(!r.isControllingVariants){const n=r.parent?lR(r.parent)||{}:{};return r.props.initial!==void 0&&(n.initial=r.props.initial),n}const t={};for(let n=0;n<Y4;n++){const s=Wx[n],o=r.props[s];(Ih(o)||o===!1)&&(t[s]=o)}return t}const Z4=[...Hx].reverse(),K4=Hx.length;function J4(r){return t=>Promise.all(t.map(({animation:n,options:s})=>q4(r,n,s)))}function Q4(r){let t=J4(r),n=nM(),s=!0;const o=_=>(g,h)=>{var l;const d=Ky(r,h,_==="exit"?(l=r.presenceContext)===null||l===void 0?void 0:l.custom:void 0);if(d){const{transition:v,transitionEnd:x,...p}=d;g={...g,...p,...x}}return g};function a(_){t=_(r)}function y(_){const{props:g}=r,h=lR(r.parent)||{},l=[],d=new Set;let v={},x=1/0;for(let f=0;f<K4;f++){const u=Z4[f],c=n[u],m=g[u]!==void 0?g[u]:h[u],b=Ih(m),S=u===_?c.isActive:null;S===!1&&(x=f);let w=m===h[u]&&m!==g[u]&&b;if(w&&s&&r.manuallyAnimateOnMount&&(w=!1),c.protectedKeys={...v},!c.isActive&&S===null||!m&&!c.prevProp||Yy(m)||typeof m=="boolean")continue;const M=$4(c.prevProp,m);let A=M||u===_&&c.isActive&&!w&&b||f>x&&b,P=!1;const R=Array.isArray(m)?m:[m];let k=R.reduce(o(u),{});S===!1&&(k={});const{prevResolvedValues:L={}}=c,B={...L,...k},I=G=>{A=!0,d.has(G)&&(P=!0,d.delete(G)),c.needsAnimating[G]=!0;const N=r.getValue(G);N&&(N.liveStyle=!1)};for(const G in B){const N=k[G],O=L[G];if(v.hasOwnProperty(G))continue;let H=!1;N1(N)&&N1(O)?H=!bP(N,O):H=N!==O,H?N!=null?I(G):d.add(G):N!==void 0&&d.has(G)?I(G):c.protectedKeys[G]=!0}c.prevProp=m,c.prevResolvedValues=k,c.isActive&&(v={...v,...k}),s&&r.blockInitialAnimation&&(A=!1),A&&(!(w&&M)||P)&&l.push(...R.map(G=>({animation:G,options:{type:u}})))}if(d.size){const f={};d.forEach(u=>{const c=r.getBaseTarget(u),m=r.getValue(u);m&&(m.liveStyle=!0),f[u]=c??null}),l.push({animation:f})}let p=!!l.length;return s&&(g.initial===!1||g.initial===g.animate)&&!r.manuallyAnimateOnMount&&(p=!1),s=!1,p?t(l):Promise.resolve()}function i(_,g){var h;if(n[_].isActive===g)return Promise.resolve();(h=r.variantChildren)===null||h===void 0||h.forEach(d=>{var v;return(v=d.animationState)===null||v===void 0?void 0:v.setActive(_,g)}),n[_].isActive=g;const l=y(_);for(const d in n)n[d].protectedKeys={};return l}return{animateChanges:y,setActive:i,setAnimateFunction:a,getState:()=>n,reset:()=>{n=nM(),s=!0}}}function $4(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!bP(t,r):!1}function dl(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nM(){return{animate:dl(!0),whileInView:dl(),whileHover:dl(),whileTap:dl(),whileDrag:dl(),whileFocus:dl(),exit:dl()}}class Ga{constructor(t){this.isMounted=!1,this.node=t}update(){}}class eN extends Ga{constructor(t){super(t),t.animationState||(t.animationState=Q4(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Yy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let tN=0;class nN extends Ga{constructor(){super(...arguments),this.id=tN++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const rN={animation:{Feature:eN},exit:{Feature:nN}};function Uh(r,t,n,s={passive:!0}){return r.addEventListener(t,n,s),()=>r.removeEventListener(t,n)}function yf(r){return{point:{x:r.pageX,y:r.pageY}}}const iN=r=>t=>ob(t)&&r(t,yf(t));function uh(r,t,n,s){return Uh(r,t,iN(n),s)}const rM=(r,t)=>Math.abs(r-t);function sN(r,t){const n=rM(r.x,t.x),s=rM(r.y,t.y);return Math.sqrt(n**2+s**2)}class uR{constructor(t,n,{transformPagePoint:s,contextWindow:o,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const l=W0(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,v=sN(l.offset,{x:0,y:0})>=3;if(!d&&!v)return;const{point:x}=l,{timestamp:p}=Xr;this.history.push({...x,timestamp:p});const{onStart:f,onMove:u}=this.handlers;d||(f&&f(this.lastMoveEvent,l),this.startEvent=this.lastMoveEvent),u&&u(this.lastMoveEvent,l)},this.handlePointerMove=(l,d)=>{this.lastMoveEvent=l,this.lastMoveEventInfo=H0(d,this.transformPagePoint),Kn.update(this.updatePoint,!0)},this.handlePointerUp=(l,d)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=W0(l.type==="pointercancel"?this.lastMoveEventInfo:H0(d,this.transformPagePoint),this.history);this.startEvent&&v&&v(l,f),x&&x(l,f)},!ob(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=o||window;const y=yf(t),i=H0(y,this.transformPagePoint),{point:_}=i,{timestamp:g}=Xr;this.history=[{..._,timestamp:g}];const{onSessionStart:h}=n;h&&h(t,W0(i,this.history)),this.removeListeners=mf(uh(this.contextWindow,"pointermove",this.handlePointerMove),uh(this.contextWindow,"pointerup",this.handlePointerUp),uh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Da(this.updatePoint)}}function H0(r,t){return t?{point:t(r.point)}:r}function iM(r,t){return{x:r.x-t.x,y:r.y-t.y}}function W0({point:r},t){return{point:r,delta:iM(r,cR(t)),offset:iM(r,oN(t)),velocity:aN(t,.1)}}function oN(r){return r[0]}function cR(r){return r[r.length-1]}function aN(r,t){if(r.length<2)return{x:0,y:0};let n=r.length-1,s=null;const o=cR(r);for(;n>=0&&(s=r[n],!(o.timestamp-s.timestamp>Io(t)));)n--;if(!s)return{x:0,y:0};const a=Oo(o.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const y={x:(o.x-s.x)/a,y:(o.y-s.y)/a};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}const dR=1e-4,lN=1-dR,uN=1+dR,hR=.01,cN=0-hR,dN=0+hR;function es(r){return r.max-r.min}function hN(r,t,n){return Math.abs(r-t)<=n}function sM(r,t,n,s=.5){r.origin=s,r.originPoint=ir(t.min,t.max,r.origin),r.scale=es(n)/es(t),r.translate=ir(n.min,n.max,r.origin)-r.originPoint,(r.scale>=lN&&r.scale<=uN||isNaN(r.scale))&&(r.scale=1),(r.translate>=cN&&r.translate<=dN||isNaN(r.translate))&&(r.translate=0)}function ch(r,t,n,s){sM(r.x,t.x,n.x,s?s.originX:void 0),sM(r.y,t.y,n.y,s?s.originY:void 0)}function oM(r,t,n){r.min=n.min+t.min,r.max=r.min+es(t)}function fN(r,t,n){oM(r.x,t.x,n.x),oM(r.y,t.y,n.y)}function aM(r,t,n){r.min=t.min-n.min,r.max=r.min+es(t)}function dh(r,t,n){aM(r.x,t.x,n.x),aM(r.y,t.y,n.y)}function pN(r,{min:t,max:n},s){return t!==void 0&&r<t?r=s?ir(t,r,s.min):Math.max(r,t):n!==void 0&&r>n&&(r=s?ir(n,r,s.max):Math.min(r,n)),r}function lM(r,t,n){return{min:t!==void 0?r.min+t:void 0,max:n!==void 0?r.max+n-(r.max-r.min):void 0}}function mN(r,{top:t,left:n,bottom:s,right:o}){return{x:lM(r.x,n,o),y:lM(r.y,t,s)}}function uM(r,t){let n=t.min-r.min,s=t.max-r.max;return t.max-t.min<r.max-r.min&&([n,s]=[s,n]),{min:n,max:s}}function yN(r,t){return{x:uM(r.x,t.x),y:uM(r.y,t.y)}}function gN(r,t){let n=.5;const s=es(r),o=es(t);return o>s?n=Nc(t.min,t.max-s,r.min):s>o&&(n=Nc(r.min,r.max-o,t.min)),zo(0,1,n)}function vN(r,t){const n={};return t.min!==void 0&&(n.min=t.min-r.min),t.max!==void 0&&(n.max=t.max-r.min),n}const Y1=.35;function _N(r=Y1){return r===!1?r=0:r===!0&&(r=Y1),{x:cM(r,"left","right"),y:cM(r,"top","bottom")}}function cM(r,t,n){return{min:dM(r,t),max:dM(r,n)}}function dM(r,t){return typeof r=="number"?r:r[t]||0}const hM=()=>({translate:0,scale:1,origin:0,originPoint:0}),pc=()=>({x:hM(),y:hM()}),fM=()=>({min:0,max:0}),gr=()=>({x:fM(),y:fM()});function fs(r){return[r("x"),r("y")]}function fR({top:r,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:r,max:s}}}function xN({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function bN(r,t){if(!t)return r;const n=t({x:r.left,y:r.top}),s=t({x:r.right,y:r.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function X0(r){return r===void 0||r===1}function Z1({scale:r,scaleX:t,scaleY:n}){return!X0(r)||!X0(t)||!X0(n)}function Ml(r){return Z1(r)||pR(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function pR(r){return pM(r.x)||pM(r.y)}function pM(r){return r&&r!=="0%"}function wy(r,t,n){const s=r-n,o=t*s;return n+o}function mM(r,t,n,s,o){return o!==void 0&&(r=wy(r,o,s)),wy(r,n,s)+t}function K1(r,t=0,n=1,s,o){r.min=mM(r.min,t,n,s,o),r.max=mM(r.max,t,n,s,o)}function mR(r,{x:t,y:n}){K1(r.x,t.translate,t.scale,t.originPoint),K1(r.y,n.translate,n.scale,n.originPoint)}const yM=.999999999999,gM=1.0000000000001;function wN(r,t,n,s=!1){const o=n.length;if(!o)return;t.x=t.y=1;let a,y;for(let i=0;i<o;i++){a=n[i],y=a.projectionDelta;const{visualElement:_}=a.options;_&&_.props.style&&_.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&yc(r,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),y&&(t.x*=y.x.scale,t.y*=y.y.scale,mR(r,y)),s&&Ml(a.latestValues)&&yc(r,a.latestValues))}t.x<gM&&t.x>yM&&(t.x=1),t.y<gM&&t.y>yM&&(t.y=1)}function mc(r,t){r.min=r.min+t,r.max=r.max+t}function vM(r,t,n,s,o=.5){const a=ir(r.min,r.max,o);K1(r,t,n,a,s)}function yc(r,t){vM(r.x,t.x,t.scaleX,t.scale,t.originX),vM(r.y,t.y,t.scaleY,t.scale,t.originY)}function yR(r,t){return fR(bN(r.getBoundingClientRect(),t))}function SN(r,t,n){const s=yR(r,n),{scroll:o}=t;return o&&(mc(s.x,o.offset.x),mc(s.y,o.offset.y)),s}const gR=({current:r})=>r?r.ownerDocument.defaultView:null,MN=new WeakMap;class EN{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=h=>{const{dragSnapToOrigin:l}=this.getProps();l?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yf(h).point)},a=(h,l)=>{const{drag:d,dragPropagation:v,onDragStart:x}=this.getProps();if(d&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vD(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fs(f=>{let u=this.getAxisMotionValue(f).get()||0;if(so.test(u)){const{projection:c}=this.visualElement;if(c&&c.layout){const m=c.layout.layoutBox[f];m&&(u=es(m)*(parseFloat(u)/100))}}this.originPoint[f]=u}),x&&Kn.postRender(()=>x(h,l)),B1(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},y=(h,l)=>{const{dragPropagation:d,dragDirectionLock:v,onDirectionLock:x,onDrag:p}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:f}=l;if(v&&this.currentDirection===null){this.currentDirection=TN(f),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",l.point,f),this.updateAxis("y",l.point,f),this.visualElement.render(),p&&p(h,l)},i=(h,l)=>this.stop(h,l),_=()=>fs(h=>{var l;return this.getAnimationState(h)==="paused"&&((l=this.getAxisMotionValue(h).animation)===null||l===void 0?void 0:l.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new uR(t,{onSessionStart:o,onStart:a,onMove:y,onSessionEnd:i,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:gR(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Kn.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:o}=this.getProps();if(!s||!Pp(t,o,this.currentDirection))return;const a=this.getAxisMotionValue(t);let y=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(y=pN(y,this.constraints[t],this.elastic[t])),a.set(y)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&hc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=mN(o.layoutBox,n):this.constraints=!1,this.elastic=_N(s),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&fs(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=vN(o.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!hc(t))return!1;const s=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=SN(s,o.root,this.visualElement.getTransformPagePoint());let y=yN(o.layout.layoutBox,a);if(n){const i=n(xN(y));this.hasMutatedConstraints=!!i,i&&(y=fR(i))}return y}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:o,dragTransition:a,dragSnapToOrigin:y,onDragTransitionEnd:i}=this.getProps(),_=this.constraints||{},g=fs(h=>{if(!Pp(h,n,this.currentDirection))return;let l=_&&_[h]||{};y&&(l={min:0,max:0});const d=o?200:1e6,v=o?40:1e7,x={type:"inertia",velocity:s?t[h]:0,bounceStiffness:d,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...l};return this.startAxisValueAnimation(h,x)});return Promise.all(g).then(i)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return B1(this.visualElement,t),s.start(vb(t,s,0,n,this.visualElement,!1))}stopAnimation(){fs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),o=s[n];return o||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){fs(n=>{const{drag:s}=this.getProps();if(!Pp(n,s,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(n);if(o&&o.layout){const{min:y,max:i}=o.layout.layoutBox[n];a.set(t[n]-ir(y,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!hc(n)||!s||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};fs(y=>{const i=this.getAxisMotionValue(y);if(i&&this.constraints!==!1){const _=i.get();o[y]=gN({min:_,max:_},this.constraints[y])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),fs(y=>{if(!Pp(y,t,null))return;const i=this.getAxisMotionValue(y),{min:_,max:g}=this.constraints[y];i.set(ir(_,g,o[y]))})}addListeners(){if(!this.visualElement.current)return;MN.set(this.visualElement,this);const t=this.visualElement.current,n=uh(t,"pointerdown",_=>{const{drag:g,dragListener:h=!0}=this.getProps();g&&h&&this.start(_)}),s=()=>{const{dragConstraints:_}=this.getProps();hc(_)&&_.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Kn.read(s);const y=Uh(window,"resize",()=>this.scalePositionWithinConstraints()),i=o.addEventListener("didUpdate",({delta:_,hasLayoutChanged:g})=>{this.isDragging&&g&&(fs(h=>{const l=this.getAxisMotionValue(h);l&&(this.originPoint[h]+=_[h].translate,l.set(l.get()+_[h].translate))}),this.visualElement.render())});return()=>{y(),n(),a(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:y=Y1,dragMomentum:i=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:o,dragConstraints:a,dragElastic:y,dragMomentum:i}}}function Pp(r,t,n){return(t===!0||t===r)&&(n===null||n===r)}function TN(r,t=10){let n=null;return Math.abs(r.y)>t?n="y":Math.abs(r.x)>t&&(n="x"),n}class AN extends Ga{constructor(t){super(t),this.removeGroupControls=Ji,this.removeListeners=Ji,this.controls=new EN(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ji}unmount(){this.removeGroupControls(),this.removeListeners()}}const _M=r=>(t,n)=>{r&&Kn.postRender(()=>r(t,n))};class CN extends Ga{constructor(){super(...arguments),this.removePointerDownListener=Ji}onPointerDown(t){this.session=new uR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:o}=this.node.getProps();return{onSessionStart:_M(t),onStart:_M(n),onMove:s,onEnd:(a,y)=>{delete this.session,o&&Kn.postRender(()=>o(a,y))}}}mount(){this.removePointerDownListener=uh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Nm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xM(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const jd={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(qt.test(r))r=parseFloat(r);else return r;const n=xM(r,t.target.x),s=xM(r,t.target.y);return`${n}% ${s}%`}},PN={correct:(r,{treeScale:t,projectionDelta:n})=>{const s=r,o=Na.parse(r);if(o.length>5)return s;const a=Na.createTransformer(r),y=typeof o[0]!="number"?1:0,i=n.x.scale*t.x,_=n.y.scale*t.y;o[0+y]/=i,o[1+y]/=_;const g=ir(i,_,.5);return typeof o[2+y]=="number"&&(o[2+y]/=g),typeof o[3+y]=="number"&&(o[3+y]/=g),a(o)}};class RN extends at.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:o}=this.props,{projection:a}=t;JO(jN),a&&(n.group&&n.group.add(a),s&&s.register&&o&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Nm.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:o,isPresent:a}=this.props,y=s.projection;return y&&(y.isPresent=a,o||t.layoutDependency!==n||n===void 0?y.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?y.promote():y.relegate()||Kn.postRender(()=>{const i=y.getStack();(!i||!i.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),s&&s.deregister&&s.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function vR(r){const[t,n]=tP(),s=at.useContext(Fx);return gt.jsx(RN,{...r,layoutGroup:s,switchLayoutGroup:at.useContext(lP),isPresent:t,safeToRemove:n})}const jN={borderRadius:{...jd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jd,borderTopRightRadius:jd,borderBottomLeftRadius:jd,borderBottomRightRadius:jd,boxShadow:PN};function LN(r,t,n){const s=ai(r)?r:Dh(r);return s.start(vb("",s,t,n)),s.animation}function kN(r){return r instanceof SVGElement&&r.tagName!=="svg"}const IN=(r,t)=>r.depth-t.depth;class ON{constructor(){this.children=[],this.isDirty=!1}add(t){ab(this.children,t),this.isDirty=!0}remove(t){lb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(IN),this.isDirty=!1,this.children.forEach(t)}}function DN(r,t){const n=oo.now(),s=({timestamp:o})=>{const a=o-n;a>=t&&(Da(s),r(a-t))};return Kn.read(s,!0),()=>Da(s)}const _R=["TopLeft","TopRight","BottomLeft","BottomRight"],NN=_R.length,bM=r=>typeof r=="string"?parseFloat(r):r,wM=r=>typeof r=="number"||qt.test(r);function UN(r,t,n,s,o,a){o?(r.opacity=ir(0,n.opacity!==void 0?n.opacity:1,FN(s)),r.opacityExit=ir(t.opacity!==void 0?t.opacity:1,0,BN(s))):a&&(r.opacity=ir(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let y=0;y<NN;y++){const i=`border${_R[y]}Radius`;let _=SM(t,i),g=SM(n,i);if(_===void 0&&g===void 0)continue;_||(_=0),g||(g=0),_===0||g===0||wM(_)===wM(g)?(r[i]=Math.max(ir(bM(_),bM(g),s),0),(so.test(g)||so.test(_))&&(r[i]+="%")):r[i]=g}(t.rotate||n.rotate)&&(r.rotate=ir(t.rotate||0,n.rotate||0,s))}function SM(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const FN=xR(0,.5,UP),BN=xR(.5,.95,Ji);function xR(r,t,n){return s=>s<r?0:s>t?1:n(Nc(r,t,s))}function MM(r,t){r.min=t.min,r.max=t.max}function ds(r,t){MM(r.x,t.x),MM(r.y,t.y)}function EM(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}function TM(r,t,n,s,o){return r-=t,r=wy(r,1/n,s),o!==void 0&&(r=wy(r,1/o,s)),r}function zN(r,t=0,n=1,s=.5,o,a=r,y=r){if(so.test(t)&&(t=parseFloat(t),t=ir(y.min,y.max,t/100)-y.min),typeof t!="number")return;let i=ir(a.min,a.max,s);r===a&&(i-=t),r.min=TM(r.min,t,n,i,o),r.max=TM(r.max,t,n,i,o)}function AM(r,t,[n,s,o],a,y){zN(r,t[n],t[s],t[o],t.scale,a,y)}const VN=["x","scaleX","originX"],GN=["y","scaleY","originY"];function CM(r,t,n,s){AM(r.x,t,VN,n?n.x:void 0,s?s.x:void 0),AM(r.y,t,GN,n?n.y:void 0,s?s.y:void 0)}function PM(r){return r.translate===0&&r.scale===1}function bR(r){return PM(r.x)&&PM(r.y)}function RM(r,t){return r.min===t.min&&r.max===t.max}function HN(r,t){return RM(r.x,t.x)&&RM(r.y,t.y)}function jM(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function wR(r,t){return jM(r.x,t.x)&&jM(r.y,t.y)}function LM(r){return es(r.x)/es(r.y)}function kM(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}class WN{constructor(){this.members=[]}add(t){ab(this.members,t),t.scheduleRender()}remove(t){if(lb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let s;for(let o=n;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XN(r,t,n){let s="";const o=r.x.translate/t.x,a=r.y.translate/t.y,y=(n==null?void 0:n.z)||0;if((o||a||y)&&(s=`translate3d(${o}px, ${a}px, ${y}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:g,rotate:h,rotateX:l,rotateY:d,skewX:v,skewY:x}=n;g&&(s=`perspective(${g}px) ${s}`),h&&(s+=`rotate(${h}deg) `),l&&(s+=`rotateX(${l}deg) `),d&&(s+=`rotateY(${d}deg) `),v&&(s+=`skewX(${v}deg) `),x&&(s+=`skewY(${x}deg) `)}const i=r.x.scale*t.x,_=r.y.scale*t.y;return(i!==1||_!==1)&&(s+=`scale(${i}, ${_})`),s||"none"}const El={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Jd=typeof window<"u"&&window.MotionDebug!==void 0,q0=["","X","Y","Z"],qN={visibility:"hidden"},IM=1e3;let YN=0;function Y0(r,t,n,s){const{latestValues:o}=t;o[r]&&(n[r]=o[r],t.setStaticValue(r,0),s&&(s[r]=0))}function SR(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const n=jP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:a}=r.options;window.MotionCancelOptimisedAnimation(n,"transform",Kn,!(o||a))}const{parent:s}=r;s&&!s.hasCheckedOptimisedAppear&&SR(s)}function MR({attachResizeListener:r,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:o}){return class{constructor(y={},i=t==null?void 0:t()){this.id=YN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jd&&(El.totalNodes=El.resolvedTargetDeltas=El.recalculatedProjection=0),this.nodes.forEach(JN),this.nodes.forEach(n5),this.nodes.forEach(r5),this.nodes.forEach(QN),Jd&&window.MotionDebug.record(El)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new ON)}addEventListener(y,i){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new ub),this.eventHandlers.get(y).add(i)}notifyListeners(y,...i){const _=this.eventHandlers.get(y);_&&_.notify(...i)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,i=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=kN(y),this.instance=y;const{layoutId:_,layout:g,visualElement:h}=this.options;if(h&&!h.current&&h.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),i&&(g||_)&&(this.isLayoutDirty=!0),r){let l;const d=()=>this.root.updateBlockedByResize=!1;r(y,()=>{this.root.updateBlockedByResize=!0,l&&l(),l=DN(d,250),Nm.hasAnimatedSinceResize&&(Nm.hasAnimatedSinceResize=!1,this.nodes.forEach(DM))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&h&&(_||g)&&this.addEventListener("didUpdate",({delta:l,hasLayoutChanged:d,hasRelativeTargetChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||h.getDefaultTransition()||l5,{onLayoutAnimationStart:f,onLayoutAnimationComplete:u}=h.getProps(),c=!this.targetLayout||!wR(this.targetLayout,x)||v,m=!d&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||m||d&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(l,m);const b={...rb(p,"layout"),onPlay:f,onComplete:u};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else d||DM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Da(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i5),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const l=this.path[h];l.shouldResetTransform=!0,l.updateScroll("snapshot"),l.options.layoutRoot&&l.willUpdate(!1)}const{layoutId:i,layout:_}=this.options;if(i===void 0&&!_)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(OM);return}this.isUpdating||this.nodes.forEach(e5),this.isUpdating=!1,this.nodes.forEach(t5),this.nodes.forEach(ZN),this.nodes.forEach(KN),this.clearAllSnapshots();const i=oo.now();Xr.delta=zo(0,1e3/60,i-Xr.timestamp),Xr.timestamp=i,Xr.isProcessing=!0,U0.update.process(Xr),U0.preRender.process(Xr),U0.render.process(Xr),Xr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($N),this.sharedNodes.forEach(s5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Kn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Kn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:i}=this.options;i&&i.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let i=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(i=!1),i){const _=s(this.instance);this.scroll={animationId:this.root.animationId,phase:y,isRoot:_,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!o)return;const y=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,i=this.projectionDelta&&!bR(this.projectionDelta),_=this.getTransformTemplate(),g=_?_(this.latestValues,""):void 0,h=g!==this.prevTransformTemplateValue;y&&(i||Ml(this.latestValues)||h)&&(o(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const i=this.measurePageBox();let _=this.removeElementScroll(i);return y&&(_=this.removeTransform(_)),u5(_),{animationId:this.root.animationId,measuredBox:i,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){var y;const{visualElement:i}=this.options;if(!i)return gr();const _=i.measureViewportBox();if(!(((y=this.scroll)===null||y===void 0?void 0:y.wasRoot)||this.path.some(c5))){const{scroll:h}=this.root;h&&(mc(_.x,h.offset.x),mc(_.y,h.offset.y))}return _}removeElementScroll(y){var i;const _=gr();if(ds(_,y),!((i=this.scroll)===null||i===void 0)&&i.wasRoot)return _;for(let g=0;g<this.path.length;g++){const h=this.path[g],{scroll:l,options:d}=h;h!==this.root&&l&&d.layoutScroll&&(l.wasRoot&&ds(_,y),mc(_.x,l.offset.x),mc(_.y,l.offset.y))}return _}applyTransform(y,i=!1){const _=gr();ds(_,y);for(let g=0;g<this.path.length;g++){const h=this.path[g];!i&&h.options.layoutScroll&&h.scroll&&h!==h.root&&yc(_,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ml(h.latestValues)&&yc(_,h.latestValues)}return Ml(this.latestValues)&&yc(_,this.latestValues),_}removeTransform(y){const i=gr();ds(i,y);for(let _=0;_<this.path.length;_++){const g=this.path[_];if(!g.instance||!Ml(g.latestValues))continue;Z1(g.latestValues)&&g.updateSnapshot();const h=gr(),l=g.measurePageBox();ds(h,l),CM(i,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,h)}return Ml(this.latestValues)&&CM(i,this.latestValues),i}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var i;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==_;if(!(y||g&&this.isSharedProjectionDirty||this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:l,layoutId:d}=this.options;if(!(!this.layout||!(l||d))){if(this.resolvedRelativeTargetAt=Xr.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),dh(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),ds(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=gr(),this.targetWithTransforms=gr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ds(this.target,this.layout.layoutBox),mR(this.target,this.targetDelta)):ds(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),dh(this.relativeTargetOrigin,this.target,v.target),ds(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jd&&El.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Z1(this.parent.latestValues)||pR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const i=this.getLead(),_=!!this.resumingFrom||this!==i;let g=!0;if((this.isProjectionDirty||!((y=this.parent)===null||y===void 0)&&y.isProjectionDirty)&&(g=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===Xr.timestamp&&(g=!1),g)return;const{layout:h,layoutId:l}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||l))return;ds(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,v=this.treeScale.y;wN(this.layoutCorrected,this.treeScale,this.path,_),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=gr());const{target:x}=i;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EM(this.prevProjectionDelta.x,this.projectionDelta.x),EM(this.prevProjectionDelta.y,this.projectionDelta.y)),ch(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==v||!kM(this.projectionDelta.x,this.prevProjectionDelta.x)||!kM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Jd&&El.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){var i;if((i=this.options.visualElement)===null||i===void 0||i.scheduleRender(),y){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pc(),this.projectionDelta=pc(),this.projectionDeltaWithTransform=pc()}setAnimationOrigin(y,i=!1){const _=this.snapshot,g=_?_.latestValues:{},h={...this.latestValues},l=pc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!i;const d=gr(),v=_?_.source:void 0,x=this.layout?this.layout.source:void 0,p=v!==x,f=this.getStack(),u=!f||f.members.length<=1,c=!!(p&&!u&&this.options.crossfade===!0&&!this.path.some(a5));this.animationProgress=0;let m;this.mixTargetDelta=b=>{const S=b/1e3;NM(l.x,y.x,S),NM(l.y,y.y,S),this.setTargetDelta(l),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dh(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),o5(this.relativeTarget,this.relativeTargetOrigin,d,S),m&&HN(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=gr()),ds(m,this.relativeTarget)),p&&(this.animationValues=h,UN(h,g,this.latestValues,S,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Da(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Kn.update(()=>{Nm.hasAnimatedSinceResize=!0,this.currentAnimation=LN(0,IM,{...y,onUpdate:i=>{this.mixTargetDelta(i),y.onUpdate&&y.onUpdate(i)},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(IM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:i,target:_,layout:g,latestValues:h}=y;if(!(!i||!_||!g)){if(this!==y&&this.layout&&g&&ER(this.options.animationType,this.layout.layoutBox,g.layoutBox)){_=this.target||gr();const l=es(this.layout.layoutBox.x);_.x.min=y.target.x.min,_.x.max=_.x.min+l;const d=es(this.layout.layoutBox.y);_.y.min=y.target.y.min,_.y.max=_.y.min+d}ds(i,_),yc(i,h),ch(this.projectionDeltaWithTransform,this.layoutCorrected,i,h)}}registerSharedNode(y,i){this.sharedNodes.has(y)||this.sharedNodes.set(y,new WN),this.sharedNodes.get(y).add(i);const g=i.options.initialPromotionConfig;i.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(i):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var y;const{layoutId:i}=this.options;return i?((y=this.getStack())===null||y===void 0?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:i}=this.options;return i?(y=this.getStack())===null||y===void 0?void 0:y.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:i,preserveFollowOpacity:_}={}){const g=this.getStack();g&&g.promote(this,_),y&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetSkewAndRotation(){const{visualElement:y}=this.options;if(!y)return;let i=!1;const{latestValues:_}=y;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(i=!0),!i)return;const g={};_.z&&Y0("z",y,g,this.animationValues);for(let h=0;h<q0.length;h++)Y0(`rotate${q0[h]}`,y,g,this.animationValues),Y0(`skew${q0[h]}`,y,g,this.animationValues);y.render();for(const h in g)y.setStaticValue(h,g[h]),this.animationValues&&(this.animationValues[h]=g[h]);y.scheduleRender()}getProjectionStyles(y){var i,_;if(!this.instance||this.isSVG)return;if(!this.isVisible)return qN;const g={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,g.opacity="",g.pointerEvents=Om(y==null?void 0:y.pointerEvents)||"",g.transform=h?h(this.latestValues,""):"none",g;const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Om(y==null?void 0:y.pointerEvents)||""),this.hasProjected&&!Ml(this.latestValues)&&(p.transform=h?h({},""):"none",this.hasProjected=!1),p}const d=l.animationValues||l.latestValues;this.applyTransformsToTarget(),g.transform=XN(this.projectionDeltaWithTransform,this.treeScale,d),h&&(g.transform=h(d,g.transform));const{x:v,y:x}=this.projectionDelta;g.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,l.animationValues?g.opacity=l===this?(_=(i=d.opacity)!==null&&i!==void 0?i:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:g.opacity=l===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const p in gy){if(d[p]===void 0)continue;const{correct:f,applyTo:u}=gy[p],c=g.transform==="none"?d[p]:f(d[p],l);if(u){const m=u.length;for(let b=0;b<m;b++)g[u[b]]=c}else g[p]=c}return this.options.layoutId&&(g.pointerEvents=l===this?Om(y==null?void 0:y.pointerEvents)||"":"none"),g}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var i;return(i=y.currentAnimation)===null||i===void 0?void 0:i.stop()}),this.root.nodes.forEach(OM),this.root.sharedNodes.clear()}}}function ZN(r){r.updateLayout()}function KN(r){var t;const n=((t=r.resumeFrom)===null||t===void 0?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&n&&r.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=r.layout,{animationType:a}=r.options,y=n.source!==r.layout.source;a==="size"?fs(l=>{const d=y?n.measuredBox[l]:n.layoutBox[l],v=es(d);d.min=s[l].min,d.max=d.min+v}):ER(a,n.layoutBox,s)&&fs(l=>{const d=y?n.measuredBox[l]:n.layoutBox[l],v=es(s[l]);d.max=d.min+v,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[l].max=r.relativeTarget[l].min+v)});const i=pc();ch(i,s,n.layoutBox);const _=pc();y?ch(_,r.applyTransform(o,!0),n.measuredBox):ch(_,s,n.layoutBox);const g=!bR(i);let h=!1;if(!r.resumeFrom){const l=r.getClosestProjectingParent();if(l&&!l.resumeFrom){const{snapshot:d,layout:v}=l;if(d&&v){const x=gr();dh(x,n.layoutBox,d.layoutBox);const p=gr();dh(p,s,v.layoutBox),wR(x,p)||(h=!0),l.options.layoutRoot&&(r.relativeTarget=p,r.relativeTargetOrigin=x,r.relativeParent=l)}}}r.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:_,layoutDelta:i,hasLayoutChanged:g,hasRelativeTargetChanged:h})}else if(r.isLead()){const{onExitComplete:s}=r.options;s&&s()}r.options.transition=void 0}function JN(r){Jd&&El.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function QN(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function $N(r){r.clearSnapshot()}function OM(r){r.clearMeasurements()}function e5(r){r.isLayoutDirty=!1}function t5(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function DM(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function n5(r){r.resolveTargetDelta()}function r5(r){r.calcProjection()}function i5(r){r.resetSkewAndRotation()}function s5(r){r.removeLeadSnapshot()}function NM(r,t,n){r.translate=ir(t.translate,0,n),r.scale=ir(t.scale,1,n),r.origin=t.origin,r.originPoint=t.originPoint}function UM(r,t,n,s){r.min=ir(t.min,n.min,s),r.max=ir(t.max,n.max,s)}function o5(r,t,n,s){UM(r.x,t.x,n.x,s),UM(r.y,t.y,n.y,s)}function a5(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const l5={duration:.45,ease:[.4,0,.1,1]},FM=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),BM=FM("applewebkit/")&&!FM("chrome/")?Math.round:Ji;function zM(r){r.min=BM(r.min),r.max=BM(r.max)}function u5(r){zM(r.x),zM(r.y)}function ER(r,t,n){return r==="position"||r==="preserve-aspect"&&!hN(LM(t),LM(n),.2)}function c5(r){var t;return r!==r.root&&((t=r.scroll)===null||t===void 0?void 0:t.wasRoot)}const d5=MR({attachResizeListener:(r,t)=>Uh(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z0={current:void 0},TR=MR({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!Z0.current){const r=new d5({});r.mount(window),r.setOptions({layoutScroll:!0}),Z0.current=r}return Z0.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),h5={pan:{Feature:CN},drag:{Feature:AN,ProjectionNode:TR,MeasureLayout:vR}};function VM(r,t,n){const{props:s}=r;r.animationState&&s.whileHover&&r.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,a=s[o];a&&Kn.postRender(()=>a(t,yf(t)))}class f5 extends Ga{mount(){const{current:t}=this.node;t&&(this.unmount=fD(t,n=>(VM(this.node,n,"Start"),s=>VM(this.node,s,"End"))))}unmount(){}}class p5 extends Ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mf(Uh(this.node.current,"focus",()=>this.onFocus()),Uh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GM(r,t,n){const{props:s}=r;r.animationState&&s.whileTap&&r.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),a=s[o];a&&Kn.postRender(()=>a(t,yf(t)))}class m5 extends Ga{mount(){const{current:t}=this.node;t&&(this.unmount=gD(t,n=>(GM(this.node,n,"Start"),(s,{success:o})=>GM(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const J1=new WeakMap,K0=new WeakMap,y5=r=>{const t=J1.get(r.target);t&&t(r)},g5=r=>{r.forEach(y5)};function v5({root:r,...t}){const n=r||document;K0.has(n)||K0.set(n,{});const s=K0.get(n),o=JSON.stringify(t);return s[o]||(s[o]=new IntersectionObserver(g5,{root:r,...t})),s[o]}function _5(r,t,n){const s=v5(t);return J1.set(r,n),s.observe(r),()=>{J1.delete(r),s.unobserve(r)}}const x5={some:0,all:1};class b5 extends Ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:o="some",once:a}=t,y={root:n?n.current:void 0,rootMargin:s,threshold:typeof o=="number"?o:x5[o]},i=_=>{const{isIntersecting:g}=_;if(this.isInView===g||(this.isInView=g,a&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:h,onViewportLeave:l}=this.node.getProps(),d=g?h:l;d&&d(_)};return _5(this.node.current,y,i)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(w5(t,n))&&this.startObserver()}unmount(){}}function w5({viewport:r={}},{viewport:t={}}={}){return n=>r[n]!==t[n]}const S5={inView:{Feature:b5},tap:{Feature:m5},focus:{Feature:p5},hover:{Feature:f5}},M5={layout:{ProjectionNode:TR,MeasureLayout:vR}},Q1={current:null},AR={current:!1};function E5(){if(AR.current=!0,!!Vx)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>Q1.current=r.matches;r.addListener(t),t()}else Q1.current=!1}const T5=[...QP,ii,Na],A5=r=>T5.find(JP(r)),HM=new WeakMap;function C5(r,t,n){for(const s in t){const o=t[s],a=n[s];if(ai(o))r.addValue(s,o);else if(ai(a))r.addValue(s,Dh(o,{owner:r}));else if(a!==o)if(r.hasValue(s)){const y=r.getValue(s);y.liveStyle===!0?y.jump(o):y.hasAnimated||y.set(o)}else{const y=r.getStaticValue(s);r.addValue(s,Dh(y!==void 0?y:o,{owner:r}))}}for(const s in n)t[s]===void 0&&r.removeValue(s);return t}const WM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class P5{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:o,blockInitialAnimation:a,visualState:y},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=oo.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Kn.render(this.render,!1,!0))};const{latestValues:_,renderState:g,onUpdate:h}=y;this.onUpdate=h,this.latestValues=_,this.baseTarget={..._},this.initialValues=n.initial?{..._}:{},this.renderState=g,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=i,this.blockInitialAnimation=!!a,this.isControllingVariants=Zy(n),this.isVariantNode=oP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:l,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in d){const x=d[v];_[v]!==void 0&&ai(x)&&x.set(_[v],!1)}}mount(t){this.current=t,HM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),AR.current||E5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Q1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){HM.delete(this.current),this.projection&&this.projection.unmount(),Da(this.notifyUpdate),Da(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=ru.has(t),o=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Kn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let y;window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),a(),y&&y(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Uc){const n=Uc[t];if(!n)continue;const{isEnabled:s,Feature:o}=n;if(!this.features[t]&&o&&s(this.props)&&(this.features[t]=new o(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<WM.length;s++){const o=WM[s];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,y=t[a];y&&(this.propEventSubscriptions[o]=this.on(o,y))}this.prevMotionValues=C5(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Dh(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(ZP(o)||BP(o))?o=parseFloat(o):!A5(o)&&Na.test(n)&&(o=XP(t,n)),this.setBaseTarget(t,ai(o)?o.get():o)),ai(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const y=Zx(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);y&&(o=y[t])}if(s&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ai(a)?a:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ub),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class CR extends P5{constructor(){super(...arguments),this.KeyframeResolver=$P}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ai(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function R5(r){return window.getComputedStyle(r)}class j5 extends CR{constructor(){super(...arguments),this.type="html",this.renderInstance=mP}readValueFromInstance(t,n){if(ru.has(n)){const s=pb(n);return s&&s.default||0}else{const s=R5(t),o=(hP(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return yR(t,n)}build(t,n,s){Qx(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return nb(t,n,s)}}class L5 extends CR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ru.has(n)){const s=pb(n);return s&&s.default||0}return n=yP.has(n)?n:Xx(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return _P(t,n,s)}build(t,n,s){$x(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,o){gP(t,n,s,o)}mount(t){this.isSVGTag=tb(t.tagName),super.mount(t)}}const k5=(r,t)=>Yx(r)?new L5(t):new j5(t,{allowProjection:r!==at.Fragment}),I5=oD({...rN,...S5,...h5,...M5},k5),_a=bO(I5);function O5({onComplete:r}){const[t,n]=at.useState(!0);return at.useEffect(()=>{const s=setTimeout(()=>{n(!1),setTimeout(r,1e3)},3e3);return()=>clearTimeout(s)},[r]),gt.jsx(fO,{children:t&&gt.jsx(_a.div,{initial:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:gt.jsxs("div",{className:"text-center",children:[gt.jsx(_a.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1},className:"text-white font-orbitron text-4xl md:text-6xl mb-4",children:"Welcome to"}),gt.jsx(_a.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.5},className:"text-white font-orbitron text-3xl md:text-5xl",children:"Jains Technology Solutions"})]})})})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),iu=(r,t)=>{const n=at.forwardRef(({color:s="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:y,className:i="",children:_,...g},h)=>at.createElement("svg",{ref:h,...D5,width:o,height:o,stroke:s,strokeWidth:y?Number(a)*24/Number(o):a,className:["lucide",`lucide-${N5(r)}`,i].join(" "),...g},[...t.map(([l,d])=>at.createElement(l,d)),...Array.isArray(_)?_:[_]]));return n.displayName=`${r}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=iu("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=iu("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=iu("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=iu("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=iu("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=iu("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=iu("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function W5(){const[r,t]=at.useState(!1),n=[{label:"Home",href:"#home"},{label:"Services",href:"#services"},{label:"Achievements",href:"#achievements"},{label:"About",href:"#about"},{label:"Contact",href:"#contact"}];return gt.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-50 backdrop-blur-sm",children:[gt.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:gt.jsxs("div",{className:"flex items-center justify-between h-16",children:[gt.jsx("div",{className:"flex-shrink-0",children:gt.jsx("a",{href:"#",className:"text-white font-mono text-xl",children:"JTS"})}),gt.jsx("div",{className:"hidden md:block",children:gt.jsx("div",{className:"ml-10 flex items-baseline space-x-4",children:n.map(s=>gt.jsx("a",{href:s.href,className:"text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:s.label},s.label))})}),gt.jsx("div",{className:"md:hidden",children:gt.jsx("button",{onClick:()=>t(!r),className:"text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:r?gt.jsx(H5,{size:24}):gt.jsx(z5,{size:24})})})]})}),r&&gt.jsx("div",{className:"md:hidden",children:gt.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:n.map(s=>gt.jsx("a",{href:s.href,className:"text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium",onClick:()=>t(!1),children:s.label},s.label))})})]})}var PR={exports:{}};(function(r,t){(function(n,s){r.exports=s(at)})(DL,function(n){return function(s){var o={};function a(y){if(o[y])return o[y].exports;var i=o[y]={i:y,l:!1,exports:{}};return s[y].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=s,a.c=o,a.d=function(y,i,_){a.o(y,i)||Object.defineProperty(y,i,{enumerable:!0,get:_})},a.r=function(y){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})},a.t=function(y,i){if(1&i&&(y=a(y)),8&i||4&i&&typeof y=="object"&&y&&y.__esModule)return y;var _=Object.create(null);if(a.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:y}),2&i&&typeof y!="string")for(var g in y)a.d(_,g,(function(h){return y[h]}).bind(null,g));return _},a.n=function(y){var i=y&&y.__esModule?function(){return y.default}:function(){return y};return a.d(i,"a",i),i},a.o=function(y,i){return Object.prototype.hasOwnProperty.call(y,i)},a.p="",a(a.s=2)}([function(s,o){s.exports=n},function(s,o,a){(function(y){(function(i){s.exports=i()})(function(){return function i(_,g,h){function l(x,p){if(!g[x]){if(!_[x]){var f=!1;if(!p&&f)return(void 0)(x,!0);if(d)return d(x,!0);throw(p=new Error("Cannot find module '"+x+"'")).code="MODULE_NOT_FOUND",p}f=g[x]={exports:{}},_[x][0].call(f.exports,function(u){return l(_[x][1][u]||u)},f,f.exports,i,_,g,h)}return g[x].exports}for(var d=!1,v=0;v<h.length;v++)l(h[v]);return l}({1:[function(i,_,g){g.byteLength=function(u){return 3*((u=f(u))[0]+(u=u[1]))/4-u},g.toByteArray=function(u){var c,m,b=(S=f(u))[0],S=S[1],w=new d(function(P,R){return 3*(P+R)/4-R}(b,S)),M=0,A=0<S?b-4:b;for(m=0;m<A;m+=4)c=l[u.charCodeAt(m)]<<18|l[u.charCodeAt(m+1)]<<12|l[u.charCodeAt(m+2)]<<6|l[u.charCodeAt(m+3)],w[M++]=c>>16&255,w[M++]=c>>8&255,w[M++]=255&c;return S===2&&(c=l[u.charCodeAt(m)]<<2|l[u.charCodeAt(m+1)]>>4,w[M++]=255&c),S===1&&(c=l[u.charCodeAt(m)]<<10|l[u.charCodeAt(m+1)]<<4|l[u.charCodeAt(m+2)]>>2,w[M++]=c>>8&255,w[M++]=255&c),w},g.fromByteArray=function(u){for(var c,m=u.length,b=m%3,S=[],w=0,M=m-b;w<M;w+=16383)S.push(function(A,P,R){for(var k,L=[],B=P;B<R;B+=3)k=(A[B]<<16&16711680)+(A[B+1]<<8&65280)+(255&A[B+2]),L.push(function(I){return h[I>>18&63]+h[I>>12&63]+h[I>>6&63]+h[63&I]}(k));return L.join("")}(u,w,M<w+16383?M:w+16383));return b==1?(c=u[m-1],S.push(h[c>>2]+h[c<<4&63]+"==")):b==2&&(c=(u[m-2]<<8)+u[m-1],S.push(h[c>>10]+h[c>>4&63]+h[c<<2&63]+"=")),S.join("")};for(var h=[],l=[],d=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,p=v.length;x<p;++x)h[x]=v[x],l[v.charCodeAt(x)]=x;function f(u){var c=u.length;if(0<c%4)throw new Error("Invalid string. Length must be a multiple of 4");return c=(u=(u=u.indexOf("="))===-1?c:u)===c?0:4-u%4,[u,c]}l[45]=62,l[95]=63},{}],2:[function(i,_,g){},{}],3:[function(i,_,g){arguments[4][2][0].apply(g,arguments)},{dup:2}],4:[function(i,_,g){(function(f){var l=i("base64-js"),d=i("ieee754"),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,x=(g.Buffer=f,g.SlowBuffer=function(X){return+X!=X&&(X=0),f.alloc(+X)},g.INSPECT_MAX_BYTES=50,2147483647);function p(X){if(x<X)throw new RangeError('The value "'+X+'" is invalid for option "size"');return X=new Uint8Array(X),Object.setPrototypeOf(X,f.prototype),X}function f(X,Z,ie){if(typeof X!="number")return u(X,Z,ie);if(typeof Z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(X)}function u(X,Z,ie){if(typeof X=="string"){var ye=X,fe=Z;if(f.isEncoding(fe=typeof fe=="string"&&fe!==""?fe:"utf8"))return(ye=(re=p($=0|w(ye,fe))).write(ye,fe))!==$?re.slice(0,ye):re;throw new TypeError("Unknown encoding: "+fe)}if(ArrayBuffer.isView(X))return b(X);if(X!=null){if(ee(X,ArrayBuffer)||X&&ee(X.buffer,ArrayBuffer)){var $=X,re=ie;if((ye=Z)<0||$.byteLength<ye)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<ye+(re||0))throw new RangeError('"length" is outside of buffer bounds');return $=ye===void 0&&re===void 0?new Uint8Array($):re===void 0?new Uint8Array($,ye):new Uint8Array($,ye,re),Object.setPrototypeOf($,f.prototype),$}if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if((fe=X.valueOf&&X.valueOf())!=null&&fe!==X)return f.from(fe,Z,ie);var de=function(ge){var ve,we;return f.isBuffer(ge)?((we=p(ve=0|S(ge.length))).length!==0&&ge.copy(we,0,0,ve),we):ge.length!==void 0?typeof ge.length!="number"||se(ge.length)?p(0):b(ge):ge.type==="Buffer"&&Array.isArray(ge.data)?b(ge.data):void 0}(X);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return f.from(X[Symbol.toPrimitive]("string"),Z,ie)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}function c(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function m(X){return c(X),p(X<0?0:0|S(X))}function b(X){for(var Z=X.length<0?0:0|S(X.length),ie=p(Z),ye=0;ye<Z;ye+=1)ie[ye]=255&X[ye];return ie}function S(X){if(x<=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|X}function w(X,Z){if(f.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||ee(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);var ie=X.length,ye=2<arguments.length&&arguments[2]===!0;if(!ye&&ie===0)return 0;for(var fe=!1;;)switch(Z){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return q(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ie;case"hex":return ie>>>1;case"base64":return K(X).length;default:if(fe)return ye?-1:q(X).length;Z=(""+Z).toLowerCase(),fe=!0}}function M(X,Z,ie){var ye,fe=!1;if((Z=Z===void 0||Z<0?0:Z)>this.length||(ie=ie===void 0||ie>this.length?this.length:ie)<=0||(ie>>>=0)<=(Z>>>=0))return"";for(X=X||"utf8";;)switch(X){case"hex":var $=Z,re=ie,de=this.length;(!re||re<0||de<re)&&(re=de);for(var ge="",ve=$=!$||$<0?0:$;ve<re;++ve)ge+=me[this[ve]];return ge;case"utf8":case"utf-8":return B(this,Z,ie);case"ascii":de=Z;var we=ie,Se="";we=Math.min(this.length,we);for(var ae=de;ae<we;++ae)Se+=String.fromCharCode(127&this[ae]);return Se;case"latin1":case"binary":$=Z;var oe=ie,Ee="";oe=Math.min(this.length,oe);for(var Oe=$;Oe<oe;++Oe)Ee+=String.fromCharCode(this[Oe]);return Ee;case"base64":return ze=this,ye=ie,(Be=Z)===0&&ye===ze.length?l.fromByteArray(ze):l.fromByteArray(ze.slice(Be,ye));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var ze=Z,Be=ie,dt=this.slice(ze,Be),Je="",_e=0;_e<dt.length;_e+=2)Je+=String.fromCharCode(dt[_e]+256*dt[_e+1]);return Je;default:if(fe)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),fe=!0}}function A(X,Z,ie){var ye=X[Z];X[Z]=X[ie],X[ie]=ye}function P(X,Z,ie,ye,fe){if(X.length===0)return-1;if(typeof ie=="string"?(ye=ie,ie=0):2147483647<ie?ie=2147483647:ie<-2147483648&&(ie=-2147483648),(ie=(ie=se(ie=+ie)?fe?0:X.length-1:ie)<0?X.length+ie:ie)>=X.length){if(fe)return-1;ie=X.length-1}else if(ie<0){if(!fe)return-1;ie=0}if(typeof Z=="string"&&(Z=f.from(Z,ye)),f.isBuffer(Z))return Z.length===0?-1:R(X,Z,ie,ye,fe);if(typeof Z=="number")return Z&=255,typeof Uint8Array.prototype.indexOf=="function"?(fe?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(X,Z,ie):R(X,[Z],ie,ye,fe);throw new TypeError("val must be string, number or Buffer")}function R(X,Z,ie,ye,fe){var $=1,re=X.length,de=Z.length;if(ye!==void 0&&((ye=String(ye).toLowerCase())==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(X.length<2||Z.length<2)return-1;re/=$=2,de/=2,ie/=2}function ge(oe,Ee){return $===1?oe[Ee]:oe.readUInt16BE(Ee*$)}if(fe)for(var ve=-1,we=ie;we<re;we++)if(ge(X,we)===ge(Z,ve===-1?0:we-ve)){if(we-(ve=ve===-1?we:ve)+1===de)return ve*$}else ve!==-1&&(we-=we-ve),ve=-1;else for(we=ie=re<ie+de?re-de:ie;0<=we;we--){for(var Se=!0,ae=0;ae<de;ae++)if(ge(X,we+ae)!==ge(Z,ae)){Se=!1;break}if(Se)return we}return-1}function k(X,Z,ie,ye){return ne(function(fe){for(var $=[],re=0;re<fe.length;++re)$.push(255&fe.charCodeAt(re));return $}(Z),X,ie,ye)}function L(X,Z,ie,ye){return ne(function(fe,$){for(var re,de,ge=[],ve=0;ve<fe.length&&!(($-=2)<0);++ve)re=(de=fe.charCodeAt(ve))>>8,de%=256,ge.push(de),ge.push(re);return ge}(Z,X.length-ie),X,ie,ye)}function B(X,Z,ie){ie=Math.min(X.length,ie);for(var ye=[],fe=Z;fe<ie;){var $,re,de,ge,ve=X[fe],we=null,Se=239<ve?4:223<ve?3:191<ve?2:1;if(fe+Se<=ie)switch(Se){case 1:ve<128&&(we=ve);break;case 2:(192&($=X[fe+1]))==128&&127<(ge=(31&ve)<<6|63&$)&&(we=ge);break;case 3:$=X[fe+1],re=X[fe+2],(192&$)==128&&(192&re)==128&&2047<(ge=(15&ve)<<12|(63&$)<<6|63&re)&&(ge<55296||57343<ge)&&(we=ge);break;case 4:$=X[fe+1],re=X[fe+2],de=X[fe+3],(192&$)==128&&(192&re)==128&&(192&de)==128&&65535<(ge=(15&ve)<<18|(63&$)<<12|(63&re)<<6|63&de)&&ge<1114112&&(we=ge)}we===null?(we=65533,Se=1):65535<we&&(we-=65536,ye.push(we>>>10&1023|55296),we=56320|1023&we),ye.push(we),fe+=Se}var ae=ye,oe=ae.length;if(oe<=I)return String.fromCharCode.apply(String,ae);for(var Ee="",Oe=0;Oe<oe;)Ee+=String.fromCharCode.apply(String,ae.slice(Oe,Oe+=I));return Ee}g.kMaxLength=x,(f.TYPED_ARRAY_SUPPORT=function(){try{var X=new Uint8Array(1),Z={foo:function(){return 42}};return Object.setPrototypeOf(Z,Uint8Array.prototype),Object.setPrototypeOf(X,Z),X.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=u,Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(X,Z,ie){return Z=Z,ie=ie,c(X=X),X<=0||Z===void 0?p(X):typeof ie=="string"?p(X).fill(Z,ie):p(X).fill(Z)},f.allocUnsafe=m,f.allocUnsafeSlow=m,f.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==f.prototype},f.compare=function(X,Z){if(ee(X,Uint8Array)&&(X=f.from(X,X.offset,X.byteLength)),ee(Z,Uint8Array)&&(Z=f.from(Z,Z.offset,Z.byteLength)),!f.isBuffer(X)||!f.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===Z)return 0;for(var ie=X.length,ye=Z.length,fe=0,$=Math.min(ie,ye);fe<$;++fe)if(X[fe]!==Z[fe]){ie=X[fe],ye=Z[fe];break}return ie<ye?-1:ye<ie?1:0},f.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(X,Z){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return f.alloc(0);if(Z===void 0)for(fe=Z=0;fe<X.length;++fe)Z+=X[fe].length;for(var ie=f.allocUnsafe(Z),ye=0,fe=0;fe<X.length;++fe){var $=X[fe];if(ee($,Uint8Array)&&($=f.from($)),!f.isBuffer($))throw new TypeError('"list" argument must be an Array of Buffers');$.copy(ie,ye),ye+=$.length}return ie},f.byteLength=w,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var X=this.length;if(X%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Z=0;Z<X;Z+=2)A(this,Z,Z+1);return this},f.prototype.swap32=function(){var X=this.length;if(X%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Z=0;Z<X;Z+=4)A(this,Z,Z+3),A(this,Z+1,Z+2);return this},f.prototype.swap64=function(){var X=this.length;if(X%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Z=0;Z<X;Z+=8)A(this,Z,Z+7),A(this,Z+1,Z+6),A(this,Z+2,Z+5),A(this,Z+3,Z+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var X=this.length;return X===0?"":arguments.length===0?B(this,0,X):M.apply(this,arguments)},f.prototype.equals=function(X){if(f.isBuffer(X))return this===X||f.compare(this,X)===0;throw new TypeError("Argument must be a Buffer")},f.prototype.inspect=function(){var X="",Z=g.INSPECT_MAX_BYTES;return X=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(X+=" ... "),"<Buffer "+X+">"},v&&(f.prototype[v]=f.prototype.inspect),f.prototype.compare=function(X,Z,ie,ye,fe){if(ee(X,Uint8Array)&&(X=f.from(X,X.offset,X.byteLength)),!f.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(ie===void 0&&(ie=X?X.length:0),ye===void 0&&(ye=0),fe===void 0&&(fe=this.length),(Z=Z===void 0?0:Z)<0||ie>X.length||ye<0||fe>this.length)throw new RangeError("out of range index");if(fe<=ye&&ie<=Z)return 0;if(fe<=ye)return-1;if(ie<=Z)return 1;if(this===X)return 0;for(var $=(fe>>>=0)-(ye>>>=0),re=(ie>>>=0)-(Z>>>=0),de=Math.min($,re),ge=this.slice(ye,fe),ve=X.slice(Z,ie),we=0;we<de;++we)if(ge[we]!==ve[we]){$=ge[we],re=ve[we];break}return $<re?-1:re<$?1:0},f.prototype.includes=function(X,Z,ie){return this.indexOf(X,Z,ie)!==-1},f.prototype.indexOf=function(X,Z,ie){return P(this,X,Z,ie,!0)},f.prototype.lastIndexOf=function(X,Z,ie){return P(this,X,Z,ie,!1)},f.prototype.write=function(X,Z,ie,ye){if(Z===void 0)ye="utf8",ie=this.length,Z=0;else if(ie===void 0&&typeof Z=="string")ye=Z,ie=this.length,Z=0;else{if(!isFinite(Z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Z>>>=0,isFinite(ie)?(ie>>>=0,ye===void 0&&(ye="utf8")):(ye=ie,ie=void 0)}var fe=this.length-Z;if((ie===void 0||fe<ie)&&(ie=fe),0<X.length&&(ie<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye=ye||"utf8";for(var $,re,de,ge=!1;;)switch(ye){case"hex":var ve=X,we=Z,Se=ie,ae=(we=Number(we)||0,this.length-we);(!Se||ae<(Se=Number(Se)))&&(Se=ae),(ae=ve.length)/2<Se&&(Se=ae/2);for(var oe=0;oe<Se;++oe){var Ee=parseInt(ve.substr(2*oe,2),16);if(se(Ee))return oe;this[we+oe]=Ee}return oe;case"utf8":case"utf-8":return ae=Z,de=ie,ne(q(X,(re=this).length-ae),re,ae,de);case"ascii":return k(this,X,Z,ie);case"latin1":case"binary":return k(this,X,Z,ie);case"base64":return re=this,de=Z,$=ie,ne(K(X),re,de,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,X,Z,ie);default:if(ge)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),ge=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function F(X,Z,ie){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(ie<X+Z)throw new RangeError("Trying to access beyond buffer length")}function z(X,Z,ie,ye,fe,$){if(!f.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(fe<Z||Z<$)throw new RangeError('"value" argument is out of bounds');if(ie+ye>X.length)throw new RangeError("Index out of range")}function G(X,Z,ie,ye){if(ie+ye>X.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function N(X,Z,ie,ye,fe){return Z=+Z,ie>>>=0,fe||G(X,0,ie,4),d.write(X,Z,ie,ye,23,4),ie+4}function O(X,Z,ie,ye,fe){return Z=+Z,ie>>>=0,fe||G(X,0,ie,8),d.write(X,Z,ie,ye,52,8),ie+8}f.prototype.slice=function(X,Z){var ie=this.length;return(X=~~X)<0?(X+=ie)<0&&(X=0):ie<X&&(X=ie),(Z=Z===void 0?ie:~~Z)<0?(Z+=ie)<0&&(Z=0):ie<Z&&(Z=ie),Z<X&&(Z=X),ie=this.subarray(X,Z),Object.setPrototypeOf(ie,f.prototype),ie},f.prototype.readUIntLE=function(X,Z,ie){X>>>=0,Z>>>=0,ie||F(X,Z,this.length);for(var ye=this[X],fe=1,$=0;++$<Z&&(fe*=256);)ye+=this[X+$]*fe;return ye},f.prototype.readUIntBE=function(X,Z,ie){X>>>=0,Z>>>=0,ie||F(X,Z,this.length);for(var ye=this[X+--Z],fe=1;0<Z&&(fe*=256);)ye+=this[X+--Z]*fe;return ye},f.prototype.readUInt8=function(X,Z){return X>>>=0,Z||F(X,1,this.length),this[X]},f.prototype.readUInt16LE=function(X,Z){return X>>>=0,Z||F(X,2,this.length),this[X]|this[X+1]<<8},f.prototype.readUInt16BE=function(X,Z){return X>>>=0,Z||F(X,2,this.length),this[X]<<8|this[X+1]},f.prototype.readUInt32LE=function(X,Z){return X>>>=0,Z||F(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+16777216*this[X+3]},f.prototype.readUInt32BE=function(X,Z){return X>>>=0,Z||F(X,4,this.length),16777216*this[X]+(this[X+1]<<16|this[X+2]<<8|this[X+3])},f.prototype.readIntLE=function(X,Z,ie){X>>>=0,Z>>>=0,ie||F(X,Z,this.length);for(var ye=this[X],fe=1,$=0;++$<Z&&(fe*=256);)ye+=this[X+$]*fe;return(fe*=128)<=ye&&(ye-=Math.pow(2,8*Z)),ye},f.prototype.readIntBE=function(X,Z,ie){X>>>=0,Z>>>=0,ie||F(X,Z,this.length);for(var ye=Z,fe=1,$=this[X+--ye];0<ye&&(fe*=256);)$+=this[X+--ye]*fe;return(fe*=128)<=$&&($-=Math.pow(2,8*Z)),$},f.prototype.readInt8=function(X,Z){return X>>>=0,Z||F(X,1,this.length),128&this[X]?-1*(255-this[X]+1):this[X]},f.prototype.readInt16LE=function(X,Z){return X>>>=0,Z||F(X,2,this.length),32768&(Z=this[X]|this[X+1]<<8)?4294901760|Z:Z},f.prototype.readInt16BE=function(X,Z){return X>>>=0,Z||F(X,2,this.length),32768&(Z=this[X+1]|this[X]<<8)?4294901760|Z:Z},f.prototype.readInt32LE=function(X,Z){return X>>>=0,Z||F(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},f.prototype.readInt32BE=function(X,Z){return X>>>=0,Z||F(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},f.prototype.readFloatLE=function(X,Z){return X>>>=0,Z||F(X,4,this.length),d.read(this,X,!0,23,4)},f.prototype.readFloatBE=function(X,Z){return X>>>=0,Z||F(X,4,this.length),d.read(this,X,!1,23,4)},f.prototype.readDoubleLE=function(X,Z){return X>>>=0,Z||F(X,8,this.length),d.read(this,X,!0,52,8)},f.prototype.readDoubleBE=function(X,Z){return X>>>=0,Z||F(X,8,this.length),d.read(this,X,!1,52,8)},f.prototype.writeUIntLE=function(X,Z,ie,ye){X=+X,Z>>>=0,ie>>>=0,ye||z(this,X,Z,ie,Math.pow(2,8*ie)-1,0);var fe=1,$=0;for(this[Z]=255&X;++$<ie&&(fe*=256);)this[Z+$]=X/fe&255;return Z+ie},f.prototype.writeUIntBE=function(X,Z,ie,ye){X=+X,Z>>>=0,ie>>>=0,ye||z(this,X,Z,ie,Math.pow(2,8*ie)-1,0);var fe=ie-1,$=1;for(this[Z+fe]=255&X;0<=--fe&&($*=256);)this[Z+fe]=X/$&255;return Z+ie},f.prototype.writeUInt8=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,1,255,0),this[Z]=255&X,Z+1},f.prototype.writeUInt16LE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,2,65535,0),this[Z]=255&X,this[Z+1]=X>>>8,Z+2},f.prototype.writeUInt16BE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,2,65535,0),this[Z]=X>>>8,this[Z+1]=255&X,Z+2},f.prototype.writeUInt32LE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,4,4294967295,0),this[Z+3]=X>>>24,this[Z+2]=X>>>16,this[Z+1]=X>>>8,this[Z]=255&X,Z+4},f.prototype.writeUInt32BE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,4,4294967295,0),this[Z]=X>>>24,this[Z+1]=X>>>16,this[Z+2]=X>>>8,this[Z+3]=255&X,Z+4},f.prototype.writeIntLE=function(X,Z,ie,ye){X=+X,Z>>>=0,ye||z(this,X,Z,ie,(ye=Math.pow(2,8*ie-1))-1,-ye);var fe=0,$=1,re=0;for(this[Z]=255&X;++fe<ie&&($*=256);)X<0&&re===0&&this[Z+fe-1]!==0&&(re=1),this[Z+fe]=(X/$>>0)-re&255;return Z+ie},f.prototype.writeIntBE=function(X,Z,ie,ye){X=+X,Z>>>=0,ye||z(this,X,Z,ie,(ye=Math.pow(2,8*ie-1))-1,-ye);var fe=ie-1,$=1,re=0;for(this[Z+fe]=255&X;0<=--fe&&($*=256);)X<0&&re===0&&this[Z+fe+1]!==0&&(re=1),this[Z+fe]=(X/$>>0)-re&255;return Z+ie},f.prototype.writeInt8=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,1,127,-128),this[Z]=255&(X=X<0?255+X+1:X),Z+1},f.prototype.writeInt16LE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,2,32767,-32768),this[Z]=255&X,this[Z+1]=X>>>8,Z+2},f.prototype.writeInt16BE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,2,32767,-32768),this[Z]=X>>>8,this[Z+1]=255&X,Z+2},f.prototype.writeInt32LE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,4,2147483647,-2147483648),this[Z]=255&X,this[Z+1]=X>>>8,this[Z+2]=X>>>16,this[Z+3]=X>>>24,Z+4},f.prototype.writeInt32BE=function(X,Z,ie){return X=+X,Z>>>=0,ie||z(this,X,Z,4,2147483647,-2147483648),this[Z]=(X=X<0?4294967295+X+1:X)>>>24,this[Z+1]=X>>>16,this[Z+2]=X>>>8,this[Z+3]=255&X,Z+4},f.prototype.writeFloatLE=function(X,Z,ie){return N(this,X,Z,!0,ie)},f.prototype.writeFloatBE=function(X,Z,ie){return N(this,X,Z,!1,ie)},f.prototype.writeDoubleLE=function(X,Z,ie){return O(this,X,Z,!0,ie)},f.prototype.writeDoubleBE=function(X,Z,ie){return O(this,X,Z,!1,ie)},f.prototype.copy=function(X,Z,ie,ye){if(!f.isBuffer(X))throw new TypeError("argument should be a Buffer");if(ie=ie||0,ye||ye===0||(ye=this.length),Z>=X.length&&(Z=X.length),(ye=0<ye&&ye<ie?ie:ye)===ie||X.length===0||this.length===0)return 0;if((Z=Z||0)<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length);var fe=(ye=X.length-Z<ye-ie?X.length-Z+ie:ye)-ie;if(this===X&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Z,ie,ye);else if(this===X&&ie<Z&&Z<ye)for(var $=fe-1;0<=$;--$)X[$+Z]=this[$+ie];else Uint8Array.prototype.set.call(X,this.subarray(ie,ye),Z);return fe},f.prototype.fill=function(X,Z,ie,ye){if(typeof X=="string"){if(typeof Z=="string"?(ye=Z,Z=0,ie=this.length):typeof ie=="string"&&(ye=ie,ie=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!f.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);var fe;X.length===1&&(fe=X.charCodeAt(0),(ye==="utf8"&&fe<128||ye==="latin1")&&(X=fe))}else typeof X=="number"?X&=255:typeof X=="boolean"&&(X=Number(X));if(Z<0||this.length<Z||this.length<ie)throw new RangeError("Out of range index");var $;if(!(ie<=Z))if(Z>>>=0,ie=ie===void 0?this.length:ie>>>0,typeof(X=X||0)=="number")for($=Z;$<ie;++$)this[$]=X;else{var re=f.isBuffer(X)?X:f.from(X,ye),de=re.length;if(de===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for($=0;$<ie-Z;++$)this[$+Z]=re[$%de]}return this};var H=/[^+/0-9A-Za-z-_]/g;function q(X,Z){Z=Z||1/0;for(var ie,ye=X.length,fe=null,$=[],re=0;re<ye;++re){if(55295<(ie=X.charCodeAt(re))&&ie<57344){if(!fe){if(56319<ie){-1<(Z-=3)&&$.push(239,191,189);continue}if(re+1===ye){-1<(Z-=3)&&$.push(239,191,189);continue}fe=ie;continue}if(ie<56320){-1<(Z-=3)&&$.push(239,191,189),fe=ie;continue}ie=65536+(fe-55296<<10|ie-56320)}else fe&&-1<(Z-=3)&&$.push(239,191,189);if(fe=null,ie<128){if(--Z<0)break;$.push(ie)}else if(ie<2048){if((Z-=2)<0)break;$.push(ie>>6|192,63&ie|128)}else if(ie<65536){if((Z-=3)<0)break;$.push(ie>>12|224,ie>>6&63|128,63&ie|128)}else{if(!(ie<1114112))throw new Error("Invalid code point");if((Z-=4)<0)break;$.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,63&ie|128)}}return $}function K(X){return l.toByteArray(function(Z){if((Z=(Z=Z.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;Z.length%4!=0;)Z+="=";return Z}(X))}function ne(X,Z,ie,ye){for(var fe=0;fe<ye&&!(fe+ie>=Z.length||fe>=X.length);++fe)Z[fe+ie]=X[fe];return fe}function ee(X,Z){return X instanceof Z||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===Z.name}function se(X){return X!=X}var me=function(){for(var X="0123456789abcdef",Z=new Array(256),ie=0;ie<16;++ie)for(var ye=16*ie,fe=0;fe<16;++fe)Z[ye+fe]=X[ie]+X[fe];return Z}()}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:244}],5:[function(i,_,g){_.exports=function(h){if(typeof h!="function")throw TypeError(String(h)+" is not a function");return h}},{}],6:[function(i,_,g){var h=i("../internals/is-object");_.exports=function(l){if(h(l)||l===null)return l;throw TypeError("Can't set "+String(l)+" as a prototype")}},{"../internals/is-object":74}],7:[function(i,_,g){var h=i("../internals/well-known-symbol"),l=i("../internals/object-create"),d=(i=i("../internals/object-define-property"),h("unscopables")),v=Array.prototype;v[d]==null&&i.f(v,d,{configurable:!0,value:l(null)}),_.exports=function(x){v[d][x]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],8:[function(i,_,g){var h=i("../internals/string-multibyte").charAt;_.exports=function(l,d,v){return d+(v?h(l,d).length:1)}},{"../internals/string-multibyte":123}],9:[function(i,_,g){_.exports=function(h,l,d){if(h instanceof l)return h;throw TypeError("Incorrect "+(d?d+" ":"")+"invocation")}},{}],10:[function(i,_,g){var h=i("../internals/is-object");_.exports=function(l){if(h(l))return l;throw TypeError(String(l)+" is not an object")}},{"../internals/is-object":74}],11:[function(i,_,g){_.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(i,_,g){function h(N){return p(N)&&f(G,u(N))}var l,d=i("../internals/array-buffer-native"),v=i("../internals/descriptors"),x=i("../internals/global"),p=i("../internals/is-object"),f=i("../internals/has"),u=i("../internals/classof"),c=i("../internals/create-non-enumerable-property"),m=i("../internals/redefine"),b=i("../internals/object-define-property").f,S=i("../internals/object-get-prototype-of"),w=i("../internals/object-set-prototype-of"),M=i("../internals/well-known-symbol"),A=(i=i("../internals/uid"),x.Int8Array),P=A&&A.prototype,R=(R=x.Uint8ClampedArray)&&R.prototype,k=A&&S(A),L=P&&S(P),B=Object.prototype,I=B.isPrototypeOf,F=(M=M("toStringTag"),i("TYPED_ARRAY_TAG")),z=d&&!!w&&u(x.opera)!=="Opera",G=(i=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(l in G)x[l]||(z=!1);if((!z||typeof k!="function"||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},z))for(l in G)x[l]&&w(x[l],k);if((!z||!L||L===B)&&(L=k.prototype,z))for(l in G)x[l]&&w(x[l].prototype,L);if(z&&S(R)!==L&&w(R,L),v&&!f(L,M))for(l in i=!0,b(L,M,{get:function(){return p(this)?this[F]:void 0}}),G)x[l]&&c(x[l],F,l);_.exports={NATIVE_ARRAY_BUFFER_VIEWS:z,TYPED_ARRAY_TAG:i&&F,aTypedArray:function(N){if(h(N))return N;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(N){if(w){if(I.call(k,N))return N}else for(var O in G)if(f(G,l)&&(O=x[O])&&(N===O||I.call(O,N)))return N;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(N,O,H){if(v){if(H)for(var q in G)(q=x[q])&&f(q.prototype,N)&&delete q.prototype[N];L[N]&&!H||m(L,N,!H&&z&&P[N]||O)}},exportTypedArrayStaticMethod:function(N,O,H){var q,K;if(v){if(w){if(H)for(q in G)(K=x[q])&&f(K,N)&&delete K[N];if(k[N]&&!H)return;try{return m(k,N,!H&&z&&A[N]||O)}catch{}}for(q in G)!(K=x[q])||K[N]&&!H||m(K,N,O)}},isView:function(N){return(N=u(N))==="DataView"||f(G,N)},isTypedArray:h,TypedArray:k,TypedArrayPrototype:L}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":145,"../internals/well-known-symbol":148}],13:[function(i,_,g){function h(we){return[255&we]}function l(we){return[255&we,we>>8&255]}function d(we){return[255&we,we>>8&255,we>>16&255,we>>24&255]}function v(we){return we[3]<<24|we[2]<<16|we[1]<<8|we[0]}function x(we){return fe(we,23,4)}function p(we){return fe(we,52,8)}function f(we,Se){G(we[ee],Se,{get:function(){return H(this)[Se]}})}function u(we,Se,ae,oe){if((ae=L(ae))+Se>(we=H(we)).byteLength)throw ye(se);var Ee=H(we.buffer).bytes;return ae+=we.byteOffset,we=Ee.slice(ae,ae+Se),oe?we:we.reverse()}function c(we,Se,ae,oe,Ee,Oe){if((ae=L(ae))+Se>(we=H(we)).byteLength)throw ye(se);for(var ze=H(we.buffer).bytes,Be=ae+we.byteOffset,dt=oe(+Ee),Je=0;Je<Se;Je++)ze[Be+Je]=dt[Oe?Je:Se-Je-1]}var m=i("../internals/global"),b=i("../internals/descriptors"),S=i("../internals/array-buffer-native"),w=i("../internals/create-non-enumerable-property"),M=i("../internals/redefine-all"),A=i("../internals/fails"),P=i("../internals/an-instance"),R=i("../internals/to-integer"),k=i("../internals/to-length"),L=i("../internals/to-index"),B=i("../internals/ieee754"),I=i("../internals/object-get-prototype-of"),F=i("../internals/object-set-prototype-of"),z=i("../internals/object-get-own-property-names").f,G=i("../internals/object-define-property").f,N=i("../internals/array-fill"),O=i("../internals/set-to-string-tag"),H=(i=i("../internals/internal-state")).get,q=i.set,K="ArrayBuffer",ne="DataView",ee="prototype",se="Wrong index",me=m[K],X=me,Z=m[ne],ie=(i=Z&&Z[ee],Object.prototype),ye=m.RangeError,fe=B.pack,$=B.unpack;if(S){if(!A(function(){me(1)})||!A(function(){new me(-1)})||A(function(){return new me,new me(1.5),new me(NaN),me.name!=K})){m=(X=function(we){return P(this,X),new me(L(we))})[ee]=me[ee];for(var re,de=z(me),ge=0;de.length>ge;)(re=de[ge++])in X||w(X,re,me[re]);m.constructor=X}F&&I(i)!==ie&&F(i,ie),B=new Z(new X(2));var ve=i.setInt8;B.setInt8(0,2147483648),B.setInt8(1,2147483649),!B.getInt8(0)&&B.getInt8(1)||M(i,{setInt8:function(we,Se){ve.call(this,we,Se<<24>>24)},setUint8:function(we,Se){ve.call(this,we,Se<<24>>24)}},{unsafe:!0})}else X=function(we){P(this,X,K),we=L(we),q(this,{bytes:N.call(new Array(we),0),byteLength:we}),b||(this.byteLength=we)},Z=function(we,Se,ae){P(this,Z,ne),P(we,X,ne);var oe=H(we).byteLength;if((Se=R(Se))<0||oe<Se)throw ye("Wrong offset");if(oe<Se+(ae=ae===void 0?oe-Se:k(ae)))throw ye("Wrong length");q(this,{buffer:we,byteLength:ae,byteOffset:Se}),b||(this.buffer=we,this.byteLength=ae,this.byteOffset=Se)},b&&(f(X,"byteLength"),f(Z,"buffer"),f(Z,"byteLength"),f(Z,"byteOffset")),M(Z[ee],{getInt8:function(we){return u(this,1,we)[0]<<24>>24},getUint8:function(we){return u(this,1,we)[0]},getInt16:function(we){return((we=u(this,2,we,1<arguments.length?arguments[1]:void 0))[1]<<8|we[0])<<16>>16},getUint16:function(we){return(we=u(this,2,we,1<arguments.length?arguments[1]:void 0))[1]<<8|we[0]},getInt32:function(we){return v(u(this,4,we,1<arguments.length?arguments[1]:void 0))},getUint32:function(we){return v(u(this,4,we,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(we){return $(u(this,4,we,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(we){return $(u(this,8,we,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(we,Se){c(this,1,we,h,Se)},setUint8:function(we,Se){c(this,1,we,h,Se)},setInt16:function(we,Se){c(this,2,we,l,Se,2<arguments.length?arguments[2]:void 0)},setUint16:function(we,Se){c(this,2,we,l,Se,2<arguments.length?arguments[2]:void 0)},setInt32:function(we,Se){c(this,4,we,d,Se,2<arguments.length?arguments[2]:void 0)},setUint32:function(we,Se){c(this,4,we,d,Se,2<arguments.length?arguments[2]:void 0)},setFloat32:function(we,Se){c(this,4,we,x,Se,2<arguments.length?arguments[2]:void 0)},setFloat64:function(we,Se){c(this,8,we,p,Se,2<arguments.length?arguments[2]:void 0)}});O(X,K),O(Z,ne),_.exports={ArrayBuffer:X,DataView:Z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":133,"../internals/to-integer":135,"../internals/to-length":136}],14:[function(i,_,g){var h=i("../internals/to-object"),l=i("../internals/to-absolute-index"),d=i("../internals/to-length"),v=Math.min;_.exports=[].copyWithin||function(x,p){var f=h(this),u=d(f.length),c=l(x,u),m=l(p,u),b=v(((x=2<arguments.length?arguments[2]:void 0)===void 0?u:l(x,u))-m,u-c),S=1;for(m<c&&c<m+b&&(S=-1,m+=b-1,c+=b-1);0<b--;)m in f?f[c]=f[m]:delete f[c],c+=S,m+=S;return f}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],15:[function(i,_,g){var h=i("../internals/to-object"),l=i("../internals/to-absolute-index"),d=i("../internals/to-length");_.exports=function(v){for(var x,p=h(this),f=d(p.length),u=l(1<(x=arguments.length)?arguments[1]:void 0,f),c=(x=2<x?arguments[2]:void 0)===void 0?f:l(x,f);u<c;)p[u++]=v;return p}},{"../internals/to-absolute-index":132,"../internals/to-length":136,"../internals/to-object":137}],16:[function(i,_,g){var h=i("../internals/array-iteration").forEach,l=i("../internals/array-method-is-strict");i=i("../internals/array-method-uses-to-length"),l=l("forEach"),i=i("forEach"),_.exports=l&&i?[].forEach:function(d){return h(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(i,_,g){var h=i("../internals/function-bind-context"),l=i("../internals/to-object"),d=i("../internals/call-with-safe-iteration-closing"),v=i("../internals/is-array-iterator-method"),x=i("../internals/to-length"),p=i("../internals/create-property"),f=i("../internals/get-iterator-method");_.exports=function(u){var c,m,b,S,w,M,A=l(u),P=(u=typeof this=="function"?this:Array,arguments.length),R=1<P?arguments[1]:void 0,k=R!==void 0,L=f(A),B=0;if(k&&(R=h(R,2<P?arguments[2]:void 0,2)),L==null||u==Array&&v(L))for(m=new u(c=x(A.length));B<c;B++)M=k?R(A[B],B):A[B],p(m,B,M);else for(w=(S=L.call(A)).next,m=new u;!(b=w.call(S)).done;B++)M=k?d(S,R,[b.value,B],!0):b.value,p(m,B,M);return m.length=B,m}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],18:[function(i,_,g){function h(x){return function(p,f,u){var c,m=l(p),b=d(m.length),S=v(u,b);if(x&&f!=f){for(;S<b;)if((c=m[S++])!=c)return!0}else for(;S<b;S++)if((x||S in m)&&m[S]===f)return x||S||0;return!x&&-1}}var l=i("../internals/to-indexed-object"),d=i("../internals/to-length"),v=i("../internals/to-absolute-index");_.exports={includes:h(!0),indexOf:h(!1)}},{"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136}],19:[function(i,_,g){function h(u){var c=u==1,m=u==2,b=u==3,S=u==4,w=u==6,M=u==5||w;return function(A,P,R,k){for(var L,B,I=v(A),F=d(I),z=l(P,R,3),G=x(F.length),N=0,O=(P=k||p,c?P(A,G):m?P(A,0):void 0);N<G;N++)if((M||N in F)&&(B=z(L=F[N],N,I),u)){if(c)O[N]=B;else if(B)switch(u){case 3:return!0;case 5:return L;case 6:return N;case 2:f.call(O,L)}else if(S)return!1}return w?-1:b||S?S:O}}var l=i("../internals/function-bind-context"),d=i("../internals/indexed-object"),v=i("../internals/to-object"),x=i("../internals/to-length"),p=i("../internals/array-species-create"),f=[].push;_.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],20:[function(i,_,g){var h=i("../internals/to-indexed-object"),l=i("../internals/to-integer"),d=i("../internals/to-length"),v=i("../internals/array-method-is-strict"),x=(i=i("../internals/array-method-uses-to-length"),Math.min),p=[].lastIndexOf,f=!!p&&1/[1].lastIndexOf(1,-0)<0;v=v("lastIndexOf"),i=i("indexOf",{ACCESSORS:!0,1:0}),_.exports=!f&&v&&i?p:function(u){if(f)return p.apply(this,arguments)||0;var c=h(this),m=d(c.length),b=m-1;for((b=1<arguments.length?x(b,l(arguments[1])):b)<0&&(b=m+b);0<=b;b--)if(b in c&&c[b]===u)return b||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":134,"../internals/to-integer":135,"../internals/to-length":136}],21:[function(i,_,g){var h=i("../internals/fails"),l=i("../internals/well-known-symbol"),d=i("../internals/engine-v8-version"),v=l("species");_.exports=function(x){return 51<=d||!h(function(){var p=[];return(p.constructor={})[v]=function(){return{foo:1}},p[x](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":148}],22:[function(i,_,g){var h=i("../internals/fails");_.exports=function(l,d){var v=[][l];return!!v&&h(function(){v.call(null,d||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(i,_,g){function h(f){throw f}var l=i("../internals/descriptors"),d=i("../internals/fails"),v=i("../internals/has"),x=Object.defineProperty,p={};_.exports=function(f,u){var c,m,b,S;return v(p,f)?p[f]:(c=[][f],m=!!v(u=u||{},"ACCESSORS")&&u.ACCESSORS,b=v(u,0)?u[0]:h,S=v(u,1)?u[1]:void 0,p[f]=!!c&&!d(function(){if(m&&!l)return!0;var w={length:-1};m?x(w,1,{enumerable:!0,get:h}):w[1]=1,c.call(w,b,S)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":60}],24:[function(i,_,g){function h(p){return function(f,u,c,m){l(u);var b=d(f),S=v(b),w=x(b.length),M=p?w-1:0,A=p?-1:1;if(c<2)for(;;){if(M in S){m=S[M],M+=A;break}if(M+=A,p?M<0:w<=M)throw TypeError("Reduce of empty array with no initial value")}for(;p?0<=M:M<w;M+=A)M in S&&(m=u(m,S[M],M,b));return m}}var l=i("../internals/a-function"),d=i("../internals/to-object"),v=i("../internals/indexed-object"),x=i("../internals/to-length");_.exports={left:h(!1),right:h(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":136,"../internals/to-object":137}],25:[function(i,_,g){var h=i("../internals/is-object"),l=i("../internals/is-array"),d=i("../internals/well-known-symbol")("species");_.exports=function(v,x){var p;return new((p=l(v)&&(typeof(p=v.constructor)=="function"&&(p===Array||l(p.prototype))||h(p)&&(p=p[d])===null)?void 0:p)===void 0?Array:p)(x===0?0:x)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":148}],26:[function(i,_,g){var h=i("../internals/an-object");_.exports=function(l,d,v,x){try{return x?d(h(v)[0],v[1]):d(v)}catch(p){throw(x=l.return)!==void 0&&h(x.call(l)),p}}},{"../internals/an-object":10}],27:[function(i,_,g){var h=i("../internals/well-known-symbol")("iterator"),l=!1;try{var d=0,v={next:function(){return{done:!!d++}},return:function(){l=!0}};v[h]=function(){return this},Array.from(v,function(){throw 2})}catch{}_.exports=function(x,p){if(!p&&!l)return!1;var f=!1;try{var u={};u[h]=function(){return{next:function(){return{done:f=!0}}}},x(u)}catch{}return f}},{"../internals/well-known-symbol":148}],28:[function(i,_,g){var h={}.toString;_.exports=function(l){return h.call(l).slice(8,-1)}},{}],29:[function(i,_,g){var h=i("../internals/to-string-tag-support"),l=i("../internals/classof-raw"),d=i("../internals/well-known-symbol")("toStringTag"),v=l(function(){return arguments}())=="Arguments";_.exports=h?l:function(x){var p;return x===void 0?"Undefined":x===null?"Null":typeof(p=function(f,u){try{return f[u]}catch{}}(x=Object(x),d))=="string"?p:v?l(x):(p=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":p}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":141,"../internals/well-known-symbol":148}],30:[function(i,_,g){var h=i("../internals/object-define-property").f,l=i("../internals/object-create"),d=i("../internals/redefine-all"),v=i("../internals/function-bind-context"),x=i("../internals/an-instance"),p=i("../internals/iterate"),f=i("../internals/define-iterator"),u=i("../internals/set-species"),c=i("../internals/descriptors"),m=i("../internals/internal-metadata").fastKey,b=(i=i("../internals/internal-state")).set,S=i.getterFor;_.exports={getConstructor:function(w,M,A,P){function R(I,F,z){var G,N=B(I),O=k(I,F);return O?O.value=z:(N.last=O={index:G=m(F,!0),key:F,value:z,previous:F=N.last,next:void 0,removed:!1},N.first||(N.first=O),F&&(F.next=O),c?N.size++:I.size++,G!=="F"&&(N.index[G]=O)),I}function k(I,F){I=B(I);var z,G=m(F);if(G!=="F")return I.index[G];for(z=I.first;z;z=z.next)if(z.key==F)return z}var L=w(function(I,F){x(I,L,M),b(I,{type:M,index:l(null),first:void 0,last:void 0,size:0}),c||(I.size=0),F!=null&&p(F,I[P],I,A)}),B=S(M);return d(L.prototype,{clear:function(){for(var I=B(this),F=I.index,z=I.first;z;)z.removed=!0,z.previous&&(z.previous=z.previous.next=void 0),delete F[z.index],z=z.next;I.first=I.last=void 0,c?I.size=0:this.size=0},delete:function(I){var F,z,G=B(this);return(I=k(this,I))&&(F=I.next,z=I.previous,delete G.index[I.index],I.removed=!0,z&&(z.next=F),F&&(F.previous=z),G.first==I&&(G.first=F),G.last==I&&(G.last=z),c?G.size--:this.size--),!!I},forEach:function(I){for(var F,z=B(this),G=v(I,1<arguments.length?arguments[1]:void 0,3);F=F?F.next:z.first;)for(G(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(I){return!!k(this,I)}}),d(L.prototype,A?{get:function(I){return(I=k(this,I))&&I.value},set:function(I,F){return R(this,I===0?0:I,F)}}:{add:function(I){return R(this,I=I===0?0:I,I)}}),c&&h(L.prototype,"size",{get:function(){return B(this).size}}),L},setStrong:function(w,M,A){var P=M+" Iterator",R=S(M),k=S(P);f(w,M,function(L,B){b(this,{type:P,target:L,state:R(L),kind:B,last:void 0})},function(){for(var L=k(this),B=L.kind,I=L.last;I&&I.removed;)I=I.previous;return L.target&&(L.last=I=I?I.next:L.state.first)?B=="keys"?{value:I.key,done:!1}:B=="values"?{value:I.value,done:!1}:{value:[I.key,I.value],done:!1}:{value:L.target=void 0,done:!0}},A?"entries":"values",!A,!0),u(M)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(i,_,g){function h(R){return R.frozen||(R.frozen=new l)}function l(){this.entries=[]}function d(R,k){return M(R.entries,function(L){return L[0]===k})}var v=i("../internals/redefine-all"),x=i("../internals/internal-metadata").getWeakData,p=i("../internals/an-object"),f=i("../internals/is-object"),u=i("../internals/an-instance"),c=i("../internals/iterate"),m=i("../internals/array-iteration"),b=i("../internals/has"),S=(i=i("../internals/internal-state")).set,w=i.getterFor,M=m.find,A=m.findIndex,P=0;l.prototype={get:function(R){if(R=d(this,R))return R[1]},has:function(R){return!!d(this,R)},set:function(R,k){var L=d(this,R);L?L[1]=k:this.entries.push([R,k])},delete:function(R){var k=A(this.entries,function(L){return L[0]===R});return~k&&this.entries.splice(k,1),!!~k}},_.exports={getConstructor:function(R,k,L,B){function I(G,N,O){var H=z(G),q=x(p(N),!0);return q===!0?h(H).set(N,O):q[H.id]=O,G}var F=R(function(G,N){u(G,F,k),S(G,{type:k,id:P++,frozen:void 0}),N!=null&&c(N,G[B],G,L)}),z=w(k);return v(F.prototype,{delete:function(G){var N,O=z(this);return!!f(G)&&((N=x(G))===!0?h(O).delete(G):N&&b(N,O.id)&&delete N[O.id])},has:function(G){var N,O=z(this);return!!f(G)&&((N=x(G))===!0?h(O).has(G):N&&b(N,O.id))}}),v(F.prototype,L?{get:function(G){var N,O=z(this);if(f(G))return(N=x(G))===!0?h(O).get(G):N?N[O.id]:void 0},set:function(G,N){return I(this,G,N)}}:{add:function(G){return I(this,G,!0)}}),F}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":60,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine-all":107}],32:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/global"),d=i("../internals/is-forced"),v=i("../internals/redefine"),x=i("../internals/internal-metadata"),p=i("../internals/iterate"),f=i("../internals/an-instance"),u=i("../internals/is-object"),c=i("../internals/fails"),m=i("../internals/check-correctness-of-iteration"),b=i("../internals/set-to-string-tag"),S=i("../internals/inherit-if-required");_.exports=function(w,M,A){function P(K){var ne=O[K];v(O,K,K=="add"?function(ee){return ne.call(this,ee===0?0:ee),this}:K=="delete"?function(ee){return!(z&&!u(ee))&&ne.call(this,ee===0?0:ee)}:K=="get"?function(ee){return z&&!u(ee)?void 0:ne.call(this,ee===0?0:ee)}:K=="has"?function(ee){return!(z&&!u(ee))&&ne.call(this,ee===0?0:ee)}:function(ee,se){return ne.call(this,ee===0?0:ee,se),this})}var R,k,L,B,I,F=w.indexOf("Map")!==-1,z=w.indexOf("Weak")!==-1,G=F?"set":"add",N=l[w],O=N&&N.prototype,H=N,q={};return d(w,typeof N!="function"||!(z||O.forEach&&!c(function(){new N().entries().next()})))?(H=A.getConstructor(M,w,F,G),x.REQUIRED=!0):d(w,!0)&&(k=(R=new H)[G](z?{}:-0,1)!=R,L=c(function(){R.has(1)}),B=m(function(K){new N(K)}),I=!z&&c(function(){for(var K=new N,ne=5;ne--;)K[G](ne,ne);return!K.has(-0)}),B||(((H=M(function(K,ne){return f(K,H,w),K=S(new N,K,H),ne!=null&&p(ne,K[G],K,F),K})).prototype=O).constructor=H),(L||I)&&(P("delete"),P("has"),F&&P("get")),(I||k)&&P(G),z&&O.clear&&delete O.clear),q[w]=H,h({global:!0,forced:H!=N},q),b(H,w),z||A.setStrong(H,w,F),H}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],33:[function(i,_,g){var h=i("../internals/has"),l=i("../internals/own-keys"),d=i("../internals/object-get-own-property-descriptor"),v=i("../internals/object-define-property");_.exports=function(x,p){for(var f=l(p),u=v.f,c=d.f,m=0;m<f.length;m++){var b=f[m];h(x,b)||u(x,b,c(p,b))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],34:[function(i,_,g){var h=i("../internals/well-known-symbol")("match");_.exports=function(l){var d=/./;try{"/./"[l](d)}catch{try{return d[h]=!1,"/./"[l](d)}catch{}}return!1}},{"../internals/well-known-symbol":148}],35:[function(i,_,g){i=i("../internals/fails"),_.exports=!i(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},{"../internals/fails":51}],36:[function(i,_,g){var h=i("../internals/require-object-coercible"),l=/"/g;_.exports=function(d,v,x,p){d=String(h(d));var f="<"+v;return x!==""&&(f+=" "+x+'="'+String(p).replace(l,"&quot;")+'"'),f+">"+d+"</"+v+">"}},{"../internals/require-object-coercible":113}],37:[function(i,_,g){function h(){return this}var l=i("../internals/iterators-core").IteratorPrototype,d=i("../internals/object-create"),v=i("../internals/create-property-descriptor"),x=i("../internals/set-to-string-tag"),p=i("../internals/iterators");_.exports=function(f,u,c){return u+=" Iterator",f.prototype=d(l,{next:v(1,c)}),x(f,u,!1,!0),p[u]=h,f}},{"../internals/create-property-descriptor":39,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],38:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/object-define-property"),d=i("../internals/create-property-descriptor");_.exports=h?function(v,x,p){return l.f(v,x,d(1,p))}:function(v,x,p){return v[x]=p,v}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":92}],39:[function(i,_,g){_.exports=function(h,l){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:l}}},{}],40:[function(i,_,g){var h=i("../internals/to-primitive"),l=i("../internals/object-define-property"),d=i("../internals/create-property-descriptor");_.exports=function(v,x,p){(x=h(x))in v?l.f(v,x,d(0,p)):v[x]=p}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":92,"../internals/to-primitive":140}],41:[function(i,_,g){function h(){return this}var l=i("../internals/export"),d=i("../internals/create-iterator-constructor"),v=i("../internals/object-get-prototype-of"),x=i("../internals/object-set-prototype-of"),p=i("../internals/set-to-string-tag"),f=i("../internals/create-non-enumerable-property"),u=i("../internals/redefine"),c=i("../internals/well-known-symbol"),m=i("../internals/is-pure"),b=i("../internals/iterators"),S=(i=i("../internals/iterators-core")).IteratorPrototype,w=i.BUGGY_SAFARI_ITERATORS,M=c("iterator"),A="values",P="entries";_.exports=function(R,k,L,B,I,F,z){function G(se){if(se===I&&ne)return ne;if(!w&&se in q)return q[se];switch(se){case"keys":case A:case P:return function(){return new L(this,se)}}return function(){return new L(this)}}d(L,k,B),B=k+" Iterator";var N,O,H=!1,q=R.prototype,K=q[M]||q["@@iterator"]||I&&q[I],ne=!w&&K||G(I),ee=k=="Array"&&q.entries||K;if(ee&&(ee=v(ee.call(new R)),S!==Object.prototype&&ee.next&&(m||v(ee)===S||(x?x(ee,S):typeof ee[M]!="function"&&f(ee,M,h)),p(ee,B,!0,!0),m&&(b[B]=h))),I==A&&K&&K.name!==A&&(H=!0,ne=function(){return K.call(this)}),m&&!z||q[M]===ne||f(q,M,ne),b[k]=ne,I)if(N={values:G(A),keys:F?ne:G("keys"),entries:G(P)},z)for(O in N)!w&&!H&&O in q||u(q,O,N[O]);else l({target:k,proto:!0,forced:w||H},N);return N}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148}],42:[function(i,_,g){var h=i("../internals/path"),l=i("../internals/has"),d=i("../internals/well-known-symbol-wrapped"),v=i("../internals/object-define-property").f;_.exports=function(x){var p=h.Symbol||(h.Symbol={});l(p,x)||v(p,x,{value:d.f(x)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":147}],43:[function(i,_,g){i=i("../internals/fails"),_.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(i,_,g){var h=i("../internals/global"),l=(i=i("../internals/is-object"),h.document),d=i(l)&&i(l.createElement);_.exports=function(v){return d?l.createElement(v):{}}},{"../internals/global":59,"../internals/is-object":74}],45:[function(i,_,g){_.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(i,_,g){i=i("../internals/engine-user-agent"),_.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},{"../internals/engine-user-agent":47}],47:[function(i,_,g){i=i("../internals/get-built-in"),_.exports=i("navigator","userAgent")||""},{"../internals/get-built-in":56}],48:[function(i,_,g){var h,l,d=i("../internals/global");i=i("../internals/engine-user-agent"),(d=(d=(d=d.process)&&d.versions)&&d.v8)?l=(h=d.split("."))[0]+h[1]:i&&(!(h=i.match(/Edge\/(\d+)/))||74<=h[1])&&(h=i.match(/Chrome\/(\d+)/))&&(l=h[1]),_.exports=l&&+l},{"../internals/engine-user-agent":47,"../internals/global":59}],49:[function(i,_,g){_.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(i,_,g){var h=i("../internals/global"),l=i("../internals/object-get-own-property-descriptor").f,d=i("../internals/create-non-enumerable-property"),v=i("../internals/redefine"),x=i("../internals/set-global"),p=i("../internals/copy-constructor-properties"),f=i("../internals/is-forced");_.exports=function(u,c){var m,b,S,w=u.target,M=u.global,A=u.stat,P=M?h:A?h[w]||x(w,{}):(h[w]||{}).prototype;if(P)for(m in c){if(b=c[m],S=u.noTargetGet?(S=l(P,m))&&S.value:P[m],!f(M?m:w+(A?".":"#")+m,u.forced)&&S!==void 0){if(typeof b==typeof S)continue;p(b,S)}(u.sham||S&&S.sham)&&d(b,"sham",!0),v(P,m,b,u)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],51:[function(i,_,g){_.exports=function(h){try{return!!h()}catch{return!0}}},{}],52:[function(i,_,g){i("../modules/es.regexp.exec");var h=i("../internals/redefine"),l=i("../internals/fails"),d=i("../internals/well-known-symbol"),v=i("../internals/regexp-exec"),x=i("../internals/create-non-enumerable-property"),p=d("species"),f=!l(function(){var b=/./;return b.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(b,"$<a>")!=="7"}),u="a".replace(/./,"$0")==="$0",c=!!/./[i=d("replace")]&&/./[i]("a","$0")==="",m=!l(function(){var b,S=(b=/(?:)/).exec;return(b=(b.exec=function(){return S.apply(this,arguments)},"ab".split(b))).length!==2||b[0]!=="a"||b[1]!=="b"});_.exports=function(b,S,w,M){var A,P,R=d(b),k=!l(function(){var B={};return B[R]=function(){return 7},""[b](B)!=7}),L=k&&!l(function(){var B=!1,I=/a/;return b==="split"&&((I={constructor:{}}).constructor[p]=function(){return I},I.flags="",I[R]=/./[R]),I.exec=function(){return B=!0,null},I[R](""),!B});k&&L&&(b!=="replace"||f&&u&&!c)&&(b!=="split"||m)||(A=/./[R],w=(L=w(R,""[b],function(B,I,F,z,G){return I.exec===v?k&&!G?{done:!0,value:A.call(I,F,z)}:{done:!0,value:B.call(F,I,z)}:{done:!1}},{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:c}))[0],P=L[1],h(String.prototype,b,w),h(RegExp.prototype,R,S==2?function(B,I){return P.call(B,this,I)}:function(B){return P.call(B,this)})),M&&x(RegExp.prototype[R],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":148,"../modules/es.regexp.exec":185}],53:[function(i,_,g){i=i("../internals/fails"),_.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],54:[function(i,_,g){var h=i("../internals/a-function");_.exports=function(l,d,v){if(h(l),d===void 0)return l;switch(v){case 0:return function(){return l.call(d)};case 1:return function(x){return l.call(d,x)};case 2:return function(x,p){return l.call(d,x,p)};case 3:return function(x,p,f){return l.call(d,x,p,f)}}return function(){return l.apply(d,arguments)}}},{"../internals/a-function":5}],55:[function(i,_,g){var h=i("../internals/a-function"),l=i("../internals/is-object"),d=[].slice,v={};_.exports=Function.bind||function(x){var p=h(this),f=d.call(arguments,1),u=function(){var c=f.concat(d.call(arguments));if(this instanceof u){var m=p,b=c.length,S=c;if(!(b in v)){for(var w=[],M=0;M<b;M++)w[M]="a["+M+"]";v[b]=Function("C,a","return new C("+w.join(",")+")")}return v[b](m,S)}return p.apply(x,c)};return l(p.prototype)&&(u.prototype=p.prototype),u}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(i,_,g){function h(v){return typeof v=="function"?v:void 0}var l=i("../internals/path"),d=i("../internals/global");_.exports=function(v,x){return arguments.length<2?h(l[v])||h(d[v]):l[v]&&l[v][x]||d[v]&&d[v][x]}},{"../internals/global":59,"../internals/path":104}],57:[function(i,_,g){var h=i("../internals/classof"),l=i("../internals/iterators"),d=i("../internals/well-known-symbol")("iterator");_.exports=function(v){if(v!=null)return v[d]||v["@@iterator"]||l[h(v)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":148}],58:[function(i,_,g){var h=i("../internals/an-object"),l=i("../internals/get-iterator-method");_.exports=function(d){var v=l(d);if(typeof v!="function")throw TypeError(String(d)+" is not iterable");return h(v.call(d))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(i,_,g){(function(h){function l(d){return d&&d.Math==Math&&d}_.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof h=="object"&&h)||Function("return this")()}).call(this,y!==void 0?y:typeof self<"u"?self:typeof window<"u"?window:{})},{}],60:[function(i,_,g){var h={}.hasOwnProperty;_.exports=function(l,d){return h.call(l,d)}},{}],61:[function(i,_,g){_.exports={}},{}],62:[function(i,_,g){var h=i("../internals/global");_.exports=function(l,d){var v=h.console;v&&v.error&&(arguments.length===1?v.error(l):v.error(l,d))}},{"../internals/global":59}],63:[function(i,_,g){i=i("../internals/get-built-in"),_.exports=i("document","documentElement")},{"../internals/get-built-in":56}],64:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/fails"),d=i("../internals/document-create-element");_.exports=!h&&!l(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],65:[function(i,_,g){var h=Math.abs,l=Math.pow,d=Math.floor,v=Math.log,x=Math.LN2;_.exports={pack:function(p,f,u){var c,m,b,S=new Array(u),w=8*u-f-1,M=(u=(1<<w)-1)>>1,A=f===23?l(2,-24)-l(2,-77):0,P=p<0||p===0&&1/p<0?1:0,R=0;for((p=h(p))!=p||p===1/0?(m=p!=p?1:0,c=u):(c=d(v(p)/x),p*(b=l(2,-c))<1&&(c--,b*=2),2<=(p+=1<=c+M?A/b:A*l(2,1-M))*b&&(c++,b/=2),u<=c+M?(m=0,c=u):1<=c+M?(m=(p*b-1)*l(2,f),c+=M):(m=p*l(2,M-1)*l(2,f),c=0));8<=f;S[R++]=255&m,m/=256,f-=8);for(c=c<<f|m,w+=f;0<w;S[R++]=255&c,c/=256,w-=8);return S[--R]|=128*P,S},unpack:function(p,f){var u,c,m=p.length,b=(1<<(c=8*m-f-1))-1,S=b>>1,w=c-7,M=m-1,A=127&(c=p[M--]);for(c>>=7;0<w;A=256*A+p[M],M--,w-=8);for(u=A&(1<<-w)-1,A>>=-w,w+=f;0<w;u=256*u+p[M],M--,w-=8);if(A===0)A=1-S;else{if(A===b)return u?NaN:c?-1/0:1/0;u+=l(2,f),A-=S}return(c?-1:1)*u*l(2,A-f)}}},{}],66:[function(i,_,g){var h=i("../internals/fails"),l=i("../internals/classof-raw"),d="".split;_.exports=h(function(){return!Object("z").propertyIsEnumerable(0)})?function(v){return l(v)=="String"?d.call(v,""):Object(v)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],67:[function(i,_,g){var h=i("../internals/is-object"),l=i("../internals/object-set-prototype-of");_.exports=function(d,v,x){return l&&typeof(v=v.constructor)=="function"&&v!==x&&h(v=v.prototype)&&v!==x.prototype&&l(d,v),d}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(i,_,g){i=i("../internals/shared-store");var h=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(l){return h.call(l)}),_.exports=i.inspectSource},{"../internals/shared-store":119}],69:[function(i,_,g){function h(S){x(S,u,{value:{objectID:"O"+ ++c,weakData:{}}})}var l=i("../internals/hidden-keys"),d=i("../internals/is-object"),v=i("../internals/has"),x=i("../internals/object-define-property").f,p=i("../internals/uid"),f=i("../internals/freezing"),u=p("meta"),c=0,m=Object.isExtensible||function(){return!0},b=_.exports={REQUIRED:!1,fastKey:function(S,w){if(!d(S))return typeof S=="symbol"?S:(typeof S=="string"?"S":"P")+S;if(!v(S,u)){if(!m(S))return"F";if(!w)return"E";h(S)}return S[u].objectID},getWeakData:function(S,w){if(!v(S,u)){if(!m(S))return!0;if(!w)return!1;h(S)}return S[u].weakData},onFreeze:function(S){return f&&b.REQUIRED&&m(S)&&!v(S,u)&&h(S),S}};l[u]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":145}],70:[function(i,_,g){var h,l,d,v,x,p,f,u,c=i("../internals/native-weak-map"),m=i("../internals/global"),b=i("../internals/is-object"),S=i("../internals/create-non-enumerable-property"),w=i("../internals/has"),M=i("../internals/shared-key");i=i("../internals/hidden-keys"),m=m.WeakMap,f=c?(h=new m,l=h.get,d=h.has,v=h.set,x=function(A,P){return v.call(h,A,P),P},p=function(A){return l.call(h,A)||{}},function(A){return d.call(h,A)}):(i[u=M("state")]=!0,x=function(A,P){return S(A,u,P),P},p=function(A){return w(A,u)?A[u]:{}},function(A){return w(A,u)}),_.exports={set:x,get:p,has:f,enforce:function(A){return f(A)?p(A):x(A,{})},getterFor:function(A){return function(P){if(b(P)&&(P=p(P)).type===A)return P;throw TypeError("Incompatible receiver, "+A+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(i,_,g){var h=i("../internals/well-known-symbol"),l=i("../internals/iterators"),d=h("iterator"),v=Array.prototype;_.exports=function(x){return x!==void 0&&(l.Array===x||v[d]===x)}},{"../internals/iterators":79,"../internals/well-known-symbol":148}],72:[function(i,_,g){var h=i("../internals/classof-raw");_.exports=Array.isArray||function(l){return h(l)=="Array"}},{"../internals/classof-raw":28}],73:[function(i,_,g){function h(u,c){return(u=x[v(u)])==f||u!=p&&(typeof c=="function"?l(c):!!c)}var l=i("../internals/fails"),d=/#|\.prototype\./,v=h.normalize=function(u){return String(u).replace(d,".").toLowerCase()},x=h.data={},p=h.NATIVE="N",f=h.POLYFILL="P";_.exports=h},{"../internals/fails":51}],74:[function(i,_,g){_.exports=function(h){return typeof h=="object"?h!==null:typeof h=="function"}},{}],75:[function(i,_,g){_.exports=!1},{}],76:[function(i,_,g){var h=i("../internals/is-object"),l=i("../internals/classof-raw"),d=i("../internals/well-known-symbol")("match");_.exports=function(v){var x;return h(v)&&((x=v[d])!==void 0?!!x:l(v)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":148}],77:[function(i,_,g){function h(u,c){this.stopped=u,this.result=c}var l=i("../internals/an-object"),d=i("../internals/is-array-iterator-method"),v=i("../internals/to-length"),x=i("../internals/function-bind-context"),p=i("../internals/get-iterator-method"),f=i("../internals/call-with-safe-iteration-closing");(_.exports=function(u,c,m,b,S){var w,M,A,P,R,k,L=x(c,m,b?2:1);if(S)w=u;else{if(typeof(c=p(u))!="function")throw TypeError("Target is not iterable");if(d(c)){for(M=0,A=v(u.length);M<A;M++)if((P=b?L(l(k=u[M])[0],k[1]):L(u[M]))&&P instanceof h)return P;return new h(!1)}w=c.call(u)}for(R=w.next;!(k=R.call(w)).done;)if(typeof(P=f(w,L,k.value,b))=="object"&&P&&P instanceof h)return P;return new h(!1)}).stop=function(u){return new h(!0,u)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136}],78:[function(i,_,g){var h,l,d=i("../internals/object-get-prototype-of"),v=i("../internals/create-non-enumerable-property"),x=i("../internals/has"),p=i("../internals/well-known-symbol"),f=(i=i("../internals/is-pure"),p=p("iterator"),!1);[].keys&&("next"in(l=[].keys())?(d=d(d(l)))!==Object.prototype&&(h=d):f=!0),h==null&&(h={}),i||x(h,p)||v(h,p,function(){return this}),_.exports={IteratorPrototype:h,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":38,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":148}],79:[function(i,_,g){_.exports={}},{}],80:[function(i,_,g){_.exports=Math.sign||function(h){return(h=+h)==0||h!=h?h:h<0?-1:1}},{}],81:[function(i,_,g){var h,l,d,v,x,p,f,u,c=i("../internals/global"),m=i("../internals/object-get-own-property-descriptor").f,b=i("../internals/classof-raw"),S=i("../internals/task").set,w=(i=i("../internals/engine-is-ios"),c.MutationObserver||c.WebKitMutationObserver),M=c.process,A=c.Promise,P=b(M)=="process";b=m(c,"queueMicrotask"),(m=b&&b.value)||(h=function(){var R,k;for(P&&(R=M.domain)&&R.exit();l;){k=l.fn,l=l.next;try{k()}catch(L){throw l?v():d=void 0,L}}d=void 0,R&&R.enter()},v=P?function(){M.nextTick(h)}:w&&!i?(x=!0,p=document.createTextNode(""),new w(h).observe(p,{characterData:!0}),function(){p.data=x=!x}):A&&A.resolve?(f=A.resolve(void 0),u=f.then,function(){u.call(f,h)}):function(){S.call(c,h)}),_.exports=m||function(R){R={fn:R,next:void 0},d&&(d.next=R),l||(l=R,v()),d=R}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":130}],82:[function(i,_,g){i=i("../internals/global"),_.exports=i.Promise},{"../internals/global":59}],83:[function(i,_,g){i=i("../internals/fails"),_.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},{"../internals/fails":51}],84:[function(i,_,g){var h=i("../internals/fails"),l=i("../internals/well-known-symbol"),d=i("../internals/is-pure"),v=l("iterator");_.exports=!h(function(){var x=new URL("b?a=1&b=2&c=3","http://a"),p=x.searchParams,f="";return x.pathname="c%20d",p.forEach(function(u,c){p.delete("b"),f+=c+u}),d&&!x.toJSON||!p.sort||x.href!=="http://a/c%20d?a=1&c=3"||p.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!p[v]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||f!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":75,"../internals/well-known-symbol":148}],85:[function(i,_,g){var h=i("../internals/global");i=i("../internals/inspect-source"),h=h.WeakMap,_.exports=typeof h=="function"&&/native code/.test(i(h))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(i,_,g){function h(d){var v,x;this.promise=new d(function(p,f){if(v!==void 0||x!==void 0)throw TypeError("Bad Promise constructor");v=p,x=f}),this.resolve=l(v),this.reject=l(x)}var l=i("../internals/a-function");_.exports.f=function(d){return new h(d)}},{"../internals/a-function":5}],87:[function(i,_,g){var h=i("../internals/is-regexp");_.exports=function(l){if(h(l))throw TypeError("The method doesn't accept regular expressions");return l}},{"../internals/is-regexp":76}],88:[function(i,_,g){var h=i("../internals/global").isFinite;_.exports=Number.isFinite||function(l){return typeof l=="number"&&h(l)}},{"../internals/global":59}],89:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/fails"),d=i("../internals/object-keys"),v=i("../internals/object-get-own-property-symbols"),x=i("../internals/object-property-is-enumerable"),p=i("../internals/to-object"),f=i("../internals/indexed-object"),u=Object.assign,c=Object.defineProperty;_.exports=!u||l(function(){var m,b,S,w;return!(!h||u({b:1},u(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(b={},w="abcdefghijklmnopqrst",(m={})[S=Symbol()]=7,w.split("").forEach(function(M){b[M]=M}),u({},m)[S]!=7||d(u({},b)).join("")!=w)})?function(m,b){for(var S=p(m),w=arguments.length,M=1,A=v.f,P=x.f;M<w;)for(var R,k=f(arguments[M++]),L=A?d(k).concat(A(k)):d(k),B=L.length,I=0;I<B;)R=L[I++],h&&!P.call(k,R)||(S[R]=k[R]);return S}:u},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":137}],90:[function(i,_,g){function h(){}var l,d=i("../internals/an-object"),v=i("../internals/object-define-properties"),x=i("../internals/enum-bug-keys"),p=i("../internals/hidden-keys"),f=i("../internals/html"),u=i("../internals/document-create-element"),c=(i=i("../internals/shared-key"),"prototype"),m="script",b=i("IE_PROTO"),S=function(M){return"<script>"+M+"</"+m+">"},w=function(){try{l=document.domain&&new ActiveXObject("htmlfile")}catch{}w=l?((M=l).write(S("")),M.close(),A=M.parentWindow.Object,M=null,A):(A="javascript:",(M=u("iframe")).style.display="none",f.appendChild(M),M.src=String(A),(A=M.contentWindow.document).open(),A.write(S("document.F=Object")),A.close(),A.F);for(var M,A,P=x.length;P--;)delete w[c][x[P]];return w()};p[b]=!0,_.exports=Object.create||function(M,A){var P;return M!==null?(h[c]=d(M),P=new h,h[c]=null,P[b]=M):P=w(),A===void 0?P:v(P,A)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/object-define-property"),d=i("../internals/an-object"),v=i("../internals/object-keys");_.exports=h?Object.defineProperties:function(x,p){d(x);for(var f,u=v(p),c=u.length,m=0;m<c;)l.f(x,f=u[m++],p[f]);return x}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/ie8-dom-define"),d=i("../internals/an-object"),v=i("../internals/to-primitive"),x=Object.defineProperty;g.f=h?x:function(p,f,u){if(d(p),f=v(f,!0),d(u),l)try{return x(p,f,u)}catch{}if("get"in u||"set"in u)throw TypeError("Accessors not supported");return"value"in u&&(p[f]=u.value),p}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":64,"../internals/to-primitive":140}],93:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/object-property-is-enumerable"),d=i("../internals/create-property-descriptor"),v=i("../internals/to-indexed-object"),x=i("../internals/to-primitive"),p=i("../internals/has"),f=i("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;g.f=h?u:function(c,m){if(c=v(c),m=x(m,!0),f)try{return u(c,m)}catch{}if(p(c,m))return d(!l.f.call(c,m),c[m])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":134,"../internals/to-primitive":140}],94:[function(i,_,g){var h=i("../internals/to-indexed-object"),l=i("../internals/object-get-own-property-names").f,d={}.toString,v=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_.exports.f=function(x){if(!v||d.call(x)!="[object Window]")return l(h(x));try{return l(x)}catch{return v.slice()}}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":134}],95:[function(i,_,g){var h=i("../internals/object-keys-internal"),l=i("../internals/enum-bug-keys").concat("length","prototype");g.f=Object.getOwnPropertyNames||function(d){return h(d,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],96:[function(i,_,g){g.f=Object.getOwnPropertySymbols},{}],97:[function(i,_,g){var h=i("../internals/has"),l=i("../internals/to-object"),d=i("../internals/shared-key"),v=(i=i("../internals/correct-prototype-getter"),d("IE_PROTO")),x=Object.prototype;_.exports=i?Object.getPrototypeOf:function(p){return p=l(p),h(p,v)?p[v]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?x:null}},{"../internals/correct-prototype-getter":35,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":137}],98:[function(i,_,g){var h=i("../internals/has"),l=i("../internals/to-indexed-object"),d=i("../internals/array-includes").indexOf,v=i("../internals/hidden-keys");_.exports=function(x,p){var f,u=l(x),c=0,m=[];for(f in u)!h(v,f)&&h(u,f)&&m.push(f);for(;p.length>c;)!h(u,f=p[c++])||~d(m,f)||m.push(f);return m}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":134}],99:[function(i,_,g){var h=i("../internals/object-keys-internal"),l=i("../internals/enum-bug-keys");_.exports=Object.keys||function(d){return h(d,l)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":98}],100:[function(i,_,g){var h={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,d=l&&!h.call({1:2},1);g.f=d?function(v){return!!(v=l(this,v))&&v.enumerable}:h},{}],101:[function(i,_,g){var h=i("../internals/an-object"),l=i("../internals/a-possible-prototype");_.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,v=!1,x={};try{(d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(x,[]),v=x instanceof Array}catch{}return function(p,f){return h(p),l(f),v?d.call(p,f):p.__proto__=f,p}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(i,_,g){var h=i("../internals/to-string-tag-support"),l=i("../internals/classof");_.exports=h?{}.toString:function(){return"[object "+l(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":141}],103:[function(i,_,g){var h=i("../internals/get-built-in"),l=i("../internals/object-get-own-property-names"),d=i("../internals/object-get-own-property-symbols"),v=i("../internals/an-object");_.exports=h("Reflect","ownKeys")||function(x){var p=l.f(v(x)),f=d.f;return f?p.concat(f(x)):p}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(i,_,g){i=i("../internals/global"),_.exports=i},{"../internals/global":59}],105:[function(i,_,g){_.exports=function(h){try{return{error:!1,value:h()}}catch(l){return{error:!0,value:l}}}},{}],106:[function(i,_,g){var h=i("../internals/an-object"),l=i("../internals/is-object"),d=i("../internals/new-promise-capability");_.exports=function(v,x){return h(v),l(x)&&x.constructor===v?x:((0,(v=d.f(v)).resolve)(x),v.promise)}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(i,_,g){var h=i("../internals/redefine");_.exports=function(l,d,v){for(var x in d)h(l,x,d[x],v);return l}},{"../internals/redefine":108}],108:[function(i,_,g){var h=i("../internals/global"),l=i("../internals/create-non-enumerable-property"),d=i("../internals/has"),v=i("../internals/set-global"),x=i("../internals/inspect-source"),p=(i=i("../internals/internal-state")).get,f=i.enforce,u=String(String).split("String");(_.exports=function(c,m,b,S){var w=!!S&&!!S.unsafe,M=!!S&&!!S.enumerable;S=!!S&&!!S.noTargetGet,typeof b=="function"&&(typeof m!="string"||d(b,"name")||l(b,"name",m),f(b).source=u.join(typeof m=="string"?m:"")),c===h?M?c[m]=b:v(m,b):(w?!S&&c[m]&&(M=!0):delete c[m],M?c[m]=b:l(c,m,b))})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||x(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(i,_,g){var h=i("./classof-raw"),l=i("./regexp-exec");_.exports=function(d,v){var x=d.exec;if(typeof x=="function"){if(typeof(x=x.call(d,v))!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return x}if(h(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(d,v)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(i,_,g){var h,l,d=i("./regexp-flags"),v=(i=i("./regexp-sticky-helpers"),RegExp.prototype.exec),x=String.prototype.replace,p=v,f=(h=/a/,l=/b*/g,v.call(h,"a"),v.call(l,"a"),h.lastIndex!==0||l.lastIndex!==0),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=/()??/.exec("")[1]!==void 0;_.exports=p=f||c||u?function(m){var b,S,w,M,A=this,P=u&&A.sticky,R=d.call(A),k=A.source,L=0,B=m;return P&&((R=R.replace("y","")).indexOf("g")===-1&&(R+="g"),B=String(m).slice(A.lastIndex),0<A.lastIndex&&(!A.multiline||A.multiline&&m[A.lastIndex-1]!==`
`)&&(k="(?: "+k+")",B=" "+B,L++),S=new RegExp("^(?:"+k+")",R)),c&&(S=new RegExp("^"+k+"$(?!\\s)",R)),f&&(b=A.lastIndex),w=v.call(P?S:A,B),P?w?(w.input=w.input.slice(L),w[0]=w[0].slice(L),w.index=A.lastIndex,A.lastIndex+=w[0].length):A.lastIndex=0:f&&w&&(A.lastIndex=A.global?w.index+w[0].length:b),c&&w&&1<w.length&&x.call(w[0],S,function(){for(M=1;M<arguments.length-2;M++)arguments[M]===void 0&&(w[M]=void 0)}),w}:p},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(i,_,g){var h=i("../internals/an-object");_.exports=function(){var l=h(this),d="";return l.global&&(d+="g"),l.ignoreCase&&(d+="i"),l.multiline&&(d+="m"),l.dotAll&&(d+="s"),l.unicode&&(d+="u"),l.sticky&&(d+="y"),d}},{"../internals/an-object":10}],112:[function(i,_,g){function h(l,d){return RegExp(l,d)}i=i("./fails"),g.UNSUPPORTED_Y=i(function(){var l=h("a","y");return l.lastIndex=2,l.exec("abcd")!=null}),g.BROKEN_CARET=i(function(){var l=h("^r","gy");return l.lastIndex=2,l.exec("str")!=null})},{"./fails":51}],113:[function(i,_,g){_.exports=function(h){if(h==null)throw TypeError("Can't call method on "+h);return h}},{}],114:[function(i,_,g){_.exports=Object.is||function(h,l){return h===l?h!==0||1/h==1/l:h!=h&&l!=l}},{}],115:[function(i,_,g){var h=i("../internals/global"),l=i("../internals/create-non-enumerable-property");_.exports=function(d,v){try{l(h,d,v)}catch{h[d]=v}return v}},{"../internals/create-non-enumerable-property":38,"../internals/global":59}],116:[function(i,_,g){var h=i("../internals/get-built-in"),l=i("../internals/object-define-property"),d=i("../internals/well-known-symbol"),v=i("../internals/descriptors"),x=d("species");_.exports=function(p){p=h(p);var f=l.f;v&&p&&!p[x]&&f(p,x,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],117:[function(i,_,g){var h=i("../internals/object-define-property").f,l=i("../internals/has"),d=i("../internals/well-known-symbol")("toStringTag");_.exports=function(v,x,p){v&&!l(v=p?v:v.prototype,d)&&h(v,d,{configurable:!0,value:x})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":148}],118:[function(i,_,g){var h=i("../internals/shared"),l=i("../internals/uid"),d=h("keys");_.exports=function(v){return d[v]||(d[v]=l(v))}},{"../internals/shared":120,"../internals/uid":145}],119:[function(i,_,g){var h=i("../internals/global"),l=(i=i("../internals/set-global"),"__core-js_shared__");h=h[l]||i(l,{}),_.exports=h},{"../internals/global":59,"../internals/set-global":115}],120:[function(i,_,g){var h=i("../internals/is-pure"),l=i("../internals/shared-store");(_.exports=function(d,v){return l[d]||(l[d]=v!==void 0?v:{})})("versions",[]).push({version:"3.6.5",mode:h?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(i,_,g){var h=i("../internals/an-object"),l=i("../internals/a-function"),d=i("../internals/well-known-symbol")("species");_.exports=function(v,x){return(v=h(v).constructor)===void 0||(v=h(v)[d])==null?x:l(v)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":148}],122:[function(i,_,g){var h=i("../internals/fails");_.exports=function(l){return h(function(){var d=""[l]('"');return d!==d.toLowerCase()||3<d.split('"').length})}},{"../internals/fails":51}],123:[function(i,_,g){function h(v){return function(x,p){x=String(d(x)),p=l(p);var f,u=x.length;return p<0||u<=p?v?"":void 0:(f=x.charCodeAt(p))<55296||56319<f||p+1===u||(u=x.charCodeAt(p+1))<56320||57343<u?v?x.charAt(p):f:v?x.slice(p,p+2):u-56320+(f-55296<<10)+65536}}var l=i("../internals/to-integer"),d=i("../internals/require-object-coercible");_.exports={codeAt:h(!1),charAt:h(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],124:[function(i,_,g){i=i("../internals/engine-user-agent"),_.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},{"../internals/engine-user-agent":47}],125:[function(i,_,g){function h(p){return function(f,u,c){var m=(f=String(v(f))).length;return c=c===void 0?" ":String(c),(u=l(u))<=m||c==""?f:((m=d.call(c,x((u-=m)/c.length))).length>u&&(m=m.slice(0,u)),p?f+m:m+f)}}var l=i("../internals/to-length"),d=i("../internals/string-repeat"),v=i("../internals/require-object-coercible"),x=Math.ceil;_.exports={start:h(!1),end:h(!0)}},{"../internals/require-object-coercible":113,"../internals/string-repeat":127,"../internals/to-length":136}],126:[function(i,_,g){function h(M){return M+22+75*(M<26)}function l(M){var A,P=[],R=(M=function(ee){for(var se=[],me=0,X=ee.length;me<X;){var Z,ie=ee.charCodeAt(me++);55296<=ie&&ie<=56319&&me<X?(64512&(Z=ee.charCodeAt(me++)))==56320?se.push(((1023&ie)<<10)+(1023&Z)+65536):(se.push(ie),me--):se.push(ie)}return se}(M)).length,k=128,L=0,B=72;for(G=0;G<M.length;G++)(A=M[G])<128&&P.push(w(A));var I=P.length,F=I;for(I&&P.push("-");F<R;){for(var z=d,G=0;G<M.length;G++)k<=(A=M[G])&&A<z&&(z=A);var N=F+1;if(z-k>S((d-L)/N))throw RangeError(m);for(L+=(z-k)*N,k=z,G=0;G<M.length;G++){if((A=M[G])<k&&++L>d)throw RangeError(m);if(A==k){for(var O=L,H=v;;H+=v){var q=H<=B?1:B+x<=H?x:H-B;if(O<q)break;var K=O-q,ne=v-q;P.push(w(h(q+K%ne))),O=S(K/ne)}P.push(w(h(O))),B=function(ee,se,me){var X=0;for(ee=me?S(ee/f):ee>>1,ee+=S(ee/se);b*x>>1<ee;X+=v)ee=S(ee/b);return S(X+(b+1)*ee/(ee+p))}(L,N,F==I),L=0,++F}}++L,++k}return P.join("")}var d=2147483647,v=36,x=26,p=38,f=700,u=/[^\0-\u007E]/,c=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",b=v-1,S=Math.floor,w=String.fromCharCode;_.exports=function(M){for(var A,P=[],R=M.toLowerCase().replace(c,".").split("."),k=0;k<R.length;k++)A=R[k],P.push(u.test(A)?"xn--"+l(A):A);return P.join(".")}},{}],127:[function(i,_,g){var h=i("../internals/to-integer"),l=i("../internals/require-object-coercible");_.exports="".repeat||function(d){var v=String(l(this)),x="",p=h(d);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;0<p;(p>>>=1)&&(v+=v))1&p&&(x+=v);return x}},{"../internals/require-object-coercible":113,"../internals/to-integer":135}],128:[function(i,_,g){var h=i("../internals/fails"),l=i("../internals/whitespaces");_.exports=function(d){return h(function(){return!!l[d]()||""[d]()!=""||l[d].name!==d})}},{"../internals/fails":51,"../internals/whitespaces":149}],129:[function(i,_,g){function h(x){return function(p){return p=String(l(p)),1&x&&(p=p.replace(d,"")),2&x?p.replace(v,""):p}}var l=i("../internals/require-object-coercible"),d=(i="["+i("../internals/whitespaces")+"]",RegExp("^"+i+i+"*")),v=RegExp(i+i+"*$");_.exports={start:h(1),end:h(2),trim:h(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":149}],130:[function(i,_,g){function h(I){return function(){B(I)}}function l(I){B(I.data)}function d(I){x.postMessage(I+"",b.protocol+"//"+b.host)}var v,x=i("../internals/global"),p=i("../internals/fails"),f=i("../internals/classof-raw"),u=i("../internals/function-bind-context"),c=i("../internals/html"),m=i("../internals/document-create-element"),b=(i=i("../internals/engine-is-ios"),x.location),S=x.setImmediate,w=x.clearImmediate,M=x.process,A=x.MessageChannel,P=x.Dispatch,R=0,k={},L="onreadystatechange",B=function(I){var F;k.hasOwnProperty(I)&&(F=k[I],delete k[I],F())};S&&w||(S=function(I){for(var F=[],z=1;z<arguments.length;)F.push(arguments[z++]);return k[++R]=function(){(typeof I=="function"?I:Function(I)).apply(void 0,F)},v(R),R},w=function(I){delete k[I]},f(M)=="process"?v=function(I){M.nextTick(h(I))}:P&&P.now?v=function(I){P.now(h(I))}:A&&!i?(i=(f=new A).port2,f.port1.onmessage=l,v=u(i.postMessage,i,1)):!x.addEventListener||typeof postMessage!="function"||x.importScripts||p(d)||b.protocol==="file:"?v=L in m("script")?function(I){c.appendChild(m("script"))[L]=function(){c.removeChild(this),B(I)}}:function(I){setTimeout(h(I),0)}:(v=d,x.addEventListener("message",l,!1))),_.exports={set:S,clear:w}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],131:[function(i,_,g){var h=i("../internals/classof-raw");_.exports=function(l){if(typeof l!="number"&&h(l)!="Number")throw TypeError("Incorrect invocation");return+l}},{"../internals/classof-raw":28}],132:[function(i,_,g){var h=i("../internals/to-integer"),l=Math.max,d=Math.min;_.exports=function(v,x){return(v=h(v))<0?l(v+x,0):d(v,x)}},{"../internals/to-integer":135}],133:[function(i,_,g){var h=i("../internals/to-integer"),l=i("../internals/to-length");_.exports=function(d){if(d===void 0)return 0;d=h(d);var v=l(d);if(d!==v)throw RangeError("Wrong length or index");return v}},{"../internals/to-integer":135,"../internals/to-length":136}],134:[function(i,_,g){var h=i("../internals/indexed-object"),l=i("../internals/require-object-coercible");_.exports=function(d){return h(l(d))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],135:[function(i,_,g){var h=Math.ceil,l=Math.floor;_.exports=function(d){return isNaN(d=+d)?0:(0<d?l:h)(d)}},{}],136:[function(i,_,g){var h=i("../internals/to-integer"),l=Math.min;_.exports=function(d){return 0<d?l(h(d),9007199254740991):0}},{"../internals/to-integer":135}],137:[function(i,_,g){var h=i("../internals/require-object-coercible");_.exports=function(l){return Object(h(l))}},{"../internals/require-object-coercible":113}],138:[function(i,_,g){var h=i("../internals/to-positive-integer");_.exports=function(l,d){if((l=h(l))%d)throw RangeError("Wrong offset");return l}},{"../internals/to-positive-integer":139}],139:[function(i,_,g){var h=i("../internals/to-integer");_.exports=function(l){if((l=h(l))<0)throw RangeError("The argument can't be less than 0");return l}},{"../internals/to-integer":135}],140:[function(i,_,g){var h=i("../internals/is-object");_.exports=function(l,d){if(!h(l))return l;var v,x;if(d&&typeof(v=l.toString)=="function"&&!h(x=v.call(l))||typeof(v=l.valueOf)=="function"&&!h(x=v.call(l))||!d&&typeof(v=l.toString)=="function"&&!h(x=v.call(l)))return x;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],141:[function(i,_,g){var h={};h[i("../internals/well-known-symbol")("toStringTag")]="z",_.exports=String(h)==="[object z]"},{"../internals/well-known-symbol":148}],142:[function(i,_,g){function h(Oe,ze){for(var Be=0,dt=ze.length,Je=new(Se(Oe))(dt);Be<dt;)Je[Be]=ze[Be++];return Je}function l(Oe,ze){Z(Oe,ze,{get:function(){return me(this)[ze]}})}function d(Oe){return Oe instanceof $||(Oe=I(Oe))=="ArrayBuffer"||Oe=="SharedArrayBuffer"}function v(Oe,ze){return ae(Oe)&&typeof ze!="symbol"&&ze in Oe&&String(+ze)==String(ze)}function x(Oe,ze){return v(Oe,ze=L(ze,!0))?M(2,Oe[ze]):ie(Oe,ze)}function p(Oe,ze,Be){return!(v(Oe,ze=L(ze,!0))&&F(Be)&&B(Be,"value"))||B(Be,"get")||B(Be,"set")||Be.configurable||B(Be,"writable")&&!Be.writable||B(Be,"enumerable")&&!Be.enumerable?Z(Oe,ze,Be):(Oe[ze]=Be.value,Oe)}var f=i("../internals/export"),u=i("../internals/global"),c=i("../internals/descriptors"),m=i("../internals/typed-array-constructors-require-wrappers"),b=i("../internals/array-buffer-view-core"),S=i("../internals/array-buffer"),w=i("../internals/an-instance"),M=i("../internals/create-property-descriptor"),A=i("../internals/create-non-enumerable-property"),P=i("../internals/to-length"),R=i("../internals/to-index"),k=i("../internals/to-offset"),L=i("../internals/to-primitive"),B=i("../internals/has"),I=i("../internals/classof"),F=i("../internals/is-object"),z=i("../internals/object-create"),G=i("../internals/object-set-prototype-of"),N=i("../internals/object-get-own-property-names").f,O=i("../internals/typed-array-from"),H=i("../internals/array-iteration").forEach,q=i("../internals/set-species"),K=i("../internals/object-define-property"),ne=i("../internals/object-get-own-property-descriptor"),ee=i("../internals/internal-state"),se=i("../internals/inherit-if-required"),me=ee.get,X=ee.set,Z=K.f,ie=ne.f,ye=Math.round,fe=u.RangeError,$=S.ArrayBuffer,re=S.DataView,de=b.NATIVE_ARRAY_BUFFER_VIEWS,ge=b.TYPED_ARRAY_TAG,ve=b.TypedArray,we=b.TypedArrayPrototype,Se=b.aTypedArrayConstructor,ae=b.isTypedArray,oe="BYTES_PER_ELEMENT",Ee="Wrong length";c?(de||(ne.f=x,K.f=p,l(we,"buffer"),l(we,"byteOffset"),l(we,"byteLength"),l(we,"length")),f({target:"Object",stat:!0,forced:!de},{getOwnPropertyDescriptor:x,defineProperty:p}),_.exports=function(Oe,ze,Be){function dt(ht,lt){Z(ht,lt,{get:function(){var ce=this,ue=lt;return(ce=me(ce)).view[Ue](ue*Je+ce.byteOffset,!0)},set:function(ce){var ue=this,he=lt;ue=me(ue),Be&&(ce=(ce=ye(ce))<0?0:255<ce?255:255&ce),ue.view[Fe](he*Je+ue.byteOffset,ce,!0)},enumerable:!0})}var Je=Oe.match(/\d+$/)[0]/8,_e=Oe+(Be?"Clamped":"")+"Array",Ue="get"+Oe,Fe="set"+Oe,Ne=u[_e],ft=Ne,vt=(Oe=ft&&ft.prototype,{});de?m&&(ft=ze(function(ht,lt,ce,ue){return w(ht,ft,_e),se(F(lt)?d(lt)?ue!==void 0?new Ne(lt,k(ce,Je),ue):ce!==void 0?new Ne(lt,k(ce,Je)):new Ne(lt):ae(lt)?h(ft,lt):O.call(ft,lt):new Ne(R(lt)),ht,ft)}),G&&G(ft,ve),H(N(Ne),function(ht){ht in ft||A(ft,ht,Ne[ht])}),ft.prototype=Oe):(ft=ze(function(ht,lt,ce,ue){w(ht,ft,_e);var he,be,je=0,We=0;if(F(lt)){if(!d(lt))return ae(lt)?h(ft,lt):O.call(ft,lt);var xe=lt;if(We=k(ce,Je),ce=lt.byteLength,ue===void 0){if(ce%Je||(he=ce-We)<0)throw fe(Ee)}else if(ce<(he=P(ue)*Je)+We)throw fe(Ee);be=he/Je}else be=R(lt),xe=new $(he=be*Je);for(X(ht,{buffer:xe,byteOffset:We,byteLength:he,length:be,view:new re(xe)});je<be;)dt(ht,je++)}),G&&G(ft,ve),Oe=ft.prototype=z(we)),Oe.constructor!==ft&&A(Oe,"constructor",ft),ge&&A(Oe,ge,_e),vt[_e]=ft,f({global:!0,forced:ft!=Ne,sham:!de},vt),oe in ft||A(ft,oe,Je),oe in Oe||A(Oe,oe,Je),q(_e)}):_.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":133,"../internals/to-length":136,"../internals/to-offset":138,"../internals/to-primitive":140,"../internals/typed-array-constructors-require-wrappers":143,"../internals/typed-array-from":144}],143:[function(i,_,g){var h=i("../internals/global"),l=i("../internals/fails"),d=i("../internals/check-correctness-of-iteration"),v=(i=i("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,h.ArrayBuffer),x=h.Int8Array;_.exports=!i||!l(function(){x(1)})||!l(function(){new x(-1)})||!d(function(p){new x,new x(null),new x(1.5),new x(p)},!0)||l(function(){return new x(new v(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":59}],144:[function(i,_,g){var h=i("../internals/to-object"),l=i("../internals/to-length"),d=i("../internals/get-iterator-method"),v=i("../internals/is-array-iterator-method"),x=i("../internals/function-bind-context"),p=i("../internals/array-buffer-view-core").aTypedArrayConstructor;_.exports=function(f){var u,c,m,b,S,w,M=h(f),A=arguments.length,P=1<A?arguments[1]:void 0,R=P!==void 0,k=d(M);if(k!=null&&!v(k))for(w=(S=k.call(M)).next,M=[];!(b=w.call(S)).done;)M.push(b.value);for(R&&2<A&&(P=x(P,arguments[2],2)),c=l(M.length),m=new(p(this))(c),u=0;u<c;u++)m[u]=R?P(M[u],u):M[u];return m}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":136,"../internals/to-object":137}],145:[function(i,_,g){var h=0,l=Math.random();_.exports=function(d){return"Symbol("+String(d===void 0?"":d)+")_"+(++h+l).toString(36)}},{}],146:[function(i,_,g){i=i("../internals/native-symbol"),_.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":83}],147:[function(i,_,g){i=i("../internals/well-known-symbol"),g.f=i},{"../internals/well-known-symbol":148}],148:[function(i,_,g){var h=i("../internals/global"),l=i("../internals/shared"),d=i("../internals/has"),v=i("../internals/uid"),x=i("../internals/native-symbol"),p=(i=i("../internals/use-symbol-as-uid"),l("wks")),f=h.Symbol,u=i?f:f&&f.withoutSetter||v;_.exports=function(c){return d(p,c)||(x&&d(f,c)?p[c]=f[c]:p[c]=u("Symbol."+c)),p[c]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":145,"../internals/use-symbol-as-uid":146}],149:[function(i,_,g){_.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],150:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/global"),d=i("../internals/array-buffer"),v=(i=i("../internals/set-species"),"ArrayBuffer");d=d[v],h({global:!0,forced:l[v]!==d},{ArrayBuffer:d}),i(v)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":59,"../internals/set-species":116}],151:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/fails"),d=i("../internals/is-array"),v=i("../internals/is-object"),x=i("../internals/to-object"),p=i("../internals/to-length"),f=i("../internals/create-property"),u=i("../internals/array-species-create"),c=i("../internals/array-method-has-species-support"),m=i("../internals/well-known-symbol"),b=(i=i("../internals/engine-v8-version"),m("isConcatSpreadable")),S=9007199254740991,w="Maximum allowed index exceeded";m=51<=i||!l(function(){var M=[];return M[b]=!1,M.concat()[0]!==M}),i=c("concat"),h({target:"Array",proto:!0,forced:!m||!i},{concat:function(M){for(var A,P,R,k,L,B=x(this),I=u(B,0),F=0,z=-1,G=arguments.length;z<G;z++)if(L=void 0,v(k=R=z===-1?B:arguments[z])&&((L=k[b])!==void 0?L:d(k))){if(P=p(R.length),S<F+P)throw TypeError(w);for(A=0;A<P;A++,F++)A in R&&f(I,F,R[A])}else{if(S<=F)throw TypeError(w);f(I,F++,R)}return I.length=F,I}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":136,"../internals/to-object":137,"../internals/well-known-symbol":148}],152:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-copy-within");i=i("../internals/add-to-unscopables"),h({target:"Array",proto:!0},{copyWithin:l}),i("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],153:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-iteration").every,d=i("../internals/array-method-is-strict");i=i("../internals/array-method-uses-to-length"),d=d("every"),i=i("every"),h({target:"Array",proto:!0,forced:!d||!i},{every:function(v){return l(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],154:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-fill");i=i("../internals/add-to-unscopables"),h({target:"Array",proto:!0},{fill:l}),i("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],155:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-iteration").filter,d=i("../internals/array-method-has-species-support");i=i("../internals/array-method-uses-to-length"),d=d("filter"),i=i("filter"),h({target:"Array",proto:!0,forced:!d||!i},{filter:function(v){return l(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(i,_,g){var h=i("../internals/export");i=i("../internals/array-for-each"),h({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},{"../internals/array-for-each":16,"../internals/export":50}],157:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-from");h({target:"Array",stat:!0,forced:!i("../internals/check-correctness-of-iteration")(function(d){Array.from(d)})},{from:l})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],158:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-includes").includes,d=i("../internals/add-to-unscopables");h({target:"Array",proto:!0,forced:!i("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(v){return l(this,v,1<arguments.length?arguments[1]:void 0)}}),d("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-includes").indexOf,d=i("../internals/array-method-is-strict"),v=(i=i("../internals/array-method-uses-to-length"),[].indexOf),x=!!v&&1/[1].indexOf(1,-0)<0;d=d("indexOf"),i=i("indexOf",{ACCESSORS:!0,1:0}),h({target:"Array",proto:!0,forced:x||!d||!i},{indexOf:function(p){return x?v.apply(this,arguments)||0:l(this,p,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],160:[function(i,_,g){var h=i("../internals/to-indexed-object"),l=i("../internals/add-to-unscopables"),d=i("../internals/iterators"),v=i("../internals/internal-state"),x=(i=i("../internals/define-iterator"),"Array Iterator"),p=v.set,f=v.getterFor(x);_.exports=i(Array,"Array",function(u,c){p(this,{type:x,target:h(u),index:0,kind:c})},function(){var u=f(this),c=u.target,m=u.kind,b=u.index++;return!c||b>=c.length?{value:u.target=void 0,done:!0}:m=="keys"?{value:b,done:!1}:m=="values"?{value:c[b],done:!1}:{value:[b,c[b]],done:!1}},"values"),d.Arguments=d.Array,l("keys"),l("values"),l("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":134}],161:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/indexed-object"),d=i("../internals/to-indexed-object"),v=(i=i("../internals/array-method-is-strict"),[].join);l=l!=Object,i=i("join",","),h({target:"Array",proto:!0,forced:l||!i},{join:function(x){return v.call(d(this),x===void 0?",":x)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":66,"../internals/to-indexed-object":134}],162:[function(i,_,g){i("../internals/export")({target:"Array",proto:!0,forced:(i=i("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:i})},{"../internals/array-last-index-of":20,"../internals/export":50}],163:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-iteration").map,d=i("../internals/array-method-has-species-support");i=i("../internals/array-method-uses-to-length"),d=d("map"),i=i("map"),h({target:"Array",proto:!0,forced:!d||!i},{map:function(v){return l(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/is-object"),d=i("../internals/is-array"),v=i("../internals/to-absolute-index"),x=i("../internals/to-length"),p=i("../internals/to-indexed-object"),f=i("../internals/create-property"),u=i("../internals/well-known-symbol"),c=i("../internals/array-method-has-species-support"),m=(i=i("../internals/array-method-uses-to-length"),c=c("slice"),i=i("slice",{ACCESSORS:!0,0:0,1:2}),u("species")),b=[].slice,S=Math.max;h({target:"Array",proto:!0,forced:!c||!i},{slice:function(w,M){var A,P,R,k=p(this),L=x(k.length),B=v(w,L),I=v(M===void 0?L:M,L);if(d(k)&&((A=typeof(A=k.constructor)=="function"&&(A===Array||d(A.prototype))||l(A)&&(A=A[m])===null?void 0:A)===Array||A===void 0))return b.call(k,B,I);for(P=new(A===void 0?Array:A)(S(I-B,0)),R=0;B<I;B++,R++)B in k&&f(P,R,k[B]);return P.length=R,P}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":132,"../internals/to-indexed-object":134,"../internals/to-length":136,"../internals/well-known-symbol":148}],165:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/array-iteration").some,d=i("../internals/array-method-is-strict");i=i("../internals/array-method-uses-to-length"),d=d("some"),i=i("some"),h({target:"Array",proto:!0,forced:!d||!i},{some:function(v){return l(this,v,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],166:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/to-absolute-index"),d=i("../internals/to-integer"),v=i("../internals/to-length"),x=i("../internals/to-object"),p=i("../internals/array-species-create"),f=i("../internals/create-property"),u=i("../internals/array-method-has-species-support"),c=(i=i("../internals/array-method-uses-to-length"),u=u("splice"),i=i("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),m=Math.min;h({target:"Array",proto:!0,forced:!u||!i},{splice:function(b,S){var w,M,A,P,R,k,L=x(this),B=v(L.length),I=l(b,B);if((b=arguments.length)===0?w=M=0:M=b===1?(w=0,B-I):(w=b-2,m(c(d(S),0),B-I)),9007199254740991<B+w-M)throw TypeError("Maximum allowed length exceeded");for(A=p(L,M),P=0;P<M;P++)(R=I+P)in L&&f(A,P,L[R]);if(w<(A.length=M)){for(P=I;P<B-M;P++)k=P+w,(R=P+M)in L?L[k]=L[R]:delete L[k];for(P=B;B-M+w<P;P--)delete L[P-1]}else if(M<w)for(P=B-M;I<P;P--)k=P+w-1,(R=P+M-1)in L?L[k]=L[R]:delete L[k];for(P=0;P<w;P++)L[P+I]=arguments[P+2];return L.length=B-M+w,A}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":132,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],167:[function(i,_,g){var h=i("../internals/descriptors"),l=(i=i("../internals/object-define-property").f,Function.prototype),d=l.toString,v=/^\s*function ([^ (]*)/;!h||"name"in l||i(l,"name",{configurable:!0,get:function(){try{return d.call(this).match(v)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":92}],168:[function(i,_,g){var h=i("../internals/collection");i=i("../internals/collection-strong"),_.exports=h("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},i)},{"../internals/collection":32,"../internals/collection-strong":30}],169:[function(i,_,g){i=i("../internals/export");var h=Math.hypot,l=Math.abs,d=Math.sqrt;i({target:"Math",stat:!0,forced:!!h&&h(1/0,NaN)!==1/0},{hypot:function(v,x){for(var p,f,u=0,c=0,m=arguments.length,b=0;c<m;)b<(p=l(arguments[c++]))?(u=u*(f=b/p)*f+1,b=p):u+=0<p?(f=p/b)*f:p;return b===1/0?1/0:b*d(u)}})},{"../internals/export":50}],170:[function(i,_,g){i("../internals/export")({target:"Math",stat:!0},{sign:i("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":80}],171:[function(i,_,g){function h(G){var N,O,H,q,K,ne,ee,se=c(G,!1);if(typeof se=="string"&&2<se.length){if((G=(se=A(se)).charCodeAt(0))===43||G===45){if((N=se.charCodeAt(2))===88||N===120)return NaN}else if(G===48){switch(se.charCodeAt(1)){case 66:case 98:O=2,H=49;break;case 79:case 111:O=8,H=55;break;default:return+se}for(K=(q=se.slice(2)).length,ne=0;ne<K;ne++)if((ee=q.charCodeAt(ne))<48||H<ee)return NaN;return parseInt(q,O)}}return+se}var l=i("../internals/descriptors"),d=i("../internals/global"),v=i("../internals/is-forced"),x=i("../internals/redefine"),p=i("../internals/has"),f=i("../internals/classof-raw"),u=i("../internals/inherit-if-required"),c=i("../internals/to-primitive"),m=i("../internals/fails"),b=i("../internals/object-create"),S=i("../internals/object-get-own-property-names").f,w=i("../internals/object-get-own-property-descriptor").f,M=i("../internals/object-define-property").f,A=i("../internals/string-trim").trim,P="Number",R=d[P],k=R.prototype,L=f(b(k))==P;if(v(P,!R(" 0o1")||!R("0b1")||R("+0x1"))){for(var B,I=function(G){G=arguments.length<1?0:G;var N=this;return N instanceof I&&(L?m(function(){k.valueOf.call(N)}):f(N)!=P)?u(new R(h(G)),N,I):h(G)},F=l?S(R):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),z=0;F.length>z;z++)p(R,B=F[z])&&!p(I,B)&&M(I,B,w(R,B));(I.prototype=k).constructor=I,x(d,P,I)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":129,"../internals/to-primitive":140}],172:[function(i,_,g){i("../internals/export")({target:"Number",stat:!0},{isFinite:i("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":88}],173:[function(i,_,g){function h(u,c,m){return c===0?m:c%2==1?h(u,c-1,m*u):h(u*u,c/2,m)}var l=i("../internals/export"),d=i("../internals/to-integer"),v=i("../internals/this-number-value"),x=i("../internals/string-repeat"),p=(i=i("../internals/fails"),1 .toFixed),f=Math.floor;l({target:"Number",proto:!0,forced:p&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!i(function(){p.call({})})},{toFixed:function(u){function c(k,L){for(var B=-1,I=L;++B<6;)I+=k*A[B],A[B]=I%1e7,I=f(I/1e7)}function m(k){for(var L=6,B=0;0<=--L;)B+=A[L],A[L]=f(B/k),B=B%k*1e7}function b(){for(var k,L=6,B="";0<=--L;)B===""&&L!==0&&A[L]===0||(k=String(A[L]),B=B===""?k:B+x.call("0",7-k.length)+k);return B}var S,w,M=v(this),A=(u=d(u),[0,0,0,0,0,0]),P="",R="0";if(u<0||20<u)throw RangeError("Incorrect fraction digits");if(M!=M)return"NaN";if(M<=-1e21||1e21<=M)return String(M);if(M<0&&(P="-",M=-M),1e-21<M)if(M=(S=function(k){for(var L=0,B=k;4096<=B;)L+=12,B/=4096;for(;2<=B;)L+=1,B/=2;return L}(M*h(2,69,1))-69)<0?M*h(2,-S,1):M/h(2,S,1),M*=4503599627370496,0<(S=52-S)){for(c(0,M),w=u;7<=w;)c(1e7,0),w-=7;for(c(h(10,w,1),0),w=S-1;23<=w;)m(1<<23),w-=23;m(1<<w),c(1,1),m(2),R=b()}else c(0,M),c(1<<-S,0),R=b()+x.call("0",u);return 0<u?P+((M=R.length)<=u?"0."+x.call("0",u-M)+R:R.slice(0,M-u)+"."+R.slice(M-u)):P+R}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":127,"../internals/this-number-value":131,"../internals/to-integer":135}],174:[function(i,_,g){var h=i("../internals/export");i=i("../internals/object-assign"),h({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},{"../internals/export":50,"../internals/object-assign":89}],175:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/iterate"),d=i("../internals/create-property");h({target:"Object",stat:!0},{fromEntries:function(v){var x={};return l(v,function(p,f){d(x,p,f)},void 0,!0),x}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":77}],176:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/fails"),d=i("../internals/to-indexed-object"),v=i("../internals/object-get-own-property-descriptor").f;i=i("../internals/descriptors"),l=l(function(){v(1)}),h({target:"Object",stat:!0,forced:!i||l,sham:!i},{getOwnPropertyDescriptor:function(x,p){return v(d(x),p)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":93,"../internals/to-indexed-object":134}],177:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/fails");i=i("../internals/object-get-own-property-names-external").f,h({target:"Object",stat:!0,forced:l(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":94}],178:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/fails"),d=i("../internals/to-object"),v=i("../internals/object-get-prototype-of");i=i("../internals/correct-prototype-getter"),h({target:"Object",stat:!0,forced:l(function(){v(1)}),sham:!i},{getPrototypeOf:function(x){return v(d(x))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":97,"../internals/to-object":137}],179:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/to-object"),d=i("../internals/object-keys");h({target:"Object",stat:!0,forced:i("../internals/fails")(function(){d(1)})},{keys:function(v){return d(l(v))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":99,"../internals/to-object":137}],180:[function(i,_,g){var h=i("../internals/to-string-tag-support"),l=i("../internals/redefine");i=i("../internals/object-to-string"),h||l(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":141}],181:[function(i,_,g){var h,l,d,v,x=i("../internals/export"),p=i("../internals/is-pure"),f=i("../internals/global"),u=i("../internals/get-built-in"),c=i("../internals/native-promise-constructor"),m=i("../internals/redefine"),b=i("../internals/redefine-all"),S=i("../internals/set-to-string-tag"),w=i("../internals/set-species"),M=i("../internals/is-object"),A=i("../internals/a-function"),P=i("../internals/an-instance"),R=i("../internals/classof-raw"),k=i("../internals/inspect-source"),L=i("../internals/iterate"),B=i("../internals/check-correctness-of-iteration"),I=i("../internals/species-constructor"),F=i("../internals/task").set,z=i("../internals/microtask"),G=i("../internals/promise-resolve"),N=i("../internals/host-report-errors"),O=i("../internals/new-promise-capability"),H=i("../internals/perform"),q=i("../internals/internal-state"),K=i("../internals/is-forced"),ne=i("../internals/well-known-symbol"),ee=i("../internals/engine-v8-version"),se=ne("species"),me="Promise",X=q.get,Z=q.set,ie=q.getterFor(me),ye=c,fe=f.TypeError,$=f.document,re=f.process,de=u("fetch"),ge=O.f,ve=ge,we=R(re)=="process",Se=!!($&&$.createEvent&&f.dispatchEvent),ae="unhandledrejection",oe=(ne=(i=K(me,function(){var _e,Ue;return k(ye)===String(ye)&&(ee===66||!we&&typeof PromiseRejectionEvent!="function")?!0:!((!p||ye.prototype.finally)&&(51<=ee&&/native code/.test(ye)||(Ue=function(Fe){Fe(function(){},function(){})},((_e=ye.resolve(1)).constructor={})[se]=Ue,_e.then(function(){})instanceof Ue)))}))||!B(function(_e){ye.all(_e).catch(function(){})}),function(_e){var Ue;return!(!M(_e)||typeof(Ue=_e.then)!="function")&&Ue}),Ee=function(_e,Ue,Fe){var Ne;Ue.notified||(Ue.notified=!0,Ne=Ue.reactions,z(function(){for(var ft,vt,ht=Ue.value,lt=Ue.state==1,ce=0;Ne.length>ce;){var ue,he,be,je=Ne[ce++],We=lt?je.ok:je.fail,xe=je.resolve,Ve=je.reject,Ce=je.domain;try{We?(lt||(Ue.rejection===2&&function(Qe,ut){F.call(f,function(){we?re.emit("rejectionHandled",Qe):Oe("rejectionhandled",Qe,ut.value)})}(_e,Ue),Ue.rejection=1),We===!0?ue=ht:(Ce&&Ce.enter(),ue=We(ht),Ce&&(Ce.exit(),be=!0)),ue===je.promise?Ve(fe("Promise-chain cycle")):(he=oe(ue))?he.call(ue,xe,Ve):xe(ue)):Ve(ht)}catch(Qe){Ce&&!be&&Ce.exit(),Ve(Qe)}}Ue.reactions=[],Ue.notified=!1,Fe&&!Ue.rejection&&(ft=_e,vt=Ue,F.call(f,function(){var Qe=vt.value,ut=ze(vt);if(ut&&(ut=H(function(){we?re.emit("unhandledRejection",Qe,ft):Oe(ae,ft,Qe)}),vt.rejection=we||ze(vt)?2:1,ut.error))throw ut.value}))}))},Oe=function(_e,Ue,Fe){var Ne;Se?((Ne=$.createEvent("Event")).promise=Ue,Ne.reason=Fe,Ne.initEvent(_e,!1,!0),f.dispatchEvent(Ne)):Ne={promise:Ue,reason:Fe},(Ue=f["on"+_e])?Ue(Ne):_e===ae&&N("Unhandled promise rejection",Fe)},ze=function(_e){return _e.rejection!==1&&!_e.parent},Be=function(_e,Ue,Fe,Ne){return function(ft){_e(Ue,Fe,ft,Ne)}},dt=function(_e,Ue,Fe,Ne){Ue.done||(Ue.done=!0,(Ue=Ne||Ue).value=Fe,Ue.state=2,Ee(_e,Ue,!0))},Je=function(_e,Ue,Fe,Ne){if(!Ue.done){Ue.done=!0,Ne&&(Ue=Ne);try{if(_e===Fe)throw fe("Promise can't be resolved itself");var ft=oe(Fe);ft?z(function(){var vt={done:!1};try{ft.call(Fe,Be(Je,_e,vt,Ue),Be(dt,_e,vt,Ue))}catch(ht){dt(_e,vt,ht,Ue)}}):(Ue.value=Fe,Ue.state=1,Ee(_e,Ue,!1))}catch(vt){dt(_e,{done:!1},vt,Ue)}}};i&&(ye=function(_e){P(this,ye,me),A(_e),h.call(this);var Ue=X(this);try{_e(Be(Je,this,Ue),Be(dt,this,Ue))}catch(Fe){dt(this,Ue,Fe)}},(h=function(_e){Z(this,{type:me,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=b(ye.prototype,{then:function(_e,Ue){var Fe=ie(this),Ne=ge(I(this,ye));return Ne.ok=typeof _e!="function"||_e,Ne.fail=typeof Ue=="function"&&Ue,Ne.domain=we?re.domain:void 0,Fe.parent=!0,Fe.reactions.push(Ne),Fe.state!=0&&Ee(this,Fe,!1),Ne.promise},catch:function(_e){return this.then(void 0,_e)}}),l=function(){var _e=new h,Ue=X(_e);this.promise=_e,this.resolve=Be(Je,_e,Ue),this.reject=Be(dt,_e,Ue)},O.f=ge=function(_e){return _e===ye||_e===d?new l:ve(_e)},p||typeof c!="function"||(v=c.prototype.then,m(c.prototype,"then",function(_e,Ue){var Fe=this;return new ye(function(Ne,ft){v.call(Fe,Ne,ft)}).then(_e,Ue)},{unsafe:!0}),typeof de=="function"&&x({global:!0,enumerable:!0,forced:!0},{fetch:function(_e){return G(ye,de.apply(f,arguments))}}))),x({global:!0,wrap:!0,forced:i},{Promise:ye}),S(ye,me,!1,!0),w(me),d=u(me),x({target:me,stat:!0,forced:i},{reject:function(_e){var Ue=ge(this);return Ue.reject.call(void 0,_e),Ue.promise}}),x({target:me,stat:!0,forced:p||i},{resolve:function(_e){return G(p&&this===d?ye:this,_e)}}),x({target:me,stat:!0,forced:ne},{all:function(_e){var Ue=this,Fe=ge(Ue),Ne=Fe.resolve,ft=Fe.reject,vt=H(function(){var ht=A(Ue.resolve),lt=[],ce=0,ue=1;L(_e,function(he){var be=ce++,je=!1;lt.push(void 0),ue++,ht.call(Ue,he).then(function(We){je||(je=!0,lt[be]=We,--ue||Ne(lt))},ft)}),--ue||Ne(lt)});return vt.error&&ft(vt.value),Fe.promise},race:function(_e){var Ue=this,Fe=ge(Ue),Ne=Fe.reject,ft=H(function(){var vt=A(Ue.resolve);L(_e,function(ht){vt.call(Ue,ht).then(Fe.resolve,Ne)})});return ft.error&&Ne(ft.value),Fe.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":130,"../internals/well-known-symbol":148}],182:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/get-built-in"),d=i("../internals/a-function"),v=i("../internals/an-object"),x=i("../internals/is-object"),p=i("../internals/object-create"),f=i("../internals/function-bind"),u=(i=i("../internals/fails"),l("Reflect","construct")),c=i(function(){function b(){}return!(u(function(){},[],b)instanceof b)}),m=!i(function(){u(function(){})});h({target:"Reflect",stat:!0,forced:l=c||m,sham:l},{construct:function(b,S){d(b),v(S);var w=arguments.length<3?b:d(arguments[2]);if(m&&!c)return u(b,S,w);if(b==w){switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3])}var M=[null];return M.push.apply(M,S),new(f.apply(b,M))}return M=w.prototype,w=p(x(M)?M:Object.prototype),M=Function.apply.call(b,w,S),x(M)?M:w}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],183:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/is-object"),d=i("../internals/an-object"),v=i("../internals/has"),x=i("../internals/object-get-own-property-descriptor"),p=i("../internals/object-get-prototype-of");h({target:"Reflect",stat:!0},{get:function f(u,c){var m,b=arguments.length<3?u:arguments[2];return d(u)===b?u[c]:(m=x.f(u,c))?v(m,"value")?m.value:m.get===void 0?void 0:m.get.call(b):l(m=p(u))?f(m,c,b):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":60,"../internals/is-object":74,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-prototype-of":97}],184:[function(i,_,g){var h=i("../internals/descriptors"),l=i("../internals/global"),d=i("../internals/is-forced"),v=i("../internals/inherit-if-required"),x=i("../internals/object-define-property").f,p=i("../internals/object-get-own-property-names").f,f=i("../internals/is-regexp"),u=i("../internals/regexp-flags"),c=i("../internals/regexp-sticky-helpers"),m=i("../internals/redefine"),b=i("../internals/fails"),S=i("../internals/internal-state").set,w=i("../internals/set-species"),M=i("../internals/well-known-symbol")("match"),A=l.RegExp,P=A.prototype,R=/a/g,k=/a/g,L=new A(R)!==R,B=c.UNSUPPORTED_Y;if(h&&d("RegExp",!L||B||b(function(){return k[M]=!1,A(R)!=R||A(k)==k||A(R,"i")!="/a/i"}))){for(var I=function(G,N){var O,H=this instanceof I,q=f(G),K=N===void 0;return!H&&q&&G.constructor===I&&K?G:(L?q&&!K&&(G=G.source):G instanceof I&&(K&&(N=u.call(G)),G=G.source),B&&(O=!!N&&-1<N.indexOf("y"))&&(N=N.replace(/y/g,"")),q=v(L?new A(G,N):A(G,N),H?this:P,I),B&&O&&S(q,{sticky:O}),q)},F=p(A),z=0;F.length>z;)(function(G){G in I||x(I,G,{configurable:!0,get:function(){return A[G]},set:function(N){A[G]=N}})})(F[z++]);(P.constructor=I).prototype=P,m(l,"RegExp",I)}w("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":148}],185:[function(i,_,g){var h=i("../internals/export");i=i("../internals/regexp-exec"),h({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},{"../internals/export":50,"../internals/regexp-exec":110}],186:[function(i,_,g){var h=i("../internals/redefine"),l=i("../internals/an-object"),d=i("../internals/fails"),v=i("../internals/regexp-flags"),x=(i="toString",RegExp.prototype),p=x[i],f=(d=d(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),p.name!=i);(d||f)&&h(RegExp.prototype,i,function(){var u=l(this),c=String(u.source),m=u.flags;return"/"+c+"/"+String(m===void 0&&u instanceof RegExp&&!("flags"in x)?v.call(u):m)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":108,"../internals/regexp-flags":111}],187:[function(i,_,g){var h=i("../internals/collection");i=i("../internals/collection-strong"),_.exports=h("Set",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},i)},{"../internals/collection":32,"../internals/collection-strong":30}],188:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/object-get-own-property-descriptor").f,d=i("../internals/to-length"),v=i("../internals/not-a-regexp"),x=i("../internals/require-object-coercible"),p=i("../internals/correct-is-regexp-logic"),f=(i=i("../internals/is-pure"),"".endsWith),u=Math.min;p=p("endsWith"),h({target:"String",proto:!0,forced:!(!i&&!p&&(h=l(String.prototype,"endsWith"))&&!h.writable||p)},{endsWith:function(c){var m=String(x(this)),b=(v(c),1<arguments.length?arguments[1]:void 0),S=d(m.length);return b=b===void 0?S:u(d(b),S),S=String(c),f?f.call(m,S,b):m.slice(b-S.length,b)===S}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],189:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/not-a-regexp"),d=i("../internals/require-object-coercible");h({target:"String",proto:!0,forced:!i("../internals/correct-is-regexp-logic")("includes")},{includes:function(v){return!!~String(d(this)).indexOf(l(v),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],190:[function(i,_,g){var h=i("../internals/string-multibyte").charAt,l=i("../internals/internal-state"),d=(i=i("../internals/define-iterator"),"String Iterator"),v=l.set,x=l.getterFor(d);i(String,"String",function(p){v(this,{type:d,string:String(p),index:0})},function(){var p=x(this),f=p.string,u=p.index;return u>=f.length?{value:void 0,done:!0}:(f=h(f,u),p.index+=f.length,{value:f,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":70,"../internals/string-multibyte":123}],191:[function(i,_,g){var h=i("../internals/fix-regexp-well-known-symbol-logic"),l=i("../internals/an-object"),d=i("../internals/to-length"),v=i("../internals/require-object-coercible"),x=i("../internals/advance-string-index"),p=i("../internals/regexp-exec-abstract");h("match",1,function(f,u,c){return[function(m){var b=v(this),S=m==null?void 0:m[f];return S!==void 0?S.call(m,b):new RegExp(m)[f](String(b))},function(m){var b=c(u,m,this);if(b.done)return b.value;var S=l(m),w=String(this);if(!S.global)return p(S,w);for(var M=S.unicode,A=[],P=S.lastIndex=0;(R=p(S,w))!==null;){var R=String(R[0]);(A[P]=R)===""&&(S.lastIndex=x(w,d(S.lastIndex),M)),P++}return P===0?null:A}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":136}],192:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/string-pad").start;h({target:"String",proto:!0,forced:i("../internals/string-pad-webkit-bug")},{padStart:function(d){return l(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":125,"../internals/string-pad-webkit-bug":124}],193:[function(i,_,g){i("../internals/export")({target:"String",proto:!0},{repeat:i("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":127}],194:[function(i,_,g){var h=i("../internals/fix-regexp-well-known-symbol-logic"),l=i("../internals/an-object"),d=i("../internals/to-object"),v=i("../internals/to-length"),x=i("../internals/to-integer"),p=i("../internals/require-object-coercible"),f=i("../internals/advance-string-index"),u=i("../internals/regexp-exec-abstract"),c=Math.max,m=Math.min,b=Math.floor,S=/\$([$&'`]|\d\d?|<[^>]*>)/g,w=/\$([$&'`]|\d\d?)/g;h("replace",2,function(M,A,P,R){var k=R.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,L=R.REPLACE_KEEPS_$0,B=k?"$":"$0";return[function(I,F){var z=p(this),G=I==null?void 0:I[M];return G!==void 0?G.call(I,z,F):A.call(String(z),I,F)},function(I,F){if(!k&&L||typeof F=="string"&&F.indexOf(B)===-1){var z=P(A,I,this,F);if(z.done)return z.value}for(var G,N=l(I),O=String(this),H=typeof F=="function",q=(H||(F=String(F)),N.global),K=(q&&(G=N.unicode,N.lastIndex=0),[]);(X=u(N,O))!==null&&(K.push(X),q);)String(X[0])===""&&(N.lastIndex=f(O,v(N.lastIndex),G));for(var ne,ee="",se=0,me=0;me<K.length;me++){for(var X=K[me],Z=String(X[0]),ie=c(m(x(X.index),O.length),0),ye=[],fe=1;fe<X.length;fe++)ye.push((ne=X[fe])===void 0?ne:String(ne));var $=X.groups,re=H?(re=[Z].concat(ye,ie,O),$!==void 0&&re.push($),String(F.apply(void 0,re))):function(de,ge,ve,we,Se,ae){var oe=ve+de.length,Ee=we.length,Oe=w;return Se!==void 0&&(Se=d(Se),Oe=S),A.call(ae,Oe,function(ze,Be){var dt;switch(Be.charAt(0)){case"$":return"$";case"&":return de;case"`":return ge.slice(0,ve);case"'":return ge.slice(oe);case"<":dt=Se[Be.slice(1,-1)];break;default:var Je,_e=+Be;if(_e==0)return ze;if(Ee<_e)return(Je=b(_e/10))!==0&&Je<=Ee?we[Je-1]===void 0?Be.charAt(1):we[Je-1]+Be.charAt(1):ze;dt=we[_e-1]}return dt===void 0?"":dt})}(Z,O,ie,ye,$,F);se<=ie&&(ee+=O.slice(se,ie)+re,se=ie+Z.length)}return ee+O.slice(se)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":135,"../internals/to-length":136,"../internals/to-object":137}],195:[function(i,_,g){var h=i("../internals/fix-regexp-well-known-symbol-logic"),l=i("../internals/an-object"),d=i("../internals/require-object-coercible"),v=i("../internals/same-value"),x=i("../internals/regexp-exec-abstract");h("search",1,function(p,f,u){return[function(c){var m=d(this),b=c==null?void 0:c[p];return b!==void 0?b.call(c,m):new RegExp(c)[p](String(m))},function(c){var m,b=u(f,c,this);return b.done?b.value:(b=l(c),c=String(this),m=b.lastIndex,v(m,0)||(b.lastIndex=0),c=x(b,c),v(b.lastIndex,m)||(b.lastIndex=m),c===null?-1:c.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],196:[function(i,_,g){var h=i("../internals/fix-regexp-well-known-symbol-logic"),l=i("../internals/is-regexp"),d=i("../internals/an-object"),v=i("../internals/require-object-coercible"),x=i("../internals/species-constructor"),p=i("../internals/advance-string-index"),f=i("../internals/to-length"),u=i("../internals/regexp-exec-abstract"),c=i("../internals/regexp-exec"),m=(i=i("../internals/fails"),[].push),b=Math.min,S=4294967295,w=!i(function(){return!RegExp(S,"y")});h("split",2,function(M,A,P){var R="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(k,L){var B=String(v(this)),I=L===void 0?S:L>>>0;if(I==0)return[];if(k===void 0)return[B];if(!l(k))return A.call(B,k,I);for(var F,z,G,N=[],O=(L=(k.ignoreCase?"i":"")+(k.multiline?"m":"")+(k.unicode?"u":"")+(k.sticky?"y":""),0),H=new RegExp(k.source,L+"g");(F=c.call(H,B))&&!(O<(z=H.lastIndex)&&(N.push(B.slice(O,F.index)),1<F.length&&F.index<B.length&&m.apply(N,F.slice(1)),G=F[0].length,O=z,N.length>=I));)H.lastIndex===F.index&&H.lastIndex++;return O===B.length?!G&&H.test("")||N.push(""):N.push(B.slice(O)),N.length>I?N.slice(0,I):N}:"0".split(void 0,0).length?function(k,L){return k===void 0&&L===0?[]:A.call(this,k,L)}:A;return[function(k,L){var B=v(this),I=k==null?void 0:k[M];return I!==void 0?I.call(k,B,L):R.call(String(B),k,L)},function(k,L){if((B=P(R,k,this,L,R!==A)).done)return B.value;var B=d(k),I=String(this),F=(k=x(B,RegExp),B.unicode),z=(B.ignoreCase?"i":"")+(B.multiline?"m":"")+(B.unicode?"u":"")+(w?"y":"g"),G=new k(w?B:"^(?:"+B.source+")",z),N=L===void 0?S:L>>>0;if(N==0)return[];if(I.length===0)return u(G,I)===null?[I]:[];for(var O=0,H=0,q=[];H<I.length;){G.lastIndex=w?H:0;var K,ne=u(G,w?I:I.slice(H));if(ne===null||(K=b(f(G.lastIndex+(w?0:H)),I.length))===O)H=p(I,H,F);else{if(q.push(I.slice(O,H)),q.length===N)return q;for(var ee=1;ee<=ne.length-1;ee++)if(q.push(ne[ee]),q.length===N)return q;H=O=K}}return q.push(I.slice(O)),q}]},!w)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":136}],197:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/object-get-own-property-descriptor").f,d=i("../internals/to-length"),v=i("../internals/not-a-regexp"),x=i("../internals/require-object-coercible"),p=i("../internals/correct-is-regexp-logic"),f=(i=i("../internals/is-pure"),"".startsWith),u=Math.min;p=p("startsWith"),h({target:"String",proto:!0,forced:!(!i&&!p&&(h=l(String.prototype,"startsWith"))&&!h.writable||p)},{startsWith:function(c){var m=String(x(this)),b=(v(c),d(u(1<arguments.length?arguments[1]:void 0,m.length)));return c=String(c),f?f.call(m,c,b):m.slice(b,b+c.length)===c}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":136}],198:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/create-html");h({target:"String",proto:!0,forced:i("../internals/string-html-forced")("sub")},{sub:function(){return l(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":122}],199:[function(i,_,g){var h=i("../internals/export"),l=i("../internals/string-trim").trim;h({target:"String",proto:!0,forced:i("../internals/string-trim-forced")("trim")},{trim:function(){return l(this)}})},{"../internals/export":50,"../internals/string-trim":129,"../internals/string-trim-forced":128}],200:[function(i,_,g){var h,l,d,v,x,p=i("../internals/export"),f=i("../internals/descriptors"),u=i("../internals/global"),c=i("../internals/has"),m=i("../internals/is-object"),b=i("../internals/object-define-property").f,S=(i=i("../internals/copy-constructor-properties"),u.Symbol);!f||typeof S!="function"||"description"in S.prototype&&S().description===void 0||(h={},i(l=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),M=this instanceof l?new S(w):w===void 0?S():S(w);return w===""&&(h[M]=!0),M},S),(u=l.prototype=S.prototype).constructor=l,d=u.toString,v=String(S("test"))=="Symbol(test)",x=/^Symbol\((.*)\)[^)]+$/,b(u,"description",{configurable:!0,get:function(){var w=m(this)?this.valueOf():this,M=d.call(w);return c(h,w)?"":(w=v?M.slice(7,-1):M.replace(x,"$1"))===""?void 0:w}}),p({global:!0,forced:!0},{Symbol:l}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],201:[function(i,_,g){i("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],202:[function(i,_,g){function h(ue,he){var be=Je[ue]=I(oe[ve]);return we(be,{type:ge,tag:ue,description:he}),c||(be.description=he),be}function l(ue,he){P(ue);var be=k(he);return he=F(be).concat(ce(be)),re(he,function(je){c&&!lt.call(be,je)||ht(ue,je,be[je])}),ue}function d(ue,he){var be;if(ue=k(ue),he=L(he,!0),ue!==ae||!w(Je,he)||w(_e,he))return!(be=Oe(ue,he))||!w(Je,he)||w(ue,de)&&ue[de][he]||(be.enumerable=!0),be}function v(ue){ue=Be(k(ue));var he=[];return re(ue,function(be){w(Je,be)||w(me,be)||he.push(be)}),he}var x=i("../internals/export"),p=i("../internals/global"),f=i("../internals/get-built-in"),u=i("../internals/is-pure"),c=i("../internals/descriptors"),m=i("../internals/native-symbol"),b=i("../internals/use-symbol-as-uid"),S=i("../internals/fails"),w=i("../internals/has"),M=i("../internals/is-array"),A=i("../internals/is-object"),P=i("../internals/an-object"),R=i("../internals/to-object"),k=i("../internals/to-indexed-object"),L=i("../internals/to-primitive"),B=i("../internals/create-property-descriptor"),I=i("../internals/object-create"),F=i("../internals/object-keys"),z=i("../internals/object-get-own-property-names"),G=i("../internals/object-get-own-property-names-external"),N=i("../internals/object-get-own-property-symbols"),O=i("../internals/object-get-own-property-descriptor"),H=i("../internals/object-define-property"),q=i("../internals/object-property-is-enumerable"),K=i("../internals/create-non-enumerable-property"),ne=i("../internals/redefine"),ee=i("../internals/shared"),se=i("../internals/shared-key"),me=i("../internals/hidden-keys"),X=i("../internals/uid"),Z=i("../internals/well-known-symbol"),ie=i("../internals/well-known-symbol-wrapped"),ye=i("../internals/define-well-known-symbol"),fe=i("../internals/set-to-string-tag"),$=i("../internals/internal-state"),re=i("../internals/array-iteration").forEach,de=se("hidden"),ge="Symbol",ve="prototype",we=(i=Z("toPrimitive"),$.set),Se=$.getterFor(ge),ae=Object[ve],oe=p.Symbol,Ee=f("JSON","stringify"),Oe=O.f,ze=H.f,Be=G.f,dt=q.f,Je=ee("symbols"),_e=ee("op-symbols"),Ue=ee("string-to-symbol-registry"),Fe=ee("symbol-to-string-registry"),Ne=(se=ee("wks"),!($=p.QObject)||!$[ve]||!$[ve].findChild),ft=c&&S(function(){return I(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(ue,he,be){var je=Oe(ae,he);je&&delete ae[he],ze(ue,he,be),je&&ue!==ae&&ze(ae,he,je)}:ze,vt=b?function(ue){return typeof ue=="symbol"}:function(ue){return Object(ue)instanceof oe},ht=function(ue,he,be){return ue===ae&&ht(_e,he,be),P(ue),he=L(he,!0),P(be),(w(Je,he)?(be.enumerable?(w(ue,de)&&ue[de][he]&&(ue[de][he]=!1),be=I(be,{enumerable:B(0,!1)})):(w(ue,de)||ze(ue,de,B(1,{})),ue[de][he]=!0),ft):ze)(ue,he,be)},lt=function(ue){ue=L(ue,!0);var he=dt.call(this,ue);return!(this===ae&&w(Je,ue)&&!w(_e,ue))&&(!(he||!w(this,ue)||!w(Je,ue)||w(this,de)&&this[de][ue])||he)},ce=function(ue){var he=ue===ae,be=(ue=Be(he?_e:k(ue)),[]);return re(ue,function(je){!w(Je,je)||he&&!w(ae,je)||be.push(Je[je])}),be};m||(ne((oe=function(){if(this instanceof oe)throw TypeError("Symbol is not a constructor");var ue=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,he=X(ue),be=function(je){this===ae&&be.call(_e,je),w(this,de)&&w(this[de],he)&&(this[de][he]=!1),ft(this,he,B(1,je))};return c&&Ne&&ft(ae,he,{configurable:!0,set:be}),h(he,ue)})[ve],"toString",function(){return Se(this).tag}),ne(oe,"withoutSetter",function(ue){return h(X(ue),ue)}),q.f=lt,H.f=ht,O.f=d,z.f=G.f=v,N.f=ce,ie.f=function(ue){return h(Z(ue),ue)},c&&(ze(oe[ve],"description",{configurable:!0,get:function(){return Se(this).description}}),u||ne(ae,"propertyIsEnumerable",lt,{unsafe:!0}))),x({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:oe}),re(F(se),function(ue){ye(ue)}),x({target:ge,stat:!0,forced:!m},{for:function(ue){var he;return ue=String(ue),w(Ue,ue)?Ue[ue]:(he=oe(ue),Ue[ue]=he,Fe[he]=ue,he)},keyFor:function(ue){if(!vt(ue))throw TypeError(ue+" is not a symbol");if(w(Fe,ue))return Fe[ue]},useSetter:function(){Ne=!0},useSimple:function(){Ne=!1}}),x({target:"Object",stat:!0,forced:!m,sham:!c},{create:function(ue,he){return he===void 0?I(ue):l(I(ue),he)},defineProperty:ht,defineProperties:l,getOwnPropertyDescriptor:d}),x({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:v,getOwnPropertySymbols:ce}),x({target:"Object",stat:!0,forced:S(function(){N.f(1)})},{getOwnPropertySymbols:function(ue){return N.f(R(ue))}}),Ee&&x({target:"JSON",stat:!0,forced:!m||S(function(){var ue=oe();return Ee([ue])!="[null]"||Ee({a:ue})!="{}"||Ee(Object(ue))!="{}"})},{stringify:function(ue,he,be){for(var je,We=[ue],xe=1;xe<arguments.length;)We.push(arguments[xe++]);if((A(je=he)||ue!==void 0)&&!vt(ue))return M(he)||(he=function(Ve,Ce){if(typeof je=="function"&&(Ce=je.call(this,Ve,Ce)),!vt(Ce))return Ce}),We[1]=he,Ee.apply(null,We)}}),oe[ve][i]||K(oe[ve],i,oe[ve].valueOf),fe(oe,ge),me[de]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":134,"../internals/to-object":137,"../internals/to-primitive":140,"../internals/uid":145,"../internals/use-symbol-as-uid":146,"../internals/well-known-symbol":148,"../internals/well-known-symbol-wrapped":147}],203:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-copy-within"),d=h.aTypedArray;(0,h.exportTypedArrayMethod)("copyWithin",function(v,x){return l.call(d(this),v,x,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],204:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").every,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("every",function(v){return l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],205:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-fill"),d=h.aTypedArray;(0,h.exportTypedArrayMethod)("fill",function(v){return l.apply(d(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],206:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").filter,d=i("../internals/species-constructor"),v=h.aTypedArray,x=h.aTypedArrayConstructor;(0,h.exportTypedArrayMethod)("filter",function(p){for(var f=l(v(this),p,1<arguments.length?arguments[1]:void 0),u=(p=d(this,this.constructor),0),c=f.length,m=new(x(p))(c);u<c;)m[u]=f[u++];return m})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],207:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").findIndex,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("findIndex",function(v){return l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],208:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").find,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("find",function(v){return l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],209:[function(i,_,g){i("../internals/typed-array-constructor")("Float32",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],210:[function(i,_,g){i("../internals/typed-array-constructor")("Float64",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],211:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").forEach,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("forEach",function(v){l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],212:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-includes").includes,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("includes",function(v){return l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],213:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-includes").indexOf,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("indexOf",function(v){return l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],214:[function(i,_,g){i("../internals/typed-array-constructor")("Int16",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],215:[function(i,_,g){i("../internals/typed-array-constructor")("Int32",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],216:[function(i,_,g){function h(){return x.call(u(this))}var l=i("../internals/global"),d=i("../internals/array-buffer-view-core"),v=i("../modules/es.array.iterator"),x=(i=i("../internals/well-known-symbol")("iterator"),l=l.Uint8Array,v.values),p=v.keys,f=v.entries,u=d.aTypedArray;v=d.exportTypedArrayMethod,l=!!(d=l&&l.prototype[i])&&(d.name=="values"||d.name==null),v("entries",function(){return f.call(u(this))}),v("keys",function(){return p.call(u(this))}),v("values",h,!l),v(i,h,!l)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],217:[function(i,_,g){var h=(i=i("../internals/array-buffer-view-core")).aTypedArray,l=(i=i.exportTypedArrayMethod,[].join);i("join",function(d){return l.apply(h(this),arguments)})},{"../internals/array-buffer-view-core":12}],218:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-last-index-of"),d=h.aTypedArray;(0,h.exportTypedArrayMethod)("lastIndexOf",function(v){return l.apply(d(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],219:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").map,d=i("../internals/species-constructor"),v=h.aTypedArray,x=h.aTypedArrayConstructor;(0,h.exportTypedArrayMethod)("map",function(p){return l(v(this),p,1<arguments.length?arguments[1]:void 0,function(f,u){return new(x(d(f,f.constructor)))(u)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],220:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-reduce").right,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("reduceRight",function(v){return l(d(this),v,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],221:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-reduce").left,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("reduce",function(v){return l(d(this),v,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],222:[function(i,_,g){var h=(i=i("../internals/array-buffer-view-core")).aTypedArray,l=(i=i.exportTypedArrayMethod,Math.floor);i("reverse",function(){for(var d,v=h(this).length,x=l(v/2),p=0;p<x;)d=this[p],this[p++]=this[--v],this[v]=d;return this})},{"../internals/array-buffer-view-core":12}],223:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/to-length"),d=i("../internals/to-offset"),v=i("../internals/to-object"),x=(i=i("../internals/fails"),h.aTypedArray);(0,h.exportTypedArrayMethod)("set",function(p){x(this);var f=d(1<arguments.length?arguments[1]:void 0,1),u=this.length,c=v(p),m=l(c.length),b=0;if(u<m+f)throw RangeError("Wrong length");for(;b<m;)this[f+b]=c[b++]},i(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":136,"../internals/to-object":137,"../internals/to-offset":138}],224:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/species-constructor"),d=(i=i("../internals/fails"),h.aTypedArray),v=h.aTypedArrayConstructor,x=(h=h.exportTypedArrayMethod,[].slice);h("slice",function(p,f){for(var u=x.call(d(this),p,f),c=(p=l(this,this.constructor),0),m=u.length,b=new(v(p))(m);c<m;)b[c]=u[c++];return b},i(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":121}],225:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/array-iteration").some,d=h.aTypedArray;(0,h.exportTypedArrayMethod)("some",function(v){return l(d(this),v,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],226:[function(i,_,g){var h=(i=i("../internals/array-buffer-view-core")).aTypedArray,l=(i=i.exportTypedArrayMethod,[].sort);i("sort",function(d){return l.call(h(this),d)})},{"../internals/array-buffer-view-core":12}],227:[function(i,_,g){var h=i("../internals/array-buffer-view-core"),l=i("../internals/to-length"),d=i("../internals/to-absolute-index"),v=i("../internals/species-constructor"),x=h.aTypedArray;(0,h.exportTypedArrayMethod)("subarray",function(p,f){var u=x(this),c=u.length;return p=d(p,c),new(v(u,u.constructor))(u.buffer,u.byteOffset+p*u.BYTES_PER_ELEMENT,l((f===void 0?c:d(f,c))-p))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":132,"../internals/to-length":136}],228:[function(i,_,g){var h=i("../internals/global"),l=i("../internals/array-buffer-view-core"),d=(i=i("../internals/fails"),h.Int8Array),v=l.aTypedArray,x=(h=l.exportTypedArrayMethod,[].toLocaleString),p=[].slice,f=!!d&&i(function(){x.call(new d(1))});h("toLocaleString",function(){return x.apply(f?p.call(v(this)):v(this),arguments)},i(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!i(function(){d.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],229:[function(i,_,g){var h=i("../internals/array-buffer-view-core").exportTypedArrayMethod,l=i("../internals/fails"),d=(i=(i=i("../internals/global").Uint8Array)&&i.prototype||{},[].toString),v=[].join;l(function(){d.call({})})&&(d=function(){return v.call(this)}),l=i.toString!=d,h("toString",d,l)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":59}],230:[function(i,_,g){i("../internals/typed-array-constructor")("Uint16",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],231:[function(i,_,g){i("../internals/typed-array-constructor")("Uint32",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],232:[function(i,_,g){i("../internals/typed-array-constructor")("Uint8",function(h){return function(l,d,v){return h(this,l,d,v)}})},{"../internals/typed-array-constructor":142}],233:[function(i,_,g){i("../internals/typed-array-constructor")("Uint8",function(h){return function(l,d,v){return h(this,l,d,v)}},!0)},{"../internals/typed-array-constructor":142}],234:[function(i,_,g){function h(A){return function(){return A(this,arguments.length?arguments[0]:void 0)}}var l,d,v,x,p,f=i("../internals/global"),u=i("../internals/redefine-all"),c=i("../internals/internal-metadata"),m=i("../internals/collection"),b=i("../internals/collection-weak"),S=i("../internals/is-object"),w=i("../internals/internal-state").enforce,M=(i=i("../internals/native-weak-map"),f=!f.ActiveXObject&&"ActiveXObject"in f,Object.isExtensible);_=_.exports=m("WeakMap",h,b),i&&f&&(l=b.getConstructor(h,"WeakMap",!0),c.REQUIRED=!0,m=_.prototype,d=m.delete,v=m.has,x=m.get,p=m.set,u(m,{delete:function(A){var P;return S(A)&&!M(A)?((P=w(this)).frozen||(P.frozen=new l),d.call(this,A)||P.frozen.delete(A)):d.call(this,A)},has:function(A){var P;return S(A)&&!M(A)?((P=w(this)).frozen||(P.frozen=new l),v.call(this,A)||P.frozen.has(A)):v.call(this,A)},get:function(A){var P;return!S(A)||M(A)||((P=w(this)).frozen||(P.frozen=new l),v.call(this,A))?x.call(this,A):P.frozen.get(A)},set:function(A,P){var R;return!S(A)||M(A)||((R=w(this)).frozen||(R.frozen=new l),v.call(this,A))?p.call(this,A,P):R.frozen.set(A,P),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":59,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/redefine-all":107}],235:[function(i,_,g){var h,l=i("../internals/global"),d=i("../internals/dom-iterables"),v=i("../internals/array-for-each"),x=i("../internals/create-non-enumerable-property");for(h in d){var p;if((p=(p=l[h])&&p.prototype)&&p.forEach!==v)try{x(p,"forEach",v)}catch{p.forEach=v}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59}],236:[function(i,_,g){var h,l=i("../internals/global"),d=i("../internals/dom-iterables"),v=i("../modules/es.array.iterator"),x=i("../internals/create-non-enumerable-property"),p=(i=i("../internals/well-known-symbol"))("iterator"),f=i("toStringTag"),u=v.values;for(h in d){var c=l[h],m=c&&c.prototype;if(m){if(m[p]!==u)try{x(m,p,u)}catch{m[p]=u}if(m[f]||x(m,f,h),d[h]){for(var b in v)if(m[b]!==v[b])try{x(m,b,v[b])}catch{m[b]=v[b]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":59,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],237:[function(i,_,g){function h($){try{return decodeURIComponent($)}catch{return $}}function l($){return ie[$]}function d($){return encodeURIComponent($).replace(Z,l)}function v($){this.entries.length=0,ye(this.entries,$)}function x($,re){if($<re)throw TypeError("Not enough arguments")}function p(){A(this,p,H);var $,re,de,ge,ve,we,Se,ae,oe=0<arguments.length?arguments[0]:void 0,Ee=[];if(K(this,{type:H,entries:Ee,updateURL:function(){},updateSearchParams:v}),oe!==void 0)if(B(oe))if(typeof($=G(oe))=="function")for(de=(re=$.call(oe)).next;!(ge=de.call(re)).done;){if((we=(ve=(ge=z(L(ge.value))).next).call(ge)).done||(Se=ve.call(ge)).done||!ve.call(ge).done)throw TypeError("Expected sequence with length 2");Ee.push({key:we.value+"",value:Se.value+""})}else for(ae in oe)P(oe,ae)&&Ee.push({key:ae,value:oe[ae]+""});else ye(Ee,typeof oe=="string"?oe.charAt(0)==="?"?oe.slice(1):oe:oe+"")}i("../modules/es.array.iterator");var f=i("../internals/export"),u=i("../internals/get-built-in"),c=i("../internals/native-url"),m=i("../internals/redefine"),b=i("../internals/redefine-all"),S=i("../internals/set-to-string-tag"),w=i("../internals/create-iterator-constructor"),M=i("../internals/internal-state"),A=i("../internals/an-instance"),P=i("../internals/has"),R=i("../internals/function-bind-context"),k=i("../internals/classof"),L=i("../internals/an-object"),B=i("../internals/is-object"),I=i("../internals/object-create"),F=i("../internals/create-property-descriptor"),z=i("../internals/get-iterator"),G=i("../internals/get-iterator-method"),N=(i=i("../internals/well-known-symbol"),u("fetch")),O=u("Headers"),H=(u=i("iterator"),"URLSearchParams"),q=H+"Iterator",K=M.set,ne=M.getterFor(H),ee=M.getterFor(q),se=/\+/g,me=Array(4),X=function($){var re,de=$.replace(se," "),ge=4;try{return decodeURIComponent(de)}catch{for(;ge;)de=de.replace((re=ge--,me[re-1]||(me[re-1]=RegExp("((?:%[\\da-f]{2}){"+re+"})","gi"))),h);return de}},Z=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ye=function($,re){if(re)for(var de,ge=re.split("&"),ve=0;ve<ge.length;)(de=ge[ve++]).length&&(de=de.split("="),$.push({key:X(de.shift()),value:X(de.join("="))}))},fe=w(function($,re){K(this,{type:q,iterator:z(ne($).entries),kind:re})},"Iterator",function(){var $,re=($=ee(this)).kind,de=($=$.iterator.next()).value;return $.done||($.value=re==="keys"?de.key:re==="values"?de.value:[de.key,de.value]),$});b(i=p.prototype,{append:function($,re){x(arguments.length,2);var de=ne(this);de.entries.push({key:$+"",value:re+""}),de.updateURL()},delete:function($){x(arguments.length,1);for(var re=ne(this),de=re.entries,ge=$+"",ve=0;ve<de.length;)de[ve].key===ge?de.splice(ve,1):ve++;re.updateURL()},get:function($){x(arguments.length,1);for(var re=ne(this).entries,de=$+"",ge=0;ge<re.length;ge++)if(re[ge].key===de)return re[ge].value;return null},getAll:function($){x(arguments.length,1);for(var re=ne(this).entries,de=$+"",ge=[],ve=0;ve<re.length;ve++)re[ve].key===de&&ge.push(re[ve].value);return ge},has:function($){x(arguments.length,1);for(var re=ne(this).entries,de=$+"",ge=0;ge<re.length;)if(re[ge++].key===de)return!0;return!1},set:function($,re){x(arguments.length,1);for(var de,ge=ne(this),ve=ge.entries,we=!1,Se=$+"",ae=re+"",oe=0;oe<ve.length;oe++)(de=ve[oe]).key===Se&&(we?ve.splice(oe--,1):(we=!0,de.value=ae));we||ve.push({key:Se,value:ae}),ge.updateURL()},sort:function(){for(var $,re,de=ne(this),ge=de.entries,ve=ge.slice(),we=ge.length=0;we<ve.length;we++){for($=ve[we],re=0;re<we;re++)if(ge[re].key>$.key){ge.splice(re,0,$);break}re===we&&ge.push($)}de.updateURL()},forEach:function($){for(var re,de=ne(this).entries,ge=R($,1<arguments.length?arguments[1]:void 0,3),ve=0;ve<de.length;)ge((re=de[ve++]).value,re.key,this)},keys:function(){return new fe(this,"keys")},values:function(){return new fe(this,"values")},entries:function(){return new fe(this,"entries")}},{enumerable:!0}),m(i,u,i.entries),m(i,"toString",function(){for(var $,re=ne(this).entries,de=[],ge=0;ge<re.length;)$=re[ge++],de.push(d($.key)+"="+d($.value));return de.join("&")},{enumerable:!0}),S(p,H),f({global:!0,forced:!c},{URLSearchParams:p}),c||typeof N!="function"||typeof O!="function"||f({global:!0,enumerable:!0,forced:!0},{fetch:function($){var re,de,ge;return $=[$],1<arguments.length&&(B(re=arguments[1])&&(de=re.body,k(de)===H&&((ge=re.headers?new O(re.headers):new O).has("content-type")||ge.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),re=I(re,{body:F(0,String(de)),headers:F(0,ge)}))),$.push(re)),N.apply(this,$)}}),_.exports={URLSearchParams:p,getState:ne}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":148,"../modules/es.array.iterator":160}],238:[function(i,_,g){function h(pe){var Ie,st,Ke,Mt;if(typeof pe=="number"){for(Ie=[],st=0;st<4;st++)Ie.unshift(pe%256),pe=q(pe/256);return Ie.join(".")}if(typeof pe!="object")return pe;for(Ie="",Ke=ae(pe),st=0;st<8;st++)Mt&&pe[st]===0||(Mt=Mt&&!1,Ke===st?(Ie+=st?":":"::",Mt=!0):(Ie+=pe[st].toString(16),st<7&&(Ie+=":")));return"["+Ie+"]"}function l(pe){return!pe.host||pe.cannotBeABaseURL||pe.scheme=="file"}function d(pe,Ie,st,Ke){var Mt,Ze,Lt,pt=st||ht,Tt=0,_t="",vn=!1,$t=!1,Ln=!1;for(st||(pe.scheme="",pe.username="",pe.password="",pe.host=null,pe.port=null,pe.path=[],pe.query=null,pe.fragment=null,pe.cannotBeABaseURL=!1,Ie=Ie.replace(ve,"")),Ie=Ie.replace(we,""),Mt=k(Ie);Tt<=Mt.length;){switch(Ze=Mt[Tt],pt){case ht:if(!Ze||!X.test(Ze)){if(st)return ee;pt=ce;continue}_t+=Ze.toLowerCase(),pt=lt;break;case lt:if(Ze&&(Z.test(Ze)||Ze=="+"||Ze=="-"||Ze=="."))_t+=Ze.toLowerCase();else{if(Ze!=":"){if(st)return ee;_t="",pt=ce,Tt=0;continue}if(st&&(Je(pe)!=P(dt,_t)||_t=="file"&&(_e(pe)||pe.port!==null)||pe.scheme=="file"&&!pe.host))return;if(pe.scheme=_t,st)return void(Je(pe)&&dt[pe.scheme]==pe.port&&(pe.port=null));_t="",pe.scheme=="file"?pt=Rt:Je(pe)&&Ke&&Ke.scheme==pe.scheme?pt=ue:Je(pe)?pt=We:Mt[Tt+1]=="/"?(pt=he,Tt++):(pe.cannotBeABaseURL=!0,pe.path.push(""),pt=Yt)}break;case ce:if(!Ke||Ke.cannotBeABaseURL&&Ze!="#")return ee;if(Ke.cannotBeABaseURL&&Ze=="#"){pe.scheme=Ke.scheme,pe.path=Ke.path.slice(),pe.query=Ke.query,pe.fragment="",pe.cannotBeABaseURL=!0,pt=$n;break}pt=Ke.scheme=="file"?Rt:be;continue;case ue:if(Ze!="/"||Mt[Tt+1]!="/"){pt=be;continue}pt=xe,Tt++;break;case he:if(Ze=="/"){pt=Ve;break}pt=jt;continue;case be:if(pe.scheme=Ke.scheme,Ze==p)pe.username=Ke.username,pe.password=Ke.password,pe.host=Ke.host,pe.port=Ke.port,pe.path=Ke.path.slice(),pe.query=Ke.query;else if(Ze=="/"||Ze=="\\"&&Je(pe))pt=je;else if(Ze=="?")pe.username=Ke.username,pe.password=Ke.password,pe.host=Ke.host,pe.port=Ke.port,pe.path=Ke.path.slice(),pe.query="",pt=on;else{if(Ze!="#"){pe.username=Ke.username,pe.password=Ke.password,pe.host=Ke.host,pe.port=Ke.port,pe.path=Ke.path.slice(),pe.path.pop(),pt=jt;continue}pe.username=Ke.username,pe.password=Ke.password,pe.host=Ke.host,pe.port=Ke.port,pe.path=Ke.path.slice(),pe.query=Ke.query,pe.fragment="",pt=$n}break;case je:if(!Je(pe)||Ze!="/"&&Ze!="\\"){if(Ze!="/"){pe.username=Ke.username,pe.password=Ke.password,pe.host=Ke.host,pe.port=Ke.port,pt=jt;continue}pt=Ve}else pt=xe;break;case We:if(pt=xe,Ze!="/"||_t.charAt(Tt+1)!="/")continue;Tt++;break;case xe:if(Ze=="/"||Ze=="\\")break;pt=Ve;continue;case Ve:if(Ze=="@"){vn&&(_t="%40"+_t),vn=!0;for(var It=k(_t),bt=0;bt<It.length;bt++){var Dn=It[bt];Dn!=":"||Ln?(Dn=Be(Dn,ze),Ln?pe.password+=Dn:pe.username+=Dn):Ln=!0}_t=""}else if(Ze==p||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&Je(pe)){if(vn&&_t=="")return ne;Tt-=k(_t).length+1,_t="",pt=Ce}else _t+=Ze;break;case Ce:case Qe:if(st&&pe.scheme=="file"){pt=Bt;continue}if(Ze!=":"||$t){if(Ze==p||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&Je(pe)){if(Je(pe)&&_t=="")return se;if(st&&_t==""&&(_e(pe)||pe.port!==null))return;if(Lt=Se(pe,_t))return Lt;if(_t="",pt=Vt,st)return;continue}Ze=="["?$t=!0:Ze=="]"&&($t=!1),_t+=Ze}else{if(_t=="")return se;if(Lt=Se(pe,_t))return Lt;if(_t="",pt=ut,st==Qe)return}break;case ut:if(!ie.test(Ze)){if(Ze==p||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&Je(pe)||st){if(_t!=""){var Wt=parseInt(_t,10);if(65535<Wt)return me;pe.port=Je(pe)&&Wt===dt[pe.scheme]?null:Wt,_t=""}if(st)return;pt=Vt;continue}return me}_t+=Ze;break;case Rt:if(pe.scheme="file",Ze=="/"||Ze=="\\")pt=Nt;else{if(!Ke||Ke.scheme!="file"){pt=jt;continue}if(Ze==p)pe.host=Ke.host,pe.path=Ke.path.slice(),pe.query=Ke.query;else if(Ze=="?")pe.host=Ke.host,pe.path=Ke.path.slice(),pe.query="",pt=on;else{if(Ze!="#"){Fe(Mt.slice(Tt).join(""))||(pe.host=Ke.host,pe.path=Ke.path.slice(),Ne(pe)),pt=jt;continue}pe.host=Ke.host,pe.path=Ke.path.slice(),pe.query=Ke.query,pe.fragment="",pt=$n}}break;case Nt:if(Ze=="/"||Ze=="\\"){pt=Bt;break}Ke&&Ke.scheme=="file"&&!Fe(Mt.slice(Tt).join(""))&&(Ue(Ke.path[0],!0)?pe.path.push(Ke.path[0]):pe.host=Ke.host),pt=jt;continue;case Bt:if(Ze==p||Ze=="/"||Ze=="\\"||Ze=="?"||Ze=="#"){if(!st&&Ue(_t))pt=jt;else{if(_t==""){if(pe.host="",st)return}else{if(Lt=Se(pe,_t))return Lt;if(pe.host=="localhost"&&(pe.host=""),st)return;_t=""}pt=Vt}continue}_t+=Ze;break;case Vt:if(Je(pe)){if(pt=jt,Ze!="/"&&Ze!="\\")continue}else if(st||Ze!="?")if(st||Ze!="#"){if(Ze!=p&&(pt=jt,Ze!="/"))continue}else pe.fragment="",pt=$n;else pe.query="",pt=on;break;case jt:if(Ze==p||Ze=="/"||Ze=="\\"&&Je(pe)||!st&&(Ze=="?"||Ze=="#")){if(vt(_t)?(Ne(pe),Ze=="/"||Ze=="\\"&&Je(pe)||pe.path.push("")):ft(_t)?Ze=="/"||Ze=="\\"&&Je(pe)||pe.path.push(""):(pe.scheme=="file"&&!pe.path.length&&Ue(_t)&&(pe.host&&(pe.host=""),_t=_t.charAt(0)+":"),pe.path.push(_t)),_t="",pe.scheme=="file"&&(Ze==p||Ze=="?"||Ze=="#"))for(;1<pe.path.length&&pe.path[0]==="";)pe.path.shift();Ze=="?"?(pe.query="",pt=on):Ze=="#"&&(pe.fragment="",pt=$n)}else _t+=Be(Ze,Oe);break;case Yt:Ze=="?"?(pe.query="",pt=on):Ze=="#"?(pe.fragment="",pt=$n):Ze!=p&&(pe.path[0]+=Be(Ze,oe));break;case on:st||Ze!="#"?Ze!=p&&(Ze=="'"&&Je(pe)?pe.query+="%27":pe.query+=Ze=="#"?"%23":Be(Ze,oe)):(pe.fragment="",pt=$n);break;case $n:Ze!=p&&(pe.fragment+=Be(Ze,Ee))}Tt++}}function v(pe){var Ie,st,Ke=A(this,v,"URL"),Mt=1<arguments.length?arguments[1]:void 0,Ze=(pe=String(pe),O(Ke,{type:"URL"}));if(Mt!==void 0){if(Mt instanceof v)Ie=H(Mt);else if(st=d(Ie={},String(Mt)))throw TypeError(st)}if(st=d(Ze,pe,null,Ie))throw TypeError(st);var Lt=Ze.searchParams=new G;(Mt=N(Lt)).updateSearchParams(Ze.query),Mt.updateURL=function(){Ze.query=String(Lt)||null},m||(Ke.href=xn.call(Ke),Ke.origin=On.call(Ke),Ke.protocol=Gn.call(Ke),Ke.username=un.call(Ke),Ke.password=lr.call(Ke),Ke.host=er.call(Ke),Ke.hostname=An.call(Ke),Ke.port=qo.call(Ke),Ke.pathname=Yo.call(Ke),Ke.search=Ae.call(Ke),Ke.searchParams=Ye.call(Ke),Ke.hash=nt.call(Ke))}function x(pe,Ie){return{get:pe,set:Ie,configurable:!0,enumerable:!0}}i("../modules/es.string.iterator");var p,f,u,c=i("../internals/export"),m=i("../internals/descriptors"),b=i("../internals/native-url"),S=i("../internals/global"),w=i("../internals/object-define-properties"),M=i("../internals/redefine"),A=i("../internals/an-instance"),P=i("../internals/has"),R=i("../internals/object-assign"),k=i("../internals/array-from"),L=i("../internals/string-multibyte").codeAt,B=i("../internals/string-punycode-to-ascii"),I=i("../internals/set-to-string-tag"),F=i("../modules/web.url-search-params"),z=(i=i("../internals/internal-state"),S.URL),G=F.URLSearchParams,N=F.getState,O=i.set,H=i.getterFor("URL"),q=Math.floor,K=Math.pow,ne="Invalid authority",ee="Invalid scheme",se="Invalid host",me="Invalid port",X=/[A-Za-z]/,Z=/[\d+-.A-Za-z]/,ie=/\d/,ye=/^(0x|0X)/,fe=/^[0-7]+$/,$=/^\d+$/,re=/^[\dA-Fa-f]+$/,de=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,ge=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,ve=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,we=/[\u0009\u000A\u000D]/g,Se=function(pe,Ie){var st,Ke,Mt;if(Ie.charAt(0)=="[")return Ie.charAt(Ie.length-1)=="]"&&(st=function(Ze){var Lt,pt,Tt,_t,vn,$t,Ln,It=[0,0,0,0,0,0,0,0],bt=0,Dn=null,Wt=0,fn=function(){return Ze.charAt(Wt)};if(fn()==":"){if(Ze.charAt(1)!=":")return;Wt+=2,Dn=++bt}for(;fn();){if(bt==8)return;if(fn()!=":"){for(Lt=pt=0;pt<4&&re.test(fn());)Lt=16*Lt+parseInt(fn(),16),Wt++,pt++;if(fn()=="."){if(pt==0||(Wt-=pt,bt>6))return;for(Tt=0;fn();){if(_t=null,Tt>0){if(!(fn()=="."&&Tt<4))return;Wt++}if(!ie.test(fn()))return;for(;ie.test(fn());){if(vn=parseInt(fn(),10),_t===null)_t=vn;else{if(_t==0)return;_t=10*_t+vn}if(_t>255)return;Wt++}It[bt]=256*It[bt]+_t,++Tt!=2&&Tt!=4||bt++}if(Tt!=4)return;break}if(fn()==":"){if(Wt++,!fn())return}else if(fn())return;It[bt++]=Lt}else{if(Dn!==null)return;Wt++,Dn=++bt}}if(Dn!==null)for($t=bt-Dn,bt=7;bt!=0&&$t>0;)Ln=It[bt],It[bt--]=It[Dn+$t-1],It[Dn+--$t]=Ln;else if(bt!=8)return;return It}(Ie.slice(1,-1)))?void(pe.host=st):se;if(Je(pe))return Ie=B(Ie),de.test(Ie)||(st=function(Ze){var Lt,pt,Tt,_t,vn,$t,Ln,It=Ze.split(".");if(It.length&&It[It.length-1]==""&&It.pop(),(Lt=It.length)>4)return Ze;for(pt=[],Tt=0;Tt<Lt;Tt++){if((_t=It[Tt])=="")return Ze;if(vn=10,_t.length>1&&_t.charAt(0)=="0"&&(vn=ye.test(_t)?16:8,_t=_t.slice(vn==8?1:2)),_t==="")$t=0;else{if(!(vn==10?$:vn==8?fe:re).test(_t))return Ze;$t=parseInt(_t,vn)}pt.push($t)}for(Tt=0;Tt<Lt;Tt++)if($t=pt[Tt],Tt==Lt-1){if($t>=K(256,5-Lt))return null}else if($t>255)return null;for(Ln=pt.pop(),Tt=0;Tt<pt.length;Tt++)Ln+=pt[Tt]*K(256,3-Tt);return Ln}(Ie))===null?se:void(pe.host=st);if(ge.test(Ie))return se;for(st="",Ke=k(Ie),Mt=0;Mt<Ke.length;Mt++)st+=Be(Ke[Mt],oe);pe.host=st},ae=function(pe){for(var Ie=null,st=1,Ke=null,Mt=0,Ze=0;Ze<8;Ze++)pe[Ze]!==0?(st<Mt&&(Ie=Ke,st=Mt),Ke=null,Mt=0):(Ke===null&&(Ke=Ze),++Mt);return st<Mt&&(Ie=Ke,st=Mt),Ie},oe={},Ee=R({},oe,{" ":1,'"':1,"<":1,">":1,"`":1}),Oe=R({},Ee,{"#":1,"?":1,"{":1,"}":1}),ze=R({},Oe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Be=function(pe,Ie){var st=L(pe,0);return 32<st&&st<127&&!P(Ie,pe)?pe:encodeURIComponent(pe)},dt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Je=function(pe){return P(dt,pe.scheme)},_e=function(pe){return pe.username!=""||pe.password!=""},Ue=function(pe,Ie){return pe.length==2&&X.test(pe.charAt(0))&&((pe=pe.charAt(1))==":"||!Ie&&pe=="|")},Fe=function(pe){return 1<pe.length&&Ue(pe.slice(0,2))&&(pe.length==2||(pe=pe.charAt(2))==="/"||pe==="\\"||pe==="?"||pe==="#")},Ne=function(pe){var Ie=pe.path,st=Ie.length;!st||pe.scheme=="file"&&st==1&&Ue(Ie[0],!0)||Ie.pop()},ft=function(pe){return pe==="."||pe.toLowerCase()==="%2e"},vt=function(pe){return(pe=pe.toLowerCase())===".."||pe==="%2e."||pe===".%2e"||pe==="%2e%2e"},ht={},lt={},ce={},ue={},he={},be={},je={},We={},xe={},Ve={},Ce={},Qe={},ut={},Rt={},Nt={},Bt={},Vt={},jt={},Yt={},on={},$n={},xn=(S=v.prototype,function(){var pe=H(this),Ie=pe.scheme,st=pe.username,Ke=pe.password,Mt=pe.host,Ze=pe.port,Lt=pe.path,pt=pe.query,Tt=pe.fragment,_t=Ie+":";return Mt!==null?(_t+="//",_e(pe)&&(_t+=st+(Ke?":"+Ke:"")+"@"),_t+=h(Mt),Ze!==null&&(_t+=":"+Ze)):Ie=="file"&&(_t+="//"),_t+=pe.cannotBeABaseURL?Lt[0]:Lt.length?"/"+Lt.join("/"):"",pt!==null&&(_t+="?"+pt),Tt!==null&&(_t+="#"+Tt),_t}),On=function(){var pe=H(this),Ie=pe.scheme,st=pe.port;if(Ie=="blob")try{return new URL(Ie.path[0]).origin}catch{return"null"}return Ie!="file"&&Je(pe)?Ie+"://"+h(pe.host)+(st!==null?":"+st:""):"null"},Gn=function(){return H(this).scheme+":"},un=function(){return H(this).username},lr=function(){return H(this).password},er=function(){var pe=(Ie=H(this)).host,Ie=Ie.port;return pe===null?"":Ie===null?h(pe):h(pe)+":"+Ie},An=function(){var pe=H(this).host;return pe===null?"":h(pe)},qo=function(){var pe=H(this).port;return pe===null?"":String(pe)},Yo=function(){var pe=H(this),Ie=pe.path;return pe.cannotBeABaseURL?Ie[0]:Ie.length?"/"+Ie.join("/"):""},Ae=function(){var pe=H(this).query;return pe?"?"+pe:""},Ye=function(){return H(this).searchParams},nt=function(){var pe=H(this).fragment;return pe?"#"+pe:""};m&&w(S,{href:x(xn,function(pe){var Ie=H(this);if(pe=d(Ie,pe=String(pe)))throw TypeError(pe);N(Ie.searchParams).updateSearchParams(Ie.query)}),origin:x(On),protocol:x(Gn,function(pe){d(H(this),String(pe)+":",ht)}),username:x(un,function(pe){var Ie=H(this),st=k(String(pe));if(!l(Ie)){Ie.username="";for(var Ke=0;Ke<st.length;Ke++)Ie.username+=Be(st[Ke],ze)}}),password:x(lr,function(pe){var Ie=H(this),st=k(String(pe));if(!l(Ie)){Ie.password="";for(var Ke=0;Ke<st.length;Ke++)Ie.password+=Be(st[Ke],ze)}}),host:x(er,function(pe){var Ie=H(this);Ie.cannotBeABaseURL||d(Ie,String(pe),Ce)}),hostname:x(An,function(pe){var Ie=H(this);Ie.cannotBeABaseURL||d(Ie,String(pe),Qe)}),port:x(qo,function(pe){var Ie=H(this);l(Ie)||((pe=String(pe))==""?Ie.port=null:d(Ie,pe,ut))}),pathname:x(Yo,function(pe){var Ie=H(this);Ie.cannotBeABaseURL||(Ie.path=[],d(Ie,pe+"",Vt))}),search:x(Ae,function(pe){var Ie=H(this);(pe=String(pe))==""?Ie.query=null:(pe.charAt(0)=="?"&&(pe=pe.slice(1)),Ie.query="",d(Ie,pe,on)),N(Ie.searchParams).updateSearchParams(Ie.query)}),searchParams:x(Ye),hash:x(nt,function(pe){var Ie=H(this);(pe=String(pe))==""?Ie.fragment=null:(pe.charAt(0)=="#"&&(pe=pe.slice(1)),Ie.fragment="",d(Ie,pe,$n))})}),M(S,"toJSON",function(){return xn.call(this)},{enumerable:!0}),M(S,"toString",function(){return xn.call(this)},{enumerable:!0}),z&&(f=z.createObjectURL,u=z.revokeObjectURL,f&&M(v,"createObjectURL",function(pe){return f.apply(z,arguments)}),u&&M(v,"revokeObjectURL",function(pe){return u.apply(z,arguments)})),I(v,"URL"),c({global:!0,forced:!b,sham:!m},{URL:v})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":126,"../modules/es.string.iterator":190,"../modules/web.url-search-params":237}],239:[function(i,_,g){_.exports=i("./").polyfill()},{"./":240}],240:[function(i,_,g){(function(h,l){var d;d=function(){function v(re){return typeof re=="function"}var x=Array.isArray||function(re){return Object.prototype.toString.call(re)==="[object Array]"},p=0,f=void 0,u=void 0,c=function(re,de){A[p]=re,A[p+1]=de,(p+=2)===2&&(u?u(P):B())},m=typeof window<"u"?window:void 0,b=(b=m||{}).MutationObserver||b.WebKitMutationObserver,S=typeof self>"u"&&h!==void 0&&{}.toString.call(h)==="[object process]",w=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function M(){var re=setTimeout;return function(){return re(P,1)}}var A=new Array(1e3);function P(){for(var re=0;re<p;re+=2)(0,A[re])(A[re+1]),A[re]=void 0,A[re+1]=void 0;p=0}var R,k,L,B=void 0;function I(re,de){var ge,ve=this,we=new this.constructor(G),Se=(we[z]===void 0&&Z(we),ve._state);return Se?(ge=arguments[Se-1],c(function(){return me(Se,we,ge,ve._result)})):ee(ve,we,re,de),we}function F(re){var de;return re&&typeof re=="object"&&re.constructor===this?re:(H(de=new this(G),re),de)}B=S?function(){return h.nextTick(P)}:b?(k=0,S=new b(P),L=document.createTextNode(""),S.observe(L,{characterData:!0}),function(){L.data=k=++k%2}):w?((R=new MessageChannel).port1.onmessage=P,function(){return R.port2.postMessage(0)}):(m===void 0&&typeof i=="function"?function(){try{var re=Function("return this")().require("vertx");return(f=re.runOnLoop||re.runOnContext)!==void 0?function(){f(P)}:M()}catch{return M()}}:M)();var z=Math.random().toString(36).substring(2);function G(){}var N=void 0;function O(re,de,ge){var ve,we;de.constructor===re.constructor&&ge===I&&de.constructor.resolve===F?(ve=re,(we=de)._state===1?K(ve,we._result):we._state===2?ne(ve,we._result):ee(we,void 0,function(Se){return H(ve,Se)},function(Se){return ne(ve,Se)})):ge!==void 0&&v(ge)?function(Se,ae,oe){c(function(Ee){var Oe=!1,ze=function(Be,dt,Je,_e){try{Be.call(dt,Je,_e)}catch(Ue){return Ue}}(oe,ae,function(Be){Oe||(Oe=!0,(ae!==Be?H:K)(Ee,Be))},function(Be){Oe||(Oe=!0,ne(Ee,Be))},Ee._label);!Oe&&ze&&(Oe=!0,ne(Ee,ze))},Se)}(re,de,ge):K(re,de)}function H(re,de){if(re===de)ne(re,new TypeError("You cannot resolve a promise with itself"));else if(ge=typeof de,de===null||ge!="object"&&ge!="function")K(re,de);else{ge=void 0;try{ge=de.then}catch(ve){return void ne(re,ve)}O(re,de,ge)}var ge}function q(re){re._onerror&&re._onerror(re._result),se(re)}function K(re,de){re._state===N&&(re._result=de,re._state=1,re._subscribers.length!==0&&c(se,re))}function ne(re,de){re._state===N&&(re._state=2,re._result=de,c(q,re))}function ee(re,de,ge,ve){var we=re._subscribers,Se=we.length;re._onerror=null,we[Se]=de,we[Se+1]=ge,we[Se+2]=ve,Se===0&&re._state&&c(se,re)}function se(re){var de=re._subscribers,ge=re._state;if(de.length!==0){for(var ve,we=void 0,Se=re._result,ae=0;ae<de.length;ae+=3)ve=de[ae],we=de[ae+ge],ve?me(ge,ve,we,Se):we(Se);re._subscribers.length=0}}function me(re,de,ge,ve){var we=v(ge),Se=void 0,ae=void 0,oe=!0;if(we){try{Se=ge(ve)}catch(Ee){oe=!1,ae=Ee}if(de===Se)return void ne(de,new TypeError("A promises callback cannot return that same promise."))}else Se=ve;de._state===N&&(we&&oe?H(de,Se):oe===!1?ne(de,ae):re===1?K(de,Se):re===2&&ne(de,Se))}var X=0;function Z(re){re[z]=X++,re._state=void 0,re._result=void 0,re._subscribers=[]}ye.prototype._enumerate=function(re){for(var de=0;this._state===N&&de<re.length;de++)this._eachEntry(re[de],de)},ye.prototype._eachEntry=function(re,de){var ge=this._instanceConstructor,ve=ge.resolve;if(ve===F){var we,Se=void 0,ae=void 0,oe=!1;try{Se=re.then}catch(Ee){oe=!0,ae=Ee}Se===I&&re._state!==N?this._settledAt(re._state,de,re._result):typeof Se!="function"?(this._remaining--,this._result[de]=re):ge===fe?(we=new ge(G),oe?ne(we,ae):O(we,re,Se),this._willSettleAt(we,de)):this._willSettleAt(new ge(function(Ee){return Ee(re)}),de)}else this._willSettleAt(ve(re),de)},ye.prototype._settledAt=function(re,de,ge){var ve=this.promise;ve._state===N&&(this._remaining--,re===2?ne(ve,ge):this._result[de]=ge),this._remaining===0&&K(ve,this._result)},ye.prototype._willSettleAt=function(re,de){var ge=this;ee(re,void 0,function(ve){return ge._settledAt(1,de,ve)},function(ve){return ge._settledAt(2,de,ve)})};var ie=ye;function ye(re,de){this._instanceConstructor=re,this.promise=new re(G),this.promise[z]||Z(this.promise),x(de)?(this.length=de.length,this._remaining=de.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(de),this._remaining!==0)||K(this.promise,this._result)):ne(this.promise,new Error("Array Methods must be provided an Array"))}$.prototype.catch=function(re){return this.then(null,re)},$.prototype.finally=function(re){var de=this.constructor;return v(re)?this.then(function(ge){return de.resolve(re()).then(function(){return ge})},function(ge){return de.resolve(re()).then(function(){throw ge})}):this.then(re,re)};var fe=$;function $(re){if(this[z]=X++,this._result=this._state=void 0,this._subscribers=[],G!==re){if(typeof re!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof $))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var de=this;try{re(function(ge){H(de,ge)},function(ge){ne(de,ge)})}catch(ge){ne(de,ge)}}}return fe.prototype.then=I,fe.all=function(re){return new ie(this,re).promise},fe.race=function(re){var de=this;return x(re)?new de(function(ge,ve){for(var we=re.length,Se=0;Se<we;Se++)de.resolve(re[Se]).then(ge,ve)}):new de(function(ge,ve){return ve(new TypeError("You must pass an array to race."))})},fe.resolve=F,fe.reject=function(re){var de=new this(G);return ne(de,re),de},fe._setScheduler=function(re){u=re},fe._setAsap=function(re){c=re},fe._asap=c,fe.polyfill=function(){var re=void 0;if(l!==void 0)re=l;else if(typeof self<"u")re=self;else try{re=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var de=re.Promise;if(de){var ge=null;try{ge=Object.prototype.toString.call(de.resolve())}catch{}if(ge==="[object Promise]"&&!de.cast)return}re.Promise=fe},fe.Promise=fe},typeof g=="object"&&_!==void 0?_.exports=d():this.ES6Promise=d()}).call(this,i("_process"),y!==void 0?y:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:249}],241:[function(i,_,g){var h;h=function(l,d){var v="callback";function x(f){try{delete window[f]}catch{window[f]=void 0}}function p(f){(f=document.getElementById(f))&&document.getElementsByTagName("head")[0].removeChild(f)}d.exports=function(f){var u=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],c=f,m=u.timeout||5e3,b=u.jsonpCallback||v,S=void 0;return new Promise(function(w,M){var A=u.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),P=b+"_"+A,R=(window[A]=function(k){w({ok:!0,json:function(){return Promise.resolve(k)}}),S&&clearTimeout(S),p(P),x(A)},c+=c.indexOf("?")===-1?"?":"&",document.createElement("script"));R.setAttribute("src",""+c+b+"="+A),u.charset&&R.setAttribute("charset",u.charset),R.id=P,document.getElementsByTagName("head")[0].appendChild(R),S=setTimeout(function(){M(new Error("JSONP request to "+f+" timed out")),x(A),p(P),window[A]=function(){x(A)}},m),R.onerror=function(){M(new Error("JSONP request to "+f+" failed")),x(A),p(P),S&&clearTimeout(S)}})}},g!==void 0&&_!==void 0?h(0,_):(h(h={exports:{}},h),this.fetchJsonp=h.exports)},{}],242:[function(i,_,g){var h=function(l){var d,v,x,p,f,u,c,m,b,S;if(!(l===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return S=l.document,d=function(){return l.URL||l.webkitURL||l},v=S.createElementNS("http://www.w3.org/1999/xhtml","a"),x="download"in v,p=/constructor/i.test(l.HTMLElement)||l.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(w){(l.setImmediate||l.setTimeout)(function(){throw w},0)},c=function(w){setTimeout(function(){typeof w=="string"?d().revokeObjectURL(w):w.remove()},4e4)},m=function(w){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(w.type)?new Blob(["\uFEFF",w],{type:w.type}):w},S=(b=function(w,M,A){A||(w=m(w));var P,R,k=this,L=(A=w.type==="application/octet-stream",function(){for(var B=k,I="writestart progress write writeend".split(" "),F=(I=[].concat(I)).length;F--;){var z=B["on"+I[F]];if(typeof z=="function")try{z.call(B,B)}catch(G){u(G)}}});k.readyState=k.INIT,x?(P=d().createObjectURL(w),setTimeout(function(){var B,I;v.href=P,v.download=M,B=v,I=new MouseEvent("click"),B.dispatchEvent(I),L(),c(P),k.readyState=k.DONE})):(f||A&&p)&&l.FileReader?((R=new FileReader).onloadend=function(){var B=f?R.result:R.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(B,"_blank")||(l.location.href=B),B=void 0,k.readyState=k.DONE,L()},R.readAsDataURL(w),k.readyState=k.INIT):(P=P||d().createObjectURL(w),!A&&l.open(P,"_blank")||(l.location.href=P),k.readyState=k.DONE,L(),c(P))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(w,M,A){return M=M||w.name||"download",A||(w=m(w)),navigator.msSaveOrOpenBlob(w,M)}:(S.abort=function(){},S.readyState=S.INIT=0,S.WRITING=1,S.DONE=2,S.error=S.onwritestart=S.onprogress=S.onwrite=S.onabort=S.onerror=S.onwriteend=null,function(w,M,A){return new b(w,M||w.name||"download",A)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);_!==void 0&&_.exports&&(_.exports.saveAs=h)},{}],243:[function(i,_,g){var h,l=Object.defineProperty,d=(l(g,"__esModule",{value:!0}),g),v={GIFEncoder:()=>L,applyPalette:()=>function(N,O,H="rgb565"){if(!N||!N.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(N instanceof Uint8Array||N instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<O.length)throw new Error("applyPalette() only works with 256 colors or less");const q=new Uint32Array(N.buffer),K=q.length,ne=H==="rgb444"?4096:65536,ee=new Uint8Array(K),se=new Array(ne);if(H==="rgba4444")for(let ge=0;ge<K;ge++){var me,X=(me=q[ge])>>24&255,Z=me>>16&255,ie=me>>8&255,ye=(ye=c(me=255&me,ie,Z,X))in se?se[ye]:se[ye]=function(ve,we,Se,ae,oe){let Ee=0,Oe=1e100;for(let dt=0;dt<oe.length;dt++){var ze=oe[dt],Be=P(ze[3]-ae);Be>Oe||(Be+=P(ze[0]-ve))>Oe||(Be+=P(ze[1]-we))>Oe||(Be+=P(ze[2]-Se))>Oe||(Oe=Be,Ee=dt)}return Ee}(me,ie,Z,X,O);ee[ge]=ye}else{const ge=H==="rgb444"?m:u;for(let ve=0;ve<K;ve++){var fe,$=(fe=q[ve])>>16&255,re=fe>>8&255,de=(de=ge(fe=255&fe,re,$))in se?se[de]:se[de]=function(we,Se,ae,oe){let Ee=0,Oe=1e100;for(let dt=0;dt<oe.length;dt++){var ze=oe[dt],Be=P(ze[0]-we);Be>Oe||(Be+=P(ze[1]-Se))>Oe||(Be+=P(ze[2]-ae))>Oe||(Oe=Be,Ee=dt)}return Ee}(fe,re,$,O);ee[ve]=de}}return ee},default:()=>G,nearestColor:()=>function(N,O,H=M){return N[R(N,O,H)]},nearestColorIndex:()=>R,nearestColorIndexWithDistance:()=>k,prequantize:()=>function(N,{roundRGB:O=5,roundAlpha:H=10,oneBitAlpha:q=null}={}){const K=new Uint32Array(N.buffer);for(let me=0;me<K.length;me++){let X=(se=K[me])>>24&255;var ne=se>>16&255,ee=se>>8&255,se=255&se;X=A(X,H),q&&(X=X<=(typeof q=="number"?q:127)?0:255),se=A(se,O),ee=A(ee,O),ne=A(ne,O),K[me]=X<<24|ne<<16|ee<<8|se<<0}},quantize:()=>function(N,O,H={}){var{format:q="rgb565",clearAlpha:K=!0,clearAlphaColor:ne=0,clearAlphaThreshold:ee=0,oneBitAlpha:se=!1}=H;if(!N||!N.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(N instanceof Uint8Array||N instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");N=new Uint32Array(N.buffer);let me=H.useSqrt!==!1;const X=q==="rgba4444",Z=function(_e,Ue){const Fe=new Array(Ue==="rgb444"?4096:65536),Ne=_e.length;if(Ue==="rgba4444")for(let Qe=0;Qe<Ne;++Qe){var ft,vt=(ft=_e[Qe])>>24&255,ht=ft>>16&255,lt=ft>>8&255,ce=c(ft=255&ft,lt,ht,vt);let ut=ce in Fe?Fe[ce]:Fe[ce]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};ut.rc+=ft,ut.gc+=lt,ut.bc+=ht,ut.ac+=vt,ut.cnt++}else if(Ue==="rgb444")for(let Qe=0;Qe<Ne;++Qe){var ue,he=(ue=_e[Qe])>>16&255,be=ue>>8&255,je=m(ue=255&ue,be,he);let ut=je in Fe?Fe[je]:Fe[je]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};ut.rc+=ue,ut.gc+=be,ut.bc+=he,ut.cnt++}else for(let Qe=0;Qe<Ne;++Qe){var We,xe=(We=_e[Qe])>>16&255,Ve=We>>8&255,Ce=u(We=255&We,Ve,xe);let ut=Ce in Fe?Fe[Ce]:Fe[Ce]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};ut.rc+=We,ut.gc+=Ve,ut.bc+=xe,ut.cnt++}return Fe}(N,q),ie=Z.length,ye=ie-1,fe=new Uint32Array(ie+1);for(var $=0,re=0;re<ie;++re){const _e=Z[re];_e!=null&&(Be=1/_e.cnt,X&&(_e.ac*=Be),_e.rc*=Be,_e.gc*=Be,_e.bc*=Be,Z[$++]=_e)}S(O)/$<.022&&(me=!1);var de,ge,ve;for(re=0;re<$-1;++re)Z[re].fw=re+1,Z[re+1].bk=re,me&&(Z[re].cnt=Math.sqrt(Z[re].cnt));for(me&&(Z[re].cnt=Math.sqrt(Z[re].cnt)),re=0;re<$;++re){w(Z,re);var we=Z[re].err;for(ge=++fe[0];1<ge&&!(Z[de=fe[ve=ge>>1]].err<=we);ge=ve)fe[ge]=de;fe[ge]=re}var Se,ae=$-O;for(re=0;re<ae;){for(;;){var oe=fe[1];if((Se=Z[oe]).tm>=Se.mtm&&Z[Se.nn].mtm<=Se.tm)break;for(Se.mtm==ye?oe=fe[1]=fe[fe[0]--]:(w(Z,oe),Se.tm=re),we=Z[oe].err,ge=1;(ve=ge+ge)<=fe[0]&&(ve<fe[0]&&Z[fe[ve]].err>Z[fe[ve+1]].err&&ve++,!(we<=Z[de=fe[ve]].err));ge=ve)fe[ge]=de;fe[ge]=oe}var Ee=Z[Se.nn],Oe=Se.cnt,ze=Ee.cnt,Be=1/(Oe+ze);X&&(Se.ac=Be*(Oe*Se.ac+ze*Ee.ac)),Se.rc=Be*(Oe*Se.rc+ze*Ee.rc),Se.gc=Be*(Oe*Se.gc+ze*Ee.gc),Se.bc=Be*(Oe*Se.bc+ze*Ee.bc),Se.cnt+=Ee.cnt,Se.mtm=++re,Z[Ee.bk].fw=Ee.fw,Z[Ee.fw].bk=Ee.bk,Ee.mtm=ye}let dt=[];for(re=0;;0){let _e=b(Math.round(Z[re].rc),0,255),Ue=b(Math.round(Z[re].gc),0,255),Fe=b(Math.round(Z[re].bc),0,255),Ne=255;X&&(Ne=b(Math.round(Z[re].ac),0,255),se&&(Ne=Ne<=(Je=typeof se=="number"?se:127)?0:255),K&&Ne<=ee&&(_e=Ue=Fe=ne,Ne=0));var Je=X?[_e,Ue,Fe,Ne]:[_e,Ue,Fe];if(function(ft,vt){for(let ce=0;ce<ft.length;ce++){var ht=(lt=ft[ce])[0]===vt[0]&&lt[1]===vt[1]&&lt[2]===vt[2],lt=!(4<=lt.length&&4<=vt.length)||lt[3]===vt[3];if(ht&&lt)return!0}return!1}(dt,Je)||dt.push(Je),(re=Z[re].fw)==0)break}return dt},snapColorsToPalette:()=>function(N,O,H=5){if(N.length&&O.length){var q=N.map(me=>me.slice(0,3)),K=H*H,ne=N[0].length;for(let me=0;me<O.length;me++){let X=O[me];X=X.length<ne?[X[0],X[1],X[2],255]:X.length>ne?X.slice(0,3):X.slice();var ee,se=(ee=k(q,X.slice(0,3),M))[0];0<(ee=ee[1])&&ee<=K&&(N[se]=X)}}}};for(h in v)l(d,h,{get:v[h],enumerable:!0});var x=59;function p(N=256){let O=0,H=new Uint8Array(N);return{get buffer(){return H.buffer},reset(){O=0},bytesView:()=>H.subarray(0,O),bytes:()=>H.slice(0,O),writeByte(K){q(O+1),H[O]=K,O++},writeBytes(K,ne=0,ee=K.length){q(O+ee);for(let se=0;se<ee;se++)H[O++]=K[se+ne]},writeBytesView(K,ne=0,ee=K.byteLength){q(O+ee),H.set(K.subarray(ne,ne+ee),O),O+=ee}};function q(K){var ne=H.length;if(!(K<=ne)){K=Math.max(K,ne*(ne<1048576?2:1.125)>>>0),ne!=0&&(K=Math.max(K,256));const ee=H;H=new Uint8Array(K),0<O&&H.set(ee.subarray(0,O),0)}}}var f=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function u(N,O,H){return N<<8&63488|O<<2&992|H>>3}function c(N,O,H,q){return N>>4|240&O|(240&H)<<4|(240&q)<<8}function m(N,O,H){return N>>4<<8|240&O|H>>4}function b(N,O,H){return N<O?O:H<N?H:N}function S(N){return N*N}function w(N,O,H){var q=0,K=1e100;const ne=N[O];for(var ee=ne.cnt,se=ne.ac,me=ne.rc,X=ne.gc,Z=ne.bc,ie=ne.fw;ie!=0;ie=N[ie].fw){var ye,fe,$=N[ie];K<=(fe=ee*(fe=$.cnt)/(ee+fe))||(ye=0,K<=(ye+=fe*S($.rc-me))||K<=(ye+=fe*S($.gc-X))||K<=(ye+=fe*S($.bc-Z))||(K=ye,q=ie))}ne.err=K,ne.nn=q}function M(N,O){for(var H=0,q=0;q<N.length;q++){var K=N[q]-O[q];H+=K*K}return H}function A(N,O){return 1<O?Math.round(N/O)*O:N}function P(N){return N*N}function R(N,O,H=M){let q=1/0,K=-1;for(let ee=0;ee<N.length;ee++){var ne=H(O,N[ee]);ne<q&&(q=ne,K=ee)}return K}function k(N,O,H=M){let q=1/0,K=-1;for(let ee=0;ee<N.length;ee++){var ne=H(O,N[ee]);ne<q&&(q=ne,K=ee)}return[K,q]}function L(N={}){const{initialCapacity:O=4096,auto:H=!0}=N,q=p(O),K=new Uint8Array(256),ne=new Int32Array(5003),ee=new Int32Array(5003);let se=!1;return{reset(){q.reset(),se=!1},finish(){q.writeByte(x)},bytes:()=>q.bytes(),bytesView:()=>q.bytesView(),get buffer(){return q.buffer},get stream(){return q},writeHeader:me,writeFrame(X,Z,ie,ye={}){var{transparent:fe=!1,transparentIndex:$=0,delay:ze=0,palette:re=null,repeat:oe=0,colorDepth:de=8,dispose:ge=-1}=ye;let ve=!1;if(H?se||(ve=!0,me(),se=!0):ve=!!ye.first,Z=Math.max(0,Math.floor(Z)),ie=Math.max(0,Math.floor(ie)),ve){if(!re)throw new Error("First frame must include a { palette } option");var[ye,Ee,Se,Oe,ae=8]=[q,Z,ie,re,de];ae=128|ae-1<<4|(Oe=z(Oe.length)-1),I(ye,Ee),I(ye,Se),ye.writeBytes([ae,0,0]),B(q,re),0<=oe&&(Ee=oe,(Oe=q).writeByte(33),Oe.writeByte(255),Oe.writeByte(11),F(Oe,"NETSCAPE2.0"),Oe.writeByte(3),Oe.writeByte(1),I(Oe,Ee),Oe.writeByte(0))}var we,Se,ae=ge,oe=Se=Math.round(ze/10),Ee=fe,Oe=$,ze=((ye=q).writeByte(33),ye.writeByte(249),ye.writeByte(4),Oe<0&&(Oe=0,Ee=!1),Ee=Ee?(we=1,2):we=0,0<=ae&&(Ee=7&ae),Ee<<=2,ye.writeByte(0|Ee|we),I(ye,oe),ye.writeByte(Oe||0),ye.writeByte(0),!!re&&!ve);fe=Z,$=ie,we=ze?re:null,(ge=q).writeByte(44),I(ge,0),I(ge,0),I(ge,fe),I(ge,$),we?(fe=z(we.length)-1,ge.writeByte(128|fe)):ge.writeByte(0),ze&&B(q,re),[oe,ye,$,fe,ge=8,ze,re,X]=[q,X,Z,ie,de,K,ne,ee],function(Be,dt,Je,_e,Ue=p(512),Fe=new Uint8Array(256),Ne=new Int32Array(5003),ft=new Int32Array(5003)){var vt=Ne.length;_e=Math.max(2,_e),Fe.fill(0),ft.fill(0),Ne.fill(-1);let ht=0,lt=0;var ce=_e+1;const ue=ce;let he=!1,be=ue,je=(1<<be)-1;var We=1<<ce-1;const xe=1+We;let Ve=2+We,Ce=0,Qe=Je[0],ut=0;for(let Yt=vt;Yt<65536;Yt*=2)++ut;ut=8-ut,Ue.writeByte(_e),jt(We);var Rt=Je.length;for(let Yt=1;Yt<Rt;Yt++)e:{var Nt=Je[Yt],Bt=(Nt<<12)+Qe;let on=Nt<<ut^Qe;if(Ne[on]===Bt)Qe=ft[on];else{for(var Vt=on===0?1:vt-on;0<=Ne[on];)if((on-=Vt)<0&&(on+=vt),Ne[on]===Bt){Qe=ft[on];break e}jt(Qe),Qe=Nt,Ve<4096?(ft[on]=Ve++,Ne[on]=Bt):(Ne.fill(-1),Ve=2+We,he=!0,jt(We))}}return jt(Qe),jt(xe),Ue.writeByte(0),Ue.bytesView();function jt(Yt){for(ht&=f[lt],0<lt?ht|=Yt<<lt:ht=Yt,lt+=be;8<=lt;)Fe[Ce++]=255&ht,254<=Ce&&(Ue.writeByte(Ce),Ue.writeBytesView(Fe,0,Ce),Ce=0),ht>>=8,lt-=8;if((Ve>je||he)&&(he?(be=ue,je=(1<<be)-1,he=!1):(++be,je=be===12?1<<be:(1<<be)-1)),Yt==xe){for(;0<lt;)Fe[Ce++]=255&ht,254<=Ce&&(Ue.writeByte(Ce),Ue.writeBytesView(Fe,0,Ce),Ce=0),ht>>=8,lt-=8;0<Ce&&(Ue.writeByte(Ce),Ue.writeBytesView(Fe,0,Ce),Ce=0)}}}(0,0,ye,ge,oe,ze,re,X)}};function me(){F(q,"GIF89a")}}function B(N,O){var H=1<<z(O.length);for(let q=0;q<H;q++){let K=[0,0,0];q<O.length&&(K=O[q]),N.writeByte(K[0]),N.writeByte(K[1]),N.writeByte(K[2])}}function I(N,O){N.writeByte(255&O),N.writeByte(O>>8&255)}function F(N,O){for(var H=0;H<O.length;H++)N.writeByte(O.charCodeAt(H))}function z(N){return Math.max(Math.ceil(Math.log2(N)),1)}var G=L},{}],244:[function(i,_,g){g.read=function(h,l,d,v,x){var p,f,u=8*x-v-1,c=(1<<u)-1,m=c>>1,b=-7,S=d?x-1:0,w=d?-1:1;for(x=h[l+S],S+=w,p=x&(1<<-b)-1,x>>=-b,b+=u;0<b;p=256*p+h[l+S],S+=w,b-=8);for(f=p&(1<<-b)-1,p>>=-b,b+=v;0<b;f=256*f+h[l+S],S+=w,b-=8);if(p===0)p=1-m;else{if(p===c)return f?NaN:1/0*(x?-1:1);f+=Math.pow(2,v),p-=m}return(x?-1:1)*f*Math.pow(2,p-v)},g.write=function(h,l,d,v,x,p){var f,u,c=8*p-x-1,m=(1<<c)-1,b=m>>1,S=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=v?0:p-1,M=v?1:-1;for(p=l<0||l===0&&1/l<0?1:0,l=Math.abs(l),isNaN(l)||l===1/0?(u=isNaN(l)?1:0,f=m):(f=Math.floor(Math.log(l)/Math.LN2),l*(v=Math.pow(2,-f))<1&&(f--,v*=2),2<=(l+=1<=f+b?S/v:S*Math.pow(2,1-b))*v&&(f++,v/=2),m<=f+b?(u=0,f=m):1<=f+b?(u=(l*v-1)*Math.pow(2,x),f+=b):(u=l*Math.pow(2,b-1)*Math.pow(2,x),f=0));8<=x;h[d+w]=255&u,w+=M,u/=256,x-=8);for(f=f<<x|u,c+=x;0<c;h[d+w]=255&f,w+=M,f/=256,c-=8);h[d+w-M]|=128*p}},{}],245:[function(i,_,g){var h;function l(ce,ue){return ce.b===ue.b&&ce.a===ue.a}function d(ce,ue){return ce.b<ue.b||ce.b===ue.b&&ce.a<=ue.a}function v(ce,ue,he){var be=ue.b-ce.b,je=he.b-ue.b;return 0<be+je?be<je?ue.a-ce.a+be/(be+je)*(ce.a-he.a):ue.a-he.a+je/(be+je)*(he.a-ce.a):0}function x(ce,ue,he){var be=ue.b-ce.b,je=he.b-ue.b;return 0<be+je?(ue.a-he.a)*be+(ue.a-ce.a)*je:0}function p(ce,ue){return ce.a<ue.a||ce.a===ue.a&&ce.b<=ue.b}function f(ce,ue,he){var be=ue.a-ce.a,je=he.a-ue.a;return 0<be+je?be<je?ue.b-ce.b+be/(be+je)*(ce.b-he.b):ue.b-he.b+je/(be+je)*(he.b-ce.b):0}function u(ce,ue,he){var be=ue.a-ce.a,je=he.a-ue.a;return 0<be+je?(ue.b-he.b)*be+(ue.b-ce.b)*je:0}function c(ce,ue,he,be){return(ce=ce<0?0:ce)<=(he=he<0?0:he)?he===0?(ue+be)/2:ue+ce/(ce+he)*(be-ue):be+he/(ce+he)*(ue-be)}function m(ce){var ue=A(ce.b);return R(ue,ce.c),R(ue.b,ce.c),k(ue,ce.a),ue}function b(ce,ue){var he=!1,be=!1;ce!==ue&&(ue.a!==ce.a&&(be=!0,B(ue.a,ce.a)),ue.d!==ce.d&&(he=!0,I(ue.d,ce.d)),P(ue,ce),be||(R(ue,ce.a),ce.a.c=ce),he||(k(ue,ce.d),ce.d.a=ce))}function S(ce){var ue=ce.b,he=!1;ce.d!==ce.b.d&&(he=!0,I(ce.d,ce.b.d)),ce.c===ce?B(ce.a,null):(ce.b.d.a=ce.b.e,ce.a.c=ce.c,P(ce,ce.b.e),he||k(ce,ce.d)),ue.c===ue?(B(ue.a,null),I(ue.d,null)):(ce.d.a=ue.b.e,ue.a.c=ue.c,P(ue,ue.b.e)),L(ce)}function w(ce){var ue=A(ce),he=ue.b;return P(ue,ce.e),ue.a=ce.b.a,R(he,ue.a),ue.d=he.d=ce.d,ue=ue.b,P(ce.b,ce.b.b.e),P(ce.b,ue),ce.b.a=ue.a,ue.b.a.c=ue.b,ue.b.d=ce.b.d,ue.f=ce.f,ue.b.f=ce.b.f,ue}function M(ce,ue){var he=!1,be=A(ce),je=be.b;return ue.d!==ce.d&&(he=!0,I(ue.d,ce.d)),P(be,ce.e),P(je,ue),be.a=ce.b.a,je.a=ue.a,be.d=je.d=ce.d,ce.d.a=je,he||k(be,ce.d),be}function A(ce){var ue=new oe,he=new oe,be=ce.b.h;return(((he.h=be).b.h=ue).h=ce).b.h=he,ue.b=he,((ue.c=ue).e=he).b=ue,(he.c=he).e=ue}function P(ce,ue){var he=ce.c,be=ue.c;he.b.e=ue,(be.b.e=ce).c=be,ue.c=he}function R(ce,ue){var he=ue.f,be=new Oe(ue,he);for(he.e=be,he=(ue.f=be).c=ce;he.a=be,(he=he.c)!==ce;);}function k(ce,ue){var he=ue.d,be=new ae(ue,he);for(he.b=be,(ue.d=be).a=ce,be.c=ue.c,he=ce;he.d=be,(he=he.e)!==ce;);}function L(ce){var ue=ce.h;ce=ce.b.h,(ue.b.h=ce).b.h=ue}function B(ce,ue){for(var he=ce.c,be=he;be.a=ue,(be=be.c)!==he;);he=ce.f,((be=ce.e).f=he).e=be}function I(ce,ue){for(var he=ce.a,be=he;be.d=ue,(be=be.e)!==he;);he=ce.d,((be=ce.b).d=he).b=be}function F(ce){var ue=0;return Math.abs(ce[1])>Math.abs(ce[0])&&(ue=1),Math.abs(ce[2])>Math.abs(ce[ue])?2:ue}function z(ce,ue){ce.f+=ue.f,ce.b.f+=ue.b.f}function G(ce,ue,he){return ce=ce.a,ue=ue.a,he=he.a,ue.b.a===ce?he.b.a===ce?d(ue.a,he.a)?x(he.b.a,ue.a,he.a)<=0:0<=x(ue.b.a,he.a,ue.a):x(he.b.a,ce,he.a)<=0:he.b.a===ce?0<=x(ue.b.a,ce,ue.a):(ue=v(ue.b.a,ce,ue.a),(ce=v(he.b.a,ce,he.a))<=ue)}function N(ce){ce.a.i=null;var ue=ce.e;ue.a.c=ue.c,ue.c.a=ue.a,ce.e=null}function O(ce,ue){S(ce.a),ce.c=!1,(ce.a=ue).i=ce}function H(ce){for(var ue=ce.a.a;(ce=lt(ce)).a.a===ue;);return ce.c&&(O(ce,ue=M(ht(ce).a.b,ce.a.e)),ce=lt(ce)),ce}function q(ce,ue,he){var be=new vt;return be.a=he,be.e=de(ce.f,ue.e,be),he.i=be}function K(ce,ue){switch(ce.s){case 100130:return(1&ue)!=0;case 100131:return ue!==0;case 100132:return 0<ue;case 100133:return ue<0;case 100134:return 2<=ue||ue<=-2}return!1}function ne(ce){var ue=ce.a,he=ue.d;he.c=ce.d,he.a=ue,N(ce)}function ee(ce,ue,he){for(ue=(ce=ue).a;ce!==he;){ce.c=!1;var be=ht(ce),je=be.a;if(je.a!==ue.a){if(!be.c){ne(ce);break}O(be,je=M(ue.c.b,je.b))}ue.c!==je&&(b(je.b.e,je),b(ue,je)),ne(ce),ue=be.a,ce=be}return ue}function se(ce,ue,he,be,je,We){for(var xe=!0;q(ce,ue,he.b),(he=he.c)!==be;);for(je===null&&(je=ht(ue).a.b.c);(he=(be=ht(ue)).a.b).a===je.a;)he.c!==je&&(b(he.b.e,he),b(je.b.e,he)),be.f=ue.f-he.f,be.d=K(ce,be.f),ue.b=!0,!xe&&ie(ce,ue)&&(z(he,je),N(ue),S(je)),xe=!1,ue=be,je=he;ue.b=!0,We&&fe(ce,ue)}function me(ce,ue,he,be,je){var We=[ue.g[0],ue.g[1],ue.g[2]];ue.d=null,ue.d=ce.o&&ce.o(We,he,be,ce.c)||null,ue.d===null&&(je?ce.n||(Se(ce,100156),ce.n=!0):ue.d=he[0])}function X(ce,ue,he){var be=[null,null,null,null];be[0]=ue.a.d,be[1]=he.a.d,me(ce,ue.a,be,[.5,.5,0,0],!1),b(ue,he)}function Z(ce,ue,he,be,je){var We=Math.abs(ue.b-ce.b)+Math.abs(ue.a-ce.a),xe=Math.abs(he.b-ce.b)+Math.abs(he.a-ce.a),Ve=je+1;be[je]=.5*xe/(We+xe),be[Ve]=.5*We/(We+xe),ce.g[0]+=be[je]*ue.g[0]+be[Ve]*he.g[0],ce.g[1]+=be[je]*ue.g[1]+be[Ve]*he.g[1],ce.g[2]+=be[je]*ue.g[2]+be[Ve]*he.g[2]}function ie(ce,ue){var he=ht(ue),be=ue.a,je=he.a;if(d(be.a,je.a)){if(0<x(je.b.a,be.a,je.a))return;if(l(be.a,je.a)){if(be.a!==je.a){he=ce.e;var We=be.a.h;if(0<=We){var xe=(he=he.b).d,Ve=he.e,Ce=he.c,Qe=Ce[We];xe[Qe]=xe[he.a],(Ce[xe[Qe]]=Qe)<=--he.a&&(Qe<=1||d(Ve[xe[Qe>>1]],Ve[xe[Qe]])?Ne:ft)(he,Qe),Ve[We]=null,Ce[We]=he.b,he.b=We}else for(he.c[-(We+1)]=null;0<he.a&&he.c[he.d[he.a-1]]===null;)--he.a;X(ce,je.b.e,be)}}else w(je.b),b(be,je.b.e),ue.b=he.b=!0}else{if(x(be.b.a,je.a,be.a)<0)return;lt(ue).b=ue.b=!0,w(be.b),b(je.b.e,be)}return 1}function ye(ce,ue){var he=ht(ue),be=ue.a,je=he.a,We=be.a,xe=je.a,Ve=be.b.a,Ce=je.b.a,Qe=new Oe;if(x(Ve,ce.a,We),x(Ce,ce.a,xe),!(We===xe||Math.min(We.a,Ve.a)>Math.max(xe.a,Ce.a))){if(d(We,xe)){if(0<x(Ce,We,xe))return}else if(x(Ve,xe,We)<0)return;var ut,Rt,Nt=Ve,Bt=We,Vt=Ce,jt=xe;if(d(Nt,Bt)||(ut=Nt,Nt=Bt,Bt=ut),d(Vt,jt)||(ut=Vt,Vt=jt,jt=ut),d(Nt,Vt)||(ut=Nt,Nt=Vt,Vt=ut,ut=Bt,Bt=jt,jt=ut),d(Vt,Bt)?d(Bt,jt)?((ut=v(Nt,Vt,Bt))+(Rt=v(Vt,Bt,jt))<0&&(ut=-ut,Rt=-Rt),Qe.b=c(ut,Vt.b,Rt,Bt.b)):((ut=x(Nt,Vt,Bt))+(Rt=-x(Nt,jt,Bt))<0&&(ut=-ut,Rt=-Rt),Qe.b=c(ut,Vt.b,Rt,jt.b)):Qe.b=(Vt.b+Bt.b)/2,p(Nt,Bt)||(ut=Nt,Nt=Bt,Bt=ut),p(Vt,jt)||(ut=Vt,Vt=jt,jt=ut),p(Nt,Vt)||(ut=Nt,Nt=Vt,Vt=ut,ut=Bt,Bt=jt,jt=ut),p(Vt,Bt)?p(Bt,jt)?((ut=f(Nt,Vt,Bt))+(Rt=f(Vt,Bt,jt))<0&&(ut=-ut,Rt=-Rt),Qe.a=c(ut,Vt.a,Rt,Bt.a)):((ut=u(Nt,Vt,Bt))+(Rt=-u(Nt,jt,Bt))<0&&(ut=-ut,Rt=-Rt),Qe.a=c(ut,Vt.a,Rt,jt.a)):Qe.a=(Vt.a+Bt.a)/2,d(Qe,ce.a)&&(Qe.b=ce.a.b,Qe.a=ce.a.a),Nt=d(We,xe)?We:xe,d(Nt,Qe)&&(Qe.b=Nt.b,Qe.a=Nt.a),l(Qe,We)||l(Qe,xe))return ie(ce,ue),0;if(!l(Ve,ce.a)&&0<=x(Ve,ce.a,Qe)||!l(Ce,ce.a)&&x(Ce,ce.a,Qe)<=0){if(Ce===ce.a)w(be.b),b(je.b,be),be=ht(ue=H(ue)).a,ee(ce,ht(ue),he),se(ce,ue,be.b.e,be,be,!0);else{if(Ve!==ce.a)return 0<=x(Ve,ce.a,Qe)&&(lt(ue).b=ue.b=!0,w(be.b),be.a.b=ce.a.b,be.a.a=ce.a.a),void(x(Ce,ce.a,Qe)<=0&&(ue.b=he.b=!0,w(je.b),je.a.b=ce.a.b,je.a.a=ce.a.a));for(w(je.b),b(be.e,je.b.e),xe=(We=he=ue).a.b.a;(We=lt(We)).a.b.a===xe;);We=ht(ue=We).a.b.c,he.a=je.b.e,se(ce,ue,(je=ee(ce,he,null)).c,be.b.c,We,!0)}return 1}w(be.b),w(je.b),b(je.b.e,be),be.a.b=Qe.b,be.a.a=Qe.a,be.a.h=Be(ce.e,be.a),be=be.a,je=[0,0,0,0],Qe=[We.d,Ve.d,xe.d,Ce.d],be.g[0]=be.g[1]=be.g[2]=0,Z(be,We,Ve,je,0),Z(be,xe,Ce,je,2),me(ce,be,Qe,je,!0),lt(ue).b=ue.b=he.b=!0}}function fe(ce,ue){for(var he=ht(ue);;){for(;he.b;)he=ht(ue=he);if(!(ue.b||(ue=lt(he=ue))!==null&&ue.b))break;ue.b=!1;var be=ue.a,je=he.a;if(We=be.b.a!==je.b.a)e:{var We,xe=ht(We=ue),Ve=We.a,Ce=xe.a,Qe=void 0;if(d(Ve.b.a,Ce.b.a)){if(x(Ve.b.a,Ce.b.a,Ve.a)<0){We=!1;break e}lt(We).b=We.b=!0,Qe=w(Ve),b(Ce.b,Qe),Qe.d.c=We.d}else{if(0<x(Ce.b.a,Ve.b.a,Ce.a)){We=!1;break e}We.b=xe.b=!0,Qe=w(Ce),b(Ve.e,Ce.b),Qe.b.d.c=We.d}We=!0}if(We&&(he.c?(N(he),S(je),je=(he=ht(ue)).a):ue.c&&(N(ue),S(be),be=(ue=lt(he)).a)),be.a!==je.a){if(be.b.a===je.b.a||ue.c||he.c||be.b.a!==ce.a&&je.b.a!==ce.a)ie(ce,ue);else if(ye(ce,ue))break}be.a===je.a&&be.b.a===je.b.a&&(z(je,be),N(ue),S(be),ue=lt(he))}}function $(ce,ue){var he=new vt,be=m(ce.b);be.a.b=4e150,be.a.a=ue,be.b.a.b=-4e150,be.b.a.a=ue,ce.a=be.b.a,he.a=be,he.f=0,he.d=!1,he.c=!1,he.h=!0,he.b=!1,be=de(be=ce.f,be.a,he),he.e=be}function re(ce){this.a=new ge,this.b=ce,this.c=G}function de(ce,ue,he){for(;(ue=ue.c).b!==null&&!ce.c(ce.b,ue.b,he););return ce=new ge(he,ue.a,ue),ue.a.c=ce,ue.a=ce}function ge(ce,ue,he){this.b=ce||null,this.a=ue||this,this.c=he||this}function ve(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function we(ce,ue){if(ce.d!==ue)for(;ce.d!==ue;)if(ce.d<ue)switch(ce.d){case 0:Se(ce,100151),ce.u(null);break;case 1:Se(ce,100152),ce.t()}else switch(ce.d){case 2:Se(ce,100154),ce.v();break;case 1:Se(ce,100153),ce.w()}}function Se(ce,ue){ce.p&&ce.p(ue,ce.c)}function ae(ce,ue){this.b=ce||this,this.d=ue||this,this.a=null,this.c=!1}function oe(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Ee(){this.c=new Oe,this.a=new ae,this.b=new oe,this.d=new oe,this.b.b=this.d,this.d.b=this.b}function Oe(ce,ue){this.e=ce||this,this.f=ue||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function ze(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Je}function Be(ce,ue){var he,be,je;return ce.e?(2*(be=++(he=ce.b).a)>he.f&&(he.f*=2,he.c=_e(he.c,he.f+1)),he.b===0?je=be:(je=he.b,he.b=he.c[he.b]),he.e[je]=ue,he.c[je]=be,he.d[be]=je,he.h&&ft(he,be),je):(he=ce.a++,ce.c[he]=ue,-(he+1))}function dt(ce){if(ce.a===0)return Fe(ce.b);var ue=ce.c[ce.d[ce.a-1]];if(ce.b.a!==0&&d(Ue(ce.b),ue))return Fe(ce.b);for(;--ce.a,0<ce.a&&ce.c[ce.d[ce.a-1]]===null;);return ue}function Je(){this.d=_e([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function _e(ce,ue){for(var he=Array(ue),be=0;be<ce.length;be++)he[be]=ce[be];for(;be<ue;be++)he[be]=0;return he}function Ue(ce){return ce.e[ce.d[1]]}function Fe(ce){var ue=ce.d,he=ce.e,be=ce.c,je=ue[1],We=he[je];return 0<ce.a&&(ue[1]=ue[ce.a],be[ue[1]]=1,he[je]=null,be[je]=ce.b,ce.b=je,0<--ce.a&&Ne(ce,1)),We}function Ne(ce,ue){for(var he=ce.d,be=ce.e,je=ce.c,We=ue,xe=he[We];;){var Ve=We<<1,Ce=(Ve<ce.a&&d(be[he[Ve+1]],be[he[Ve]])&&(Ve+=1),he[Ve]);if(Ve>ce.a||d(be[xe],be[Ce])){je[he[We]=xe]=We;break}je[he[We]=Ce]=We,We=Ve}}function ft(ce,ue){for(var he=ce.d,be=ce.e,je=ce.c,We=ue,xe=he[We];;){var Ve=We>>1,Ce=he[Ve];if(Ve==0||d(be[Ce],be[xe])){je[he[We]=xe]=We;break}je[he[We]=Ce]=We,We=Ve}}function vt(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ht(ce){return ce.e.c.b}function lt(ce){return ce.e.a.b}(h=ve.prototype).x=function(){we(this,0)},h.B=function(ce,ue){switch(ce){case 100142:return;case 100140:switch(ue){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ue)}break;case 100141:return void(this.m=!!ue);default:return void Se(this,100900)}Se(this,100901)},h.y=function(ce){switch(ce){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Se(this,100900)}return!1},h.A=function(ce,ue,he){this.j[0]=ce,this.j[1]=ue,this.j[2]=he},h.z=function(ce,ue){var he=ue||null;switch(ce){case 100100:case 100106:this.h=he;break;case 100104:case 100110:this.l=he;break;case 100101:case 100107:this.k=he;break;case 100102:case 100108:this.i=he;break;case 100103:case 100109:this.p=he;break;case 100105:case 100111:this.o=he;break;case 100112:this.r=he;break;default:Se(this,100900)}},h.C=function(ce,ue){var he=!1,be=[0,0,0];we(this,2);for(var je=0;je<3;++je){var We=ce[je];We<-1e150&&(We=-1e150,he=!0),1e150<We&&(We=1e150,he=!0),be[je]=We}he&&Se(this,100155),(he=this.q)===null?b(he=m(this.b),he.b):(w(he),he=he.e),he.a.d=ue,he.a.g[0]=be[0],he.a.g[1]=be[1],he.a.g[2]=be[2],he.f=1,he.b.f=-1,this.q=he},h.u=function(ce){we(this,0),this.d=1,this.b=new Ee,this.c=ce},h.t=function(){we(this,1),this.d=2,this.q=null},h.v=function(){we(this,2),this.d=1},h.w=function(){we(this,1),this.d=0;var ce,ue,he=!1,be=[Ce=this.j[0],je=this.j[1],xe=this.j[2]];if(Ce===0&&je===0&&xe===0){for(var je=[-2e150,-2e150,-2e150],We=[2e150,2e150,2e150],xe=[],Ve=[],Ce=(he=this.b.c).e;Ce!==he;Ce=Ce.e)for(var Qe=0;Qe<3;++Qe){var ut=Ce.g[Qe];ut<We[Qe]&&(We[Qe]=ut,Ve[Qe]=Ce),ut>je[Qe]&&(je[Qe]=ut,xe[Qe]=Ce)}if(je[1]-We[1]>je[Ce=0]-We[0]&&(Ce=1),We[Ce=je[2]-We[2]>je[Ce]-We[Ce]?2:Ce]>=je[Ce])be[0]=0,be[1]=0,be[2]=1;else{for(We=Ve[Ce],xe=xe[Ce],Ve=[je=0,0,0],We=[We.g[0]-xe.g[0],We.g[1]-xe.g[1],We.g[2]-xe.g[2]],Qe=[0,0,0],Ce=he.e;Ce!==he;Ce=Ce.e)Qe[0]=Ce.g[0]-xe.g[0],Qe[1]=Ce.g[1]-xe.g[1],Qe[2]=Ce.g[2]-xe.g[2],Ve[0]=We[1]*Qe[2]-We[2]*Qe[1],Ve[1]=We[2]*Qe[0]-We[0]*Qe[2],Ve[2]=We[0]*Qe[1]-We[1]*Qe[0],je<(ut=Ve[0]*Ve[0]+Ve[1]*Ve[1]+Ve[2]*Ve[2])&&(je=ut,be[0]=Ve[0],be[1]=Ve[1],be[2]=Ve[2]);je<=0&&(be[0]=be[1]=be[2]=0,be[F(We)]=1)}he=!0}for(Ve=F(be),Ce=this.b.c,je=(Ve+1)%3,xe=(Ve+2)%3,Ve=0<be[Ve]?1:-1,be=Ce.e;be!==Ce;be=be.e)be.b=be.g[je],be.a=Ve*be.g[xe];if(he){for(be=0,Ce=(he=this.b.a).b;Ce!==he;Ce=Ce.b)if(!((je=Ce.a).f<=0))for(;be+=(je.a.b-je.b.a.b)*(je.a.a+je.b.a.a),(je=je.e)!==Ce.a;);if(be<0)for(he=(be=this.b.c).e;he!==be;he=he.e)he.a=-he.a}for(this.n=!1,Ce=(be=this.b.b).h;Ce!==be;Ce=he)he=Ce.h,je=Ce.e,l(Ce.a,Ce.b.a)&&Ce.e.e!==Ce&&(X(this,je,Ce),S(Ce),je=(Ce=je).e),je.e===Ce&&(je!==Ce&&(je!==he&&je!==he.b||(he=he.h),S(je)),Ce!==he&&Ce!==he.b||(he=he.h),S(Ce));for(this.e=be=new ze,Ce=(he=this.b.c).e;Ce!==he;Ce=Ce.e)Ce.h=Be(be,Ce);var Rt=be;Rt.d=[];for(var Nt=0;Nt<Rt.a;Nt++)Rt.d[Nt]=Nt;Rt.d.sort(function(jt){return function(Yt,on){return d(jt[Yt],jt[on])?1:-1}}(Rt.c)),Rt.e=!0;for(var Bt=Rt.b,Vt=Bt.a;1<=Vt;--Vt)Ne(Bt,Vt);for(Bt.h=!0,this.f=new re(this),$(this,-4e150),$(this,4e150);(be=dt(this.e))!==null;){for(;;){e:if((Ce=this.e).a===0)he=Ue(Ce.b);else if(he=Ce.c[Ce.d[Ce.a-1]],Ce.b.a!==0&&d(Ce=Ue(Ce.b),he)){he=Ce;break e}if(he===null||!l(he,be))break;he=dt(this.e),X(this,be.c,he.c)}(function jt(Yt,on){for(var $n,xn=(Yt.a=on).c;xn.i===null;)if((xn=xn.c)===on.c){xn=Yt;var On=on;(An=new vt).a=On.c.b;for(var Gn=(un=xn.f).a;(Gn=Gn.a).b!==null&&!un.c(un.b,An,Gn.b););var un,lr,er=ht(un=Gn.b),An=un.a;return Gn=er.a,void(x(An.b.a,On,An.a)===0?l((An=un.a).a,On)||l(An.b.a,On)||(w(An.b),un.c&&(S(An.c),un.c=!1),b(On.c,An),jt(xn,On)):(lr=d(Gn.b.a,An.b.a)?un:er,er=void 0,un.d||lr.c?(er=lr===un?M(On.c.b,An.e):M(Gn.b.c.b,On.c).b,lr.c?O(lr,er):((un=q(An=xn,un,er)).f=lt(un).f+un.a.f,un.d=K(An,un.f)),jt(xn,On)):se(xn,un,On.c,On.c,null,!0)))}un=(An=ht(xn=H(xn.i))).a,(An=ee(Yt,An,null)).c===un?(An=(un=An).c,Gn=ht(xn),er=xn.a,lr=Gn.a,$n=!1,er.b.a!==lr.b.a&&ye(Yt,xn),l(er.a,Yt.a)&&(b(An.b.e,er),An=ht(xn=H(xn)).a,ee(Yt,ht(xn),Gn),$n=!0),l(lr.a,Yt.a)&&(b(un,lr.b.e),un=ee(Yt,Gn,null),$n=!0),$n?se(Yt,xn,un.c,An,An,!0):(On=d(lr.a,er.a)?lr.b.e:er,se(Yt,xn,On=M(un.c.b,On),On.c,On.c,!1),On.b.i.c=!0,fe(Yt,xn))):se(Yt,xn,An.c,un,un,!0)})(this,be)}for(this.a=this.f.a.a.b.a.a,be=0;(he=this.f.a.a.b)!==null;)he.h||++be,N(he);for(this.f=null,(be=this.e).b=null,be.d=null,this.e=be.c=null,Ce=(be=this.b).a.b;Ce!==be.a;Ce=he)he=Ce.b,(Ce=Ce.a).e.e===Ce&&(z(Ce.c,Ce),S(Ce));if(!this.n){if(be=this.b,this.m)for(Ce=be.b.h;Ce!==be.b;Ce=he)he=Ce.h,Ce.b.d.c!==Ce.d.c?Ce.f=Ce.d.c?1:-1:S(Ce);else for(Ce=be.a.b;Ce!==be.a;Ce=he)if(he=Ce.b,Ce.c){for(Ce=Ce.a;d(Ce.b.a,Ce.a);Ce=Ce.c.b);for(;d(Ce.a,Ce.b.a);Ce=Ce.e);for(je=Ce.c.b,xe=void 0;Ce.e!==je;)if(d(Ce.b.a,je.a)){for(;je.e!==Ce&&(d((ue=je.e).b.a,ue.a)||x(je.a,je.b.a,je.e.b.a)<=0);)je=(xe=M(je.e,je)).b;je=je.c.b}else{for(;je.e!==Ce&&(d((ce=Ce.c.b).a,ce.b.a)||0<=x(Ce.b.a,Ce.a,Ce.c.b.a));)Ce=(xe=M(Ce,Ce.c.b)).b;Ce=Ce.e}for(;je.e.e!==Ce;)je=(xe=M(je.e,je)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(he=(be=this.b).a.b;he!==be.a;he=he.b)if(he.c){for(this.h&&this.h(2,this.c),Ce=he.a;this.k&&this.k(Ce.a.d,this.c),(Ce=Ce.e)!==he.a;);this.i&&this.i(this.c)}}else{for(be=this.b,he=!!this.l,Ce=!1,je=-1,xe=be.a.d;xe!==be.a;xe=xe.d)if(xe.c)for(Ce||(this.h&&this.h(4,this.c),Ce=!0),Ve=xe.a;he&&je!==(We=Ve.b.d.c?0:1)&&(je=We,this.l&&this.l(!!je,this.c)),this.k&&this.k(Ve.a.d,this.c),(Ve=Ve.e)!==xe.a;);Ce&&this.i&&this.i(this.c)}if(this.r){for(Ce=(be=this.b).a.b;Ce!==be.a;Ce=he)if(he=Ce.b,!Ce.c){for(xe=(je=Ce.a).e,Ve=void 0;xe=(Ve=xe).e,(Ve.d=null)===Ve.b.d&&(Ve.c===Ve?B(Ve.a,null):(Ve.a.c=Ve.c,P(Ve,Ve.b.e)),(We=Ve.b).c===We?B(We.a,null):(We.a.c=We.c,P(We,We.b.e)),L(Ve)),Ve!==je;);je=Ce.d,((Ce=Ce.b).d=je).b=Ce}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:ve,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},ve.prototype.gluDeleteTess=ve.prototype.x,ve.prototype.gluTessProperty=ve.prototype.B,ve.prototype.gluGetTessProperty=ve.prototype.y,ve.prototype.gluTessNormal=ve.prototype.A,ve.prototype.gluTessCallback=ve.prototype.z,ve.prototype.gluTessVertex=ve.prototype.C,ve.prototype.gluTessBeginPolygon=ve.prototype.u,ve.prototype.gluTessBeginContour=ve.prototype.t,ve.prototype.gluTessEndContour=ve.prototype.v,ve.prototype.gluTessEndPolygon=ve.prototype.w,_!==void 0&&(_.exports=this.libtess)},{}],246:[function(i,_,g){function h(l,d,v,x){for(var p=l[d++],f=1<<p,u=1+f,c=1+u,m=p+1,b=(1<<m)-1,S=0,w=0,M=0,A=l[d++],P=new Int32Array(4096),R=null;;){for(;S<16&&A!==0;)w|=l[d++]<<S,S+=8,A===1?A=l[d++]:--A;if(S<m)break;var k=w&b;if(w>>=m,S-=m,k==f)c=1+u,b=(1<<(m=p+1))-1,R=null;else{if(k==u)break;for(var L=k<c?k:R,B=0,I=L;f<I;)I=P[I]>>8,++B;var F=I;if(x<M+B+(L!==k?1:0))return void console.log("Warning, gif stream longer than expected.");v[M++]=F;var z=M+=B;for(L!==k&&(v[M++]=F),I=L;B--;)I=P[I],v[--z]=255&I,I>>=8;R!==null&&c<4096&&(P[c++]=R<<8|F,b+1<=c&&m<12&&(++m,b=b<<1|1)),R=k}}M!==x&&console.log("Warning, gif stream shorter than expected.")}try{g.GifWriter=function(l,d,v,x){var p=0,f=(x=x===void 0?{}:x).loop===void 0?null:x.loop,u=x.palette===void 0?null:x.palette;if(d<=0||v<=0||65535<d||65535<v)throw new Error("Width/Height invalid.");function c(R){if((R=R.length)<2||256<R||R&R-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return R}l[p++]=71,l[p++]=73,l[p++]=70,l[p++]=56,l[p++]=57,l[p++]=97;var m=0,b=0;if(u!==null){for(var S=c(u);S>>=1;)++m;if(S=1<<m,--m,x.background!==void 0){if(S<=(b=x.background))throw new Error("Background index out of range.");if(b===0)throw new Error("Background index explicitly passed as 0.")}}if(l[p++]=255&d,l[p++]=d>>8&255,l[p++]=255&v,l[p++]=v>>8&255,l[p++]=(u!==null?128:0)|m,l[p++]=b,l[p++]=0,u!==null)for(var w=0,M=u.length;w<M;++w){var A=u[w];l[p++]=A>>16&255,l[p++]=A>>8&255,l[p++]=255&A}if(f!==null){if(f<0||65535<f)throw new Error("Loop count invalid.");l[p++]=33,l[p++]=255,l[p++]=11,l[p++]=78,l[p++]=69,l[p++]=84,l[p++]=83,l[p++]=67,l[p++]=65,l[p++]=80,l[p++]=69,l[p++]=50,l[p++]=46,l[p++]=48,l[p++]=3,l[p++]=1,l[p++]=255&f,l[p++]=f>>8&255,l[p++]=0}var P=!1;this.addFrame=function(R,k,L,B,I,F){if(P===!0&&(--p,P=!1),F=F===void 0?{}:F,R<0||k<0||65535<R||65535<k)throw new Error("x/y invalid.");if(L<=0||B<=0||65535<L||65535<B)throw new Error("Width/Height invalid.");if(I.length<L*B)throw new Error("Not enough pixels for the frame size.");var z=!0,G=F.palette;if(G==null&&(z=!1,G=u),G==null)throw new Error("Must supply either a local or global palette.");for(var N=c(G),O=0;N>>=1;)++O;N=1<<O;var H=F.delay===void 0?0:F.delay,q=F.disposal===void 0?0:F.disposal;if(q<0||3<q)throw new Error("Disposal out of range.");var K=!1,ne=0;if(F.transparent!==void 0&&F.transparent!==null&&(K=!0,(ne=F.transparent)<0||N<=ne))throw new Error("Transparent color index.");if(q===0&&!K&&H===0||(l[p++]=33,l[p++]=249,l[p++]=4,l[p++]=q<<2|(K===!0?1:0),l[p++]=255&H,l[p++]=H>>8&255,l[p++]=ne,l[p++]=0),l[p++]=44,l[p++]=255&R,l[p++]=R>>8&255,l[p++]=255&k,l[p++]=k>>8&255,l[p++]=255&L,l[p++]=L>>8&255,l[p++]=255&B,l[p++]=B>>8&255,l[p++]=z===!0?128|O-1:0,z===!0)for(var ee=0,se=G.length;ee<se;++ee){var me=G[ee];l[p++]=me>>16&255,l[p++]=me>>8&255,l[p++]=255&me}return p=function(X,Z,ie,ye){X[Z++]=ie;var fe=Z++,$=1<<ie,re=$-1,de=1+$,ge=1+de,ve=ie+1,we=0,Se=0;function ae(Ue){for(;Ue<=we;)X[Z++]=255&Se,Se>>=8,we-=8,Z===fe+256&&(X[fe]=255,fe=Z++)}function oe(Ue){Se|=Ue<<we,we+=ve,ae(8)}var Ee=ye[0]&re,Oe={};oe($);for(var ze=1,Be=ye.length;ze<Be;++ze){var dt=ye[ze]&re,Je=Ee<<8|dt,_e=Oe[Je];if(_e===void 0){for(Se|=Ee<<we,we+=ve;8<=we;)X[Z++]=255&Se,Se>>=8,we-=8,Z===fe+256&&(X[fe]=255,fe=Z++);ge===4096?(oe($),ge=1+de,ve=ie+1,Oe={}):(1<<ve<=ge&&++ve,Oe[Je]=ge++),Ee=dt}else Ee=_e}return oe(Ee),oe(de),ae(1),fe+1===Z?X[fe]=0:(X[fe]=Z-fe-1,X[Z++]=0),Z}(l,p,O<2?2:O,I)},this.end=function(){return P===!1&&(l[p++]=59,P=!0),p},this.getOutputBuffer=function(){return l},this.setOutputBuffer=function(R){l=R},this.getOutputBufferPosition=function(){return p},this.setOutputBufferPosition=function(R){p=R}},g.GifReader=function(l){var d=0;if(l[d++]!==71||l[d++]!==73||l[d++]!==70||l[d++]!==56||(l[d++]+1&253)!=56||l[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var v=l[d++]|l[d++]<<8,x=l[d++]|l[d++]<<8,p=l[d++],f=1<<1+(7&p),u=(l[d++],l[d++],null),c=null,m=(p>>7&&(u=d,d+=3*(c=f)),!0),b=[],S=0,w=null,M=0,A=null;for(this.width=v,this.height=x;m&&d<l.length;)switch(l[d++]){case 33:switch(l[d++]){case 255:if(l[d]!==11||l[d+1]==78&&l[d+2]==69&&l[d+3]==84&&l[d+4]==83&&l[d+5]==67&&l[d+6]==65&&l[d+7]==80&&l[d+8]==69&&l[d+9]==50&&l[d+10]==46&&l[d+11]==48&&l[d+12]==3&&l[d+13]==1&&l[d+16]==0)d+=14,A=l[d++]|l[d++]<<8,d++;else for(d+=12;;){if(!(0<=(R=l[d++])))throw Error("Invalid block size");if(R===0)break;d+=R}break;case 249:if(l[d++]!==4||l[d+4]!==0)throw new Error("Invalid graphics extension block.");var P=l[d++];S=l[d++]|l[d++]<<8,w=l[d++],!(1&P)&&(w=null),M=P>>2&7,d++;break;case 254:for(;;){if(!(0<=(R=l[d++])))throw Error("Invalid block size");if(R===0)break;d+=R}break;default:throw new Error("Unknown graphic control label: 0x"+l[d-1].toString(16))}break;case 44:var R,k=l[d++]|l[d++]<<8,L=l[d++]|l[d++]<<8,B=l[d++]|l[d++]<<8,I=l[d++]|l[d++]<<8,F=(O=l[d++])>>6&1,z=u,G=c,N=!1,O=(O>>7&&(N=!0,z=d,d+=3*(G=1<<1+(7&O))),d);for(d++;;){if(!(0<=(R=l[d++])))throw Error("Invalid block size");if(R===0)break;d+=R}b.push({x:k,y:L,width:B,height:I,has_local_palette:N,palette_offset:z,palette_size:G,data_offset:O,data_length:d-O,transparent_index:w,interlaced:!!F,delay:S,disposal:M});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+l[d-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return A},this.frameInfo=function(H){if(H<0||H>=b.length)throw new Error("Frame index out of range.");return b[H]},this.decodeAndBlitFrameBGRA=function(H,q){for(var K=(H=this.frameInfo(H)).width*H.height,ne=new Uint8Array(K),ee=(h(l,H.data_offset,ne,K),H.palette_offset),se=H.transparent_index,me=(se===null&&(se=256),H.width),X=v-me,Z=me,ie=4*(H.y*v+H.x),ye=4*((H.y+H.height)*v+H.x),fe=ie,$=4*X,re=(H.interlaced===!0&&($+=4*v*7),8),de=0,ge=ne.length;de<ge;++de){var ve,we,Se=ne[de];Z===0&&(Z=me,ye<=(fe+=$)&&($=4*X+4*v*(re-1),fe=ie+(me+X)*(re<<1),re>>=1)),Se===se?fe+=4:(ve=l[ee+3*Se],we=l[ee+3*Se+1],Se=l[ee+3*Se+2],q[fe++]=Se,q[fe++]=we,q[fe++]=ve,q[fe++]=255),--Z}},this.decodeAndBlitFrameRGBA=function(H,q){for(var K=(H=this.frameInfo(H)).width*H.height,ne=new Uint8Array(K),ee=(h(l,H.data_offset,ne,K),H.palette_offset),se=H.transparent_index,me=(se===null&&(se=256),H.width),X=v-me,Z=me,ie=4*(H.y*v+H.x),ye=4*((H.y+H.height)*v+H.x),fe=ie,$=4*X,re=(H.interlaced===!0&&($+=4*v*7),8),de=0,ge=ne.length;de<ge;++de){var ve,we,Se=ne[de];Z===0&&(Z=me,ye<=(fe+=$)&&($=4*X+4*v*(re-1),fe=ie+(me+X)*(re<<1),re>>=1)),Se===se?fe+=4:(ve=l[ee+3*Se],we=l[ee+3*Se+1],Se=l[ee+3*Se+2],q[fe++]=ve,q[fe++]=we,q[fe++]=Se,q[fe++]=255),--Z}}}}catch{}},{}],247:[function(i,_,g){(function(h){(function(l){function d(T){if(this==null)throw TypeError();var j,D=String(this),V=D.length;if(!((T=(T=T?Number(T):0)!=T?0:T)<0||V<=T))return 55296<=(j=D.charCodeAt(T))&&j<=56319&&T+1<V&&56320<=(V=D.charCodeAt(T+1))&&V<=57343?1024*(j-55296)+V-56320+65536:j}String.prototype.codePointAt||((v=function(){try{var T={},j=Object.defineProperty,D=j(T,T,T)&&j}catch{}return D}())?v(String.prototype,"codePointAt",{value:d,configurable:!0,writable:!0}):String.prototype.codePointAt=d);var v;function x(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function p(T,j){this.source=T,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=j,this.destLen=0,this.ltree=new x,this.dtree=new x}var f=new x,u=new x,c=new Uint8Array(30),m=new Uint16Array(30),b=new Uint8Array(30),S=new Uint16Array(30),w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new x,A=new Uint8Array(320);function P(T,j,D,V){for(var Y,Q=0;Q<D;++Q)T[Q]=0;for(Q=0;Q<30-D;++Q)T[Q+D]=Q/D|0;for(Y=V,Q=0;Q<30;++Q)j[Q]=Y,Y+=1<<T[Q]}var R=new Uint16Array(16);function k(T,j,D,V){for(var Y,Q=0;Q<16;++Q)T.table[Q]=0;for(Q=0;Q<V;++Q)T.table[j[D+Q]]++;for(Q=Y=T.table[0]=0;Q<16;++Q)R[Q]=Y,Y+=T.table[Q];for(Q=0;Q<V;++Q)j[D+Q]&&(T.trans[R[j[D+Q]]++]=Q)}function L(T,j,D){if(!j)return D;for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;var V=T.tag&65535>>>16-j;return T.tag>>>=j,T.bitcount-=j,V+D}function B(T,j){for(;T.bitcount<24;)T.tag|=T.source[T.sourceIndex++]<<T.bitcount,T.bitcount+=8;for(var D=0,V=0,Y=0,Q=T.tag;V=2*V+(1&Q),Q>>>=1,D+=j.table[++Y],0<=(V-=j.table[Y]););return T.tag=Q,T.bitcount-=Y,j.trans[D+V]}function I(T,j,D){for(;;){if((Q=B(T,j))===256)return 0;if(Q<256)T.dest[T.destLen++]=Q;else for(var V,Y=L(T,c[Q-=257],m[Q]),Q=B(T,D),te=V=T.destLen-L(T,b[Q],S[Q]);te<V+Y;++te)T.dest[T.destLen++]=T.dest[te]}}for(var F=f,z=u,G=0;G<7;++G)F.table[G]=0;for(F.table[7]=24,F.table[8]=152,F.table[9]=112,G=0;G<24;++G)F.trans[G]=256+G;for(G=0;G<144;++G)F.trans[24+G]=G;for(G=0;G<8;++G)F.trans[168+G]=280+G;for(G=0;G<112;++G)F.trans[176+G]=144+G;for(G=0;G<5;++G)z.table[G]=0;for(z.table[5]=32,G=0;G<32;++G)z.trans[G]=G;P(c,m,4,3),P(b,S,2,1),c[28]=0,m[28]=258;function N(T,j,D,V,Y){return Math.pow(1-Y,3)*T+3*Math.pow(1-Y,2)*Y*j+3*(1-Y)*Math.pow(Y,2)*D+Math.pow(Y,3)*V}function O(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function H(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function q(T){throw new Error(T)}function K(T,j){T||q(j)}O.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},O.prototype.addPoint=function(T,j){typeof T=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=T,this.x2=T),T<this.x1&&(this.x1=T),T>this.x2&&(this.x2=T)),typeof j=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=j,this.y2=j),j<this.y1&&(this.y1=j),j>this.y2&&(this.y2=j))},O.prototype.addX=function(T){this.addPoint(T,null)},O.prototype.addY=function(T){this.addPoint(null,T)},O.prototype.addBezier=function(T,j,D,V,Y,Q,te,Me){var Te=[T,j],Pe=[D,V],De=[Y,Q],He=[te,Me];this.addPoint(T,j),this.addPoint(te,Me);for(var Xe=0;Xe<=1;Xe++){var ke,yt=6*Te[Xe]-12*Pe[Xe]+6*De[Xe],$e=-3*Te[Xe]+9*Pe[Xe]-9*De[Xe]+3*He[Xe],it=3*Pe[Xe]-3*Te[Xe];$e==0?yt==0||0<(ke=-it/yt)&&ke<1&&(Xe===0&&this.addX(N(Te[Xe],Pe[Xe],De[Xe],He[Xe],ke)),Xe===1&&this.addY(N(Te[Xe],Pe[Xe],De[Xe],He[Xe],ke))):(ke=Math.pow(yt,2)-4*it*$e)<0||(0<(it=(-yt+Math.sqrt(ke))/(2*$e))&&it<1&&(Xe===0&&this.addX(N(Te[Xe],Pe[Xe],De[Xe],He[Xe],it)),Xe===1&&this.addY(N(Te[Xe],Pe[Xe],De[Xe],He[Xe],it))),0<(it=(-yt-Math.sqrt(ke))/(2*$e))&&it<1&&(Xe===0&&this.addX(N(Te[Xe],Pe[Xe],De[Xe],He[Xe],it)),Xe===1&&this.addY(N(Te[Xe],Pe[Xe],De[Xe],He[Xe],it))))}},O.prototype.addQuad=function(T,j,D,V,Y,Q){D=T+2/3*(D-T),V=j+2/3*(V-j),this.addBezier(T,j,D,V,D+1/3*(Y-T),V+1/3*(Q-j),Y,Q)},H.prototype.moveTo=function(T,j){this.commands.push({type:"M",x:T,y:j})},H.prototype.lineTo=function(T,j){this.commands.push({type:"L",x:T,y:j})},H.prototype.curveTo=H.prototype.bezierCurveTo=function(T,j,D,V,Y,Q){this.commands.push({type:"C",x1:T,y1:j,x2:D,y2:V,x:Y,y:Q})},H.prototype.quadTo=H.prototype.quadraticCurveTo=function(T,j,D,V){this.commands.push({type:"Q",x1:T,y1:j,x:D,y:V})},H.prototype.close=H.prototype.closePath=function(){this.commands.push({type:"Z"})},H.prototype.extend=function(T){var j;if(T.commands)T=T.commands;else if(T instanceof O)return j=T,this.moveTo(j.x1,j.y1),this.lineTo(j.x2,j.y1),this.lineTo(j.x2,j.y2),this.lineTo(j.x1,j.y2),void this.close();Array.prototype.push.apply(this.commands,T)},H.prototype.getBoundingBox=function(){for(var T=new O,j=0,D=0,V=0,Y=0,Q=0;Q<this.commands.length;Q++){var te=this.commands[Q];switch(te.type){case"M":T.addPoint(te.x,te.y),j=V=te.x,D=Y=te.y;break;case"L":T.addPoint(te.x,te.y),V=te.x,Y=te.y;break;case"Q":T.addQuad(V,Y,te.x1,te.y1,te.x,te.y),V=te.x,Y=te.y;break;case"C":T.addBezier(V,Y,te.x1,te.y1,te.x2,te.y2,te.x,te.y),V=te.x,Y=te.y;break;case"Z":V=j,Y=D;break;default:throw new Error("Unexpected path command "+te.type)}}return T.isEmpty()&&T.addPoint(0,0),T},H.prototype.draw=function(T){T.beginPath();for(var j=0;j<this.commands.length;j+=1){var D=this.commands[j];D.type==="M"?T.moveTo(D.x,D.y):D.type==="L"?T.lineTo(D.x,D.y):D.type==="C"?T.bezierCurveTo(D.x1,D.y1,D.x2,D.y2,D.x,D.y):D.type==="Q"?T.quadraticCurveTo(D.x1,D.y1,D.x,D.y):D.type==="Z"&&T.closePath()}this.fill&&(T.fillStyle=this.fill,T.fill()),this.stroke&&(T.strokeStyle=this.stroke,T.lineWidth=this.strokeWidth,T.stroke())},H.prototype.toPathData=function(T){function j(){for(var Q=arguments,te="",Me=0;Me<arguments.length;Me+=1){var Te=Q[Me];0<=Te&&0<Me&&(te+=" "),te+=(Te=Te,Math.round(Te)===Te?""+Math.round(Te):Te.toFixed(T))}return te}T=T!==void 0?T:2;for(var D="",V=0;V<this.commands.length;V+=1){var Y=this.commands[V];Y.type==="M"?D+="M"+j(Y.x,Y.y):Y.type==="L"?D+="L"+j(Y.x,Y.y):Y.type==="C"?D+="C"+j(Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y):Y.type==="Q"?D+="Q"+j(Y.x1,Y.y1,Y.x,Y.y):Y.type==="Z"&&(D+="Z")}return D},H.prototype.toSVG=function(T){var j=(j='<path d="')+this.toPathData(T)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?j+=' fill="none"':j+=' fill="'+this.fill+'"'),this.stroke&&(j+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),j+"/>"},H.prototype.toDOMElement=function(T){T=this.toPathData(T);var j=document.createElementNS("http://www.w3.org/2000/svg","path");return j.setAttribute("d",T),j};var ne={fail:q,argument:K,assert:K},ee={},se={},me={};function X(T){return function(){return T}}se.BYTE=function(T){return ne.argument(0<=T&&T<=255,"Byte value should be between 0 and 255."),[T]},me.BYTE=X(1),se.CHAR=function(T){return[T.charCodeAt(0)]},me.CHAR=X(1),se.CHARARRAY=function(T){for(var j=[],D=0;D<T.length;D+=1)j[D]=T.charCodeAt(D);return j},me.CHARARRAY=function(T){return T.length},se.USHORT=function(T){return[T>>8&255,255&T]},me.USHORT=X(2),se.SHORT=function(T){return[(T=32768<=T?-(65536-T):T)>>8&255,255&T]},me.SHORT=X(2),se.UINT24=function(T){return[T>>16&255,T>>8&255,255&T]},me.UINT24=X(3),se.ULONG=function(T){return[T>>24&255,T>>16&255,T>>8&255,255&T]},me.ULONG=X(4),se.LONG=function(T){return[(T=2147483648<=T?-(4294967296-T):T)>>24&255,T>>16&255,T>>8&255,255&T]},me.LONG=X(4),se.FIXED=se.ULONG,me.FIXED=me.ULONG,se.FWORD=se.SHORT,me.FWORD=me.SHORT,se.UFWORD=se.USHORT,me.UFWORD=me.USHORT,se.LONGDATETIME=function(T){return[0,0,0,0,T>>24&255,T>>16&255,T>>8&255,255&T]},me.LONGDATETIME=X(8),se.TAG=function(T){return ne.argument(T.length===4,"Tag should be exactly 4 ASCII characters."),[T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2),T.charCodeAt(3)]},me.TAG=X(4),se.Card8=se.BYTE,me.Card8=me.BYTE,se.Card16=se.USHORT,me.Card16=me.USHORT,se.OffSize=se.BYTE,me.OffSize=me.BYTE,se.SID=se.USHORT,me.SID=me.USHORT,se.NUMBER=function(T){return-107<=T&&T<=107?[T+139]:108<=T&&T<=1131?[247+((T-=108)>>8),255&T]:-1131<=T&&T<=-108?[251+((T=-T-108)>>8),255&T]:-32768<=T&&T<=32767?se.NUMBER16(T):se.NUMBER32(T)},me.NUMBER=function(T){return se.NUMBER(T).length},se.NUMBER16=function(T){return[28,T>>8&255,255&T]},me.NUMBER16=X(3),se.NUMBER32=function(T){return[29,T>>24&255,T>>16&255,T>>8&255,255&T]},me.NUMBER32=X(5),se.REAL=function(T){for(var j=T.toString(),D=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(j),V=(D&&(D=parseFloat("1e"+((D[2]?+D[2]:0)+D[1].length)),j=(Math.round(T*D)/D).toString()),""),Y=0,Q=j.length;Y<Q;Y+=1){var te=j[Y];V+=te==="e"?j[++Y]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var Me=[30],Te=0,Pe=(V+=1&V.length?"f":"ff").length;Te<Pe;Te+=2)Me.push(parseInt(V.substr(Te,2),16));return Me},me.REAL=function(T){return se.REAL(T).length},se.NAME=se.CHARARRAY,me.NAME=me.CHARARRAY,se.STRING=se.CHARARRAY,me.STRING=me.CHARARRAY,ee.UTF8=function(T,j,D){for(var V=[],Y=D,Q=0;Q<Y;Q++,j+=1)V[Q]=T.getUint8(j);return String.fromCharCode.apply(null,V)},ee.UTF16=function(T,j,D){for(var V=[],Y=D/2,Q=0;Q<Y;Q++,j+=2)V[Q]=T.getUint16(j);return String.fromCharCode.apply(null,V)},se.UTF16=function(T){for(var j=[],D=0;D<T.length;D+=1){var V=T.charCodeAt(D);j[j.length]=V>>8&255,j[j.length]=255&V}return j},me.UTF16=function(T){return 2*T.length};var Z,ie={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},ye=(ee.MACSTRING=function(T,j,D,V){var Y=ie[V];if(Y!==void 0){for(var Q="",te=0;te<D;te++){var Me=T.getUint8(j+te);Q+=Me<=127?String.fromCharCode(Me):Y[127&Me]}return Q}},typeof WeakMap=="function"&&new WeakMap);function fe(T){return-128<=T&&T<=127}se.MACSTRING=function(T,j){var D=function(te){if(!Z)for(var Me in Z={},ie)Z[Me]=new String(Me);var Te=Z[te];if(Te!==void 0){if(ye){var Pe=ye.get(Te);if(Pe!==void 0)return Pe}var De=ie[te];if(De!==void 0){for(var He={},Xe=0;Xe<De.length;Xe++)He[De.charCodeAt(Xe)]=Xe+128;return ye&&ye.set(Te,He),He}}}(j);if(D!==void 0){for(var V=[],Y=0;Y<T.length;Y++){var Q=T.charCodeAt(Y);if(128<=Q&&(Q=D[Q])===void 0)return;V[Y]=Q}return V}},me.MACSTRING=function(T,j){return(T=se.MACSTRING(T,j))!==void 0?T.length:0},se.VARDELTAS=function(T){for(var j=0,D=[];j<T.length;){var V=T[j];j=(V===0?function(Y,Q,te){for(var Me=0,Te=Y.length;Q<Te&&Me<64&&Y[Q]===0;)++Q,++Me;return te.push(128|Me-1),Q}:-128<=V&&V<=127?function(Y,Q,te){for(var Me=0,Te=Y.length,Pe=Q;Pe<Te&&Me<64;){var De=Y[Pe];if(!fe(De)||De===0&&Pe+1<Te&&Y[Pe+1]===0)break;++Pe,++Me}te.push(Me-1);for(var He=Q;He<Pe;++He)te.push(Y[He]+256&255);return Pe}:function(Y,Q,te){for(var Me=0,Te=Y.length,Pe=Q;Pe<Te&&Me<64;){var De=Y[Pe];if(De===0||fe(De)&&Pe+1<Te&&fe(Y[Pe+1]))break;++Pe,++Me}te.push(64|Me-1);for(var He=Q;He<Pe;++He){var Xe=Y[He];te.push(Xe+65536>>8&255,Xe+256&255)}return Pe})(T,j,D)}return D},se.INDEX=function(T){for(var j=1,D=[j],V=[],Y=0;Y<T.length;Y+=1){var Q=se.OBJECT(T[Y]);Array.prototype.push.apply(V,Q),j+=Q.length,D.push(j)}if(V.length===0)return[0,0];for(var te=[],Me=1+Math.floor(Math.log(j)/Math.log(2))/8|0,Te=[void 0,se.BYTE,se.USHORT,se.UINT24,se.ULONG][Me],Pe=0;Pe<D.length;Pe+=1){var De=Te(D[Pe]);Array.prototype.push.apply(te,De)}return Array.prototype.concat(se.Card16(T.length),se.OffSize(Me),te,V)},me.INDEX=function(T){return se.INDEX(T).length},se.DICT=function(T){for(var j=[],D=Object.keys(T),V=D.length,Y=0;Y<V;Y+=1){var Q=parseInt(D[Y],0),te=T[Q];j=(j=j.concat(se.OPERAND(te.value,te.type))).concat(se.OPERATOR(Q))}return j},me.DICT=function(T){return se.DICT(T).length},se.OPERATOR=function(T){return T<1200?[T]:[12,T-1200]},se.OPERAND=function(T,j){var D=[];if(Array.isArray(j))for(var V=0;V<j.length;V+=1)ne.argument(T.length===j.length,"Not enough arguments given for type"+j),D=D.concat(se.OPERAND(T[V],j[V]));else if(j==="SID")D=D.concat(se.NUMBER(T));else if(j==="offset")D=D.concat(se.NUMBER32(T));else if(j==="number")D=D.concat(se.NUMBER(T));else{if(j!=="real")throw new Error("Unknown operand type "+j);D=D.concat(se.REAL(T))}return D},se.OP=se.BYTE,me.OP=me.BYTE;var $=typeof WeakMap=="function"&&new WeakMap;function re(T,j,D){for(var V=0;V<j.length;V+=1){var Y=j[V];this[Y.name]=Y.value}if(this.tableName=T,this.fields=j,D)for(var Q=Object.keys(D),te=0;te<Q.length;te+=1){var Me=Q[te],Te=D[Me];this[Me]!==void 0&&(this[Me]=Te)}}function de(T,j,D){D===void 0&&(D=j.length);var V=new Array(j.length+1);V[0]={name:T+"Count",type:"USHORT",value:D};for(var Y=0;Y<j.length;Y++)V[Y+1]={name:T+Y,type:"USHORT",value:j[Y]};return V}function ge(T,j,D){var V=j.length,Y=new Array(V+1);Y[0]={name:T+"Count",type:"USHORT",value:V};for(var Q=0;Q<V;Q++)Y[Q+1]={name:T+Q,type:"TABLE",value:D(j[Q],Q)};return Y}function ve(T,j,D){var V=j.length,Y=[];Y[0]={name:T+"Count",type:"USHORT",value:V};for(var Q=0;Q<V;Q++)Y=Y.concat(D(j[Q],Q));return Y}function we(T){T.format===1?re.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(de("glyph",T.glyphs))):ne.assert(!1,"Can't create coverage table format 2 yet.")}function Se(T){re.call(this,"scriptListTable",ve("scriptRecord",T,function(j,D){var V=j.script,Y=V.defaultLangSys;return ne.assert(!!Y,"Unable to write GSUB: script "+j.tag+" has no default language system."),[{name:"scriptTag"+D,type:"TAG",value:j.tag},{name:"script"+D,type:"TABLE",value:new re("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new re("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Y.reqFeatureIndex}].concat(de("featureIndex",Y.featureIndexes)))}].concat(ve("langSys",V.langSysRecords,function(Q,te){var Me=Q.langSys;return[{name:"langSysTag"+te,type:"TAG",value:Q.tag},{name:"langSys"+te,type:"TABLE",value:new re("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:Me.reqFeatureIndex}].concat(de("featureIndex",Me.featureIndexes)))}]})))}]}))}function ae(T){re.call(this,"featureListTable",ve("featureRecord",T,function(j,D){var V=j.feature;return[{name:"featureTag"+D,type:"TAG",value:j.tag},{name:"feature"+D,type:"TABLE",value:new re("featureTable",[{name:"featureParams",type:"USHORT",value:V.featureParams}].concat(de("lookupListIndex",V.lookupListIndexes)))}]}))}function oe(T,j){re.call(this,"lookupListTable",ge("lookup",T,function(D){var V=j[D.lookupType];return ne.assert(!!V,"Unable to write GSUB lookup type "+D.lookupType+" tables."),new re("lookupTable",[{name:"lookupType",type:"USHORT",value:D.lookupType},{name:"lookupFlag",type:"USHORT",value:D.lookupFlag}].concat(ge("subtable",D.subtables,V)))}))}se.CHARSTRING=function(T){if($){var j=$.get(T);if(j!==void 0)return j}for(var D=[],V=T.length,Y=0;Y<V;Y+=1){var Q=T[Y];D=D.concat(se[Q.type](Q.value))}return $&&$.set(T,D),D},me.CHARSTRING=function(T){return se.CHARSTRING(T).length},se.OBJECT=function(T){var j=se[T.type];return ne.argument(j!==void 0,"No encoding function for type "+T.type),j(T.value)},me.OBJECT=function(T){var j=me[T.type];return ne.argument(j!==void 0,"No sizeOf function for type "+T.type),j(T.value)},se.TABLE=function(T){for(var j=[],D=T.fields.length,V=[],Y=[],Q=0;Q<D;Q+=1){var te=T.fields[Q],Me=se[te.type],Te=(ne.argument(Me!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),T[te.name]);Me=Me(Te=Te===void 0?te.value:Te),te.type==="TABLE"?(Y.push(j.length),j=j.concat([0,0]),V.push(Me)):j=j.concat(Me)}for(var Pe=0;Pe<V.length;Pe+=1){var De=Y[Pe],He=j.length;ne.argument(He<65536,"Table "+T.tableName+" too big."),j[De]=He>>8,j[De+1]=255&He,j=j.concat(V[Pe])}return j},me.TABLE=function(T){for(var j=0,D=T.fields.length,V=0;V<D;V+=1){var Y=T.fields[V],Q=me[Y.type],te=(ne.argument(Q!==void 0,"No sizeOf function for field type "+Y.type+" ("+Y.name+")"),T[Y.name]);j+=Q(te=te===void 0?Y.value:te),Y.type==="TABLE"&&(j+=2)}return j},se.RECORD=se.TABLE,me.RECORD=me.TABLE,se.LITERAL=function(T){return T},me.LITERAL=function(T){return T.length},re.prototype.encode=function(){return se.TABLE(this)},re.prototype.sizeOf=function(){return me.TABLE(this)};var Ee={Table:re,Record:re,Coverage:(we.prototype=Object.create(re.prototype)).constructor=we,ScriptList:(Se.prototype=Object.create(re.prototype)).constructor=Se,FeatureList:(ae.prototype=Object.create(re.prototype)).constructor=ae,LookupList:(oe.prototype=Object.create(re.prototype)).constructor=oe,ushortList:de,tableList:ge,recordList:ve};function Oe(T,j){return T.getUint8(j)}function ze(T,j){return T.getUint16(j,!1)}function Be(T,j){return T.getUint32(j,!1)}function dt(T,j){return T.getInt16(j,!1)+T.getUint16(j+2,!1)/65535}var Je={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function _e(T,j){this.data=T,this.offset=j,this.relativeOffset=0}_e.prototype.parseByte=function(){var T=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},_e.prototype.parseChar=function(){var T=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,T},_e.prototype.parseCard8=_e.prototype.parseByte,_e.prototype.parseCard16=_e.prototype.parseUShort=function(){var T=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},_e.prototype.parseSID=_e.prototype.parseUShort,_e.prototype.parseOffset16=_e.prototype.parseUShort,_e.prototype.parseShort=function(){var T=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,T},_e.prototype.parseF2Dot14=function(){var T=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,T},_e.prototype.parseOffset32=_e.prototype.parseULong=function(){var T=Be(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},_e.prototype.parseFixed=function(){var T=dt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,T},_e.prototype.parseString=function(T){var j=this.data,D=this.offset+this.relativeOffset,V="";this.relativeOffset+=T;for(var Y=0;Y<T;Y++)V+=String.fromCharCode(j.getUint8(D+Y));return V},_e.prototype.parseTag=function(){return this.parseString(4)},_e.prototype.parseLongDateTime=function(){var T=Be(this.data,this.offset+this.relativeOffset+4);return T-=2082844800,this.relativeOffset+=8,T},_e.prototype.parseVersion=function(T){var j=ze(this.data,this.offset+this.relativeOffset),D=ze(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,j+D/(T=T===void 0?4096:T)/10},_e.prototype.skip=function(T,j){this.relativeOffset+=Je[T]*(j=j===void 0?1:j)},_e.prototype.parseULongList=function(T){T===void 0&&(T=this.parseULong());for(var j=new Array(T),D=this.data,V=this.offset+this.relativeOffset,Y=0;Y<T;Y++)j[Y]=D.getUint32(V),V+=4;return this.relativeOffset+=4*T,j},_e.prototype.parseOffset16List=_e.prototype.parseUShortList=function(T){T===void 0&&(T=this.parseUShort());for(var j=new Array(T),D=this.data,V=this.offset+this.relativeOffset,Y=0;Y<T;Y++)j[Y]=D.getUint16(V),V+=2;return this.relativeOffset+=2*T,j},_e.prototype.parseShortList=function(T){for(var j=new Array(T),D=this.data,V=this.offset+this.relativeOffset,Y=0;Y<T;Y++)j[Y]=D.getInt16(V),V+=2;return this.relativeOffset+=2*T,j},_e.prototype.parseByteList=function(T){for(var j=new Array(T),D=this.data,V=this.offset+this.relativeOffset,Y=0;Y<T;Y++)j[Y]=D.getUint8(V++);return this.relativeOffset+=T,j},_e.prototype.parseList=function(T,j){j||(j=T,T=this.parseUShort());for(var D=new Array(T),V=0;V<T;V++)D[V]=j.call(this);return D},_e.prototype.parseList32=function(T,j){j||(j=T,T=this.parseULong());for(var D=new Array(T),V=0;V<T;V++)D[V]=j.call(this);return D},_e.prototype.parseRecordList=function(T,j){j||(j=T,T=this.parseUShort());for(var D=new Array(T),V=Object.keys(j),Y=0;Y<T;Y++){for(var Q={},te=0;te<V.length;te++){var Me=V[te],Te=j[Me];Q[Me]=Te.call(this)}D[Y]=Q}return D},_e.prototype.parseRecordList32=function(T,j){j||(j=T,T=this.parseULong());for(var D=new Array(T),V=Object.keys(j),Y=0;Y<T;Y++){for(var Q={},te=0;te<V.length;te++){var Me=V[te],Te=j[Me];Q[Me]=Te.call(this)}D[Y]=Q}return D},_e.prototype.parseStruct=function(T){if(typeof T=="function")return T.call(this);for(var j=Object.keys(T),D={},V=0;V<j.length;V++){var Y=j[V],Q=T[Y];D[Y]=Q.call(this)}return D},_e.prototype.parseValueRecord=function(T){var j;if((T=T===void 0?this.parseUShort():T)!==0)return j={},1&T&&(j.xPlacement=this.parseShort()),2&T&&(j.yPlacement=this.parseShort()),4&T&&(j.xAdvance=this.parseShort()),8&T&&(j.yAdvance=this.parseShort()),16&T&&(j.xPlaDevice=void 0,this.parseShort()),32&T&&(j.yPlaDevice=void 0,this.parseShort()),64&T&&(j.xAdvDevice=void 0,this.parseShort()),128&T&&(j.yAdvDevice=void 0,this.parseShort()),j},_e.prototype.parseValueRecordList=function(){for(var T=this.parseUShort(),j=this.parseUShort(),D=new Array(j),V=0;V<j;V++)D[V]=this.parseValueRecord(T);return D},_e.prototype.parsePointer=function(T){var j=this.parseOffset16();if(0<j)return new _e(this.data,this.offset+j).parseStruct(T)},_e.prototype.parsePointer32=function(T){var j=this.parseOffset32();if(0<j)return new _e(this.data,this.offset+j).parseStruct(T)},_e.prototype.parseListOfLists=function(T){for(var j=this.parseOffset16List(),D=j.length,V=this.relativeOffset,Y=new Array(D),Q=0;Q<D;Q++){var te=j[Q];if(te===0)Y[Q]=void 0;else if(this.relativeOffset=te,T){for(var Me=this.parseOffset16List(),Te=new Array(Me.length),Pe=0;Pe<Me.length;Pe++)this.relativeOffset=te+Me[Pe],Te[Pe]=T.call(this);Y[Q]=Te}else Y[Q]=this.parseUShortList()}return this.relativeOffset=V,Y},_e.prototype.parseCoverage=function(){var T=this.offset+this.relativeOffset,j=this.parseUShort(),D=this.parseUShort();if(j===1)return{format:1,glyphs:this.parseUShortList(D)};if(j!==2)throw new Error("0x"+T.toString(16)+": Coverage format must be 1 or 2.");for(var V=new Array(D),Y=0;Y<D;Y++)V[Y]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:V}},_e.prototype.parseClassDef=function(){var T=this.offset+this.relativeOffset,j=this.parseUShort();if(j===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(j===2)return{format:2,ranges:this.parseRecordList({start:_e.uShort,end:_e.uShort,classId:_e.uShort})};throw new Error("0x"+T.toString(16)+": ClassDef format must be 1 or 2.")},_e.list=function(T,j){return function(){return this.parseList(T,j)}},_e.list32=function(T,j){return function(){return this.parseList32(T,j)}},_e.recordList=function(T,j){return function(){return this.parseRecordList(T,j)}},_e.recordList32=function(T,j){return function(){return this.parseRecordList32(T,j)}},_e.pointer=function(T){return function(){return this.parsePointer(T)}},_e.pointer32=function(T){return function(){return this.parsePointer32(T)}},_e.tag=_e.prototype.parseTag,_e.byte=_e.prototype.parseByte,_e.uShort=_e.offset16=_e.prototype.parseUShort,_e.uShortList=_e.prototype.parseUShortList,_e.uLong=_e.offset32=_e.prototype.parseULong,_e.uLongList=_e.prototype.parseULongList,_e.struct=_e.prototype.parseStruct,_e.coverage=_e.prototype.parseCoverage,_e.classDef=_e.prototype.parseClassDef;var Ue={reserved:_e.uShort,reqFeatureIndex:_e.uShort,featureIndexes:_e.uShortList},Fe=(_e.prototype.parseScriptList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,script:_e.pointer({defaultLangSys:_e.pointer(Ue),langSysRecords:_e.recordList({tag:_e.tag,langSys:_e.pointer(Ue)})})}))||[]},_e.prototype.parseFeatureList=function(){return this.parsePointer(_e.recordList({tag:_e.tag,feature:_e.pointer({featureParams:_e.offset16,lookupListIndexes:_e.uShortList})}))||[]},_e.prototype.parseLookupList=function(T){return this.parsePointer(_e.list(_e.pointer(function(){var j=this.parseUShort(),D=(ne.argument(1<=j&&j<=9,"GPOS/GSUB lookup type "+j+" unknown."),this.parseUShort()),V=16&D;return{lookupType:j,lookupFlag:D,subtables:this.parseList(_e.pointer(T[j])),markFilteringSet:V?this.parseUShort():void 0}})))||[]},_e.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var T=this.parseUShort(),j=this.parseUShort();return ne.argument(T===1&&j<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:_e.offset32,featureTableSubstitutionOffset:_e.offset32})})||[]},{getByte:Oe,getCard8:Oe,getUShort:ze,getCard16:ze,getShort:function(T,j){return T.getInt16(j,!1)},getULong:Be,getFixed:dt,getTag:function(T,j){for(var D="",V=j;V<j+4;V+=1)D+=String.fromCharCode(T.getInt8(V));return D},getOffset:function(T,j,D){for(var V=0,Y=0;Y<D;Y+=1)V=(V<<=8)+T.getUint8(j+Y);return V},getBytes:function(T,j,D){for(var V=[],Y=j;Y<D;Y+=1)V.push(T.getUint8(Y));return V},bytesToString:function(T){for(var j="",D=0;D<T.length;D+=1)j+=String.fromCharCode(T[D]);return j},Parser:_e}),Ne=function(T,j){for(var D={},V=(D.version=Fe.getUShort(T,j),ne.argument(D.version===0,"cmap table version should be 0."),D.numTables=Fe.getUShort(T,j+2),-1),Y=D.numTables-1;0<=Y;--Y){var Q=Fe.getUShort(T,j+4+8*Y),te=Fe.getUShort(T,j+4+8*Y+2);if(Q===3&&(te===0||te===1||te===10)||Q===0&&(te===0||te===1||te===2||te===3||te===4)){V=Fe.getULong(T,j+4+8*Y+4);break}}if(V===-1)throw new Error("No valid cmap sub-tables found.");var Me=new Fe.Parser(T,j+V);if(D.format=Me.parseUShort(),D.format===12){var Te,Pe=D,De=Me;De.parseUShort(),Pe.length=De.parseULong(),Pe.language=De.parseULong(),Pe.groupCount=Te=De.parseULong(),Pe.glyphIndexMap={};for(var He=0;He<Te;He+=1)for(var Xe=De.parseULong(),ke=De.parseULong(),yt=De.parseULong(),$e=Xe;$e<=ke;$e+=1)Pe.glyphIndexMap[$e]=yt,yt++}else{if(D.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+D.format+").");var it=D,tt=T,rt=j,At=V;it.length=Me.parseUShort(),it.language=Me.parseUShort(),it.segCount=Et=Me.parseUShort()>>1,Me.skip("uShort",3),it.glyphIndexMap={};for(var Et,wt=new Fe.Parser(tt,rt+At+14),nn=new Fe.Parser(tt,rt+At+16+2*Et),Qt=new Fe.Parser(tt,rt+At+16+4*Et),Cn=new Fe.Parser(tt,rt+At+16+6*Et),Bn=rt+At+16+8*Et,Zt=0;Zt<Et-1;Zt+=1)for(var Sn=void 0,Kt=wt.parseUShort(),Jn=nn.parseUShort(),zn=Qt.parseShort(),Mn=Cn.parseUShort(),_n=Jn;_n<=Kt;_n+=1)Mn!==0?(Bn=(Bn=Cn.offset+Cn.relativeOffset-2)+Mn+2*(_n-Jn),(Sn=Fe.getUShort(tt,Bn))!==0&&(Sn=Sn+zn&65535)):Sn=_n+zn&65535,it.glyphIndexMap[_n]=Sn}return D},ft=function(T){for(var j=!0,D=T.length-1;0<D;--D)if(65535<T.get(D).unicode){console.log("Adding CMAP format 12 (needed!)"),j=!1;break}var V,Y,Q=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:j?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:j?12:20}],te=(Q=(Q=j?Q:Q.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Ee.Table("cmap",Q));for(te.segments=[],D=0;D<T.length;D+=1){for(var Me=T.get(D),Te=0;Te<Me.unicodes.length;Te+=1)V=Me.unicodes[Te],Y=D,te.segments.push({end:V,start:V,delta:-(V-Y),offset:0,glyphIndex:Y});te.segments=te.segments.sort(function(rt,At){return rt.start-At.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var Pe=te.segments.length,De=0,He=[],Xe=[],ke=[],yt=[],$e=[],it=[];for(D=0;D<Pe;D+=1){var tt=te.segments[D];tt.end<=65535&&tt.start<=65535?(He=He.concat({name:"end_"+D,type:"USHORT",value:tt.end}),Xe=Xe.concat({name:"start_"+D,type:"USHORT",value:tt.start}),ke=ke.concat({name:"idDelta_"+D,type:"SHORT",value:tt.delta}),yt=yt.concat({name:"idRangeOffset_"+D,type:"USHORT",value:tt.offset}),tt.glyphId!==void 0&&($e=$e.concat({name:"glyph_"+D,type:"USHORT",value:tt.glyphId}))):De+=1,j||tt.glyphIndex===void 0||(it=(it=(it=it.concat({name:"cmap12Start_"+D,type:"ULONG",value:tt.start})).concat({name:"cmap12End_"+D,type:"ULONG",value:tt.end})).concat({name:"cmap12Glyph_"+D,type:"ULONG",value:tt.glyphIndex}))}return te.segCountX2=2*(Pe-De),te.searchRange=2*Math.pow(2,Math.floor(Math.log(Pe-De)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(He),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Xe),te.fields=te.fields.concat(ke),te.fields=te.fields.concat(yt),te.fields=te.fields.concat($e),te.cmap4Length=14+2*He.length+2+2*Xe.length+2*ke.length+2*yt.length+2*$e.length,j||(Q=16+4*it.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Q},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:it.length/3}]),te.fields=te.fields.concat(it)),te},vt=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ht=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],lt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ce=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ue(T){this.font=T}function he(T){this.cmap=T}function be(T,j){this.encoding=T,this.charset=j}function je(T){switch(T.version){case 1:this.names=ce.slice();break;case 2:this.names=new Array(T.numberOfGlyphs);for(var j=0;j<T.numberOfGlyphs;j++)T.glyphNameIndex[j]<ce.length?this.names[j]=ce[T.glyphNameIndex[j]]:this.names[j]=T.names[T.glyphNameIndex[j]-ce.length];break;case 2.5:this.names=new Array(T.numberOfGlyphs);for(var D=0;D<T.numberOfGlyphs;D++)this.names[D]=ce[D+T.glyphNameIndex[D]];break;default:this.names=[]}}ue.prototype.charToGlyphIndex=function(T){var j=T.codePointAt(0),D=this.font.glyphs;if(D){for(var V=0;V<D.length;V+=1)for(var Y=D.get(V),Q=0;Q<Y.unicodes.length;Q+=1)if(Y.unicodes[Q]===j)return V}return null},he.prototype.charToGlyphIndex=function(T){return this.cmap.glyphIndexMap[T.codePointAt(0)]||0},be.prototype.charToGlyphIndex=function(T){return T=T.codePointAt(0),T=this.encoding[T],this.charset.indexOf(T)},je.prototype.nameToGlyphIndex=function(T){return this.names.indexOf(T)},je.prototype.glyphIndexToName=function(T){return this.names[T]};var We=function(T,j,D,V,Y){T.beginPath(),T.moveTo(j,D),T.lineTo(V,Y),T.stroke()};function xe(T){this.bindConstructorValues(T)}function Ve(T,j,D){Object.defineProperty(T,j,{get:function(){return T.path,T[D]},set:function(V){T[D]=V},enumerable:!0,configurable:!0})}function Ce(T,j){if(this.font=T,this.glyphs={},Array.isArray(j))for(var D=0;D<j.length;D++)this.glyphs[D]=j[D];this.length=j&&j.length||0}xe.prototype.bindConstructorValues=function(T){var j;this.index=T.index||0,this.name=T.name||null,this.unicode=T.unicode||void 0,this.unicodes=T.unicodes||T.unicode!==void 0?[T.unicode]:[],T.xMin&&(this.xMin=T.xMin),T.yMin&&(this.yMin=T.yMin),T.xMax&&(this.xMax=T.xMax),T.yMax&&(this.yMax=T.yMax),T.advanceWidth&&(this.advanceWidth=T.advanceWidth),Object.defineProperty(this,"path",(T=T.path,j=T||new H,{configurable:!0,get:function(){return j=typeof j=="function"?j():j},set:function(D){j=D}}))},xe.prototype.addUnicode=function(T){this.unicodes.length===0&&(this.unicode=T),this.unicodes.push(T)},xe.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},xe.prototype.getPath=function(T,j,D,V,Y){T=T!==void 0?T:0,j=j!==void 0?j:0,D=D!==void 0?D:72;for(var Q,te,Me=(V=V||{}).xScale,Te=V.yScale,Pe=((Q=V.hinting&&Y&&Y.hinting?this.path&&Y.hinting.exec(this,D):Q)?(te=Y.hinting.getCommands(Q),T=Math.round(T),j=Math.round(j),Me=Te=1):(te=this.path.commands,V=1/this.path.unitsPerEm*D,Me===void 0&&(Me=V),Te===void 0&&(Te=V)),new H),De=0;De<te.length;De+=1){var He=te[De];He.type==="M"?Pe.moveTo(T+He.x*Me,j+-He.y*Te):He.type==="L"?Pe.lineTo(T+He.x*Me,j+-He.y*Te):He.type==="Q"?Pe.quadraticCurveTo(T+He.x1*Me,j+-He.y1*Te,T+He.x*Me,j+-He.y*Te):He.type==="C"?Pe.curveTo(T+He.x1*Me,j+-He.y1*Te,T+He.x2*Me,j+-He.y2*Te,T+He.x*Me,j+-He.y*Te):He.type==="Z"&&Pe.closePath()}return Pe},xe.prototype.getContours=function(){if(this.points===void 0)return[];for(var T=[],j=[],D=0;D<this.points.length;D+=1){var V=this.points[D];j.push(V),V.lastPointOfContour&&(T.push(j),j=[])}return ne.argument(j.length===0,"There are still points left in the current contour."),T},xe.prototype.getMetrics=function(){for(var T=this.path.commands,j=[],D=[],V=0;V<T.length;V+=1){var Y=T[V];Y.type!=="Z"&&(j.push(Y.x),D.push(Y.y)),Y.type!=="Q"&&Y.type!=="C"||(j.push(Y.x1),D.push(Y.y1)),Y.type==="C"&&(j.push(Y.x2),D.push(Y.y2))}var Q={xMin:Math.min.apply(null,j),yMin:Math.min.apply(null,D),xMax:Math.max.apply(null,j),yMax:Math.max.apply(null,D),leftSideBearing:this.leftSideBearing};return isFinite(Q.xMin)||(Q.xMin=0),isFinite(Q.xMax)||(Q.xMax=this.advanceWidth),isFinite(Q.yMin)||(Q.yMin=0),isFinite(Q.yMax)||(Q.yMax=0),Q.rightSideBearing=this.advanceWidth-Q.leftSideBearing-(Q.xMax-Q.xMin),Q},xe.prototype.draw=function(T,j,D,V,Y){this.getPath(j,D,V,Y).draw(T)},xe.prototype.drawPoints=function(T,j,D,V){function Y(De,He,Xe,ke){var yt=2*Math.PI;T.beginPath();for(var $e=0;$e<De.length;$e+=1)T.moveTo(He+De[$e].x*ke,Xe+De[$e].y*ke),T.arc(He+De[$e].x*ke,Xe+De[$e].y*ke,2,0,yt,!1);T.closePath(),T.fill()}j=j!==void 0?j:0,D=D!==void 0?D:0,V=1/this.path.unitsPerEm*(V=V!==void 0?V:24);for(var Q=[],te=[],Me=this.path,Te=0;Te<Me.commands.length;Te+=1){var Pe=Me.commands[Te];Pe.x!==void 0&&Q.push({x:Pe.x,y:-Pe.y}),Pe.x1!==void 0&&te.push({x:Pe.x1,y:-Pe.y1}),Pe.x2!==void 0&&te.push({x:Pe.x2,y:-Pe.y2})}T.fillStyle="blue",Y(Q,j,D,V),T.fillStyle="red",Y(te,j,D,V)},xe.prototype.drawMetrics=function(T,j,D,V){j=j!==void 0?j:0,D=D!==void 0?D:0,V=1/this.path.unitsPerEm*(V=V!==void 0?V:24),T.lineWidth=1,T.strokeStyle="black",We(T,j,-1e4,j,1e4),We(T,-1e4,D,1e4,D);var Y=this.xMin||0,Q=this.yMin||0,te=this.xMax||0,Me=this.yMax||0,Te=this.advanceWidth||0;T.strokeStyle="blue",We(T,j+Y*V,-1e4,j+Y*V,1e4),We(T,j+te*V,-1e4,j+te*V,1e4),We(T,-1e4,D+-Q*V,1e4,D+-Q*V),We(T,-1e4,D+-Me*V,1e4,D+-Me*V),T.strokeStyle="green",We(T,j+Te*V,-1e4,j+Te*V,1e4)},Ce.prototype.get=function(T){return typeof this.glyphs[T]=="function"&&(this.glyphs[T]=this.glyphs[T]()),this.glyphs[T]},Ce.prototype.push=function(T,j){this.glyphs[T]=j,this.length++};var Qe={GlyphSet:Ce,glyphLoader:function(T,j){return new xe({index:j,font:T})},ttfGlyphLoader:function(T,j,D,V,Y,Q){return function(){var te=new xe({index:j,font:T});return te.path=function(){D(te,V,Y);var Me=Q(T.glyphs,te);return Me.unitsPerEm=T.unitsPerEm,Me},Ve(te,"xMin","_xMin"),Ve(te,"xMax","_xMax"),Ve(te,"yMin","_yMin"),Ve(te,"yMax","_yMax"),te}},cffGlyphLoader:function(T,j,D,V){return function(){var Y=new xe({index:j,font:T});return Y.path=function(){var Q=D(T,Y,V);return Q.unitsPerEm=T.unitsPerEm,Q},Y}}};function ut(T){return T=T.length<1240?107:T.length<33900?1131:32768}function Rt(T,j,D){var V,Y=[],Q=[],te=Fe.getCard16(T,j);if(te!==0){for(var Me=Fe.getByte(T,j+2),Te=j+(te+1)*Me+2,Pe=j+3,De=0;De<te+1;De+=1)Y.push(Fe.getOffset(T,Pe,Me)),Pe+=Me;V=Te+Y[te]}else V=j+2;for(var He=0;He<Y.length-1;He+=1){var Xe=Fe.getBytes(T,Te+Y[He],Te+Y[He+1]);D&&(Xe=D(Xe)),Q.push(Xe)}return{objects:Q,startOffset:j,endOffset:V}}function Nt(T,j){if(j===28)return T.parseByte()<<8|T.parseByte();if(j===29)return T.parseByte()<<24|T.parseByte()<<16|T.parseByte()<<8|T.parseByte();if(j===30){for(var D=T,V="",Y=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var Q=(te=D.parseByte())>>4,te=15&te;if(Q==15||(V+=Y[Q],te==15))break;V+=Y[te]}return parseFloat(V)}if(32<=j&&j<=246)return j-139;if(247<=j&&j<=250)return 256*(j-247)+T.parseByte()+108;if(251<=j&&j<=254)return 256*-(j-251)-T.parseByte()-108;throw new Error("Invalid b0 "+j)}function Bt(T,j,D){var V=new Fe.Parser(T,j=j!==void 0?j:0),Y=[],Q=[];for(D=D!==void 0?D:T.length;V.relativeOffset<D;){var te=V.parseByte();te<=21?(te===12&&(te=1200+V.parseByte()),Y.push([te,Q]),Q=[]):Q.push(Nt(V,te))}for(var Me=Y,Te={},Pe=0;Pe<Me.length;Pe+=1){var De=Me[Pe][0],He=Me[Pe][1],Xe=He.length===1?He[0]:He;if(Te.hasOwnProperty(De)&&!isNaN(Te[De]))throw new Error("Object "+Te+" already has key "+De);Te[De]=Xe}return Te}function Vt(T,j){return j<=390?vt[j]:T[j-391]}function jt(T,j,D){for(var V,Y={},Q=0;Q<j.length;Q+=1){var te=j[Q];if(Array.isArray(te.type)){var Me=[];Me.length=te.type.length;for(var Te=0;Te<te.type.length;Te++)(V=T[te.op]!==void 0?T[te.op][Te]:void 0)===void 0&&(V=te.value!==void 0&&te.value[Te]!==void 0?te.value[Te]:null),te.type[Te]==="SID"&&(V=Vt(D,V)),Me[Te]=V;Y[te.name]=Me}else(V=T[te.op])===void 0&&(V=te.value!==void 0?te.value:null),te.type==="SID"&&(V=Vt(D,V)),Y[te.name]=V}return Y}var Yt=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],on=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function $n(T,j,D,V){return jt(Bt(T,j,D),on,V)}function xn(T,j,D,V){for(var Y=[],Q=0;Q<D.length;Q+=1){var te,Me=((te=(Me=V,jt(Bt(te=new DataView(new Uint8Array(D[Q]).buffer),0,te.byteLength),Yt,Me)))._subrs=[],te._subrsBias=0,te.private[0]),Te=te.private[1];Me!==0&&Te!==0&&(Me=$n(T,Te+j,Me,V),te._defaultWidthX=Me.defaultWidthX,te._nominalWidthX=Me.nominalWidthX,Me.subrs!==0&&(Te=Rt(T,Te+Me.subrs+j),te._subrs=Te.objects,te._subrsBias=ut(te._subrs)),te._privateDict=Me),Y.push(te)}return Y}function On(T,j,D){var V,Y,Q,te,Me,Te,Pe,De,He,Xe=new H,ke=[],yt=0,$e=!1,it=!1,tt=0,rt=0,At=(He=(T.isCIDFont?(Me=T.tables.cff.topDict._fdSelect[j.index],Me=T.tables.cff.topDict._fdArray[Me],Te=Me._subrs,Pe=Me._subrsBias,De=Me._defaultWidthX,Me):(Te=T.tables.cff.topDict._subrs,Pe=T.tables.cff.topDict._subrsBias,De=T.tables.cff.topDict._defaultWidthX,T.tables.cff.topDict))._nominalWidthX,De);function Et(nn,Qt){it&&Xe.closePath(),Xe.moveTo(nn,Qt),it=!0}function wt(){ke.length%2==0||$e||(At=ke.shift()+He),yt+=ke.length>>1,ke.length=0,$e=!0}return function nn(Qt){for(var Cn,Bn,Zt,Sn,Kt,Jn,zn,Mn,_n,rn,yn,bn,kn=0;kn<Qt.length;){var Xn=Qt[kn];switch(kn+=1,Xn){case 1:case 3:wt();break;case 4:1<ke.length&&!$e&&(At=ke.shift()+He,$e=!0),rt+=ke.pop(),Et(tt,rt);break;case 5:for(;0<ke.length;)tt+=ke.shift(),rt+=ke.shift(),Xe.lineTo(tt,rt);break;case 6:for(;0<ke.length&&(tt+=ke.shift(),Xe.lineTo(tt,rt),ke.length!==0);)rt+=ke.shift(),Xe.lineTo(tt,rt);break;case 7:for(;0<ke.length&&(rt+=ke.shift(),Xe.lineTo(tt,rt),ke.length!==0);)tt+=ke.shift(),Xe.lineTo(tt,rt);break;case 8:for(;0<ke.length;)V=tt+ke.shift(),Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),tt=Q+ke.shift(),rt=te+ke.shift(),Xe.curveTo(V,Y,Q,te,tt,rt);break;case 10:Kt=ke.pop()+Pe,(Jn=Te[Kt])&&nn(Jn);break;case 11:return;case 12:switch(Xn=Qt[kn],kn+=1,Xn){case 35:V=tt+ke.shift(),Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),zn=Q+ke.shift(),Mn=te+ke.shift(),_n=zn+ke.shift(),rn=Mn+ke.shift(),yn=_n+ke.shift(),bn=rn+ke.shift(),tt=yn+ke.shift(),rt=bn+ke.shift(),ke.shift(),Xe.curveTo(V,Y,Q,te,zn,Mn),Xe.curveTo(_n,rn,yn,bn,tt,rt);break;case 34:V=tt+ke.shift(),Y=rt,Q=V+ke.shift(),te=Y+ke.shift(),zn=Q+ke.shift(),Mn=te,_n=zn+ke.shift(),rn=te,yn=_n+ke.shift(),bn=rt,tt=yn+ke.shift(),Xe.curveTo(V,Y,Q,te,zn,Mn),Xe.curveTo(_n,rn,yn,bn,tt,rt);break;case 36:V=tt+ke.shift(),Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),zn=Q+ke.shift(),Mn=te,_n=zn+ke.shift(),rn=te,yn=_n+ke.shift(),bn=rn+ke.shift(),tt=yn+ke.shift(),Xe.curveTo(V,Y,Q,te,zn,Mn),Xe.curveTo(_n,rn,yn,bn,tt,rt);break;case 37:V=tt+ke.shift(),Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),zn=Q+ke.shift(),Mn=te+ke.shift(),_n=zn+ke.shift(),rn=Mn+ke.shift(),yn=_n+ke.shift(),bn=rn+ke.shift(),Math.abs(yn-tt)>Math.abs(bn-rt)?tt=yn+ke.shift():rt=bn+ke.shift(),Xe.curveTo(V,Y,Q,te,zn,Mn),Xe.curveTo(_n,rn,yn,bn,tt,rt);break;default:console.log("Glyph "+j.index+": unknown operator 1200"+Xn),ke.length=0}break;case 14:0<ke.length&&!$e&&(At=ke.shift()+He,$e=!0),it&&(Xe.closePath(),it=!1);break;case 18:wt();break;case 19:case 20:wt(),kn+=yt+7>>3;break;case 21:2<ke.length&&!$e&&(At=ke.shift()+He,$e=!0),rt+=ke.pop(),Et(tt+=ke.pop(),rt);break;case 22:1<ke.length&&!$e&&(At=ke.shift()+He,$e=!0),Et(tt+=ke.pop(),rt);break;case 23:wt();break;case 24:for(;2<ke.length;)V=tt+ke.shift(),Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),tt=Q+ke.shift(),rt=te+ke.shift(),Xe.curveTo(V,Y,Q,te,tt,rt);tt+=ke.shift(),rt+=ke.shift(),Xe.lineTo(tt,rt);break;case 25:for(;6<ke.length;)tt+=ke.shift(),rt+=ke.shift(),Xe.lineTo(tt,rt);V=tt+ke.shift(),Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),tt=Q+ke.shift(),rt=te+ke.shift(),Xe.curveTo(V,Y,Q,te,tt,rt);break;case 26:for(ke.length%2&&(tt+=ke.shift());0<ke.length;)V=tt,Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),tt=Q,rt=te+ke.shift(),Xe.curveTo(V,Y,Q,te,tt,rt);break;case 27:for(ke.length%2&&(rt+=ke.shift());0<ke.length;)V=tt+ke.shift(),Y=rt,Q=V+ke.shift(),te=Y+ke.shift(),tt=Q+ke.shift(),rt=te,Xe.curveTo(V,Y,Q,te,tt,rt);break;case 28:Cn=Qt[kn],Bn=Qt[kn+1],ke.push((Cn<<24|Bn<<16)>>16),kn+=2;break;case 29:Kt=ke.pop()+T.gsubrsBias,(Jn=T.gsubrs[Kt])&&nn(Jn);break;case 30:for(;0<ke.length&&(V=tt,Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),tt=Q+ke.shift(),rt=te+(ke.length===1?ke.shift():0),Xe.curveTo(V,Y,Q,te,tt,rt),ke.length!==0);)V=tt+ke.shift(),Y=rt,Q=V+ke.shift(),te=Y+ke.shift(),rt=te+ke.shift(),tt=Q+(ke.length===1?ke.shift():0),Xe.curveTo(V,Y,Q,te,tt,rt);break;case 31:for(;0<ke.length&&(V=tt+ke.shift(),Y=rt,Q=V+ke.shift(),te=Y+ke.shift(),rt=te+ke.shift(),tt=Q+(ke.length===1?ke.shift():0),Xe.curveTo(V,Y,Q,te,tt,rt),ke.length!==0);)V=tt,Y=rt+ke.shift(),Q=V+ke.shift(),te=Y+ke.shift(),tt=Q+ke.shift(),rt=te+(ke.length===1?ke.shift():0),Xe.curveTo(V,Y,Q,te,tt,rt);break;default:Xn<32?console.log("Glyph "+j.index+": unknown operator "+Xn):Xn<247?ke.push(Xn-139):Xn<251?(Cn=Qt[kn],kn+=1,ke.push(256*(Xn-247)+Cn+108)):Xn<255?(Cn=Qt[kn],kn+=1,ke.push(256*-(Xn-251)-Cn-108)):(Cn=Qt[kn],Bn=Qt[kn+1],Zt=Qt[kn+2],Sn=Qt[kn+3],kn+=4,ke.push((Cn<<24|Bn<<16|Zt<<8|Sn)/65536))}}}(D),j.advanceWidth=At,Xe}function Gn(T,j){var D,V=vt.indexOf(T);return 0<=V&&(D=V),0<=(V=j.indexOf(T))?D=V+vt.length:(D=vt.length+j.length,j.push(T)),D}function un(T,j,D){for(var V={},Y=0;Y<T.length;Y+=1){var Q=T[Y],te=j[Q.name];te===void 0||function Me(Te,Pe){if(Te===Pe)return 1;if(Array.isArray(Te)&&Array.isArray(Pe)&&Te.length===Pe.length){for(var De=0;De<Te.length;De+=1)if(!Me(Te[De],Pe[De]))return;return 1}}(te,Q.value)||(Q.type==="SID"&&(te=Gn(te,D)),V[Q.op]={name:Q.name,type:Q.type,value:te})}return V}function lr(T,j){var D=new Ee.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return D.dict=un(Yt,T,j),D}function er(T){var j=new Ee.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return j.topDicts=[{name:"topDict_0",type:"TABLE",value:T}],j}var An=function(T,j,D){D.tables.cff={},V=T,Y=j,(Q={}).formatMajor=Fe.getCard8(V,Y),Q.formatMinor=Fe.getCard8(V,Y+1),Q.size=Fe.getCard8(V,Y+2),Q.offsetSize=Fe.getCard8(V,Y+3),Q.startOffset=Y,Q.endOffset=Y+4;var V=Rt(T,Q.endOffset,Fe.bytesToString),Y=Rt(T,V.endOffset),Q=Rt(T,Y.endOffset,Fe.bytesToString);if(V=Rt(T,Q.endOffset),D.gsubrs=V.objects,D.gsubrsBias=ut(D.gsubrs),(V=xn(T,j,Y.objects,Q.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+V.length);if(Y=V[0],(D.tables.cff.topDict=Y)._privateDict&&(D.defaultWidthX=Y._privateDict.defaultWidthX,D.nominalWidthX=Y._privateDict.nominalWidthX),Y.ros[0]!==void 0&&Y.ros[1]!==void 0&&(D.isCIDFont=!0),D.isCIDFont){V=Y.fdArray;var te=Y.fdSelect;if(V===0||te===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");V=xn(T,j,Rt(T,V+=j).objects,Q.objects),Y._fdArray=V,Y._fdSelect=function(De,He,Xe,ke){var yt,$e=[],it=new Fe.Parser(De,He);if((De=it.parseCard8())===0)for(var tt=0;tt<Xe;tt++){if(ke<=(yt=it.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+yt+" (FD count "+ke+")");$e.push(yt)}else{if(De!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+De);var rt,At=it.parseCard16(),Et=it.parseCard16();if(Et!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+Et);for(var wt=0;wt<At;wt++){if(yt=it.parseCard8(),rt=it.parseCard16(),ke<=yt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+yt+" (FD count "+ke+")");if(Xe<rt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+rt);for(;Et<rt;Et++)$e.push(yt);Et=rt}if(rt!==Xe)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+rt)}return $e}(T,te+=j,D.numGlyphs,V.length)}V=$n(T,te=j+Y.private[1],Y.private[0],Q.objects);var Me=(D.defaultWidthX=V.defaultWidthX,D.nominalWidthX=V.nominalWidthX,V.subrs!==0?(te=Rt(T,te+V.subrs),D.subrs=te.objects,D.subrsBias=ut(D.subrs)):(D.subrs=[],D.subrsBias=0),Rt(T,j+Y.charStrings));D.nGlyphs=Me.objects.length,V=function(De,He,Xe,ke){var yt=new Fe.Parser(De,He),$e=(--Xe,[".notdef"]);if((De=yt.parseCard8())===0)for(var it=0;it<Xe;it+=1)tt=yt.parseSID(),$e.push(Vt(ke,tt));else if(De===1)for(;$e.length<=Xe;)for(var tt=yt.parseSID(),rt=yt.parseCard8(),At=0;At<=rt;At+=1)$e.push(Vt(ke,tt)),tt+=1;else{if(De!==2)throw new Error("Unknown charset format "+De);for(;$e.length<=Xe;){tt=yt.parseSID(),rt=yt.parseCard16();for(var Et=0;Et<=rt;Et+=1)$e.push(Vt(ke,tt)),tt+=1}}return $e}(T,j+Y.charset,D.nGlyphs,Q.objects),Y.encoding===0?D.cffEncoding=new be(ht,V):Y.encoding===1?D.cffEncoding=new be(lt,V):D.cffEncoding=function(De,He,Xe){var ke={},yt=new Fe.Parser(De,He);if((De=yt.parseCard8())===0)for(var $e=yt.parseCard8(),it=0;it<$e;it+=1)ke[rt=yt.parseCard8()]=it;else{if(De!==1)throw new Error("Unknown encoding format "+De);for(var tt=yt.parseCard8(),rt=1,At=0;At<tt;At+=1)for(var Et=yt.parseCard8(),wt=yt.parseCard8(),nn=Et;nn<=Et+wt;nn+=1)ke[nn]=rt,rt+=1}return new be(ke,Xe)}(T,j+Y.encoding,V),D.encoding=D.encoding||D.cffEncoding,D.glyphs=new Qe.GlyphSet(D);for(var Te=0;Te<D.nGlyphs;Te+=1){var Pe=Me.objects[Te];D.glyphs.push(Te,Qe.cffGlyphLoader(D,Te,On,Pe))}},qo=function(T,j){for(var D,V=new Ee.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),Y=1/j.unitsPerEm,Q=(Y={version:j.version,fullName:j.fullName,familyName:j.familyName,weight:j.weightName,fontBBox:j.fontBBox||[0,0,0,0],fontMatrix:[Y,0,0,Y,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},[]),te=1;te<T.length;te+=1)D=T.get(te),Q.push(D.name);var Me,Te,Pe=[],De=(j=(V.header=new Ee.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),V.nameIndex=function(He){var Xe=new Ee.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Xe.names=[];for(var ke=0;ke<He.length;ke+=1)Xe.names.push({name:"name_"+ke,type:"NAME",value:He[ke]});return Xe}([j.postScriptName]),lr(Y,Pe)),V.topDictIndex=er(j),V.globalSubrIndex=new Ee.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),V.charsets=function(He,Xe){for(var ke=new Ee.Record("Charsets",[{name:"format",type:"Card8",value:0}]),yt=0;yt<He.length;yt+=1){var $e=Gn(He[yt],Xe);ke.fields.push({name:"glyph_"+yt,type:"SID",value:$e})}return ke}(Q,Pe),V.charStringsIndex=function(He){for(var Xe=new Ee.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),ke=0;ke<He.length;ke+=1){var yt=He.get(ke),$e=function(it){for(var tt=[],rt=it.path,At=(tt.push({name:"width",type:"NUMBER",value:it.advanceWidth}),0),Et=0,wt=0;wt<rt.commands.length;wt+=1){var nn,Qt,Cn,Bn,Zt=void 0,Sn=void 0,Kt=rt.commands[wt];(Kt=Kt.type==="Q"?{type:"C",x:Kt.x,y:Kt.y,x1:1/3*At+2/3*Kt.x1,y1:1/3*Et+2/3*Kt.y1,x2:1/3*Kt.x+2/3*Kt.x1,y2:1/3*Kt.y+2/3*Kt.y1}:Kt).type==="M"?(Zt=Math.round(Kt.x-At),Sn=Math.round(Kt.y-Et),tt.push({name:"dx",type:"NUMBER",value:Zt}),tt.push({name:"dy",type:"NUMBER",value:Sn}),tt.push({name:"rmoveto",type:"OP",value:21}),At=Math.round(Kt.x),Et=Math.round(Kt.y)):Kt.type==="L"?(Zt=Math.round(Kt.x-At),Sn=Math.round(Kt.y-Et),tt.push({name:"dx",type:"NUMBER",value:Zt}),tt.push({name:"dy",type:"NUMBER",value:Sn}),tt.push({name:"rlineto",type:"OP",value:5}),At=Math.round(Kt.x),Et=Math.round(Kt.y)):Kt.type==="C"&&(nn=Math.round(Kt.x1-At),Qt=Math.round(Kt.y1-Et),Cn=Math.round(Kt.x2-Kt.x1),Bn=Math.round(Kt.y2-Kt.y1),Zt=Math.round(Kt.x-Kt.x2),Sn=Math.round(Kt.y-Kt.y2),tt.push({name:"dx1",type:"NUMBER",value:nn}),tt.push({name:"dy1",type:"NUMBER",value:Qt}),tt.push({name:"dx2",type:"NUMBER",value:Cn}),tt.push({name:"dy2",type:"NUMBER",value:Bn}),tt.push({name:"dx",type:"NUMBER",value:Zt}),tt.push({name:"dy",type:"NUMBER",value:Sn}),tt.push({name:"rrcurveto",type:"OP",value:8}),At=Math.round(Kt.x),Et=Math.round(Kt.y))}return tt.push({name:"endchar",type:"OP",value:14}),tt}(yt);Xe.charStrings.push({name:yt.name,type:"CHARSTRING",value:$e})}return Xe}(T),V.privateDict=(De={},Me=Pe,(Te=new Ee.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=un(on,De,Me),Te),V.stringIndex=function(He){var Xe=new Ee.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Xe.strings=[];for(var ke=0;ke<He.length;ke+=1)Xe.strings.push({name:"string_"+ke,type:"STRING",value:He[ke]});return Xe}(Pe),V.header.sizeOf()+V.nameIndex.sizeOf()+V.topDictIndex.sizeOf()+V.stringIndex.sizeOf()+V.globalSubrIndex.sizeOf());return Y.charset=De,Y.encoding=0,Y.charStrings=Y.charset+V.charsets.sizeOf(),Y.private[1]=Y.charStrings+V.charStringsIndex.sizeOf(),j=lr(Y,Pe),V.topDictIndex=er(j),V},Yo=function(T,j){var D={};return T=new Fe.Parser(T,j),D.version=T.parseVersion(),D.fontRevision=Math.round(1e3*T.parseFixed())/1e3,D.checkSumAdjustment=T.parseULong(),D.magicNumber=T.parseULong(),ne.argument(D.magicNumber===1594834165,"Font header has wrong magic number."),D.flags=T.parseUShort(),D.unitsPerEm=T.parseUShort(),D.created=T.parseLongDateTime(),D.modified=T.parseLongDateTime(),D.xMin=T.parseShort(),D.yMin=T.parseShort(),D.xMax=T.parseShort(),D.yMax=T.parseShort(),D.macStyle=T.parseUShort(),D.lowestRecPPEM=T.parseUShort(),D.fontDirectionHint=T.parseShort(),D.indexToLocFormat=T.parseShort(),D.glyphDataFormat=T.parseShort(),D},Ae=function(T){var j=Math.round(new Date().getTime()/1e3)+2082844800,D=j;return T.createdTimestamp&&(D=T.createdTimestamp+2082844800),new Ee.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:D},{name:"modified",type:"LONGDATETIME",value:j},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],T)},Ye=function(T,j){var D={};return T=new Fe.Parser(T,j),D.version=T.parseVersion(),D.ascender=T.parseShort(),D.descender=T.parseShort(),D.lineGap=T.parseShort(),D.advanceWidthMax=T.parseUShort(),D.minLeftSideBearing=T.parseShort(),D.minRightSideBearing=T.parseShort(),D.xMaxExtent=T.parseShort(),D.caretSlopeRise=T.parseShort(),D.caretSlopeRun=T.parseShort(),D.caretOffset=T.parseShort(),T.relativeOffset+=8,D.metricDataFormat=T.parseShort(),D.numberOfHMetrics=T.parseUShort(),D},nt=function(T){return new Ee.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],T)},pe=function(T,j,D,V,Y){for(var Q,te,Me=new Fe.Parser(T,j),Te=0;Te<V;Te+=1){Te<D&&(Q=Me.parseUShort(),te=Me.parseShort());var Pe=Y.get(Te);Pe.advanceWidth=Q,Pe.leftSideBearing=te}},Ie=function(T){for(var j=new Ee.Table("hmtx",[]),D=0;D<T.length;D+=1){var V=(Y=T.get(D)).advanceWidth||0,Y=Y.leftSideBearing||0;j.fields.push({name:"advanceWidth_"+D,type:"USHORT",value:V}),j.fields.push({name:"leftSideBearing_"+D,type:"SHORT",value:Y})}return j},st=function(T){for(var j=new Ee.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:T.length}]),D="",V=12+4*T.length,Y=0;Y<T.length;++Y){var Q=D.indexOf(T[Y]);Q<0&&(Q=D.length,D+=T[Y]),j.fields.push({name:"offset "+Y,type:"USHORT",value:V+Q}),j.fields.push({name:"length "+Y,type:"USHORT",value:T[Y].length})}return j.fields.push({name:"stringPool",type:"CHARARRAY",value:D}),j},Ke=function(T,j){for(var D=new Fe.Parser(T,j),V=D.parseULong(),Y=(ne.argument(V===1,"Unsupported ltag table version."),D.skip("uLong",1),D.parseULong()),Q=[],te=0;te<Y;te++){for(var Me="",Te=j+D.parseUShort(),Pe=D.parseUShort(),De=Te;De<Te+Pe;++De)Me+=String.fromCharCode(T.getInt8(De));Q.push(Me)}return Q},Mt=function(T,j){var D={};return T=new Fe.Parser(T,j),D.version=T.parseVersion(),D.numGlyphs=T.parseUShort(),D.version===1&&(D.maxPoints=T.parseUShort(),D.maxContours=T.parseUShort(),D.maxCompositePoints=T.parseUShort(),D.maxCompositeContours=T.parseUShort(),D.maxZones=T.parseUShort(),D.maxTwilightPoints=T.parseUShort(),D.maxStorage=T.parseUShort(),D.maxFunctionDefs=T.parseUShort(),D.maxInstructionDefs=T.parseUShort(),D.maxStackElements=T.parseUShort(),D.maxSizeOfInstructions=T.parseUShort(),D.maxComponentElements=T.parseUShort(),D.maxComponentDepth=T.parseUShort()),D},Ze=function(T){return new Ee.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:T}])},Lt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],pt={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Tt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},_t={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},vn="utf-16",$t={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ln={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function It(T,j,D){switch(T){case 0:return vn;case 1:return Ln[D]||$t[j];case 3:if(j===1||j===10)return vn}}function bt(T){var j,D={};for(j in T)D[T[j]]=parseInt(j);return D}function Dn(T,j,D,V,Y,Q){return new Ee.Record("NameRecord",[{name:"platformID",type:"USHORT",value:T},{name:"encodingID",type:"USHORT",value:j},{name:"languageID",type:"USHORT",value:D},{name:"nameID",type:"USHORT",value:V},{name:"length",type:"USHORT",value:Y},{name:"offset",type:"USHORT",value:Q}])}function Wt(T,j){if((D=function(Q,te){var Me=Q.length,Te=te.length-Me+1;e:for(var Pe=0;Pe<Te;Pe++)for(;Pe<Te;Pe++){for(var De=0;De<Me;De++)if(te[Pe+De]!==Q[De])continue e;return Pe}return-1}(T,j))<0)for(var D=j.length,V=0,Y=T.length;V<Y;++V)j.push(T[V]);return D}var fn=function(T,j,D){for(var V={},Y=new Fe.Parser(T,j),Q=(j=Y.parseUShort(),Y.parseUShort()),te=Y.offset+Y.parseUShort(),Me=0;Me<Q;Me++){var Te=Y.parseUShort(),Pe=Y.parseUShort(),De=Y.parseUShort(),He=Y.parseUShort(),Xe=(He=Lt[He]||He,Y.parseUShort()),ke=Y.parseUShort(),yt=function($e,it,tt){switch($e){case 0:if(it===65535)return"und";if(tt)return tt[it];break;case 1:return pt[it];case 3:return _t[it]}}(Te,De,D);(Te=It(Te,Pe,De))!==void 0&&yt!==void 0&&(Pe=void 0,(Pe=Te===vn?ee.UTF16(T,te+ke,Xe):ee.MACSTRING(T,te+ke,Xe,Te))&&((De=(De=V[He])===void 0?V[He]={}:De)[yt]=Pe))}return j===1&&Y.parseUShort(),V},rs=function(T,j){var D,V=[],Y={},Q=bt(Lt);for(D in T){var te=Q[D];if(te===void 0&&(te=D),Xe=parseInt(te),isNaN(Xe))throw new Error('Name table entry "'+D+'" does not exist, see nameTableNames for complete list.');Y[Xe]=T[D],V.push(Xe)}for(var Me=bt(pt),Te=bt(_t),Pe=[],De=[],He=0;He<V.length;He++){var Xe,ke,yt=Y[Xe=V[He]];for(ke in yt){var $e=yt[ke],it=1,tt=Me[ke],rt=Tt[tt],At=It(it,rt,tt),Et=((At=se.MACSTRING($e,At))===void 0&&(it=0,(tt=j.indexOf(ke))<0&&(tt=j.length,j.push(ke)),rt=4,At=se.UTF16($e)),Wt(At,De));(it=(Pe.push(Dn(it,rt,tt,Xe,At.length,Et)),Te[ke]))!==void 0&&(tt=Wt(rt=se.UTF16($e),De),Pe.push(Dn(3,1,it,Xe,rt.length,tt)))}}Pe.sort(function(Qt,Cn){return Qt.platformID-Cn.platformID||Qt.encodingID-Cn.encodingID||Qt.languageID-Cn.languageID||Qt.nameID-Cn.nameID});for(var wt=new Ee.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:Pe.length},{name:"stringOffset",type:"USHORT",value:6+12*Pe.length}]),nn=0;nn<Pe.length;nn++)wt.fields.push({name:"record_"+nn,type:"RECORD",value:Pe[nn]});return wt.fields.push({name:"strings",type:"LITERAL",value:De}),wt},di=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],xr=function(T,j){var D={},V=new Fe.Parser(T,j);D.version=V.parseUShort(),D.xAvgCharWidth=V.parseShort(),D.usWeightClass=V.parseUShort(),D.usWidthClass=V.parseUShort(),D.fsType=V.parseUShort(),D.ySubscriptXSize=V.parseShort(),D.ySubscriptYSize=V.parseShort(),D.ySubscriptXOffset=V.parseShort(),D.ySubscriptYOffset=V.parseShort(),D.ySuperscriptXSize=V.parseShort(),D.ySuperscriptYSize=V.parseShort(),D.ySuperscriptXOffset=V.parseShort(),D.ySuperscriptYOffset=V.parseShort(),D.yStrikeoutSize=V.parseShort(),D.yStrikeoutPosition=V.parseShort(),D.sFamilyClass=V.parseShort(),D.panose=[];for(var Y=0;Y<10;Y++)D.panose[Y]=V.parseByte();return D.ulUnicodeRange1=V.parseULong(),D.ulUnicodeRange2=V.parseULong(),D.ulUnicodeRange3=V.parseULong(),D.ulUnicodeRange4=V.parseULong(),D.achVendID=String.fromCharCode(V.parseByte(),V.parseByte(),V.parseByte(),V.parseByte()),D.fsSelection=V.parseUShort(),D.usFirstCharIndex=V.parseUShort(),D.usLastCharIndex=V.parseUShort(),D.sTypoAscender=V.parseShort(),D.sTypoDescender=V.parseShort(),D.sTypoLineGap=V.parseShort(),D.usWinAscent=V.parseUShort(),D.usWinDescent=V.parseUShort(),1<=D.version&&(D.ulCodePageRange1=V.parseULong(),D.ulCodePageRange2=V.parseULong()),2<=D.version&&(D.sxHeight=V.parseShort(),D.sCapHeight=V.parseShort(),D.usDefaultChar=V.parseUShort(),D.usBreakChar=V.parseUShort(),D.usMaxContent=V.parseUShort()),D},tr=function(T){return new Ee.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],T)},is=function(T){for(var j=0;j<di.length;j+=1){var D=di[j];if(T>=D.begin&&T<D.end)return j}return-1},Zo=function(T,j){var D={},V=new Fe.Parser(T,j);switch(D.version=V.parseVersion(),D.italicAngle=V.parseFixed(),D.underlinePosition=V.parseShort(),D.underlineThickness=V.parseShort(),D.isFixedPitch=V.parseULong(),D.minMemType42=V.parseULong(),D.maxMemType42=V.parseULong(),D.minMemType1=V.parseULong(),D.maxMemType1=V.parseULong(),D.version){case 1:D.names=ce.slice();break;case 2:D.numberOfGlyphs=V.parseUShort(),D.glyphNameIndex=new Array(D.numberOfGlyphs);for(var Y=0;Y<D.numberOfGlyphs;Y++)D.glyphNameIndex[Y]=V.parseUShort();D.names=[];for(var Q,te=0;te<D.numberOfGlyphs;te++)D.glyphNameIndex[te]>=ce.length&&(Q=V.parseChar(),D.names.push(V.parseString(Q)));break;case 2.5:D.numberOfGlyphs=V.parseUShort(),D.offset=new Array(D.numberOfGlyphs);for(var Me=0;Me<D.numberOfGlyphs;Me++)D.offset[Me]=V.parseChar()}return D},Cr=function(){return new Ee.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},Dr=new Array(9),br=(Dr[1]=function(){var T=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),deltaGlyphId:this.parseUShort()}:j===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),substitute:this.parseOffset16List()}:void ne.assert(!1,"0x"+T.toString(16)+": lookup type 1 format must be 1 or 2.")},Dr[2]=function(){var T=this.parseUShort();return ne.argument(T===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(_e.coverage),sequences:this.parseListOfLists()}},Dr[3]=function(){var T=this.parseUShort();return ne.argument(T===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(_e.coverage),alternateSets:this.parseListOfLists()}},Dr[4]=function(){var T=this.parseUShort();return ne.argument(T===1,"GSUB ligature table identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(_e.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:_e.uShort,lookupListIndex:_e.uShort});Dr[5]=function(){var T,j,D=this.offset+this.relativeOffset,V=this.parseUShort();return V===1?{substFormat:V,coverage:this.parsePointer(_e.coverage),ruleSets:this.parseListOfLists(function(){var Y=this.parseUShort(),Q=this.parseUShort();return{input:this.parseUShortList(Y-1),lookupRecords:this.parseRecordList(Q,br)}})}:V===2?{substFormat:V,coverage:this.parsePointer(_e.coverage),classDef:this.parsePointer(_e.classDef),classSets:this.parseListOfLists(function(){var Y=this.parseUShort(),Q=this.parseUShort();return{classes:this.parseUShortList(Y-1),lookupRecords:this.parseRecordList(Q,br)}})}:V===3?(T=this.parseUShort(),j=this.parseUShort(),{substFormat:V,coverages:this.parseList(T,_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(j,br)}):void ne.assert(!1,"0x"+D.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},Dr[6]=function(){var T=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{substFormat:1,coverage:this.parsePointer(_e.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(br)}})}:j===2?{substFormat:2,coverage:this.parsePointer(_e.coverage),backtrackClassDef:this.parsePointer(_e.classDef),inputClassDef:this.parsePointer(_e.classDef),lookaheadClassDef:this.parsePointer(_e.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(br)}})}:j===3?{substFormat:3,backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),inputCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),lookupRecords:this.parseRecordList(br)}:void ne.assert(!1,"0x"+T.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},Dr[7]=function(){var T=this.parseUShort(),j=(T=(ne.argument(T===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),new _e(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:T,extension:Dr[T].call(j)}},Dr[8]=function(){var T=this.parseUShort();return ne.argument(T===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:T,coverage:this.parsePointer(_e.coverage),backtrackCoverage:this.parseList(_e.pointer(_e.coverage)),lookaheadCoverage:this.parseList(_e.pointer(_e.coverage)),substitutes:this.parseUShortList()}};var fo=new Array(9);fo[1]=function(T){return T.substFormat===1?new Ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ee.Coverage(T.coverage)},{name:"deltaGlyphID",type:"USHORT",value:T.deltaGlyphId}]):new Ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ee.Coverage(T.coverage)}].concat(Ee.ushortList("substitute",T.substitute)))},fo[3]=function(T){return ne.assert(T.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ee.Coverage(T.coverage)}].concat(Ee.tableList("altSet",T.alternateSets,function(j){return new Ee.Table("alternateSetTable",Ee.ushortList("alternate",j))})))},fo[4]=function(T){return ne.assert(T.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ee.Coverage(T.coverage)}].concat(Ee.tableList("ligSet",T.ligatureSets,function(j){return new Ee.Table("ligatureSetTable",Ee.tableList("ligature",j,function(D){return new Ee.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:D.ligGlyph}].concat(Ee.ushortList("component",D.components,D.components.length+1)))}))})))};var Tg=function(T,j){return j=(T=new _e(T,j=j||0)).parseVersion(1),ne.argument(j===1||j===1.1,"Unsupported GSUB table version."),j===1?{version:j,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Dr)}:{version:j,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Dr),variations:T.parseFeatureVariationsList()}},Ag=function(T){return new Ee.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ee.ScriptList(T.scripts)},{name:"features",type:"TABLE",value:new Ee.FeatureList(T.features)},{name:"lookups",type:"TABLE",value:new Ee.LookupList(T.lookups,fo)}])},uu=function(T,j){for(var D=new Fe.Parser(T,j),V=D.parseULong(),Y=(ne.argument(V===1,"Unsupported META table version."),D.parseULong(),D.parseULong(),D.parseULong()),Q={},te=0;te<Y;te++){var Me=D.parseTag(),Te=D.parseULong(),Pe=D.parseULong();Te=ee.UTF8(T,j+Te,Pe),Q[Me]=Te}return Q},cu=function(T){var j,D=Object.keys(T).length,V="",Y=16+12*D,Q=new Ee.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:Y},{name:"numTags",type:"ULONG",value:D}]);for(j in T){var te=V.length;V+=T[j],Q.fields.push({name:"tag "+j,type:"TAG",value:j}),Q.fields.push({name:"offset "+j,type:"ULONG",value:Y+te}),Q.fields.push({name:"length "+j,type:"ULONG",value:T[j].length})}return Q.fields.push({name:"stringPool",type:"CHARARRAY",value:V}),Q};function Ko(T){return Math.log(T)/Math.log(2)|0}function Ya(T){for(;T.length%4!=0;)T.push(0);for(var j=0,D=0;D<T.length;D+=4)j+=(T[D]<<24)+(T[D+1]<<16)+(T[D+2]<<8)+T[D+3];return j%Math.pow(2,32)}function Pf(T,j,D,V){return new Ee.Record("Table Record",[{name:"tag",type:"TAG",value:T!==void 0?T:""},{name:"checkSum",type:"ULONG",value:j!==void 0?j:0},{name:"offset",type:"ULONG",value:D!==void 0?D:0},{name:"length",type:"ULONG",value:V!==void 0?V:0}])}function Cg(T){for(var j=new Ee.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),D=(j.tables=T,j.numTables=T.length,Math.pow(2,Ko(j.numTables))),V=(j.searchRange=16*D,j.entrySelector=Ko(D),j.rangeShift=16*j.numTables-j.searchRange,[]),Y=[],Q=j.sizeOf()+Pf().sizeOf()*j.numTables;Q%4!=0;)Q+=1,Y.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<T.length;te+=1){var Me=T[te],Te=(ne.argument(Me.tableName.length===4,"Table name"+Me.tableName+" is invalid."),Me.sizeOf()),Pe=Pf(Me.tableName,Ya(Me.encode()),Q,Te);for(V.push({name:Pe.tag+" Table Record",type:"RECORD",value:Pe}),Y.push({name:Me.tableName+" table",type:"RECORD",value:Me}),Q+=Te,ne.argument(!isNaN(Q),"Something went wrong calculating the offset.");Q%4!=0;)Q+=1,Y.push({name:"padding",type:"BYTE",value:0})}return V.sort(function(De,He){return De.value.tag>He.value.tag?1:-1}),j.fields=j.fields.concat(V),j.fields=j.fields.concat(Y),j}function du(T,j,D){for(var V=0;V<j.length;V+=1){var Y=T.charToGlyphIndex(j[V]);if(0<Y)return T.glyphs.get(Y).getMetrics()}return D}var nd=function(T){for(var j,D=[],V=[],Y=[],Q=[],te=[],Me=[],Te=[],Pe=0,De=0,He=0,Xe=0,ke=0,yt=0;yt<T.glyphs.length;yt+=1){var $e=T.glyphs.get(yt),it=0|$e.unicode;if(isNaN($e.advanceWidth))throw new Error("Glyph "+$e.name+" ("+yt+"): advanceWidth is not a number.");if((it<j||j===void 0)&&0<it&&(j=it),Pe<it&&(Pe=it),(it=is(it))<32)De|=1<<it;else if(it<64)He|=1<<it-32;else if(it<96)Xe|=1<<it-64;else{if(!(it<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");ke|=1<<it-96}$e.name!==".notdef"&&(it=$e.getMetrics(),D.push(it.xMin),V.push(it.yMin),Y.push(it.xMax),Q.push(it.yMax),Me.push(it.leftSideBearing),Te.push(it.rightSideBearing),te.push($e.advanceWidth))}var tt,rt={xMin:Math.min.apply(null,D),yMin:Math.min.apply(null,V),xMax:Math.max.apply(null,Y),yMax:Math.max.apply(null,Q),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(Xn){for(var Rs=0,rl=0;rl<Xn.length;rl+=1)Rs+=Xn[rl];return Rs/Xn.length}(te),minLeftSideBearing:Math.min.apply(null,Me),maxLeftSideBearing:Math.max.apply(null,Me),minRightSideBearing:Math.min.apply(null,Te)},At=(rt.ascender=T.ascender,rt.descender=T.descender,Ae({flags:3,unitsPerEm:T.unitsPerEm,xMin:rt.xMin,yMin:rt.yMin,xMax:rt.xMax,yMax:rt.yMax,lowestRecPPEM:3,createdTimestamp:T.createdTimestamp})),Et=nt({ascender:rt.ascender,descender:rt.descender,advanceWidthMax:rt.advanceWidthMax,minLeftSideBearing:rt.minLeftSideBearing,minRightSideBearing:rt.minRightSideBearing,xMaxExtent:rt.maxLeftSideBearing+(rt.xMax-rt.xMin),numberOfHMetrics:T.glyphs.length}),wt=Ze(T.glyphs.length),nn=tr({xAvgCharWidth:Math.round(rt.advanceWidthAvg),usWeightClass:T.tables.os2.usWeightClass,usWidthClass:T.tables.os2.usWidthClass,usFirstCharIndex:j,usLastCharIndex:Pe,ulUnicodeRange1:De,ulUnicodeRange2:He,ulUnicodeRange3:Xe,ulUnicodeRange4:ke,fsSelection:T.tables.os2.fsSelection,sTypoAscender:rt.ascender,sTypoDescender:rt.descender,sTypoLineGap:0,usWinAscent:rt.yMax,usWinDescent:Math.abs(rt.yMin),ulCodePageRange1:1,sxHeight:du(T,"xyvw",{yMax:Math.round(rt.ascender/2)}).yMax,sCapHeight:du(T,"HIKLEFJMNTZBDPRAGOQSUVWXY",rt).yMax,usDefaultChar:T.hasChar(" ")?32:0,usBreakChar:T.hasChar(" ")?32:0}),Qt=Ie(T.glyphs),Cn=ft(T.glyphs),Bn=(Mn=T.getEnglishName("fontFamily"))+" "+(_n=T.getEnglishName("fontSubfamily")),Zt=(Zt=T.getEnglishName("postScriptName"))||Mn.replace(/\s/g,"")+"-"+_n,Sn={};for(tt in T.names)Sn[tt]=T.names[tt];Sn.uniqueID||(Sn.uniqueID={en:T.getEnglishName("manufacturer")+":"+Bn}),Sn.postScriptName||(Sn.postScriptName={en:Zt}),Sn.preferredFamily||(Sn.preferredFamily=T.names.fontFamily),Sn.preferredSubfamily||(Sn.preferredSubfamily=T.names.fontSubfamily);var Kt=rs(Sn,Jn=[]),Jn=0<Jn.length?st(Jn):void 0,zn=Cr(),Mn=(Bn=qo(T.glyphs,{version:T.getEnglishName("version"),fullName:Bn,familyName:Mn,weightName:_n,postScriptName:Zt,unitsPerEm:T.unitsPerEm,fontBBox:[0,rt.yMin,rt.ascender,rt.advanceWidthMax]}),T.metas&&0<Object.keys(T.metas).length?cu(T.metas):void 0),_n=[At,Et,wt,nn,Kt,Cn,zn,Bn,Qt];Jn&&_n.push(Jn),T.tables.gsub&&_n.push(Ag(T.tables.gsub)),Mn&&_n.push(Mn);for(var rn=Ya((Zt=Cg(_n)).encode()),yn=Zt.fields,bn=!1,kn=0;kn<yn.length;kn+=1)if(yn[kn].name==="head table"){yn[kn].value.checkSumAdjustment=2981146554-rn,bn=!0;break}if(bn)return Zt;throw new Error("Could not find head table with checkSum to adjust.")};function po(T,j){for(var D=0,V=T.length-1;D<=V;){var Y=D+V>>>1,Q=T[Y].tag;if(Q===j)return Y;Q<j?D=1+Y:V=Y-1}return-D-1}function Rf(T,j){for(var D=0,V=T.length-1;D<=V;){var Y=D+V>>>1,Q=T[Y];if(Q===j)return Y;Q<j?D=1+Y:V=Y-1}return-D-1}function hu(T,j){for(var D=0,V=T.length-1;D<=V;){var Y,Q=D+V>>>1,te=(Y=T[Q]).start;if(te===j)return Y;te<j?D=1+Q:V=Q-1}if(0<D)return j>(Y=T[D-1]).end?0:Y}function mn(T,j){this.font=T,this.tableName=j}function Za(T){mn.call(this,T,"gpos")}function Ei(T){mn.call(this,T,"gsub")}function rd(T,j,D){for(var V=T.subtables,Y=0;Y<V.length;Y++){var Q=V[Y];if(Q.substFormat===j)return Q}if(D)return V.push(D),D}function jf(T){for(var j=new ArrayBuffer(T.length),D=new Uint8Array(j),V=0;V<T.length;++V)D[V]=T[V];return j}function Jo(T,j){if(!T)throw j}function pr(T,j,D,V,Y){var Q=0<(j&V)?(Q=T.parseByte(),D+(Q=j&Y?Q:-Q)):0<(j&Y)?D:D+T.parseShort();return Q}function id(T,j,D){var V,Y=new Fe.Parser(j,D);if(T.numberOfContours=Y.parseShort(),T._xMin=Y.parseShort(),T._yMin=Y.parseShort(),T._xMax=Y.parseShort(),T._yMax=Y.parseShort(),0<T.numberOfContours){for(var Q=T.endPointIndices=[],te=0;te<T.numberOfContours;te+=1)Q.push(Y.parseUShort());T.instructionLength=Y.parseUShort(),T.instructions=[];for(var Me=0;Me<T.instructionLength;Me+=1)T.instructions.push(Y.parseByte());for(var Te=Q[Q.length-1]+1,Pe=[],De=0;De<Te;De+=1)if(V=Y.parseByte(),Pe.push(V),0<(8&V))for(var He=Y.parseByte(),Xe=0;Xe<He;Xe+=1)Pe.push(V),De+=1;if(ne.argument(Pe.length===Te,"Bad flags."),0<Q.length){var ke,yt=[];if(0<Te){for(var $e=0;$e<Te;$e+=1)V=Pe[$e],(ke={}).onCurve=!!(1&V),ke.lastPointOfContour=0<=Q.indexOf($e),yt.push(ke);for(var it=0,tt=0;tt<Te;tt+=1)V=Pe[tt],(ke=yt[tt]).x=pr(Y,V,it,2,16),it=ke.x;for(var rt=0,At=0;At<Te;At+=1)V=Pe[At],(ke=yt[At]).y=pr(Y,V,rt,4,32),rt=ke.y}T.points=yt}else T.points=[]}else if(T.numberOfContours===0)T.points=[];else{T.isComposite=!0,T.points=[],T.components=[];for(var Et=!0;Et;){Pe=Y.parseUShort();var wt={glyphIndex:Y.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&Pe)?0<(2&Pe)?(wt.dx=Y.parseShort(),wt.dy=Y.parseShort()):wt.matchedPoints=[Y.parseUShort(),Y.parseUShort()]:0<(2&Pe)?(wt.dx=Y.parseChar(),wt.dy=Y.parseChar()):wt.matchedPoints=[Y.parseByte(),Y.parseByte()],0<(8&Pe)?wt.xScale=wt.yScale=Y.parseF2Dot14():0<(64&Pe)?(wt.xScale=Y.parseF2Dot14(),wt.yScale=Y.parseF2Dot14()):0<(128&Pe)&&(wt.xScale=Y.parseF2Dot14(),wt.scale01=Y.parseF2Dot14(),wt.scale10=Y.parseF2Dot14(),wt.yScale=Y.parseF2Dot14()),T.components.push(wt),Et=!!(32&Pe)}if(256&Pe){T.instructionLength=Y.parseUShort(),T.instructions=[];for(var nn=0;nn<T.instructionLength;nn+=1)T.instructions.push(Y.parseByte())}}}function sd(T,j){for(var D=[],V=0;V<T.length;V+=1){var Y=T[V];Y={x:j.xScale*Y.x+j.scale01*Y.y+j.dx,y:j.scale10*Y.x+j.yScale*Y.y+j.dy,onCurve:Y.onCurve,lastPointOfContour:Y.lastPointOfContour},D.push(Y)}return D}function fu(T){var j=new H;if(T)for(var D=function(He){for(var Xe=[],ke=[],yt=0;yt<He.length;yt+=1){var $e=He[yt];ke.push($e),$e.lastPointOfContour&&(Xe.push(ke),ke=[])}return ne.argument(ke.length===0,"There are still points left in the current contour."),Xe}(T),V=0;V<D.length;++V){var Y,Q=D[V],te=Q[Q.length-1],Me=Q[0];te.onCurve?j.moveTo(te.x,te.y):Me.onCurve?j.moveTo(Me.x,Me.y):(Y={x:.5*(te.x+Me.x),y:.5*(te.y+Me.y)},j.moveTo(Y.x,Y.y));for(var Te=0;Te<Q.length;++Te){var Pe,De=te;te=Me,Me=Q[(Te+1)%Q.length],te.onCurve?j.lineTo(te.x,te.y):(Pe=Me,De.onCurve||(te.x,De.x,te.y,De.y),Me.onCurve||(Pe={x:.5*(te.x+Me.x),y:.5*(te.y+Me.y)}),j.quadraticCurveTo(te.x,te.y,Pe.x,Pe.y))}j.closePath()}return j}function Pg(T,j){if(j.isComposite)for(var D=0;D<j.components.length;D+=1){var V=j.components[D],Y=T.get(V.glyphIndex);if(Y.getPath(),Y.points){var Q=void 0;if(V.matchedPoints===void 0)Q=sd(Y.points,V);else{if(V.matchedPoints[0]>j.points.length-1||V.matchedPoints[1]>Y.points.length-1)throw Error("Matched points out of range in "+j.name);var te=j.points[V.matchedPoints[0]],Me=sd([Me=Y.points[V.matchedPoints[1]]],V={xScale:V.xScale,scale01:V.scale01,scale10:V.scale10,yScale:V.yScale,dx:0,dy:0})[0];V.dx=te.x-Me.x,V.dy=te.y-Me.y,Q=sd(Y.points,V)}j.points=j.points.concat(Q)}}return fu(j.points)}(Za.prototype=mn.prototype={searchTag:po,binSearch:Rf,getTable:function(T){var j=this.font.tables[this.tableName];return!j&&T?this.font.tables[this.tableName]=this.createDefaultTable():j},getScriptNames:function(){var T=this.getTable();return T?T.scripts.map(function(j){return j.tag}):[]},getDefaultScriptName:function(){var T=this.getTable();if(T){for(var j=!1,D=0;D<T.scripts.length;D++){var V=T.scripts[D].tag;if(V==="DFLT")return V;V==="latn"&&(j=!0)}return j?"latn":void 0}},getScriptTable:function(T,j){var D,V=this.getTable(j);if(V)return D=V.scripts,0<=(V=po(V.scripts,T=T||"DFLT"))?D[V].script:j?(D.splice(-1-V,0,j={tag:T,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),j.script):void 0},getLangSysTable:function(T,j,D){var V;if(T=this.getScriptTable(T,D))return j&&j!=="dflt"&&j!=="DFLT"?0<=(V=po(T.langSysRecords,j))?T.langSysRecords[V].langSys:D?(T.langSysRecords.splice(-1-V,0,D={tag:j,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),D.langSys):void 0:T.defaultLangSys},getFeatureTable:function(T,j,D,V){if(T=this.getLangSysTable(T,j,V)){for(var Y,Q=T.featureIndexes,te=this.font.tables[this.tableName].features,Me=0;Me<Q.length;Me++)if((Y=te[Q[Me]]).tag===D)return Y.feature;if(V)return j=te.length,ne.assert(j===0||D>=te[j-1].tag,"Features must be added in alphabetical order."),te.push(Y={tag:D,feature:{params:0,lookupListIndexes:[]}}),Q.push(j),Y.feature}},getLookupTables:function(T,j,D,V,Y){var Q=[];if(T=this.getFeatureTable(T,j,D,Y)){for(var te,Me=T.lookupListIndexes,Te=this.font.tables[this.tableName].lookups,Pe=0;Pe<Me.length;Pe++)(te=Te[Me[Pe]]).lookupType===V&&Q.push(te);if(Q.length===0&&Y)return j=Te.length,Te.push(te={lookupType:V,lookupFlag:0,subtables:[],markFilteringSet:void 0}),Me.push(j),[te]}return Q},getGlyphClass:function(T,j){switch(T.format){case 1:return T.startGlyph<=j&&j<T.startGlyph+T.classes.length?T.classes[j-T.startGlyph]:0;case 2:var D=hu(T.ranges,j);return D?D.classId:0}},getCoverageIndex:function(T,j){switch(T.format){case 1:var D=Rf(T.glyphs,j);return 0<=D?D:-1;case 2:return(D=hu(T.ranges,j))?D.index+j-D.start:-1}},expandCoverage:function(T){if(T.format===1)return T.glyphs;for(var j=[],D=T.ranges,V=0;V<D.length;V++)for(var Y=D[V],Q=Y.start,te=Y.end,Me=Q;Me<=te;Me++)j.push(Me);return j}}).init=function(){var T=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(T)},Za.prototype.getKerningValue=function(T,j,D){for(var V=0;V<T.length;V++)for(var Y=T[V].subtables,Q=0;Q<Y.length;Q++){var te=Y[Q],Me=this.getCoverageIndex(te.coverage,j);if(!(Me<0))switch(te.posFormat){case 1:for(var Te=te.pairSets[Me],Pe=0;Pe<Te.length;Pe++){var De=Te[Pe];if(De.secondGlyph===D)return De.value1&&De.value1.xAdvance||0}break;case 2:var He=this.getGlyphClass(te.classDef1,j),Xe=this.getGlyphClass(te.classDef2,D);return(He=te.classRecords[He][Xe]).value1&&He.value1.xAdvance||0}}return 0},Za.prototype.getKerningTables=function(T,j){if(this.font.tables.gpos)return this.getLookupTables(T,j,"kern",2)},(Ei.prototype=mn.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Ei.prototype.getSingle=function(T,j,D){for(var V=[],Y=this.getLookupTables(j,D,T,1),Q=0;Q<Y.length;Q++)for(var te=Y[Q].subtables,Me=0;Me<te.length;Me++){var Te=te[Me],Pe=this.expandCoverage(Te.coverage),De=void 0;if(Te.substFormat===1){var He=Te.deltaGlyphId;for(De=0;De<Pe.length;De++){var Xe=Pe[De];V.push({sub:Xe,by:Xe+He})}}else{var ke=Te.substitute;for(De=0;De<Pe.length;De++)V.push({sub:Pe[De],by:ke[De]})}}return V},Ei.prototype.getAlternates=function(T,j,D){for(var V=[],Y=this.getLookupTables(j,D,T,3),Q=0;Q<Y.length;Q++)for(var te=Y[Q].subtables,Me=0;Me<te.length;Me++)for(var Te=te[Me],Pe=this.expandCoverage(Te.coverage),De=Te.alternateSets,He=0;He<Pe.length;He++)V.push({sub:Pe[He],by:De[He]});return V},Ei.prototype.getLigatures=function(T,j,D){for(var V=[],Y=this.getLookupTables(j,D,T,4),Q=0;Q<Y.length;Q++)for(var te=Y[Q].subtables,Me=0;Me<te.length;Me++)for(var Te=te[Me],Pe=this.expandCoverage(Te.coverage),De=Te.ligatureSets,He=0;He<Pe.length;He++)for(var Xe=Pe[He],ke=De[He],yt=0;yt<ke.length;yt++){var $e=ke[yt];V.push({sub:[Xe].concat($e.components),by:$e.ligGlyph})}return V},Ei.prototype.addSingle=function(T,j,D,V){D=rd(this.getLookupTables(D,V,T,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),ne.assert(D.coverage.format===1,"Ligature: unable to modify coverage table format "+D.coverage.format),V=j.sub,(T=this.binSearch(D.coverage.glyphs,V))<0&&(D.coverage.glyphs.splice(T=-1-T,0,V),D.substitute.splice(T,0,0)),D.substitute[T]=j.by},Ei.prototype.addAlternate=function(T,j,D,V){D=rd(this.getLookupTables(D,V,T,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),ne.assert(D.coverage.format===1,"Ligature: unable to modify coverage table format "+D.coverage.format),V=j.sub,(T=this.binSearch(D.coverage.glyphs,V))<0&&(D.coverage.glyphs.splice(T=-1-T,0,V),D.alternateSets.splice(T,0,0)),D.alternateSets[T]=j.by},Ei.prototype.addLigature=function(T,j,D,V){(V=(D=this.getLookupTables(D,V,T,4,!0)[0]).subtables[0])||(D.subtables[0]=V={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),ne.assert(V.coverage.format===1,"Ligature: unable to modify coverage table format "+V.coverage.format),T=j.sub[0];var Y=j.sub.slice(1);if(D={ligGlyph:j.by,components:Y},0<=(j=this.binSearch(V.coverage.glyphs,T))){for(var Q=V.ligatureSets[j],te=0;te<Q.length;te++)if(function(Me,Te){var Pe=Me.length;if(Pe===Te.length){for(var De=0;De<Pe;De++)if(Me[De]!==Te[De])return;return 1}}(Q[te].components,Y))return;Q.push(D)}else V.coverage.glyphs.splice(j=-1-j,0,T),V.ligatureSets.splice(j,0,[D])},Ei.prototype.getFeature=function(T,j,D){if(/ss\d\d/.test(T))return this.getSingle(T,j,D);switch(T){case"aalt":case"salt":return this.getSingle(T,j,D).concat(this.getAlternates(T,j,D));case"dlig":case"liga":case"rlig":return this.getLigatures(T,j,D)}},Ei.prototype.add=function(T,j,D,V){if(/ss\d\d/.test(T))return this.addSingle(T,j,D,V);switch(T){case"aalt":case"salt":return typeof j.by=="number"?this.addSingle(T,j,D,V):this.addAlternate(T,j,D,V);case"dlig":case"liga":case"rlig":return this.addLigature(T,j,D,V)}};var Ka={getPath:fu,parse:function(T,j,D,V){for(var Y=new Qe.GlyphSet(V),Q=0;Q<D.length-1;Q+=1){var te=D[Q];te!==D[Q+1]?Y.push(Q,Qe.ttfGlyphLoader(V,Q,id,T,j+te,Pg)):Y.push(Q,Qe.glyphLoader(V,Q))}return Y}};function Ui(T){this.font=T,this.getCommands=function(j){return Ka.getPath(j).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Rg(T){return T}function Lf(T){return Math.sign(T)*Math.round(Math.abs(T))}function ss(T){return Math.sign(T)*Math.round(Math.abs(2*T))/2}function bs(T){return Math.sign(T)*(Math.round(Math.abs(T)+.5)-.5)}function pu(T){return Math.sign(T)*Math.ceil(Math.abs(T))}function od(T){return Math.sign(T)*Math.floor(Math.abs(T))}function ad(T){var j=this.srPeriod,D=this.srPhase,V=1;return T<0&&(T=-T,V=-1),T+=this.srThreshold-D,T=Math.trunc(T/j)*j,(T+=D)<0?D*V:T*V}var os={x:1,y:0,axis:"x",distance:function(T,j,D,V){return(D?T.xo:T.x)-(V?j.xo:j.x)},interpolate:function(T,j,D,V){var Y,Q,te,Me,Te,Pe,De;if(!V||V===this)return Y=T.xo-j.xo,Q=T.xo-D.xo,Te=j.x-j.xo,Pe=D.x-D.xo,(De=(te=Math.abs(Y))+(Me=Math.abs(Q)))===0?void(T.x=T.xo+(Te+Pe)/2):void(T.x=T.xo+(Te*Me+Pe*te)/De);Y=V.distance(T,j,!0,!0),Q=V.distance(T,D,!0,!0),Te=V.distance(j,j,!1,!0),Pe=V.distance(D,D,!1,!0),(De=(te=Math.abs(Y))+(Me=Math.abs(Q)))===0?os.setRelative(T,T,(Te+Pe)/2,V,!0):os.setRelative(T,T,(Te*Me+Pe*te)/De,V,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(T,j,D,V,Y){var Q,te;V&&V!==this?(Q=Y?j.xo:j.x,te=Y?j.yo:j.y,Q+=D*V.x,te+=D*V.y,T.x=Q+(T.y-te)/V.normalSlope):T.x=(Y?j.xo:j.x)+D},slope:0,touch:function(T){T.xTouched=!0},touched:function(T){return T.xTouched},untouch:function(T){T.xTouched=!1}},wr={x:0,y:1,axis:"y",distance:function(T,j,D,V){return(D?T.yo:T.y)-(V?j.yo:j.y)},interpolate:function(T,j,D,V){var Y,Q,te,Me,Te,Pe,De;if(!V||V===this)return Y=T.yo-j.yo,Q=T.yo-D.yo,Te=j.y-j.yo,Pe=D.y-D.yo,(De=(te=Math.abs(Y))+(Me=Math.abs(Q)))===0?void(T.y=T.yo+(Te+Pe)/2):void(T.y=T.yo+(Te*Me+Pe*te)/De);Y=V.distance(T,j,!0,!0),Q=V.distance(T,D,!0,!0),Te=V.distance(j,j,!1,!0),Pe=V.distance(D,D,!1,!0),(De=(te=Math.abs(Y))+(Me=Math.abs(Q)))===0?wr.setRelative(T,T,(Te+Pe)/2,V,!0):wr.setRelative(T,T,(Te*Me+Pe*te)/De,V,!0)},normalSlope:0,setRelative:function(T,j,D,V,Y){var Q,te;V&&V!==this?(Q=Y?j.xo:j.x,te=Y?j.yo:j.y,Q+=D*V.x,te+=D*V.y,T.y=te+V.normalSlope*(T.x-Q)):T.y=(Y?j.yo:j.y)+D},slope:Number.POSITIVE_INFINITY,touch:function(T){T.yTouched=!0},touched:function(T){return T.yTouched},untouch:function(T){T.yTouched=!1}};function Ja(T,j){this.x=T,this.y=j,this.axis=void 0,this.slope=j/T,this.normalSlope=-T/j,Object.freeze(this)}function Ys(T,j){var D=Math.sqrt(T*T+j*j);return j/=D,(T/=D)==1&&j===0?os:T===0&&j===1?wr:new Ja(T,j)}function ws(T,j,D,V){this.x=this.xo=Math.round(64*T)/64,this.y=this.yo=Math.round(64*j)/64,this.lastPointOfContour=D,this.onCurve=V,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(os),Object.freeze(wr),Ja.prototype.distance=function(T,j,D,V){return this.x*os.distance(T,j,D,V)+this.y*wr.distance(T,j,D,V)},Ja.prototype.interpolate=function(T,j,D,V){var Y=V.distance(T,j,!0,!0),Q=V.distance(T,D,!0,!0),te=(j=V.distance(j,j,!1,!0),D=V.distance(D,D,!1,!0),(Y=Math.abs(Y))+(Q=Math.abs(Q)));te===0?this.setRelative(T,T,(j+D)/2,V,!0):this.setRelative(T,T,(j*Q+D*Y)/te,V,!0)},Ja.prototype.setRelative=function(T,j,D,V,Y){var Q=Y?j.xo:j.x,te=(Y=Y?j.yo:j.y,j=Q+D*(V=V||this).x,Q=Y+D*V.y,Y=V.normalSlope,D=this.slope,V=T.x,T.y);T.x=(D*V-Y*j+Q-te)/(D-Y),T.y=D*(T.x-V)+te},Ja.prototype.touch=function(T){T.xTouched=!0,T.yTouched=!0},ws.prototype.nextTouched=function(T){for(var j=this.nextPointOnContour;!T.touched(j)&&j!==this;)j=j.nextPointOnContour;return j},ws.prototype.prevTouched=function(T){for(var j=this.prevPointOnContour;!T.touched(j)&&j!==this;)j=j.prevPointOnContour;return j};var Vr=Object.freeze(new ws(0,0)),mu={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Fi(T,j){switch(this.env=T,this.stack=[],this.prog=j,T){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=os,this.round=Lf}}function Ss(T){for(var j=T.tZone=new Array(T.gZone.length),D=0;D<j.length;D++)j[D]=new ws(0,0)}function yu(T,j){var D,V=T.prog,Y=T.ip,Q=1;do if((D=V[++Y])===88)Q++;else if(D===89)Q--;else if(D===64)Y+=V[Y+1]+1;else if(D===65)Y+=2*V[Y+1]+1;else if(176<=D&&D<=183)Y+=D-176+1;else if(184<=D&&D<=191)Y+=2*(D-184+1);else if(j&&Q===1&&D===27)break;while(0<Q);T.ip=Y}function gu(T,j){l.DEBUG&&console.log(j.step,"SVTCA["+T.axis+"]"),j.fv=j.pv=j.dpv=T}function ld(T,j){l.DEBUG&&console.log(j.step,"SPVTCA["+T.axis+"]"),j.pv=j.dpv=T}function vu(T,j){l.DEBUG&&console.log(j.step,"SFVTCA["+T.axis+"]"),j.fv=T}function _u(T,j){var D,V=(Y=j.stack).pop(),Y=Y.pop(),Q=j.z2[V],te=j.z1[Y];l.DEBUG&&console.log("SPVTL["+T+"]",V,Y),V=T?(D=Q.y-te.y,te.x-Q.x):(D=te.x-Q.x,te.y-Q.y),j.pv=j.dpv=Ys(D,V)}function mo(T,j){var D,V=(Y=j.stack).pop(),Y=Y.pop(),Q=j.z2[V],te=j.z1[Y];l.DEBUG&&console.log("SFVTL["+T+"]",V,Y),V=T?(D=Q.y-te.y,te.x-Q.x):(D=te.x-Q.x,te.y-Q.y),j.fv=Ys(D,V)}function Zr(T){l.DEBUG&&console.log(T.step,"POP[]"),T.stack.pop()}function Bi(T,j){var D=j.stack.pop(),V=j.z0[D],Y=j.fv,Q=j.pv,te=(l.DEBUG&&console.log(j.step,"MDAP["+T+"]",D),Q.distance(V,Vr));T&&(te=j.round(te)),Y.setRelative(V,Vr,te,Q),Y.touch(V),j.rp0=j.rp1=D}function Ms(T,j){var D,V,Y,Q=j.z2,te=Q.length-2;l.DEBUG&&console.log(j.step,"IUP["+T.axis+"]");for(var Me=0;Me<te;Me++)D=Q[Me],T.touched(D)||(V=D.prevTouched(T))!==D&&(V===(Y=D.nextTouched(T))&&T.setRelative(D,D,T.distance(V,V,!1,!0),T,!0),T.interpolate(D,V,Y,T))}function xu(T,j){for(var D=j.stack,V=T?j.rp1:j.rp2,Y=(T?j.z0:j.z1)[V],Q=j.fv,te=j.pv,Me=j.loop,Te=j.z2;Me--;){var Pe=D.pop(),De=Te[Pe],He=te.distance(Y,Y,!1,!0);Q.setRelative(De,De,He,te),Q.touch(De),l.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-Me)+": ":"")+"SHP["+(T?"rp1":"rp2")+"]",Pe)}j.loop=1}function ud(T,j){for(var D=j.stack,V=T?j.rp1:j.rp2,Y=(T?j.z0:j.z1)[V],Q=j.fv,te=j.pv,Me=(V=D.pop(),j.z2[j.contours[V]]),Te=Me,Pe=(l.DEBUG&&console.log(j.step,"SHC["+T+"]",V),te.distance(Y,Y,!1,!0));Te!==Y&&Q.setRelative(Te,Te,Pe,te),(Te=Te.nextPointOnContour)!==Me;);}function as(T,j){var D,V,Y=j.stack,Q=T?j.rp1:j.rp2,te=(Q=(T?j.z0:j.z1)[Q],j.fv),Me=j.pv;switch(Y=Y.pop(),l.DEBUG&&console.log(j.step,"SHZ["+T+"]",Y),Y){case 0:D=j.tZone;break;case 1:D=j.gZone;break;default:throw new Error("Invalid zone")}for(var Te=Me.distance(Q,Q,!1,!0),Pe=D.length-2,De=0;De<Pe;De++)V=D[De],te.setRelative(V,V,Te,Me)}function Es(T,j){var D=(V=j.stack).pop()/64,V=V.pop(),Y=j.z1[V],Q=j.z0[j.rp0],te=j.fv,Me=j.pv;te.setRelative(Y,Q,D,Me),te.touch(Y),l.DEBUG&&console.log(j.step,"MSIRP["+T+"]",D,V),j.rp1=j.rp0,j.rp2=V,T&&(j.rp0=V)}function Qa(T,j){var D=(V=j.stack).pop(),V=V.pop(),Y=j.z0[V],Q=j.fv,te=j.pv,Me=j.cvt[D];l.DEBUG&&console.log(j.step,"MIAP["+T+"]",D,"(",Me,")",V),D=te.distance(Y,Vr),T&&(Math.abs(D-Me)<j.cvCutIn&&(D=Me),D=j.round(D)),Q.setRelative(Y,Vr,D,te),j.zp0===0&&(Y.xo=Y.x,Y.yo=Y.y),Q.touch(Y),j.rp0=j.rp1=V}function cd(T,j){var D=j.stack,V=D.pop(),Y=j.z2[V];l.DEBUG&&console.log(j.step,"GC["+T+"]",V),D.push(64*j.dpv.distance(Y,Vr,T,!1))}function $a(T,j){var D=(V=j.stack).pop(),V=V.pop(),Y=j.z1[D],Q=j.z0[V];Q=j.dpv.distance(Q,Y,T,T),l.DEBUG&&console.log(j.step,"MD["+T+"]",D,V,"->",Q),j.stack.push(Math.round(64*Q))}function bu(T,j){var D=j.stack,V=D.pop(),Y=j.fv,Q=j.pv,te=j.ppem,Me=j.deltaBase+16*(T-1),Te=j.deltaShift,Pe=j.z0;l.DEBUG&&console.log(j.step,"DELTAP["+T+"]",V,D);for(var De=0;De<V;De++){var He=D.pop(),Xe=D.pop();Me+((240&Xe)>>4)===te&&(0<=(Xe=(15&Xe)-8)&&Xe++,l.DEBUG&&console.log(j.step,"DELTAPFIX",He,"by",Xe*Te),He=Pe[He],Y.setRelative(He,He,Xe*Te,Q))}}function el(T,j){var D=j.stack,V=D.pop();l.DEBUG&&console.log(j.step,"ROUND[]"),D.push(64*j.round(V/64))}function tl(T,j){var D=j.stack,V=D.pop(),Y=j.ppem,Q=j.deltaBase+16*(T-1),te=j.deltaShift;l.DEBUG&&console.log(j.step,"DELTAC["+T+"]",V,D);for(var Me=0;Me<V;Me++){var Te=D.pop(),Pe=D.pop();Q+((240&Pe)>>4)===Y&&(0<=(Pe=(15&Pe)-8)&&Pe++,Pe*=te,l.DEBUG&&console.log(j.step,"DELTACFIX",Te,"by",Pe),j.cvt[Te]+=Pe)}}function nl(T,j){var D,V=(Y=j.stack).pop(),Y=Y.pop(),Q=j.z2[V],te=j.z1[Y];l.DEBUG&&console.log(j.step,"SDPVTL["+T+"]",V,Y),V=T?(D=Q.y-te.y,te.x-Q.x):(D=te.x-Q.x,te.y-Q.y),j.dpv=Ys(D,V)}function Ts(T,j){var D=j.stack,V=j.prog,Y=j.ip;l.DEBUG&&console.log(j.step,"PUSHB["+T+"]");for(var Q=0;Q<T;Q++)D.push(V[++Y]);j.ip=Y}function As(T,j){var D=j.ip,V=j.prog,Y=j.stack;l.DEBUG&&console.log(j.ip,"PUSHW["+T+"]");for(var Q=0;Q<T;Q++){var te=V[++D]<<8|V[++D];32768&te&&(te=-(1+(65535^te))),Y.push(te)}j.ip=D}function Dt(T,j,D,V,Y,Q){var te,Me,Te=Q.stack,Pe=T&&Te.pop(),De=(Te=Te.pop(),Q.rp0),He=(De=Q.z0[De],Q.z1[Te]),Xe=Q.minDis,ke=Q.fv,yt=Q.dpv,$e=te=yt.distance(He,De,!0,!0),it=0<=$e?1:-1;$e=Math.abs($e),T&&(Me=Q.cvt[Pe],V&&Math.abs($e-Me)<Q.cvCutIn&&($e=Me)),D&&$e<Xe&&($e=Xe),V&&($e=Q.round($e)),ke.setRelative(He,De,it*$e,yt),ke.touch(He),l.DEBUG&&console.log(Q.step,(T?"MIRP[":"MDRP[")+(j?"M":"m")+(D?">":"_")+(V?"R":"_")+(Y===0?"Gr":Y===1?"Bl":Y===2?"Wh":"")+"]",T?Pe+"("+Q.cvt[Pe]+","+Me+")":"",Te,"(d =",te,"->",it*$e,")"),Q.rp1=Q.rp0,Q.rp2=Te,j&&(Q.rp0=Te)}Ui.prototype.exec=function(T,j){if(typeof j!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var D=this.font,V=this._prepState;if(!V||V.ppem!==j){var Y=this._fpgmState;if(!Y){Fi.prototype=mu,(Y=this._fpgmState=new Fi("fpgm",D.tables.fpgm)).funcs=[],Y.font=D,l.DEBUG&&(console.log("---EXEC FPGM---"),Y.step=-1);try{zi(Y)}catch(Pe){return console.log("Hinting error in FPGM:"+Pe),void(this._errorState=3)}}Fi.prototype=Y,(V=this._prepState=new Fi("prep",D.tables.prep)).ppem=j;var Q=D.tables.cvt;if(Q)for(var te=V.cvt=new Array(Q.length),Me=j/D.unitsPerEm,Te=0;Te<Q.length;Te++)te[Te]=Q[Te]*Me;else V.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),V.step=-1);try{zi(V)}catch(Pe){this._errorState<2&&console.log("Hinting error in PREP:"+Pe),this._errorState=2}}if(!(1<this._errorState))try{return dd(T,V)}catch(Pe){this._errorState<1&&(console.log("Hinting error:"+Pe),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var dd=function(T,j){var D=j.ppem/j.font.unitsPerEm,V=D,Y=T.components;if(Fi.prototype=j,Y){for(var Q=j.font,te=[],Me=[],Te=0;Te<Y.length;Te++){var Pe=Y[Te],De=Q.glyphs.get(Pe.glyphIndex),He=new Fi("glyf",De.instructions);l.DEBUG&&(console.log("---EXEC COMP "+Te+"---"),He.step=-1),yo(De,He,D,V);for(var Xe=Math.round(Pe.dx*D),ke=Math.round(Pe.dy*V),yt=He.gZone,$e=He.contours,it=0;it<yt.length;it++){var tt=yt[it];tt.xTouched=tt.yTouched=!1,tt.xo=tt.x=tt.x+Xe,tt.yo=tt.y=tt.y+ke}var rt=te.length;te.push.apply(te,yt);for(var At=0;At<$e.length;At++)Me.push($e[At]+rt)}T.instructions&&!He.inhibitGridFit&&((He=new Fi("glyf",T.instructions)).gZone=He.z0=He.z1=He.z2=te,He.contours=Me,te.push(new ws(0,0),new ws(Math.round(T.advanceWidth*D),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),He.step=-1),zi(He),te.length-=2)}else He=new Fi("glyf",T.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),He.step=-1),yo(T,He,D,V),te=He.gZone;return te},yo=function(T,j,D,V){for(var Y,Q,te,Me=T.points||[],Te=Me.length,Pe=j.gZone=j.z0=j.z1=j.z2=[],De=j.contours=[],He=0;He<Te;He++)Y=Me[He],Pe[He]=new ws(Y.x*D,Y.y*V,Y.lastPointOfContour,Y.onCurve);for(var Xe=0;Xe<Te;Xe++)Y=Pe[Xe],Q||(Q=Y,De.push(Xe)),Y.lastPointOfContour?((Y.nextPointOnContour=Q).prevPointOnContour=Y,Q=void 0):(te=Pe[Xe+1],(Y.nextPointOnContour=te).prevPointOnContour=Y);if(!j.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",j.stack);for(var ke=0;ke<Te;ke++)console.log(ke,Pe[ke].x,Pe[ke].y)}if(Pe.push(new ws(0,0),new ws(Math.round(T.advanceWidth*D),0)),zi(j),Pe.length-=2,l.DEBUG){console.log("FINISHED GLYPH",j.stack);for(var yt=0;yt<Te;yt++)console.log(yt,Pe[yt].x,Pe[yt].y)}}},zi=function(T){var j=T.prog;if(j){var D,V=j.length;for(T.ip=0;T.ip<V;T.ip++){if(l.DEBUG&&T.step++,!(D=wu[j[T.ip]]))throw new Error("unknown instruction: 0x"+Number(j[T.ip]).toString(16));D(T)}}},wu=[gu.bind(void 0,wr),gu.bind(void 0,os),ld.bind(void 0,wr),ld.bind(void 0,os),vu.bind(void 0,wr),vu.bind(void 0,os),_u.bind(void 0,0),_u.bind(void 0,1),mo.bind(void 0,0),mo.bind(void 0,1),function(T){var j=(D=T.stack).pop(),D=D.pop();l.DEBUG&&console.log(T.step,"SPVFS[]",j,D),T.pv=T.dpv=Ys(D,j)},function(T){var j=(D=T.stack).pop(),D=D.pop();l.DEBUG&&console.log(T.step,"SPVFS[]",j,D),T.fv=Ys(D,j)},function(T){var j=T.stack,D=T.pv;l.DEBUG&&console.log(T.step,"GPV[]"),j.push(16384*D.x),j.push(16384*D.y)},function(T){var j=T.stack,D=T.fv;l.DEBUG&&console.log(T.step,"GFV[]"),j.push(16384*D.x),j.push(16384*D.y)},function(T){T.fv=T.pv,l.DEBUG&&console.log(T.step,"SFVTPV[]")},function(T){var j=(Q=T.stack).pop(),D=Q.pop(),V=Q.pop(),Y=Q.pop(),Q=Q.pop(),te=T.z0,Me=T.z1,Te=te[j],Pe=(te=te[D],Me[V]),De=(Me=Me[Y],T=T.z2[Q],j=(l.DEBUG&&console.log("ISECT[], ",j,D,V,Y,Q),Te.x),D=Te.y,V=te.x,Y=te.y,Q=Pe.x,Te=Pe.y,te=Me.x,Me=(j-V)*(Te-(Pe=Me.y))-(D-Y)*(Q-te),j*Y-D*V),He=Q*Pe-Te*te;T.x=(De*(Q-te)-He*(j-V))/Me,T.y=(De*(Te-Pe)-He*(D-Y))/Me},function(T){T.rp0=T.stack.pop(),l.DEBUG&&console.log(T.step,"SRP0[]",T.rp0)},function(T){T.rp1=T.stack.pop(),l.DEBUG&&console.log(T.step,"SRP1[]",T.rp1)},function(T){T.rp2=T.stack.pop(),l.DEBUG&&console.log(T.step,"SRP2[]",T.rp2)},function(T){var j=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"SZP0[]",j),T.zp0=j){case 0:T.tZone||Ss(T),T.z0=T.tZone;break;case 1:T.z0=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var j=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"SZP1[]",j),T.zp1=j){case 0:T.tZone||Ss(T),T.z1=T.tZone;break;case 1:T.z1=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var j=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"SZP2[]",j),T.zp2=j){case 0:T.tZone||Ss(T),T.z2=T.tZone;break;case 1:T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){var j=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"SZPS[]",j),T.zp0=T.zp1=T.zp2=j){case 0:T.tZone||Ss(T),T.z0=T.z1=T.z2=T.tZone;break;case 1:T.z0=T.z1=T.z2=T.gZone;break;default:throw new Error("Invalid zone pointer")}},function(T){T.loop=T.stack.pop(),l.DEBUG&&console.log(T.step,"SLOOP[]",T.loop)},function(T){l.DEBUG&&console.log(T.step,"RTG[]"),T.round=Lf},function(T){l.DEBUG&&console.log(T.step,"RTHG[]"),T.round=bs},function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"SMD[]",j),T.minDis=j/64},function(T){l.DEBUG&&console.log(T.step,"ELSE[]"),yu(T,!1)},function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"JMPR[]",j),T.ip+=j-1},function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"SCVTCI[]",j),T.cvCutIn=j/64},void 0,void 0,function(T){var j=T.stack;l.DEBUG&&console.log(T.step,"DUP[]"),j.push(j[j.length-1])},Zr,function(T){l.DEBUG&&console.log(T.step,"CLEAR[]"),T.stack.length=0},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"SWAP[]"),j.push(D),j.push(V)},function(T){var j=T.stack;l.DEBUG&&console.log(T.step,"DEPTH[]"),j.push(j.length)},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"CINDEX[]",D),j.push(j[j.length-D])},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"MINDEX[]",D),j.push(j.splice(j.length-D,1)[0])},void 0,void 0,void 0,function(T){var j=(V=T.stack).pop(),D=V.pop(),V=(l.DEBUG&&console.log(T.step,"LOOPCALL[]",j,D),T.ip),Y=T.prog;T.prog=T.funcs[j];for(var Q=0;Q<D;Q++)zi(T),l.DEBUG&&console.log(++T.step,Q+1<D?"next loopcall":"done loopcall",Q);T.ip=V,T.prog=Y},function(T){var j=T.stack.pop(),D=(l.DEBUG&&console.log(T.step,"CALL[]",j),T.ip),V=T.prog;T.prog=T.funcs[j],zi(T),T.ip=D,T.prog=V,l.DEBUG&&console.log(++T.step,"returning from",j)},function(T){if(T.env!=="fpgm")throw new Error("FDEF not allowed here");var j=T.stack,D=T.prog,V=T.ip,Y=(j=j.pop(),V);for(l.DEBUG&&console.log(T.step,"FDEF[]",j);D[++V]!==45;);T.ip=V,T.funcs[j]=D.slice(Y+1,V)},void 0,Bi.bind(void 0,0),Bi.bind(void 0,1),Ms.bind(void 0,wr),Ms.bind(void 0,os),xu.bind(void 0,0),xu.bind(void 0,1),ud.bind(void 0,0),ud.bind(void 0,1),as.bind(void 0,0),as.bind(void 0,1),function(T){for(var j=T.stack,D=T.loop,V=T.fv,Y=j.pop()/64,Q=T.z2;D--;){var te=j.pop(),Me=Q[te];l.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-D)+": ":"")+"SHPIX[]",te,Y),V.setRelative(Me,Me,Y),V.touch(Me)}T.loop=1},function(T){for(var j=T.stack,D=T.rp1,V=T.rp2,Y=T.loop,Q=T.z0[D],te=T.z1[V],Me=T.fv,Te=T.dpv,Pe=T.z2;Y--;){var De=j.pop(),He=Pe[De];l.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-Y)+": ":"")+"IP[]",De,D,"<->",V),Me.interpolate(He,Q,te,Te),Me.touch(He)}T.loop=1},Es.bind(void 0,0),Es.bind(void 0,1),function(T){for(var j=T.stack,D=T.rp0,V=T.z0[D],Y=T.loop,Q=T.fv,te=T.pv,Me=T.z1;Y--;){var Te=j.pop(),Pe=Me[Te];l.DEBUG&&console.log(T.step,(1<T.loop?"loop "+(T.loop-Y)+": ":"")+"ALIGNRP[]",Te),Q.setRelative(Pe,V,0,te),Q.touch(Pe)}T.loop=1},function(T){l.DEBUG&&console.log(T.step,"RTDG[]"),T.round=ss},Qa.bind(void 0,0),Qa.bind(void 0,1),function(T){var j=T.prog,D=T.ip,V=T.stack,Y=j[++D];l.DEBUG&&console.log(T.step,"NPUSHB[]",Y);for(var Q=0;Q<Y;Q++)V.push(j[++D]);T.ip=D},function(T){var j=T.ip,D=T.prog,V=T.stack,Y=D[++j];l.DEBUG&&console.log(T.step,"NPUSHW[]",Y);for(var Q=0;Q<Y;Q++){var te=D[++j]<<8|D[++j];32768&te&&(te=-(1+(65535^te))),V.push(te)}T.ip=j},function(T){var j=T.stack,D=(D=T.store)||(T.store=[]),V=j.pop();j=j.pop(),l.DEBUG&&console.log(T.step,"WS",V,j),D[j]=V},function(T){var j=T.stack,D=T.store,V=j.pop();l.DEBUG&&console.log(T.step,"RS",V),T=D&&D[V]||0,j.push(T)},function(T){var j=(D=T.stack).pop(),D=D.pop();l.DEBUG&&console.log(T.step,"WCVTP",j,D),T.cvt[D]=j/64},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"RCVT",D),j.push(64*T.cvt[D])},cd.bind(void 0,0),cd.bind(void 0,1),void 0,$a.bind(void 0,0),$a.bind(void 0,1),function(T){l.DEBUG&&console.log(T.step,"MPPEM[]"),T.stack.push(T.ppem)},void 0,function(T){l.DEBUG&&console.log(T.step,"FLIPON[]"),T.autoFlip=!0},void 0,void 0,function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"LT[]",D,V),j.push(V<D?1:0)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"LTEQ[]",D,V),j.push(V<=D?1:0)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"GT[]",D,V),j.push(D<V?1:0)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"GTEQ[]",D,V),j.push(D<=V?1:0)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"EQ[]",D,V),j.push(D===V?1:0)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"NEQ[]",D,V),j.push(D!==V?1:0)},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"ODD[]",D),j.push(Math.trunc(D)%2?1:0)},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"EVEN[]",D),j.push(Math.trunc(D)%2?0:1)},function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"IF[]",j),j||(yu(T,!0),l.DEBUG&&console.log(T.step,"EIF[]"))},function(T){l.DEBUG&&console.log(T.step,"EIF[]")},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"AND[]",D,V),j.push(D&&V?1:0)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"OR[]",D,V),j.push(D||V?1:0)},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"NOT[]",D),j.push(D?0:1)},bu.bind(void 0,1),function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"SDB[]",j),T.deltaBase=j},function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"SDS[]",j),T.deltaShift=Math.pow(.5,j)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"ADD[]",D,V),j.push(V+D)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"SUB[]",D,V),j.push(V-D)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"DIV[]",D,V),j.push(64*V/D)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"MUL[]",D,V),j.push(V*D/64)},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"ABS[]",D),j.push(Math.abs(D))},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"NEG[]",D),j.push(-D)},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"FLOOR[]",D),j.push(64*Math.floor(D/64))},function(T){var j=T.stack,D=j.pop();l.DEBUG&&console.log(T.step,"CEILING[]",D),j.push(64*Math.ceil(D/64))},el.bind(void 0,0),el.bind(void 0,1),el.bind(void 0,2),el.bind(void 0,3),void 0,void 0,void 0,void 0,function(T){var j=(D=T.stack).pop(),D=D.pop();l.DEBUG&&console.log(T.step,"WCVTF[]",j,D),T.cvt[D]=j*T.ppem/T.font.unitsPerEm},bu.bind(void 0,2),bu.bind(void 0,3),tl.bind(void 0,1),tl.bind(void 0,2),tl.bind(void 0,3),function(T){var j,D=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"SROUND[]",D),T.round=ad,192&D){case 0:j=.5;break;case 64:j=1;break;case 128:j=2;break;default:throw new Error("invalid SROUND value")}switch(T.srPeriod=j,48&D){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*j;break;case 32:T.srPhase=.5*j;break;case 48:T.srPhase=.75*j;break;default:throw new Error("invalid SROUND value")}T.srThreshold=(D&=15)==0?0:(D/8-.5)*j},function(T){var j,D=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"S45ROUND[]",D),T.round=ad,192&D){case 0:j=Math.sqrt(2)/2;break;case 64:j=Math.sqrt(2);break;case 128:j=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(T.srPeriod=j,48&D){case 0:T.srPhase=0;break;case 16:T.srPhase=.25*j;break;case 32:T.srPhase=.5*j;break;case 48:T.srPhase=.75*j;break;default:throw new Error("invalid S45ROUND value")}T.srThreshold=(D&=15)==0?0:(D/8-.5)*j},void 0,void 0,function(T){l.DEBUG&&console.log(T.step,"ROFF[]"),T.round=Rg},void 0,function(T){l.DEBUG&&console.log(T.step,"RUTG[]"),T.round=pu},function(T){l.DEBUG&&console.log(T.step,"RDTG[]"),T.round=od},Zr,Zr,void 0,void 0,void 0,void 0,void 0,function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"SCANCTRL[]",j)},nl.bind(void 0,0),nl.bind(void 0,1),function(T){var j=T.stack,D=j.pop(),V=0;l.DEBUG&&console.log(T.step,"GETINFO[]",D),1&D&&(V=35),32&D&&(V|=4096),j.push(V)},void 0,function(T){var j=T.stack,D=j.pop(),V=j.pop(),Y=j.pop();l.DEBUG&&console.log(T.step,"ROLL[]"),j.push(V),j.push(D),j.push(Y)},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"MAX[]",D,V),j.push(Math.max(V,D))},function(T){var j=T.stack,D=j.pop(),V=j.pop();l.DEBUG&&console.log(T.step,"MIN[]",D,V),j.push(Math.min(V,D))},function(T){var j=T.stack.pop();l.DEBUG&&console.log(T.step,"SCANTYPE[]",j)},function(T){var j=T.stack.pop(),D=T.stack.pop();switch(l.DEBUG&&console.log(T.step,"INSTCTRL[]",j,D),j){case 1:return void(T.inhibitGridFit=!!D);case 2:return void(T.ignoreCvt=!!D);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Ts.bind(void 0,1),Ts.bind(void 0,2),Ts.bind(void 0,3),Ts.bind(void 0,4),Ts.bind(void 0,5),Ts.bind(void 0,6),Ts.bind(void 0,7),Ts.bind(void 0,8),As.bind(void 0,1),As.bind(void 0,2),As.bind(void 0,3),As.bind(void 0,4),As.bind(void 0,5),As.bind(void 0,6),As.bind(void 0,7),As.bind(void 0,8),Dt.bind(void 0,0,0,0,0,0),Dt.bind(void 0,0,0,0,0,1),Dt.bind(void 0,0,0,0,0,2),Dt.bind(void 0,0,0,0,0,3),Dt.bind(void 0,0,0,0,1,0),Dt.bind(void 0,0,0,0,1,1),Dt.bind(void 0,0,0,0,1,2),Dt.bind(void 0,0,0,0,1,3),Dt.bind(void 0,0,0,1,0,0),Dt.bind(void 0,0,0,1,0,1),Dt.bind(void 0,0,0,1,0,2),Dt.bind(void 0,0,0,1,0,3),Dt.bind(void 0,0,0,1,1,0),Dt.bind(void 0,0,0,1,1,1),Dt.bind(void 0,0,0,1,1,2),Dt.bind(void 0,0,0,1,1,3),Dt.bind(void 0,0,1,0,0,0),Dt.bind(void 0,0,1,0,0,1),Dt.bind(void 0,0,1,0,0,2),Dt.bind(void 0,0,1,0,0,3),Dt.bind(void 0,0,1,0,1,0),Dt.bind(void 0,0,1,0,1,1),Dt.bind(void 0,0,1,0,1,2),Dt.bind(void 0,0,1,0,1,3),Dt.bind(void 0,0,1,1,0,0),Dt.bind(void 0,0,1,1,0,1),Dt.bind(void 0,0,1,1,0,2),Dt.bind(void 0,0,1,1,0,3),Dt.bind(void 0,0,1,1,1,0),Dt.bind(void 0,0,1,1,1,1),Dt.bind(void 0,0,1,1,1,2),Dt.bind(void 0,0,1,1,1,3),Dt.bind(void 0,1,0,0,0,0),Dt.bind(void 0,1,0,0,0,1),Dt.bind(void 0,1,0,0,0,2),Dt.bind(void 0,1,0,0,0,3),Dt.bind(void 0,1,0,0,1,0),Dt.bind(void 0,1,0,0,1,1),Dt.bind(void 0,1,0,0,1,2),Dt.bind(void 0,1,0,0,1,3),Dt.bind(void 0,1,0,1,0,0),Dt.bind(void 0,1,0,1,0,1),Dt.bind(void 0,1,0,1,0,2),Dt.bind(void 0,1,0,1,0,3),Dt.bind(void 0,1,0,1,1,0),Dt.bind(void 0,1,0,1,1,1),Dt.bind(void 0,1,0,1,1,2),Dt.bind(void 0,1,0,1,1,3),Dt.bind(void 0,1,1,0,0,0),Dt.bind(void 0,1,1,0,0,1),Dt.bind(void 0,1,1,0,0,2),Dt.bind(void 0,1,1,0,0,3),Dt.bind(void 0,1,1,0,1,0),Dt.bind(void 0,1,1,0,1,1),Dt.bind(void 0,1,1,0,1,2),Dt.bind(void 0,1,1,0,1,3),Dt.bind(void 0,1,1,1,0,0),Dt.bind(void 0,1,1,1,0,1),Dt.bind(void 0,1,1,1,0,2),Dt.bind(void 0,1,1,1,0,3),Dt.bind(void 0,1,1,1,1,0),Dt.bind(void 0,1,1,1,1,1),Dt.bind(void 0,1,1,1,1,2),Dt.bind(void 0,1,1,1,1,3)],Su=Array.from||function(T){return T.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function cn(T){(T=T||{}).empty||(Jo(T.familyName,"When creating a new Font object, familyName is required."),Jo(T.styleName,"When creating a new Font object, styleName is required."),Jo(T.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Jo(T.ascender,"When creating a new Font object, ascender is required."),Jo(T.descender,"When creating a new Font object, descender is required."),Jo(T.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:T.familyName||" "},fontSubfamily:{en:T.styleName||" "},fullName:{en:T.fullName||T.familyName+" "+T.styleName},postScriptName:{en:T.postScriptName||(T.familyName+T.styleName).replace(/\s/g,"")},designer:{en:T.designer||" "},designerURL:{en:T.designerURL||" "},manufacturer:{en:T.manufacturer||" "},manufacturerURL:{en:T.manufacturerURL||" "},license:{en:T.license||" "},licenseURL:{en:T.licenseURL||" "},version:{en:T.version||"Version 0.1"},description:{en:T.description||" "},copyright:{en:T.copyright||" "},trademark:{en:T.trademark||" "}},this.unitsPerEm=T.unitsPerEm||1e3,this.ascender=T.ascender,this.descender=T.descender,this.createdTimestamp=T.createdTimestamp,this.tables={os2:{usWeightClass:T.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:T.widthClass||this.usWidthClasses.MEDIUM,fsSelection:T.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Qe.GlyphSet(this,T.glyphs||[]),this.encoding=new ue(this),this.position=new Za(this),this.substitution=new Ei(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Ui(this):void 0)}})}cn.prototype.hasChar=function(T){return this.encoding.charToGlyphIndex(T)!==null},cn.prototype.charToGlyphIndex=function(T){return this.encoding.charToGlyphIndex(T)},cn.prototype.charToGlyph=function(T){return T=this.charToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},cn.prototype.stringToGlyphs=function(T,j){j=j||this.defaultRenderOptions;for(var D=Su(T),V=[],Y=0;Y<D.length;Y+=1){var Q=D[Y];V.push(this.charToGlyphIndex(Q))}var te=V.length;if(j.features){T=j.script||this.substitution.getDefaultScriptName();var Me=[];j.features.liga&&(Me=Me.concat(this.substitution.getFeature("liga",T,j.language))),j.features.rlig&&(Me=Me.concat(this.substitution.getFeature("rlig",T,j.language)));for(var Te=0;Te<te;Te+=1)for(var Pe=0;Pe<Me.length;Pe++){for(var De=Me[Pe],He=De.sub,Xe=He.length,ke=0;ke<Xe&&He[ke]===V[Te+ke];)ke++;ke===Xe&&(V.splice(Te,Xe,De.by),te=te-Xe+1)}}for(var yt=new Array(te),$e=this.glyphs.get(0),it=0;it<te;it+=1)yt[it]=this.glyphs.get(V[it])||$e;return yt},cn.prototype.nameToGlyphIndex=function(T){return this.glyphNames.nameToGlyphIndex(T)},cn.prototype.nameToGlyph=function(T){return T=this.nameToGlyphIndex(T),this.glyphs.get(T)||this.glyphs.get(0)},cn.prototype.glyphIndexToName=function(T){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(T):""},cn.prototype.getKerningValue=function(T,j){T=T.index||T,j=j.index||j;var D=this.position.defaultKerningTables;return D?this.position.getKerningValue(D,T,j):this.kerningPairs[T+","+j]||0},cn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},cn.prototype.forEachGlyph=function(T,j,D,V,Y,Q){j=j!==void 0?j:0,D=D!==void 0?D:0,Y=Y||this.defaultRenderOptions;var te,Me=1/this.unitsPerEm*(V=V!==void 0?V:72),Te=this.stringToGlyphs(T,Y);Y.kerning&&(T=Y.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(T,Y.language));for(var Pe=0;Pe<Te.length;Pe+=1){var De=Te[Pe];Q.call(this,De,j,D,V,Y),De.advanceWidth&&(j+=De.advanceWidth*Me),Y.kerning&&Pe<Te.length-1&&(j+=(te?this.position.getKerningValue(te,De.index,Te[Pe+1].index):this.getKerningValue(De,Te[Pe+1]))*Me),Y.letterSpacing?j+=Y.letterSpacing*V:Y.tracking&&(j+=Y.tracking/1e3*V)}return j},cn.prototype.getPath=function(T,j,D,V,Y){var Q=new H;return this.forEachGlyph(T,j,D,V,Y,function(te,Me,Te,Pe){te=te.getPath(Me,Te,Pe,Y,this),Q.extend(te)}),Q},cn.prototype.getPaths=function(T,j,D,V,Y){var Q=[];return this.forEachGlyph(T,j,D,V,Y,function(te,Me,Te,Pe){te=te.getPath(Me,Te,Pe,Y,this),Q.push(te)}),Q},cn.prototype.getAdvanceWidth=function(T,j,D){return this.forEachGlyph(T,0,0,j,D,function(){})},cn.prototype.draw=function(T,j,D,V,Y,Q){this.getPath(j,D,V,Y,Q).draw(T)},cn.prototype.drawPoints=function(T,j,D,V,Y,Q){this.forEachGlyph(j,D,V,Y,Q,function(te,Me,Te,Pe){te.drawPoints(T,Me,Te,Pe)})},cn.prototype.drawMetrics=function(T,j,D,V,Y,Q){this.forEachGlyph(j,D,V,Y,Q,function(te,Me,Te,Pe){te.drawMetrics(T,Me,Te,Pe)})},cn.prototype.getEnglishName=function(T){if(T=this.names[T])return T.en},cn.prototype.validate=function(){var T=this;function j(D){(D=T.getEnglishName(D))&&D.trim().length}j("fontFamily"),j("weightName"),j("manufacturer"),j("copyright"),j("version"),this.unitsPerEm},cn.prototype.toTables=function(){return nd(this)},cn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},cn.prototype.toArrayBuffer=function(){for(var T=this.toTables().encode(),j=new ArrayBuffer(T.length),D=new Uint8Array(j),V=0;V<T.length;V++)D[V]=T[V];return j},cn.prototype.download=function(T){var j=this.getEnglishName("fontFamily"),D=this.getEnglishName("fontSubfamily"),V=(T=T||j.replace(/\s/g,"")+"-"+D+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,V.byteLength,function(Y){Y.root.getFile(T,{create:!0},function(Q){Q.createWriter(function(te){var Me=new DataView(V);Me=new Blob([Me],{type:"font/opentype"}),te.write(Me),te.addEventListener("writeend",function(){location.href=Q.toURL()},!1)})})},function(Y){throw new Error(Y.name+": "+Y.message)})):(j=i("fs"),D=function(Y){for(var Q=new h(Y.byteLength),te=new Uint8Array(Y),Me=0;Me<Q.length;++Me)Q[Me]=te[Me];return Q}(V),j.writeFileSync(T,D))},cn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},cn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},cn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Ti=function(T,j,D){for(var V,Y,Q,te,Me=new Fe.Parser(T,j),Te=Me.parseULong(),Pe=(ne.argument(Te===65536,"Unsupported fvar table version."),Me.parseOffset16()),De=(Me.skip("uShort",1),Me.parseUShort()),He=Me.parseUShort(),Xe=Me.parseUShort(),ke=Me.parseUShort(),yt=[],$e=0;$e<De;$e++)yt.push((V=T,Y=j+Pe+$e*He,Q=D,te={},V=new Fe.Parser(V,Y),te.tag=V.parseTag(),te.minValue=V.parseFixed(),te.defaultValue=V.parseFixed(),te.maxValue=V.parseFixed(),V.skip("uShort",1),te.name=Q[V.parseUShort()]||{},te));for(var it=[],tt=j+Pe+De*He,rt=0;rt<Xe;rt++)it.push(function(At,Et,wt,nn){var Qt={},Cn=new Fe.Parser(At,Et);Qt.name=nn[Cn.parseUShort()]||{},Cn.skip("uShort",1),Qt.coordinates={};for(var Bn=0;Bn<wt.length;++Bn)Qt.coordinates[wt[Bn].tag]=Cn.parseFixed();return Qt}(T,tt+rt*ke,yt,D));return{axes:yt,instances:it}},Pr=new Array(10);Pr[1]=function(){var T=this.offset+this.relativeOffset,j=this.parseUShort();return j===1?{posFormat:1,coverage:this.parsePointer(_e.coverage),value:this.parseValueRecord()}:j===2?{posFormat:2,coverage:this.parsePointer(_e.coverage),values:this.parseValueRecordList()}:void ne.assert(!1,"0x"+T.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Pr[2]=function(){var T,j,D,V,Y=this.offset+this.relativeOffset,Q=this.parseUShort(),te=(Y=(ne.assert(Q===1||Q===2,"0x"+Y.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(_e.coverage)),this.parseUShort()),Me=this.parseUShort();return Q===1?{posFormat:Q,coverage:Y,valueFormat1:te,valueFormat2:Me,pairSets:this.parseList(_e.pointer(_e.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(Me)}})))}:Q===2?(T=this.parsePointer(_e.classDef),j=this.parsePointer(_e.classDef),D=this.parseUShort(),V=this.parseUShort(),{posFormat:Q,coverage:Y,valueFormat1:te,valueFormat2:Me,classDef1:T,classDef2:j,class1Count:D,class2Count:V,classRecords:this.parseList(D,_e.list(V,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(Me)}}))}):void 0},Pr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Pr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Pr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Pr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Pr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Pr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Pr[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);var Cs=function(T,j){return j=(T=new _e(T,j=j||0)).parseVersion(1),ne.argument(j===1||j===1.1,"Unsupported GPOS table version "+j),j===1?{version:j,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Pr)}:{version:j,scripts:T.parseScriptList(),features:T.parseFeatureList(),lookups:T.parseLookupList(Pr),variations:T.parseFeatureVariationsList()}},Ps=function(T,j){if((j=(T=new Fe.Parser(T,j)).parseUShort())===0){var D=T,V={},Y=(D.skip("uShort"),D.parseUShort()),Q=(ne.argument(Y===0,"Unsupported kern sub-table version."),D.skip("uShort",2),D.parseUShort());D.skip("uShort",3);for(var te=0;te<Q;te+=1){var Me=D.parseUShort(),Te=D.parseUShort(),Pe=D.parseShort();V[Me+","+Te]=Pe}return V}if(j!==1)throw new Error("Unsupported kern table version ("+j+").");var De=T,He={};if(De.skip("uShort"),1<De.parseULong()&&console.warn("Only the first kern subtable is supported."),De.skip("uLong"),Y=255&De.parseUShort(),De.skip("uShort"),Y==0){var Xe=De.parseUShort();De.skip("uShort",3);for(var ke=0;ke<Xe;ke+=1){var yt=De.parseUShort(),$e=De.parseUShort(),it=De.parseShort();He[yt+","+$e]=it}}return He},go=function(T,j,D,V){for(var Y=new Fe.Parser(T,j),Q=V?Y.parseUShort:Y.parseULong,te=[],Me=0;Me<D+1;Me+=1){var Te=Q.call(Y);V&&(Te*=2),te.push(Te)}return te};function kf(T,j){i("fs").readFile(T,function(D,V){if(D)return j(D.message);j(null,jf(V))})}function hd(T,j){var D=new XMLHttpRequest;D.open("get",T,!0),D.responseType="arraybuffer",D.onload=function(){return D.response?j(null,D.response):j("Font could not be loaded: "+D.statusText)},D.onerror=function(){j("Font could not be loaded")},D.send()}function Mu(T,j){for(var D=[],V=12,Y=0;Y<j;Y+=1){var Q=Fe.getTag(T,V),te=Fe.getULong(T,V+4),Me=Fe.getULong(T,V+8),Te=Fe.getULong(T,V+12);D.push({tag:Q,checksum:te,offset:Me,length:Te,compression:!1}),V+=16}return D}function wn(T,j){if(j.compression!=="WOFF")return{data:T,offset:j.offset};T=new Uint8Array(T.buffer,j.offset+2,j.compressedLength-2);var D=new Uint8Array(j.length);if(function(V,Y){var Q,te,Me,Te=new p(V,Y);do{switch((te=Te).bitcount--||(te.tag=te.source[te.sourceIndex++],te.bitcount=7),Me=1&te.tag,te.tag>>>=1,te=Me,L(Te,2,0)){case 0:Q=function(wt){for(var nn,Qt;8<wt.bitcount;)wt.sourceIndex--,wt.bitcount-=8;if((nn=256*wt.source[wt.sourceIndex+1]+wt.source[wt.sourceIndex])!==(65535&~(256*wt.source[wt.sourceIndex+3]+wt.source[wt.sourceIndex+2])))return-3;for(wt.sourceIndex+=4,Qt=nn;Qt;--Qt)wt.dest[wt.destLen++]=wt.source[wt.sourceIndex++];return wt.bitcount=0,0}(Te);break;case 1:Q=I(Te,f,u);break;case 2:At=rt=tt=Et=Pe=it=void 0;for(var Pe,De=Te,He=Te.ltree,Xe=Te.dtree,ke=L(De,5,257),yt=L(De,5,1),$e=L(De,4,4),it=0;it<19;++it)A[it]=0;for(it=0;it<$e;++it){var tt=L(De,3,0);A[w[it]]=tt}for(k(M,A,0,19),Pe=0;Pe<ke+yt;){var rt=B(De,M);switch(rt){case 16:for(var At=A[Pe-1],Et=L(De,2,3);Et;--Et)A[Pe++]=At;break;case 17:for(Et=L(De,3,3);Et;--Et)A[Pe++]=0;break;case 18:for(Et=L(De,7,11);Et;--Et)A[Pe++]=0;break;default:A[Pe++]=rt}}k(He,A,0,ke),k(Xe,A,ke,yt),Q=I(Te,Te.ltree,Te.dtree);break;default:Q=-3}if(Q!==0)throw new Error("Data error")}while(!te);Te.destLen<Te.dest.length?typeof Te.dest.slice=="function"?Te.dest.slice(0,Te.destLen):Te.dest.subarray(0,Te.destLen):Te.dest}(T,D),D.byteLength!==j.length)throw new Error("Decompression error: "+j.tag+" decompressed length doesn't match recorded length");return{data:new DataView(D.buffer,0),offset:0}}function Gr(T){var j,D,V,Y,Q,te,Me,Te,Pe,De,He,Xe,ke,yt,$e=new cn({empty:!0}),it=new DataView(T,0),tt=[];if((T=Fe.getTag(it,0))==="\0\0\0"||T==="true"||T==="typ1")$e.outlinesFormat="truetype",tt=Mu(it,V=Fe.getUShort(it,4));else if(T==="OTTO")$e.outlinesFormat="cff",tt=Mu(it,V=Fe.getUShort(it,4));else{if(T!=="wOFF")throw new Error("Unsupported OpenType signature "+T);if((wt=Fe.getTag(it,4))==="\0\0\0")$e.outlinesFormat="truetype";else{if(wt!=="OTTO")throw new Error("Unsupported OpenType flavor "+T);$e.outlinesFormat="cff"}tt=function(zn,Mn){for(var _n=[],rn=44,yn=0;yn<Mn;yn+=1){var bn=Fe.getTag(zn,rn),kn=Fe.getULong(zn,rn+4),Xn=Fe.getULong(zn,rn+8),Rs=Fe.getULong(zn,rn+12),rl=Xn<Rs&&"WOFF";_n.push({tag:bn,offset:kn,compression:rl,compressedLength:Xn,length:Rs}),rn+=20}return _n}(it,V=Fe.getUShort(it,12))}for(var rt=0;rt<V;rt+=1){var At=tt[rt],Et=void 0;switch(At.tag){case"cmap":Et=wn(it,At),$e.tables.cmap=Ne(Et.data,Et.offset),$e.encoding=new he($e.tables.cmap);break;case"cvt ":Et=wn(it,At),yt=new Fe.Parser(Et.data,Et.offset),$e.tables.cvt=yt.parseShortList(At.length/2);break;case"fvar":Q=At;break;case"fpgm":Et=wn(it,At),yt=new Fe.Parser(Et.data,Et.offset),$e.tables.fpgm=yt.parseByteList(At.length);break;case"head":Et=wn(it,At),$e.tables.head=Yo(Et.data,Et.offset),$e.unitsPerEm=$e.tables.head.unitsPerEm,j=$e.tables.head.indexToLocFormat;break;case"hhea":Et=wn(it,At),$e.tables.hhea=Ye(Et.data,Et.offset),$e.ascender=$e.tables.hhea.ascender,$e.descender=$e.tables.hhea.descender,$e.numberOfHMetrics=$e.tables.hhea.numberOfHMetrics;break;case"hmtx":Pe=At;break;case"ltag":Et=wn(it,At),D=Ke(Et.data,Et.offset);break;case"maxp":Et=wn(it,At),$e.tables.maxp=Mt(Et.data,Et.offset),$e.numGlyphs=$e.tables.maxp.numGlyphs;break;case"name":Xe=At;break;case"OS/2":Et=wn(it,At),$e.tables.os2=xr(Et.data,Et.offset);break;case"post":Et=wn(it,At),$e.tables.post=Zo(Et.data,Et.offset),$e.glyphNames=new je($e.tables.post);break;case"prep":Et=wn(it,At),yt=new Fe.Parser(Et.data,Et.offset),$e.tables.prep=yt.parseByteList(At.length);break;case"glyf":te=At;break;case"loca":He=At;break;case"CFF ":Y=At;break;case"kern":De=At;break;case"GPOS":Me=At;break;case"GSUB":Te=At;break;case"meta":ke=At}}if(wt=wn(it,Xe),$e.tables.name=fn(wt.data,wt.offset,D),$e.names=$e.tables.name,te&&He)T=j===0,wt=wn(it,He),wt=go(wt.data,wt.offset,$e.numGlyphs,T),T=wn(it,te),$e.glyphs=Ka.parse(T.data,T.offset,wt,$e);else{if(!Y)throw new Error("Font doesn't contain TrueType or CFF outlines.");T=wn(it,Y),An(T.data,T.offset,$e)}for(var wt=wn(it,Pe),nn=(pe(wt.data,wt.offset,$e.numberOfHMetrics,$e.numGlyphs,$e.glyphs),$e),Qt=nn.tables.cmap.glyphIndexMap,Cn=Object.keys(Qt),Bn=0;Bn<Cn.length;Bn+=1){var Zt,Sn=Cn[Bn],Kt=Qt[Sn];(Zt=nn.glyphs.get(Kt)).addUnicode(parseInt(Sn))}for(var Jn=0;Jn<nn.glyphs.length;Jn+=1)Zt=nn.glyphs.get(Jn),nn.cffEncoding?nn.isCIDFont?Zt.name="gid"+Jn:Zt.name=nn.cffEncoding.charset[Jn]:nn.glyphNames.names&&(Zt.name=nn.glyphNames.glyphIndexToName(Jn));return De?(T=wn(it,De),$e.kerningPairs=Ps(T.data,T.offset)):$e.kerningPairs={},Me&&(wt=wn(it,Me),$e.tables.gpos=Cs(wt.data,wt.offset),$e.position.init()),Te&&(T=wn(it,Te),$e.tables.gsub=Tg(T.data,T.offset)),Q&&(wt=wn(it,Q),$e.tables.fvar=Ti(wt.data,wt.offset,$e.names)),ke&&(T=wn(it,ke),$e.tables.meta=uu(T.data,T.offset),$e.metas=$e.tables.meta),$e}l.Font=cn,l.Glyph=xe,l.Path=H,l.BoundingBox=O,l._parse=Fe,l.parse=Gr,l.load=function(T,j){(typeof window>"u"?kf:hd)(T,function(D,V){if(D)return j(D);var Y;try{Y=Gr(V)}catch(Q){return j(Q,null)}return j(null,Y)})},l.loadSync=function(T){return Gr(jf(i("fs").readFileSync(T)))},Object.defineProperty(l,"__esModule",{value:!0})})(typeof g=="object"&&_!==void 0?g:this.opentype={})}).call(this,i("buffer").Buffer)},{buffer:4,fs:2}],248:[function(i,_,g){(function(h){function l(x,p){for(var f=0,u=x.length-1;0<=u;u--){var c=x[u];c==="."?x.splice(u,1):c===".."?(x.splice(u,1),f++):f&&(x.splice(u,1),f--)}if(p)for(;f--;)x.unshift("..");return x}function d(x,p){if(x.filter)return x.filter(p);for(var f=[],u=0;u<x.length;u++)p(x[u],u,x)&&f.push(x[u]);return f}g.resolve=function(){for(var x="",p=!1,f=arguments.length-1;-1<=f&&!p;f--){var u=0<=f?arguments[f]:h.cwd();if(typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");u&&(x=u+"/"+x,p=u.charAt(0)==="/")}return(p?"/":"")+(x=l(d(x.split("/"),function(c){return!!c}),!p).join("/"))||"."},g.normalize=function(x){var p=g.isAbsolute(x),f=v(x,-1)==="/";return(x=(x=l(d(x.split("/"),function(u){return!!u}),!p).join("/"))||p?x:".")&&f&&(x+="/"),(p?"/":"")+x},g.isAbsolute=function(x){return x.charAt(0)==="/"},g.join=function(){var x=Array.prototype.slice.call(arguments,0);return g.normalize(d(x,function(p,f){if(typeof p!="string")throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},g.relative=function(x,p){function f(M){for(var A=0;A<M.length&&M[A]==="";A++);for(var P=M.length-1;0<=P&&M[P]==="";P--);return P<A?[]:M.slice(A,P-A+1)}x=g.resolve(x).substr(1),p=g.resolve(p).substr(1);for(var u=f(x.split("/")),c=f(p.split("/")),m=Math.min(u.length,c.length),b=m,S=0;S<m;S++)if(u[S]!==c[S]){b=S;break}var w=[];for(S=b;S<u.length;S++)w.push("..");return(w=w.concat(c.slice(b))).join("/")},g.sep="/",g.delimiter=":",g.dirname=function(x){if(typeof x!="string"&&(x+=""),x.length===0)return".";for(var p=x.charCodeAt(0)===47,f=-1,u=!0,c=x.length-1;1<=c;--c)if(x.charCodeAt(c)===47){if(!u){f=c;break}}else u=!1;return f===-1?p?"/":".":p&&f===1?"/":x.slice(0,f)},g.basename=function(x,p){return x=function(f){typeof f!="string"&&(f+="");for(var u=0,c=-1,m=!0,b=f.length-1;0<=b;--b)if(f.charCodeAt(b)===47){if(!m){u=b+1;break}}else c===-1&&(m=!1,c=b+1);return c===-1?"":f.slice(u,c)}(x),p&&x.substr(-1*p.length)===p?x.substr(0,x.length-p.length):x},g.extname=function(x){typeof x!="string"&&(x+="");for(var p=-1,f=0,u=-1,c=!0,m=0,b=x.length-1;0<=b;--b){var S=x.charCodeAt(b);if(S===47){if(c)continue;f=b+1;break}u===-1&&(c=!1,u=b+1),S===46?p===-1?p=b:m!==1&&(m=1):p!==-1&&(m=-1)}return p===-1||u===-1||m===0||m===1&&p===u-1&&p===f+1?"":x.slice(p,u)};var v="ab".substr(-1)==="b"?function(x,p,f){return x.substr(p,f)}:function(x,p,f){return p<0&&(p=x.length+p),x.substr(p,f)}}).call(this,i("_process"))},{_process:249}],249:[function(i,_,g){var h,l;_=_.exports={};function d(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}try{h=typeof setTimeout=="function"?setTimeout:d}catch{h=d}try{l=typeof clearTimeout=="function"?clearTimeout:v}catch{l=v}function x(M){if(h===setTimeout)return setTimeout(M,0);if((h===d||!h)&&setTimeout)return(h=setTimeout)(M,0);try{return h(M,0)}catch{try{return h.call(null,M,0)}catch{return h.call(this,M,0)}}}var p,f=[],u=!1,c=-1;function m(){u&&p&&(u=!1,p.length?f=p.concat(f):c=-1,f.length&&b())}function b(){if(!u){for(var M=x(m),A=(u=!0,f.length);A;){for(p=f,f=[];++c<A;)p&&p[c].run();c=-1,A=f.length}p=null,u=!1,function(P){if(l===clearTimeout)return clearTimeout(P);if((l===v||!l)&&clearTimeout)return(l=clearTimeout)(P);try{l(P)}catch{try{return l.call(null,P)}catch{return l.call(this,P)}}}(M)}}function S(M,A){this.fun=M,this.array=A}function w(){}_.nextTick=function(M){var A=new Array(arguments.length-1);if(1<arguments.length)for(var P=1;P<arguments.length;P++)A[P-1]=arguments[P];f.push(new S(M,A)),f.length!==1||u||x(b)},S.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=w,_.addListener=w,_.once=w,_.off=w,_.removeListener=w,_.removeAllListeners=w,_.emit=w,_.prependListener=w,_.prependOnceListener=w,_.listeners=function(M){return[]},_.binding=function(M){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(M){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],250:[function(i,_,g){_=function(h){var l,d=Object.prototype,v=d.hasOwnProperty,x=(k=typeof Symbol=="function"?Symbol:{}).iterator||"@@iterator",p=k.asyncIterator||"@@asyncIterator",f=k.toStringTag||"@@toStringTag";function u(q,K,ne,ee){var se,me,X,Z;return K=K&&K.prototype instanceof A?K:A,K=Object.create(K.prototype),ee=new N(ee||[]),K._invoke=(se=q,me=ne,X=ee,Z=m,function(ie,ye){if(Z===S)throw new Error("Generator is already running");if(Z===w){if(ie==="throw")throw ye;return H()}for(X.method=ie,X.arg=ye;;){var fe=X.delegate;if(fe&&(fe=function $(re,de){var ge=re.iterator[de.method];if(ge===l){if(de.delegate=null,de.method==="throw"){if(re.iterator.return&&(de.method="return",de.arg=l,$(re,de),de.method==="throw"))return M;de.method="throw",de.arg=new TypeError("The iterator does not provide a 'throw' method")}return M}return(ge=c(ge,re.iterator,de.arg)).type==="throw"?(de.method="throw",de.arg=ge.arg,de.delegate=null,M):(ge=ge.arg)?ge.done?(de[re.resultName]=ge.value,de.next=re.nextLoc,de.method!=="return"&&(de.method="next",de.arg=l),de.delegate=null,M):ge:(de.method="throw",de.arg=new TypeError("iterator result is not an object"),de.delegate=null,M)}(fe,X))){if(fe===M)continue;return fe}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(Z===m)throw Z=w,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);if(Z=S,(fe=c(se,me,X)).type==="normal"){if(Z=X.done?w:b,fe.arg!==M)return{value:fe.arg,done:X.done}}else fe.type==="throw"&&(Z=w,X.method="throw",X.arg=fe.arg)}}),K}function c(q,K,ne){try{return{type:"normal",arg:q.call(K,ne)}}catch(ee){return{type:"throw",arg:ee}}}h.wrap=u;var m="suspendedStart",b="suspendedYield",S="executing",w="completed",M={};function A(){}function P(){}function R(){}var k,L,B=((L=(L=((k={})[x]=function(){return this},Object.getPrototypeOf))&&L(L(O([]))))&&L!==d&&v.call(L,x)&&(k=L),R.prototype=A.prototype=Object.create(k));function I(q){["next","throw","return"].forEach(function(K){q[K]=function(ne){return this._invoke(K,ne)}})}function F(q){var K;this._invoke=function(ne,ee){function se(){return new Promise(function(me,X){(function Z(ie,ye,fe,$){var re;if((ie=c(q[ie],q,ye)).type!=="throw")return(ye=(re=ie.arg).value)&&typeof ye=="object"&&v.call(ye,"__await")?Promise.resolve(ye.__await).then(function(de){Z("next",de,fe,$)},function(de){Z("throw",de,fe,$)}):Promise.resolve(ye).then(function(de){re.value=de,fe(re)},function(de){return Z("throw",de,fe,$)});$(ie.arg)})(ne,ee,me,X)})}return K=K?K.then(se,se):se()}}function z(q){var K={tryLoc:q[0]};1 in q&&(K.catchLoc=q[1]),2 in q&&(K.finallyLoc=q[2],K.afterLoc=q[3]),this.tryEntries.push(K)}function G(q){var K=q.completion||{};K.type="normal",delete K.arg,q.completion=K}function N(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(z,this),this.reset(!0)}function O(q){if(q){var K,ne=q[x];if(ne)return ne.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length))return K=-1,(ne=function ee(){for(;++K<q.length;)if(v.call(q,K))return ee.value=q[K],ee.done=!1,ee;return ee.value=l,ee.done=!0,ee}).next=ne}return{next:H}}function H(){return{value:l,done:!0}}return(P.prototype=B.constructor=R).constructor=P,R[f]=P.displayName="GeneratorFunction",h.isGeneratorFunction=function(q){return!!(q=typeof q=="function"&&q.constructor)&&(q===P||(q.displayName||q.name)==="GeneratorFunction")},h.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,R):(q.__proto__=R,f in q||(q[f]="GeneratorFunction")),q.prototype=Object.create(B),q},h.awrap=function(q){return{__await:q}},I(F.prototype),F.prototype[p]=function(){return this},h.AsyncIterator=F,h.async=function(q,K,ne,ee){var se=new F(u(q,K,ne,ee));return h.isGeneratorFunction(K)?se:se.next().then(function(me){return me.done?me.value:se.next()})},I(B),B[f]="Generator",B[x]=function(){return this},B.toString=function(){return"[object Generator]"},h.keys=function(q){var K,ne=[];for(K in q)ne.push(K);return ne.reverse(),function ee(){for(;ne.length;){var se=ne.pop();if(se in q)return ee.value=se,ee.done=!1,ee}return ee.done=!0,ee}},h.values=O,N.prototype={constructor:N,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(G),!q)for(var K in this)K.charAt(0)==="t"&&v.call(this,K)&&!isNaN(+K.slice(1))&&(this[K]=l)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var K=this;function ne(ie,ye){return me.type="throw",me.arg=q,K.next=ie,ye&&(K.method="next",K.arg=l),!!ye}for(var ee=this.tryEntries.length-1;0<=ee;--ee){var se=this.tryEntries[ee],me=se.completion;if(se.tryLoc==="root")return ne("end");if(se.tryLoc<=this.prev){var X=v.call(se,"catchLoc"),Z=v.call(se,"finallyLoc");if(X&&Z){if(this.prev<se.catchLoc)return ne(se.catchLoc,!0);if(this.prev<se.finallyLoc)return ne(se.finallyLoc)}else if(X){if(this.prev<se.catchLoc)return ne(se.catchLoc,!0)}else{if(!Z)throw new Error("try statement without catch or finally");if(this.prev<se.finallyLoc)return ne(se.finallyLoc)}}}},abrupt:function(q,K){for(var ne=this.tryEntries.length-1;0<=ne;--ne){var ee=this.tryEntries[ne];if(ee.tryLoc<=this.prev&&v.call(ee,"finallyLoc")&&this.prev<ee.finallyLoc){var se=ee;break}}var me=(se=se&&(q==="break"||q==="continue")&&se.tryLoc<=K&&K<=se.finallyLoc?null:se)?se.completion:{};return me.type=q,me.arg=K,se?(this.method="next",this.next=se.finallyLoc,M):this.complete(me)},complete:function(q,K){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&K&&(this.next=K),M},finish:function(q){for(var K=this.tryEntries.length-1;0<=K;--K){var ne=this.tryEntries[K];if(ne.finallyLoc===q)return this.complete(ne.completion,ne.afterLoc),G(ne),M}},catch:function(q){for(var K=this.tryEntries.length-1;0<=K;--K){var ne,ee,se=this.tryEntries[K];if(se.tryLoc===q)return(ne=se.completion).type==="throw"&&(ee=ne.arg,G(se)),ee}throw new Error("illegal catch attempt")},delegateYield:function(q,K,ne){return this.delegate={iterator:O(q),resultName:K,nextLoc:ne},this.method==="next"&&(this.arg=l),M}},h}(typeof _=="object"?_.exports:{});try{regeneratorRuntime=_}catch{Function("r","regeneratorRuntime = r")(_)}},{}],251:[function(i,_,g){(function(h){var l,d,v,x,p,f,u,c,m,b;function S(G){if(typeof G!="string"&&(G=String(G)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(G))throw new TypeError("Invalid character in header field name");return G.toLowerCase()}function w(G){return typeof G!="string"?String(G):G}function M(G){var N={next:function(){var O=G.shift();return{done:O===void 0,value:O}}};return d&&(N[Symbol.iterator]=function(){return N}),N}function A(G){this.map={},G instanceof A?G.forEach(function(N,O){this.append(O,N)},this):Array.isArray(G)?G.forEach(function(N){this.append(N[0],N[1])},this):G&&Object.getOwnPropertyNames(G).forEach(function(N){this.append(N,G[N])},this)}function P(G){if(G.bodyUsed)return Promise.reject(new TypeError("Already read"));G.bodyUsed=!0}function R(G){return new Promise(function(N,O){G.onload=function(){N(G.result)},G.onerror=function(){O(G.error)}})}function k(G){var N=new FileReader,O=R(N);return N.readAsArrayBuffer(G),O}function L(G){var N;return G.slice?G.slice(0):((N=new Uint8Array(G.byteLength)).set(new Uint8Array(G)),N.buffer)}function B(){return this.bodyUsed=!1,this._initBody=function(G){if(this._bodyInit=G)if(typeof G=="string")this._bodyText=G;else if(v&&Blob.prototype.isPrototypeOf(G))this._bodyBlob=G;else if(x&&FormData.prototype.isPrototypeOf(G))this._bodyFormData=G;else if(l&&URLSearchParams.prototype.isPrototypeOf(G))this._bodyText=G.toString();else if(p&&v&&u(G))this._bodyArrayBuffer=L(G.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p||!ArrayBuffer.prototype.isPrototypeOf(G)&&!c(G))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=L(G)}else this._bodyText="";this.headers.get("content-type")||(typeof G=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(G)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v&&(this.blob=function(){var G=P(this);if(G)return G;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?P(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var G,N,O=P(this);if(O)return O;if(this._bodyBlob)return O=this._bodyBlob,N=R(G=new FileReader),G.readAsText(O),N;if(this._bodyArrayBuffer)return Promise.resolve(function(H){for(var q=new Uint8Array(H),K=new Array(q.length),ne=0;ne<q.length;ne++)K[ne]=String.fromCharCode(q[ne]);return K.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},x&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}function I(G,N){var O,H=(N=N||{}).body;if(G instanceof I){if(G.bodyUsed)throw new TypeError("Already read");this.url=G.url,this.credentials=G.credentials,N.headers||(this.headers=new A(G.headers)),this.method=G.method,this.mode=G.mode,H||G._bodyInit==null||(H=G._bodyInit,G.bodyUsed=!0)}else this.url=String(G);if(this.credentials=N.credentials||this.credentials||"omit",!N.headers&&this.headers||(this.headers=new A(N.headers)),this.method=(O=(G=N.method||this.method||"GET").toUpperCase(),-1<m.indexOf(O)?O:G),this.mode=N.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&H)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(H)}function F(G){var N=new FormData;return G.trim().split("&").forEach(function(O){var H;O&&(H=(O=O.split("=")).shift().replace(/\+/g," "),O=O.join("=").replace(/\+/g," "),N.append(decodeURIComponent(H),decodeURIComponent(O)))}),N}function z(G,N){N=N||{},this.type="default",this.status=N.status===void 0?200:N.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new A(N.headers),this.url=N.url||"",this._initBody(G)}h.fetch||(l="URLSearchParams"in h,d="Symbol"in h&&"iterator"in Symbol,v="FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch{return!1}}(),x="FormData"in h,(p="ArrayBuffer"in h)&&(f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(G){return G&&DataView.prototype.isPrototypeOf(G)},c=ArrayBuffer.isView||function(G){return G&&-1<f.indexOf(Object.prototype.toString.call(G))}),A.prototype.append=function(G,N){G=S(G),N=w(N);var O=this.map[G];this.map[G]=O?O+","+N:N},A.prototype.delete=function(G){delete this.map[S(G)]},A.prototype.get=function(G){return G=S(G),this.has(G)?this.map[G]:null},A.prototype.has=function(G){return this.map.hasOwnProperty(S(G))},A.prototype.set=function(G,N){this.map[S(G)]=w(N)},A.prototype.forEach=function(G,N){for(var O in this.map)this.map.hasOwnProperty(O)&&G.call(N,this.map[O],O,this)},A.prototype.keys=function(){var G=[];return this.forEach(function(N,O){G.push(O)}),M(G)},A.prototype.values=function(){var G=[];return this.forEach(function(N){G.push(N)}),M(G)},A.prototype.entries=function(){var G=[];return this.forEach(function(N,O){G.push([O,N])}),M(G)},d&&(A.prototype[Symbol.iterator]=A.prototype.entries),m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},B.call(I.prototype),B.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new A(this.headers),url:this.url})},z.error=function(){var G=new z(null,{status:0,statusText:""});return G.type="error",G},b=[301,302,303,307,308],z.redirect=function(G,N){if(b.indexOf(N)===-1)throw new RangeError("Invalid status code");return new z(null,{status:N,headers:{location:G}})},h.Headers=A,h.Request=I,h.Response=z,h.fetch=function(G,N){return new Promise(function(O,H){var q=new I(G,N),K=new XMLHttpRequest;K.onload=function(){var ne,ee={status:K.status,statusText:K.statusText,headers:(ee=K.getAllResponseHeaders()||"",ne=new A,ee.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(me){var X=(me=me.split(":")).shift().trim();X&&(me=me.join(":").trim(),ne.append(X,me))}),ne)},se=(ee.url="responseURL"in K?K.responseURL:ee.headers.get("X-Request-URL"),"response"in K?K.response:K.responseText);O(new z(se,ee))},K.onerror=function(){H(new TypeError("Network request failed"))},K.ontimeout=function(){H(new TypeError("Network request failed"))},K.open(q.method,q.url,!0),q.credentials==="include"?K.withCredentials=!0:q.credentials==="omit"&&(K.withCredentials=!1),"responseType"in K&&v&&(K.responseType="blob"),q.headers.forEach(function(ne,ee){K.setRequestHeader(ee,ne)}),K.send(q._bodyInit===void 0?null:q._bodyInit)})},h.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],252:[function(i,_,g){i("core-js/modules/es.function.name"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.split"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.split"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h,l=v(i("../core/main")),d=v(i("../color/color_conversion"));function v(f){return f&&f.__esModule?f:{default:f}}var x=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],p=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];l.default.prototype._rgbColorName=function(f){f=d.default._rgbaToHSBA(f);var u,c,m=[(h=f)[0],f[1],f[2]];m[0]!==0&&(m[0]=Math.round(100*m[0]),(f=m[0].toString().split(""))[c=f.length-1]=parseInt(f[c]),f[c]<2.5?f[c]=0:2.5<=f[c]&&f[c]<7.5&&(f[c]=5),f.length===2?(f[0]=parseInt(f[0]),7.5<=f[c]&&(f[c]=0,f[0]=f[0]+1),m[0]=10*f[0]+f[1]):7.5<=f[c]?m[0]=10:m[0]=f[c]),m[2]=m[2]/255;for(var b=m.length-1;1<=b;b--)m[b]<=.25?m[b]=0:.25<m[b]&&m[b]<.75?m[b]=.5:m[b]=1;if(m[0]===0&&m[1]===0&&m[2]===1){for(var S=2;0<=S;S--)h[S]=Math.round(1e4*h[S])/1e4;for(var w=0;w<x.length;w++){if(x[w].h===h[0]&&x[w].s===h[1]&&x[w].b===h[2]){u=x[w].name;break}u="white"}}else for(var M=0;M<p.length;M++)if(p[M].h===m[0]&&p[M].s===m[1]&&p[M].b===m[2]){u=p[M].name;break}return u},i=l.default,g.default=i},{"../color/color_conversion":258,"../core/main":273,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196}],253:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.ends-with"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.ends-with"),i("core-js/modules/es.string.replace"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i},l="_Description",d="_fallbackDesc",v="_fallbackTable",x="_Label",p="_labelDesc",f="_labelTable";function u(c){if(c==="label"||c==="fallback")throw new Error("description should not be LABEL or FALLBACK");return c.endsWith(".")||c.endsWith(";")||c.endsWith(",")||c.endsWith("?")||c.endsWith("!")||(c+="."),c}h.default.prototype.describe=function(c,m){var b;h.default._validateParameters("describe",arguments),typeof c=="string"&&(b=this.canvas.id,c=u(c),this.dummyDOM||(this.dummyDOM=document.getElementById(b).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==c&&(this.descriptions.fallback.innerHTML=c):this._describeHTML("fallback",c),m===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==c&&(this.descriptions.label.innerHTML=c):this._describeHTML("label",c)))},h.default.prototype.describeElement=function(c,m,b){var S,w;h.default._validateParameters("describeElement",arguments),typeof m=="string"&&typeof c=="string"&&(S=this.canvas.id,m=u(m),w=function(M){if(M==="label"||M==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return M.endsWith(".")||M.endsWith(";")||M.endsWith(",")?M=M.replace(/.$/,":"):M.endsWith(":")||(M+=":"),M}(c),c=c.replace(/[^a-zA-Z0-9]/g,""),w='<th scope="row">'.concat(w,"</th><td>").concat(m,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(S).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[c]?this.descriptions.fallbackElements[c].innerHTML!==w&&(this.descriptions.fallbackElements[c].innerHTML=w):this._describeElementHTML("fallback",c,w),b===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[c]?this.descriptions.labelElements[c].innerHTML!==w&&(this.descriptions.labelElements[c].innerHTML=w):this._describeElementHTML("label",c,w)))},h.default.prototype._describeHTML=function(c,m){var b,S=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(S+l))?this.dummyDOM.querySelector("#"+S+v).insertAdjacentHTML("beforebegin",'<p id="'.concat(S+d,'"></p>')):(b='<div id="'.concat(S).concat(l,'" role="region" aria-label="Canvas Description"><p id="').concat(S).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(S,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(S,"accessibleOutput")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#".concat(S)).innerHTML=b),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(S).concat(d)),this.descriptions.fallback.innerHTML=m):c==="label"&&(this.dummyDOM.querySelector("#".concat(S+x))?this.dummyDOM.querySelector("#".concat(S+f))&&this.dummyDOM.querySelector("#".concat(S+f)).insertAdjacentHTML("beforebegin",'<p id="'.concat(S).concat(p,'"></p>')):(b='<div id="'.concat(S).concat(x,'" class="p5Label"><p id="').concat(S).concat(p,'"></p></div>'),this.dummyDOM.querySelector("#".concat(S,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(S,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",b):this.dummyDOM.querySelector("#"+S).insertAdjacentHTML("afterend",b)),this.descriptions.label=this.dummyDOM.querySelector("#"+S+p),this.descriptions.label.innerHTML=m)},h.default.prototype._describeElementHTML=function(c,m,b){var S,w=this.canvas.id;c==="fallback"?(this.dummyDOM.querySelector("#".concat(w+l))?this.dummyDOM.querySelector("#"+w+v)||this.dummyDOM.querySelector("#"+w+d).insertAdjacentHTML("afterend",'<table id="'.concat(w).concat(v,'"><caption>Canvas elements and their descriptions</caption></table>')):(S='<div id="'.concat(w).concat(l,'" role="region" aria-label="Canvas Description"><table id="').concat(w).concat(v,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(w,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(w,"accessibleOutput")).insertAdjacentHTML("beforebegin",S):this.dummyDOM.querySelector("#"+w).innerHTML=S),(S=document.createElement("tr")).id=w+"_fte_"+m,this.dummyDOM.querySelector("#"+w+v).appendChild(S),this.descriptions.fallbackElements[m]=this.dummyDOM.querySelector("#".concat(w).concat("_fte_").concat(m)),this.descriptions.fallbackElements[m].innerHTML=b):c==="label"&&(this.dummyDOM.querySelector("#".concat(w+x))?this.dummyDOM.querySelector("#".concat(w+f))||this.dummyDOM.querySelector("#"+w+p).insertAdjacentHTML("afterend",'<table id="'.concat(w+f,'"></table>')):(S='<div id="'.concat(w).concat(x,'" class="p5Label"><table id="').concat(w).concat(f,'"></table></div>'),this.dummyDOM.querySelector("#".concat(w,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(w,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",S):this.dummyDOM.querySelector("#"+w).insertAdjacentHTML("afterend",S)),(c=document.createElement("tr")).id=w+"_lte_"+m,this.dummyDOM.querySelector("#"+w+f).appendChild(c),this.descriptions.labelElements[m]=this.dummyDOM.querySelector("#".concat(w).concat("_lte_").concat(m)),this.descriptions.labelElements[m].innerHTML=b)},i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.replace":194}],254:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.map"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.map"),i("core-js/modules/es.string.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.prototype._updateGridOutput=function(h){var l,d,v,x;this.dummyDOM.querySelector("#".concat(h,"_summary"))&&(l=this._accessibleOutputs[h],v=function(p,f,u,c){return f="".concat(f," canvas, ").concat(u," by ").concat(c," pixels, contains ").concat(p[0]),f=(p[0]===1?"".concat(f," shape: "):"".concat(f," shapes: ")).concat(p[1])}((d=function(p,f){var u,c="",m="",b=0;for(u in f){var S,w=0;for(S in f[u]){var M='<li id="'.concat(p,"shape").concat(b,'">').concat(f[u][S].color," ").concat(u,",");u==="line"?M+=" location = ".concat(f[u][S].pos,", length = ").concat(f[u][S].length," pixels"):(M+=" location = ".concat(f[u][S].pos),u!=="point"&&(M+=", area = ".concat(f[u][S].area," %")),M+="</li>"),c+=M,w++,b++}m=1<w?"".concat(m," ").concat(w," ").concat(u,"s"):"".concat(m," ").concat(w," ").concat(u)}return{numShapes:[b,m],details:c}}(h,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),x=function(p,f){var u,c,m=0,b="",S=Array.from(Array(10),function(){return Array(10)});for(u in f)for(var w in f[u]){var M;M=u!=="line"?'<a href="#'.concat(p,"shape").concat(m,'">').concat(f[u][w].color," ").concat(u,"</a>"):'<a href="#'.concat(p,"shape").concat(m,'">').concat(f[u][w].color," ").concat(u," midpoint</a>"),S[f[u][w].loc.locY][f[u][w].loc.locX]?S[f[u][w].loc.locY][f[u][w].loc.locX]=S[f[u][w].loc.locY][f[u][w].loc.locX]+"  "+M:S[f[u][w].loc.locY][f[u][w].loc.locX]=M,m++}for(c in S){var A,P="<tr>";for(A in S[c])P+="<td>",S[c][A]!==void 0&&(P+=S[c][A]),P+="</td>";b=b+P+"</tr>"}return b}(h,this.ingredients.shapes),v!==l.summary.innerHTML&&(l.summary.innerHTML=v),x!==l.map.innerHTML&&(l.map.innerHTML=x),d.details!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=d.details),this._accessibleOutputs[h]=l)},i=i.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.from":157,"core-js/modules/es.array.map":163,"core-js/modules/es.string.iterator":190}],255:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(d,v,x){return(v=Math.floor(d[0]/v*10))===10&&(v-=1),(d=Math.floor(d[1]/x*10))===10&&(d-=1),{locX:v,locY:d}}h.default.prototype.textOutput=function(d){h.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},h.default.prototype.gridOutput=function(d){h.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},h.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},h.default.prototype._createOutput=function(d,v){var x,p,f,u=this.canvas.id,c=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(u).parentNode),"");v==="Fallback"?(x=u+d,this.dummyDOM.querySelector("#".concat(p=u+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(u,"_Description"))?this.dummyDOM.querySelector("#".concat(u,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(u)).innerHTML='<div id="'.concat(p,'" role="region" aria-label="Canvas Outputs"></div>'))):v==="Label"&&(x=u+d+(c=v),this.dummyDOM.querySelector("#".concat(p=u+"accessibleOutput"+v))||(this.dummyDOM.querySelector("#".concat(u,"_Label"))?this.dummyDOM.querySelector("#".concat(u,"_Label")):this.dummyDOM.querySelector("#".concat(u))).insertAdjacentHTML("afterend",'<div id="'.concat(p,'"></div>'))),this._accessibleOutputs[x]={},d==="textOutput"?(c="#".concat(u,"gridOutput").concat(c),f='<div id="'.concat(x,'">Text Output<div id="').concat(x,'Summary" aria-label="text output summary"><p id="').concat(x,'_summary"></p><ul id="').concat(x,'_list"></ul></div><table id="').concat(x,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(c)?this.dummyDOM.querySelector(c).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#".concat(p)).innerHTML=f,this._accessibleOutputs[x].list=this.dummyDOM.querySelector("#".concat(x,"_list"))):d==="gridOutput"&&(c="#".concat(u,"textOutput").concat(c),f='<div id="'.concat(x,'">Grid Output<p id="').concat(x,'_summary" aria-label="grid output summary"><table id="').concat(x,'_map" summary="grid output content"></table><ul id="').concat(x,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(c)?this.dummyDOM.querySelector(c).insertAdjacentHTML("afterend",f):this.dummyDOM.querySelector("#".concat(p)).innerHTML=f,this._accessibleOutputs[x].map=this.dummyDOM.querySelector("#".concat(x,"_map"))),this._accessibleOutputs[x].shapeDetails=this.dummyDOM.querySelector("#".concat(x,"_shapeDetails")),this._accessibleOutputs[x].summary=this.dummyDOM.querySelector("#".concat(x,"_summary"))},h.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},h.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},h.default.prototype._accsCanvasColors=function(d,v){d==="fill"?this.ingredients.colors.fillRGBA!==v&&(this.ingredients.colors.fillRGBA=v,this.ingredients.colors.fill=this._rgbColorName(v)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==v&&(this.ingredients.colors.strokeRGBA=v,this.ingredients.colors.stroke=this._rgbColorName(v))},h.default.prototype._accsOutput=function(d,v){d==="ellipse"&&v[2]===v[3]?d="circle":d==="rectangle"&&v[2]===v[3]&&(d="square");var x,p,f={},u=!0,c=function(b,S){var w;return b=b==="rectangle"||b==="ellipse"||b==="arc"||b==="circle"||b==="square"?(w=Math.round(S[0]+S[2]/2),Math.round(S[1]+S[3]/2)):b==="triangle"?(w=(S[0]+S[2]+S[4])/3,(S[1]+S[3]+S[5])/3):b==="quadrilateral"?(w=(S[0]+S[2]+S[4]+S[6])/4,(S[1]+S[3]+S[5]+S[7])/4):b==="line"?(w=(S[0]+S[2])/2,(S[1]+S[3])/2):(w=S[0],S[1]),[w,b]}(d,v);if(d==="line"?(f.color=this.ingredients.colors.stroke,f.length=Math.round(this.dist(v[0],v[1],v[2],v[3])),x=this._getPos(v[0],[1]),p=this._getPos(v[2],[3]),f.loc=l(c,this.width,this.height),f.pos=x===p?"at ".concat(x):"from ".concat(x," to ").concat(p)):(d==="point"?f.color=this.ingredients.colors.stroke:(f.color=this.ingredients.colors.fill,f.area=this._getArea(d,v)),f.pos=this._getPos.apply(this,function(b){return function(S){if(Array.isArray(S)){for(var w=0,M=new Array(S.length);w<S.length;w++)M[w]=S[w];return M}}(b)||function(S){if(Symbol.iterator in Object(S)||Object.prototype.toString.call(S)==="[object Arguments]")return Array.from(S)}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(c)),f.loc=l(c,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[f]){for(var m in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][m])===JSON.stringify(f)&&(u=!1);u===!0&&this.ingredients.shapes[d].push(f)}}else this.ingredients.shapes[d]=[f]},h.default.prototype._getPos=function(d,v){d=new DOMPointReadOnly(d,v),v=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),v=(d=d.matrixTransform(v)).x,d=d.y;var x=this.width,p=this.height;return v<.4*x?d<.4*p?"top left":.6*p<d?"bottom left":"mid left":.6*x<v?d<.4*p?"top right":.6*p<d?"bottom right":"mid right":d<.4*p?"top middle":.6*p<d?"bottom middle":"middle"},h.default.prototype._getArea=function(d,v){var x,p,f=0,u=(d==="arc"?(f=(x=((v[5]-v[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*v[2]*v[3]/8,v[6]!=="open"&&v[6]!=="chord"||(p=v[0],S=v[1],u=v[0]+v[2]/2*Math.cos(v[4]).toFixed(2),w=v[1]+v[3]/2*Math.sin(v[4]).toFixed(2),m=v[0]+v[2]/2*Math.cos(v[5]).toFixed(2),c=v[1]+v[3]/2*Math.sin(v[5]).toFixed(2),p=Math.abs(p*(w-c)+u*(c-S)+m*(S-w))/2,x>Math.PI?f+=p:f-=p)):d==="ellipse"||d==="circle"?f=3.14*v[2]/2*v[3]/2:d==="line"||d==="point"?f=0:d==="quadrilateral"?f=Math.abs((v[6]+v[0])*(v[7]-v[1])+(v[0]+v[2])*(v[1]-v[3])+(v[2]+v[4])*(v[3]-v[5])+(v[4]+v[6])*(v[5]-v[7]))/2:d==="rectangle"||d==="square"?f=v[2]*v[3]:d==="triangle"&&(f=Math.abs(v[0]*(v[3]-v[5])+v[2]*(v[5]-v[1])+v[4]*(v[1]-v[3]))/2),this.width*this._pixelDensity),c=this.height*this._pixelDensity,m=[new DOMPoint(0,0),new DOMPoint(u,0),new DOMPoint(u,c),new DOMPoint(0,c)],b=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),S=m.map(function(M){return M.matrixTransform(b)}),w=Math.abs((S[3].x+S[0].x)*(S[3].y-S[0].y)+(S[0].x+S[1].x)*(S[0].y-S[1].y)+(S[1].x+S[2].x)*(S[1].y-S[2].y)+(S[2].x+S[3].x)*(S[2].y-S[3].y))/2;return Math.round(100*f/w)},i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],256:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.concat"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.prototype._updateTextOutput=function(h){var l,d,v,x;this.dummyDOM.querySelector("#".concat(h,"_summary"))&&(l=this._accessibleOutputs[h],v=function(p,f,u,c){return u="Your output is a, ".concat(u," by ").concat(c," pixels, ").concat(f," canvas containing the following"),u=p===1?"".concat(u," shape:"):"".concat(u," ").concat(p," shapes:")}((d=function(p,f){var u,c="",m=0;for(u in f)for(var b in f[u]){var S='<li><a href="#'.concat(p,"shape").concat(m,'">').concat(f[u][b].color," ").concat(u,"</a>");u==="line"?S+=", ".concat(f[u][b].pos,", ").concat(f[u][b].length," pixels long.</li>"):(S+=", at ".concat(f[u][b].pos),u!=="point"&&(S+=", covering ".concat(f[u][b].area,"% of the canvas")),S+=".</li>"),c+=S,m++}return{numShapes:m,listShapes:c}}(h,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),x=function(p,f){var u,c="",m=0;for(u in f)for(var b in f[u]){var S='<tr id="'.concat(p,"shape").concat(m,'"><th>').concat(f[u][b].color," ").concat(u,"</th>");u==="line"?S+="<td>location = ".concat(f[u][b].pos,"</td><td>length = ").concat(f[u][b].length," pixels</td></tr>"):(S+="<td>location = ".concat(f[u][b].pos,"</td>"),u!=="point"&&(S+="<td> area = ".concat(f[u][b].area,"%</td>")),S+="</tr>"),c+=S,m++}return c}(h,this.ingredients.shapes),v!==l.summary.innerHTML&&(l.summary.innerHTML=v),d.listShapes!==l.list.innerHTML&&(l.list.innerHTML=d.listShapes),x!==l.shapeDetails.innerHTML&&(l.shapeDetails.innerHTML=x),this._accessibleOutputs[h]=l)},i=i.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151}],257:[function(i,_,g){var h=(h=i("./core/main"))&&h.__esModule?h:{default:h};i("./core/constants"),i("./core/environment"),i("./core/friendly_errors/stacktrace"),i("./core/friendly_errors/validate_params"),i("./core/friendly_errors/file_errors"),i("./core/friendly_errors/fes_core"),i("./core/friendly_errors/sketch_reader"),i("./core/helpers"),i("./core/legacy"),i("./core/preload"),i("./core/p5.Element"),i("./core/p5.Graphics"),i("./core/p5.Renderer"),i("./core/p5.Renderer2D"),i("./core/rendering"),i("./core/shim"),i("./core/structure"),i("./core/transform"),i("./core/shape/2d_primitives"),i("./core/shape/attributes"),i("./core/shape/curves"),i("./core/shape/vertex"),i("./accessibility/outputs"),i("./accessibility/textOutput"),i("./accessibility/gridOutput"),i("./accessibility/color_namer"),i("./color/color_conversion"),i("./color/creating_reading"),i("./color/p5.Color"),i("./color/setting"),i("./data/p5.TypedDict"),i("./data/local_storage.js"),i("./dom/dom"),i("./accessibility/describe"),i("./events/acceleration"),i("./events/keyboard"),i("./events/mouse"),i("./events/touch"),i("./image/filters"),i("./image/image"),i("./image/loading_displaying"),i("./image/p5.Image"),i("./image/pixels"),i("./io/files"),i("./io/p5.Table"),i("./io/p5.TableRow"),i("./io/p5.XML"),i("./math/calculation"),i("./math/math"),i("./math/noise"),i("./math/p5.Vector"),i("./math/random"),i("./math/trigonometry"),i("./typography/attributes"),i("./typography/loading_displaying"),i("./typography/p5.Font"),i("./utilities/array_functions"),i("./utilities/conversion"),i("./utilities/string_functions"),i("./utilities/time_date"),i("./webgl/3d_primitives"),i("./webgl/interaction"),i("./webgl/light"),i("./webgl/loading"),i("./webgl/material"),i("./webgl/p5.Camera"),i("./webgl/p5.Geometry"),i("./webgl/p5.Matrix"),i("./webgl/p5.RendererGL.Immediate"),i("./webgl/p5.RendererGL"),i("./webgl/p5.RendererGL.Retained"),i("./webgl/p5.Framebuffer"),i("./webgl/p5.Shader"),i("./webgl/p5.RenderBuffer"),i("./webgl/p5.Texture"),i("./webgl/text"),i("./core/init"),_.exports=h.default},{"./accessibility/color_namer":252,"./accessibility/describe":253,"./accessibility/gridOutput":254,"./accessibility/outputs":255,"./accessibility/textOutput":256,"./color/color_conversion":258,"./color/creating_reading":259,"./color/p5.Color":260,"./color/setting":261,"./core/constants":262,"./core/environment":263,"./core/friendly_errors/fes_core":264,"./core/friendly_errors/file_errors":265,"./core/friendly_errors/sketch_reader":266,"./core/friendly_errors/stacktrace":267,"./core/friendly_errors/validate_params":268,"./core/helpers":269,"./core/init":270,"./core/legacy":272,"./core/main":273,"./core/p5.Element":274,"./core/p5.Graphics":275,"./core/p5.Renderer":276,"./core/p5.Renderer2D":277,"./core/preload":278,"./core/rendering":279,"./core/shape/2d_primitives":280,"./core/shape/attributes":281,"./core/shape/curves":282,"./core/shape/vertex":283,"./core/shim":284,"./core/structure":285,"./core/transform":286,"./data/local_storage.js":287,"./data/p5.TypedDict":288,"./dom/dom":289,"./events/acceleration":290,"./events/keyboard":291,"./events/mouse":292,"./events/touch":293,"./image/filters":294,"./image/image":295,"./image/loading_displaying":296,"./image/p5.Image":297,"./image/pixels":298,"./io/files":299,"./io/p5.Table":300,"./io/p5.TableRow":301,"./io/p5.XML":302,"./math/calculation":303,"./math/math":304,"./math/noise":305,"./math/p5.Vector":306,"./math/random":307,"./math/trigonometry":308,"./typography/attributes":309,"./typography/loading_displaying":310,"./typography/p5.Font":311,"./utilities/array_functions":312,"./utilities/conversion":313,"./utilities/string_functions":314,"./utilities/time_date":315,"./webgl/3d_primitives":316,"./webgl/interaction":317,"./webgl/light":318,"./webgl/loading":319,"./webgl/material":320,"./webgl/p5.Camera":321,"./webgl/p5.Framebuffer":322,"./webgl/p5.Geometry":323,"./webgl/p5.Matrix":324,"./webgl/p5.RenderBuffer":325,"./webgl/p5.RendererGL":328,"./webgl/p5.RendererGL.Immediate":326,"./webgl/p5.RendererGL.Retained":327,"./webgl/p5.Shader":329,"./webgl/p5.Texture":330,"./webgl/text":331}],258:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.ColorConversion={_hsbaToHSLA:function(h){var l=h[0],d=h[1],v=h[2],x=(2-d)*v/2;return x!=0&&(x==1?d=0:x<.5?d/=2-d:d=d*v/(2-2*x)),[l,d,x,h[3]]},_hsbaToRGBA:function(h){var l,d,v,x,p,f=6*h[0],u=h[1],c=h[2];return u===0?[c,c,c,h[3]]:(d=c*(1-u),v=c*(1-u*(f-(l=Math.floor(f)))),u=c*(1-u*(1+l-f)),f=l===1?(x=v,p=c,d):l===2?(x=d,p=c,u):l===3?(x=d,p=v,c):l===4?(x=u,p=d,c):l===5?(x=c,p=d,v):(x=c,p=u,d),[x,p,f,h[3]])},_hslaToHSBA:function(h){var l=h[0],d=h[1],v=h[2],x=v<.5?(1+d)*v:v+d-v*d;return[l,d=2*(x-v)/x,x,h[3]]},_hslaToRGBA:function(h){var l,d=6*h[0],v=h[1],x=h[2];return v===0?[x,x,x,h[3]]:[(l=function(p,f,u){return p<0?p+=6:6<=p&&(p-=6),p<1?f+(u-f)*p:p<3?u:p<4?f+(u-f)*(4-p):f})(2+d,v=2*x-(x=x<.5?(1+v)*x:x+v-x*v),x),l(d,v,x),l(d-2,v,x),h[3]]},_rgbaToHSBA:function(h){var l,d,v=h[0],x=h[1],p=h[2],f=Math.max(v,x,p),u=f-Math.min(v,x,p);return u==0?d=l=0:(d=u/f,v===f?l=(x-p)/u:x===f?l=2+(p-v)/u:p===f&&(l=4+(v-x)/u),l<0?l+=6:6<=l&&(l-=6)),[l/6,d,f,h[3]]},_rgbaToHSLA:function(h){var l,d,v,x=h[0],p=h[1],f=h[2],u=Math.max(x,p,f),c=u+(v=Math.min(x,p,f));return(v=u-v)==0?d=l=0:(d=c<1?v/c:v/(2-c),x===u?l=(p-f)/v:p===u?l=2+(f-x)/v:f===u&&(l=4+(x-p)/v),l<0?l+=6:6<=l&&(l-=6)),[l/6,d,c/2,h[3]]}},i=i.default.ColorConversion,g.default=i},{"../core/main":273}],259:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function l(p){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.map"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(x=i("../core/main"))&&x.__esModule?x:{default:x},v=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var f=function(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,S)}();if(f&&f.has(p))return f.get(p);var u,c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p){var b;Object.prototype.hasOwnProperty.call(p,u)&&((b=m?Object.getOwnPropertyDescriptor(p,u):null)&&(b.get||b.set)?Object.defineProperty(c,u,b):c[u]=p[u])}return c.default=p,f&&f.set(p,c),c}(i("../core/constants"));i("./p5.Color"),i("../core/friendly_errors/validate_params"),i("../core/friendly_errors/file_errors"),i("../core/friendly_errors/fes_core"),d.default.prototype.alpha=function(p){return d.default._validateParameters("alpha",arguments),this.color(p)._getAlpha()},d.default.prototype.blue=function(p){return d.default._validateParameters("blue",arguments),this.color(p)._getBlue()},d.default.prototype.brightness=function(p){return d.default._validateParameters("brightness",arguments),this.color(p)._getBrightness()},d.default.prototype.color=function(){var p;return d.default._validateParameters("color",arguments),arguments[0]instanceof d.default.Color?arguments[0]:(p=arguments[0]instanceof Array?arguments[0]:arguments,new d.default.Color(this,p))},d.default.prototype.green=function(p){return d.default._validateParameters("green",arguments),this.color(p)._getGreen()},d.default.prototype.hue=function(p){return d.default._validateParameters("hue",arguments),this.color(p)._getHue()},d.default.prototype.lerpColor=function(p,f,u){d.default._validateParameters("lerpColor",arguments);var c,m,b,S=this._colorMode,w=this._colorMaxes;if(S===v.RGB)m=p.levels.map(function(M){return M/255}),b=f.levels.map(function(M){return M/255});else if(S===v.HSB)p._getBrightness(),f._getBrightness(),m=p.hsba,b=f.hsba;else{if(S!==v.HSL)throw new Error("".concat(S,"cannot be used for interpolation."));p._getLightness(),f._getLightness(),m=p.hsla,b=f.hsla}return u=Math.max(Math.min(u,1),0),this.lerp===void 0&&(this.lerp=function(M,A,P){return P*(A-M)+M}),p=this.lerp(m[0],b[0],u),f=this.lerp(m[1],b[1],u),c=this.lerp(m[2],b[2],u),m=this.lerp(m[3],b[3],u),p*=w[S][0],f*=w[S][1],c*=w[S][2],m*=w[S][3],this.color(p,f,c,m)},d.default.prototype.lightness=function(p){return d.default._validateParameters("lightness",arguments),this.color(p)._getLightness()},d.default.prototype.red=function(p){return d.default._validateParameters("red",arguments),this.color(p)._getRed()},d.default.prototype.saturation=function(p){return d.default._validateParameters("saturation",arguments),this.color(p)._getSaturation()};var x=d.default;g.default=x},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],260:[function(i,_,g){function h(w){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(w)}function l(w){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(M){return h(M)}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":h(M)})(w)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.trim"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.trim"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=p(i("../core/main")),v=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var M=function(){var L;return typeof WeakMap!="function"?null:(L=new WeakMap,L)}();if(M&&M.has(w))return M.get(w);var A,P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in w){var k;Object.prototype.hasOwnProperty.call(w,A)&&((k=R?Object.getOwnPropertyDescriptor(w,A):null)&&(k.get||k.set)?Object.defineProperty(P,A,k):P[A]=w[A])}return P.default=w,M&&M.set(w,P),P}(i("../core/constants")),x=p(i("./color_conversion"));function p(w){return w&&w.__esModule?w:{default:w}}function f(w,M){for(var A=0;A<M.length;A++){var P=M[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}var u={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},c=(i=/\s*/,/(\d{1,3})/),m=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,b=new RegExp("".concat(m.source,"%")),S={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(i.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",b.source,",",b.source,",",b.source,"\\)$"].join(i.source),"i"),RGBA:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",m.source,"\\)$"].join(i.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",b.source,",",b.source,",",b.source,",",m.source,"\\)$"].join(i.source),"i"),HSL:new RegExp(["^hsl\\(",c.source,",",b.source,",",b.source,"\\)$"].join(i.source),"i"),HSLA:new RegExp(["^hsla\\(",c.source,",",b.source,",",b.source,",",m.source,"\\)$"].join(i.source),"i"),HSB:new RegExp(["^hsb\\(",c.source,",",b.source,",",b.source,"\\)$"].join(i.source),"i"),HSBA:new RegExp(["^hsba\\(",c.source,",",b.source,",",b.source,",",m.source,"\\)$"].join(i.source),"i")};d.default.Color=function(){function w(R,k){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(R._colorMode,R._colorMaxes),![v.RGB,v.HSL,v.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=w._parseInputs.apply(this,k),this._calculateLevels()}var M,A,P;return M=w,P=[{key:"_parseInputs",value:function(R,k,L,B){var I,F=arguments.length,z=this.mode,G=this.maxes[z],N=[];if(3<=F){for(N[0]=R/G[0],N[1]=k/G[1],N[2]=L/G[2],N[3]=typeof B=="number"?B/G[3]:1,I=N.length-1;0<=I;--I){var O=N[I];O<0?N[I]=0:1<O&&(N[I]=1)}return z===v.HSL?x.default._hslaToRGBA(N):z===v.HSB?x.default._hsbaToRGBA(N):N}if(F===1&&typeof R=="string"){if(L=R.trim().toLowerCase(),u[L])return w._parseInputs.call(this,u[L]);if(S.HEX3.test(L))return(N=S.HEX3.exec(L).slice(1).map(function(H){return parseInt(H+H,16)/255}))[3]=1,N;if(S.HEX6.test(L))return(N=S.HEX6.exec(L).slice(1).map(function(H){return parseInt(H,16)/255}))[3]=1,N;if(S.HEX4.test(L))return S.HEX4.exec(L).slice(1).map(function(H){return parseInt(H+H,16)/255});if(S.HEX8.test(L))return S.HEX8.exec(L).slice(1).map(function(H){return parseInt(H,16)/255});if(S.RGB.test(L))return(N=S.RGB.exec(L).slice(1).map(function(H){return H/255}))[3]=1,N;if(S.RGB_PERCENT.test(L))return(N=S.RGB_PERCENT.exec(L).slice(1).map(function(H){return parseFloat(H)/100}))[3]=1,N;if(S.RGBA.test(L))return S.RGBA.exec(L).slice(1).map(function(H,q){return q===3?parseFloat(H):H/255});if(S.RGBA_PERCENT.test(L))return S.RGBA_PERCENT.exec(L).slice(1).map(function(H,q){return q===3?parseFloat(H):parseFloat(H)/100});if(S.HSL.test(L)?(N=S.HSL.exec(L).slice(1).map(function(H,q){return q===0?parseInt(H,10)/360:parseInt(H,10)/100}))[3]=1:S.HSLA.test(L)&&(N=S.HSLA.exec(L).slice(1).map(function(H,q){return q===0?parseInt(H,10)/360:q===3?parseFloat(H):parseInt(H,10)/100})),(N=N.map(function(H){return Math.max(Math.min(H,1),0)})).length)return x.default._hslaToRGBA(N);if(S.HSB.test(L)?(N=S.HSB.exec(L).slice(1).map(function(H,q){return q===0?parseInt(H,10)/360:parseInt(H,10)/100}))[3]=1:S.HSBA.test(L)&&(N=S.HSBA.exec(L).slice(1).map(function(H,q){return q===0?parseInt(H,10)/360:q===3?parseFloat(H):parseInt(H,10)/100})),N.length){for(I=N.length-1;0<=I;--I)N[I]=Math.max(Math.min(N[I],1),0);return x.default._hsbaToRGBA(N)}N=[1,1,1,1]}else{if(F!==1&&F!==2||typeof R!="number")throw new Error("".concat(arguments,"is not a valid color representation."));N[0]=R/G[2],N[1]=R/G[2],N[2]=R/G[2],N[3]=typeof k=="number"?k/G[3]:1,N=N.map(function(H){return Math.max(Math.min(H,1),0)})}return N}}],(A=[{key:"toString",value:function(R){var k=this.levels,L=this._array,B=L[3];switch(R){case"#rrggbb":return"#".concat(k[0]<16?"0".concat(k[0].toString(16)):k[0].toString(16),k[1]<16?"0".concat(k[1].toString(16)):k[1].toString(16),k[2]<16?"0".concat(k[2].toString(16)):k[2].toString(16));case"#rrggbbaa":return"#".concat(k[0]<16?"0".concat(k[0].toString(16)):k[0].toString(16),k[1]<16?"0".concat(k[1].toString(16)):k[1].toString(16),k[2]<16?"0".concat(k[2].toString(16)):k[2].toString(16),k[3]<16?"0".concat(k[3].toString(16)):k[3].toString(16));case"#rgb":return"#".concat(Math.round(15*L[0]).toString(16),Math.round(15*L[1]).toString(16),Math.round(15*L[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*L[0]).toString(16),Math.round(15*L[1]).toString(16),Math.round(15*L[2]).toString(16),Math.round(15*L[3]).toString(16));case"rgb":return"rgb(".concat(k[0],", ",k[1],", ",k[2],")");case"rgb%":return"rgb(".concat((100*L[0]).toPrecision(3),"%, ",(100*L[1]).toPrecision(3),"%, ",(100*L[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*L[0]).toPrecision(3),"%, ",(100*L[1]).toPrecision(3),"%, ",(100*L[2]).toPrecision(3),"%, ",(100*L[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[v.HSB][0],", ",this.hsba[1]*this.maxes[v.HSB][1],", ",this.hsba[2]*this.maxes[v.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[v.HSB][0],", ",this.hsba[1]*this.maxes[v.HSB][1],", ",this.hsba[2]*this.maxes[v.HSB][2],", ",B,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*B).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[v.HSL][0],", ",this.hsla[1]*this.maxes[v.HSL][1],", ",this.hsla[2]*this.maxes[v.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[v.HSL][0],", ",this.hsla[1]*this.maxes[v.HSL][1],", ",this.hsla[2]*this.maxes[v.HSL][2],", ",B,")");case"hsla%":return this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*B).toPrecision(3),"%)");default:return"rgba(".concat(k[0],",",k[1],",",k[2],",",B,")")}}},{key:"setRed",value:function(R){this._array[0]=R/this.maxes[v.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(R){this._array[1]=R/this.maxes[v.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(R){this._array[2]=R/this.maxes[v.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(R){this._array[3]=R/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var R=this._array,k=this.levels=new Array(R.length),L=R.length-1;0<=L;--L)k[L]=Math.round(255*R[L]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(R,k){this.mode=R,this.maxes=k}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[v.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[v.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[v.RGB][1]}},{key:"_getHue",value:function(){return this.mode===v.HSB?(this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[v.HSB][0]):(this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[v.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[v.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[v.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===v.HSB?(this.hsba||(this.hsba=x.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[v.HSB][1]):(this.hsla||(this.hsla=x.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[v.HSL][1])}}])&&f(M.prototype,A),P&&f(M,P),w}(),c=d.default.Color,g.default=c},{"../core/constants":262,"../core/main":273,"./color_conversion":258,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],261:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function l(p){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.fill"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(x=i("../core/main"))&&x.__esModule?x:{default:x},v=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var f=function(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,S)}();if(f&&f.has(p))return f.get(p);var u,c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p){var b;Object.prototype.hasOwnProperty.call(p,u)&&((b=m?Object.getOwnPropertyDescriptor(p,u):null)&&(b.get||b.set)?Object.defineProperty(c,u,b):c[u]=p[u])}return c.default=p,f&&f.set(p,c),c}(i("../core/constants"));i("./p5.Color"),d.default.prototype.background=function(){var p;return(p=this._renderer).background.apply(p,arguments),this},d.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},d.default.prototype.colorMode=function(p,f,u,c,m){return d.default._validateParameters("colorMode",arguments),p!==v.RGB&&p!==v.HSB&&p!==v.HSL||(this._colorMode=p,p=this._colorMaxes[p],arguments.length===2?(p[0]=f,p[1]=f,p[2]=f,p[3]=f):arguments.length===4?(p[0]=f,p[1]=u,p[2]=c):arguments.length===5&&(p[0]=f,p[1]=u,p[2]=c,p[3]=m)),this},d.default.prototype.fill=function(){var p;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(p=this._renderer).fill.apply(p,arguments),this},d.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},d.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},d.default.prototype.stroke=function(){var p;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(p=this._renderer).stroke.apply(p,arguments),this},d.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},d.default.prototype.noErase=function(){return this._renderer.noErase(),this};var x=d.default;g.default=x},{"../core/constants":262,"../core/main":273,"./p5.Color":260,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],262:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.QUADRATIC=g.LINEAR=g._CTX_MIDDLE=g._DEFAULT_LEADMULT=g._DEFAULT_TEXT_FILL=g.WORD=g.CHAR=g.BOLDITALIC=g.BOLD=g.ITALIC=g.NORMAL=g.BLUR=g.ERODE=g.DILATE=g.POSTERIZE=g.INVERT=g.OPAQUE=g.GRAY=g.THRESHOLD=g.BURN=g.DODGE=g.SOFT_LIGHT=g.HARD_LIGHT=g.OVERLAY=g.REPLACE=g.SCREEN=g.MULTIPLY=g.EXCLUSION=g.SUBTRACT=g.DIFFERENCE=g.LIGHTEST=g.DARKEST=g.ADD=g.REMOVE=g.BLEND=g.UP_ARROW=g.TAB=g.SHIFT=g.RIGHT_ARROW=g.RETURN=g.OPTION=g.LEFT_ARROW=g.ESCAPE=g.ENTER=g.DOWN_ARROW=g.DELETE=g.CONTROL=g.BACKSPACE=g.ALT=g.AUTO=g.HSL=g.HSB=g.RGB=g.MITER=g.BEVEL=g.ROUND=g.SQUARE=g.PROJECT=g.PIE=g.CHORD=g.OPEN=g.CLOSE=g.TESS=g.QUAD_STRIP=g.QUADS=g.TRIANGLE_STRIP=g.TRIANGLE_FAN=g.TRIANGLES=g.LINE_LOOP=g.LINE_STRIP=g.LINES=g.POINTS=g.BASELINE=g.BOTTOM=g.TOP=g.CENTER=g.LEFT=g.RIGHT=g.RADIUS=g.CORNERS=g.CORNER=g.RAD_TO_DEG=g.DEG_TO_RAD=g.RADIANS=g.DEGREES=g.TWO_PI=g.TAU=g.QUARTER_PI=g.PI=g.HALF_PI=g.WAIT=g.TEXT=g.MOVE=g.HAND=g.CROSS=g.ARROW=g.WEBGL2=g.WEBGL=g.P2D=g.VERSION=void 0,g.RGBA=g.HALF_FLOAT=g.FLOAT=g.UNSIGNED_INT=g.UNSIGNED_BYTE=g.COVER=g.CONTAIN=g.FALLBACK=g.LABEL=g.AXES=g.GRID=g._DEFAULT_FILL=g._DEFAULT_STROKE=g.PORTRAIT=g.LANDSCAPE=g.MIRROR=g.CLAMP=g.REPEAT=g.NEAREST=g.IMAGE=g.IMMEDIATE=g.TEXTURE=g.FILL=g.STROKE=g.CURVE=g.BEZIER=void 0;var h=Math.PI,l=(g.VERSION="1.7.0",g.P2D="p2d",g.WEBGL="webgl",g.WEBGL2="webgl2",g.ARROW="default",g.CROSS="crosshair",g.HAND="pointer",g.MOVE="move",g.TEXT="text",g.WAIT="wait",h/2);g.HALF_PI=l,l=h,g.PI=l,l=h/4,g.QUARTER_PI=l,l=2*h,g.TAU=l,l=2*h,g.TWO_PI=l,g.DEGREES="degrees",g.RADIANS="radians",l=h/180,g.DEG_TO_RAD=l,l=180/h,g.RAD_TO_DEG=l,g.CORNER="corner",g.CORNERS="corners",g.RADIUS="radius",g.RIGHT="right",g.LEFT="left",g.CENTER="center",g.TOP="top",g.BOTTOM="bottom",g.BASELINE="alphabetic",g.POINTS=0,g.LINES=1,g.LINE_STRIP=3,g.LINE_LOOP=2,g.TRIANGLES=4,g.TRIANGLE_FAN=6,g.TRIANGLE_STRIP=5,g.QUADS="quads",g.QUAD_STRIP="quad_strip",g.TESS="tess",g.CLOSE="close",g.OPEN="open",g.CHORD="chord",g.PIE="pie",g.PROJECT="square",g.SQUARE="butt",g.ROUND="round",g.BEVEL="bevel",g.MITER="miter",g.RGB="rgb",g.HSB="hsb",g.HSL="hsl",g.AUTO="auto",g.ALT=18,g.BACKSPACE=8,g.CONTROL=17,g.DELETE=46,g.DOWN_ARROW=40,g.ENTER=13,g.ESCAPE=27,g.LEFT_ARROW=37,g.OPTION=18,g.RETURN=13,g.RIGHT_ARROW=39,g.SHIFT=16,g.TAB=9,g.UP_ARROW=38,g.BLEND="source-over",g.REMOVE="destination-out",g.ADD="lighter",g.DARKEST="darken",g.LIGHTEST="lighten",g.DIFFERENCE="difference",g.SUBTRACT="subtract",g.EXCLUSION="exclusion",g.MULTIPLY="multiply",g.SCREEN="screen",g.REPLACE="copy",g.OVERLAY="overlay",g.HARD_LIGHT="hard-light",g.SOFT_LIGHT="soft-light",g.DODGE="color-dodge",g.BURN="color-burn",g.THRESHOLD="threshold",g.GRAY="gray",g.OPAQUE="opaque",g.INVERT="invert",g.POSTERIZE="posterize",g.DILATE="dilate",g.ERODE="erode",g.BLUR="blur",g.NORMAL="normal",g.ITALIC="italic",g.BOLD="bold",g.BOLDITALIC="bold italic",g.CHAR="CHAR",g.WORD="WORD",g._DEFAULT_TEXT_FILL="#000000",g._DEFAULT_LEADMULT=1.25,g._CTX_MIDDLE="middle",g.LINEAR="linear",g.QUADRATIC="quadratic",g.BEZIER="bezier",g.CURVE="curve",g.STROKE="stroke",g.FILL="fill",g.TEXTURE="texture",g.IMMEDIATE="immediate",g.IMAGE="image",g.NEAREST="nearest",g.REPEAT="repeat",g.CLAMP="clamp",g.MIRROR="mirror",g.LANDSCAPE="landscape",g.PORTRAIT="portrait",g._DEFAULT_STROKE="#000000",g._DEFAULT_FILL="#FFFFFF",g.GRID="grid",g.AXES="axes",g.LABEL="label",g.FALLBACK="fallback",g.CONTAIN="contain",g.COVER="cover",g.UNSIGNED_BYTE="unsigned-byte",g.UNSIGNED_INT="unsigned-int",g.FLOAT="float",g.HALF_FLOAT="half-float",g.RGBA="rgba"},{}],263:[function(i,_,g){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(c)}function l(c){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(c)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.search"),i("core-js/modules/es.string.split"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.search"),i("core-js/modules/es.string.split"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(v=i("./main"))&&v.__esModule?v:{default:v},v=function(c){if(c&&c.__esModule)return c;if(c===null||l(c)!=="object"&&typeof c!="function")return{default:c};var m=function(){var A;return typeof WeakMap!="function"?null:(A=new WeakMap,A)}();if(m&&m.has(c))return m.get(c);var b,S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in c){var M;Object.prototype.hasOwnProperty.call(c,b)&&((M=w?Object.getOwnPropertyDescriptor(c,b):null)&&(M.get||M.set)?Object.defineProperty(S,b,M):S[b]=c[b])}return S.default=c,m&&m.set(c,S),S}(i("./constants")),x=[v.ARROW,v.CROSS,v.HAND,v.MOVE,v.TEXT,v.WAIT],p=(d.default.prototype._frameRate=0,d.default.prototype._lastFrameTime=window.performance.now(),d.default.prototype._targetFrameRate=60,window.print);function f(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function u(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}d.default.prototype.print=function(){var c;arguments.length?(c=console).log.apply(c,arguments):p()},d.default.prototype.frameCount=0,d.default.prototype.deltaTime=0,d.default.prototype.focused=document.hasFocus(),d.default.prototype.cursor=function(c,m,b){var S,w="auto",M=this._curElement.elt;x.includes(c)?w=c:typeof c=="string"&&(S="",m&&b&&typeof m=="number"&&typeof b=="number"&&(S="".concat(m," ").concat(b)),w=c.substring(0,7)==="http://"||c.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(c)?"url(".concat(c,") ").concat(S,", auto"):c),M.style.cursor=w},d.default.prototype.frameRate=function(c){return d.default._validateParameters("frameRate",arguments),typeof c!="number"||c<0?this._frameRate:(this._setProperty("_targetFrameRate",c),c===0&&this._setProperty("_frameRate",c),this)},d.default.prototype.getFrameRate=function(){return this.frameRate()},d.default.prototype.setFrameRate=function(c){return this.frameRate(c)},d.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},d.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},d.default.prototype.webglVersion=v.P2D,d.default.prototype.displayWidth=screen.width,d.default.prototype.displayHeight=screen.height,d.default.prototype.windowWidth=f(),d.default.prototype.windowHeight=u(),d.default.prototype._onresize=function(c){this._setProperty("windowWidth",f()),this._setProperty("windowHeight",u());var m=this._isGlobal?window:this;typeof m.windowResized!="function"||(m=m.windowResized(c))===void 0||m||c.preventDefault()},d.default.prototype.width=0,d.default.prototype.height=0,d.default.prototype.fullscreen=function(c){if(d.default._validateParameters("fullscreen",arguments),c===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(c){if(c=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():c.msRequestFullscreen&&c.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},d.default.prototype.pixelDensity=function(c){var m;return d.default._validateParameters("pixelDensity",arguments),typeof c=="number"?(c!==this._pixelDensity&&(this._pixelDensity=c),(m=this).resizeCanvas(this.width,this.height,!0)):m=this._pixelDensity,m},d.default.prototype.displayDensity=function(){return window.devicePixelRatio},d.default.prototype.getURL=function(){return location.href},d.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(c){return c!==""})},d.default.prototype.getURLParams=function(){for(var c,m=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,b={};(c=m.exec(location.search))!=null;)c.index===m.lastIndex&&m.lastIndex++,b[c[1]]=c[2];return b},i=d.default,g.default=i},{"./constants":262,"./main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.search":195,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],264:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.some"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.get-own-property-names"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.starts-with"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.some"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.get-own-property-names"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.starts-with"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(p=i("../main"))&&p.__esModule?p:{default:p};function l(f,u){u=u||console.log.bind(console),d||v(),d.some(function(c){var m;if(f.message&&f.message.match("\\W?".concat(c.name,"\\W"))!==null)return m=c.type==="function"?"".concat(c.name,"()"):c.name,u("Did you just try to use p5.js's ".concat(m," ").concat(c.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(x)),!0})}i("../internationalization");var d=null,v=null,x=(h.default._friendlyError=h.default._checkForUserDefinedFunctions=h.default._fesErrorMonitor=function(){},d=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),p=(v=function(){function f(c){return Object.getOwnPropertyNames(c).filter(function(m){return m[0]!=="_"&&!(m in u)&&(u[m]=!0)}).map(function(m){var b=typeof c[m]=="function"?"function":m===m.toUpperCase()?"constant":"variable";return{name:m,type:b}})}var u={};(d=[].concat(f(h.default.prototype),f(i("../constants")))).sort(function(c,m){return m.name.length-c.name.length})},h.default.prototype._helpForMisusedAtTopLevelCode=l,document.readyState!=="complete"&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)})),h.default);g.default=p},{"../constants":262,"../internationalization":271,"../main":273,"./browser_errors":void 0,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.function.name":167,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.starts-with":197,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],265:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(h=i("../main"))&&h.__esModule?h:{default:h};i("../internationalization"),h.default._friendlyFileLoadError=function(){},i=h.default,g.default=i},{"../internationalization":271,"../main":273}],266:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function l(p){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=function(p){return p&&p.__esModule?p:{default:p}}(i("../main"));i("../internationalization"),function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var f=v();if(f&&f.has(p))return f.get(p);var u,c,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p)Object.prototype.hasOwnProperty.call(p,u)&&((c=b?Object.getOwnPropertyDescriptor(p,u):null)&&(c.get||c.set)?Object.defineProperty(m,u,c):m[u]=p[u]);m.default=p,f&&f.set(p,m)}(i("../constants"));function v(){var p;return typeof WeakMap!="function"?null:(p=new WeakMap,v=function(){return p},p)}d.default._fesCodeReader=function(){};var x=d.default;g.default=x},{"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],267:[function(i,_,g){function h(){var l=/(^|@)\S+:\d+/,d=/^\s*at .*(\S+:\d+|\(native\))/m,v=/^(eval@)?(\[native code])?$/;return{parse:function(x){return x.stacktrace!==void 0||x["opera#sourceloc"]!==void 0?this.parseOpera(x):x.stack&&x.stack.match(d)?this.parseV8OrIE(x):x.stack?this.parseFFOrSafari(x):void 0},extractLocation:function(x){return x.indexOf(":")===-1?[x]:[(x=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(x.replace(/[()]/g,"")))[1],x[2]||void 0,x[3]||void 0]},parseV8OrIE:function(x){return x.stack.split(`
`).filter(function(p){return!!p.match(d)},this).map(function(p){var f=(u=(p=-1<p.indexOf("(eval ")?p.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):p).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),u=(u=f?u.replace(f[0],""):u).split(/\s+/).slice(1);return f=this.extractLocation(f?f[1]:u.pop()),{functionName:u.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(f[0])?void 0:f[0],lineNumber:f[1],columnNumber:f[2],source:p}},this)},parseFFOrSafari:function(x){return x.stack.split(`
`).filter(function(p){return!p.match(v)},this).map(function(p){var f,u;return(p=-1<p.indexOf(" > eval")?p.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):p).indexOf("@")===-1&&p.indexOf(":")===-1?{functionName:p}:{functionName:(u=p.match(f=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&u[1]?u[1]:void 0,fileName:(u=this.extractLocation(p.replace(f,"")))[0],lineNumber:u[1],columnNumber:u[2],source:p}},this)},parseOpera:function(x){return!x.stacktrace||-1<x.message.indexOf(`
`)&&x.message.split(`
`).length>x.stacktrace.split(`
`).length?this.parseOpera9(x):x.stack?this.parseOpera11(x):this.parseOpera10(x)},parseOpera9:function(x){for(var p=/Line (\d+).*script (?:in )?(\S+)/i,f=x.message.split(`
`),u=[],c=2,m=f.length;c<m;c+=2){var b=p.exec(f[c]);b&&u.push({fileName:b[2],lineNumber:b[1],source:f[c]})}return u},parseOpera10:function(x){for(var p=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,f=x.stacktrace.split(`
`),u=[],c=0,m=f.length;c<m;c+=2){var b=p.exec(f[c]);b&&u.push({functionName:b[3]||void 0,fileName:b[2],lineNumber:b[1],source:f[c]})}return u},parseOpera11:function(x){return x.stack.split(`
`).filter(function(p){return!!p.match(l)&&!p.match(/^Error created at/)},this).map(function(p){var f,u=p.split("@"),c=this.extractLocation(u.pop());return{functionName:(u=u.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(f=u.match(/\(([^)]*)\)/)?u.replace(/^[^(]+\(([^)]*)\)$/,"$1"):f)===void 0||f==="[arguments not available]"?void 0:f.split(","),fileName:c[0],lineNumber:c[1],columnNumber:c[2],source:p}},this)}}}i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../main"))&&i.__esModule?i:{default:i}).default._getErrorStackParser=function(){return new h},i=i.default,g.default=i},{"../main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196}],268:[function(i,_,g){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.last-index-of"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.map"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.set"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.last-index-of"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.map"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.set"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(l=i("../main"))&&l.__esModule?l:{default:l};function d(v){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(x){return h(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":h(x)})(v)}(function(v){if(!(v&&v.__esModule||v===null||d(v)!=="object"&&typeof v!="function")){var x=function(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,m)}();if(x&&x.has(v))return x.get(v);var p,f={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in v){var c;Object.prototype.hasOwnProperty.call(v,p)&&((c=u?Object.getOwnPropertyDescriptor(v,p):null)&&(c.get||c.set)?Object.defineProperty(f,p,c):f[p]=v[p])}f.default=v,x&&x.set(v,f)}})(i("../constants")),i("../internationalization"),l.default._validateParameters=l.default._clearValidateParamsCache=function(){},i=l.default,g.default=i},{"../../../docs/parameterData.json":void 0,"../constants":262,"../internationalization":271,"../main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.map":168,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],269:[function(i,_,g){function h(v){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(v)}function l(v){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(x){return h(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":h(x)})(v)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=function(v){if(v&&v.__esModule)return v;if(v===null||l(v)!=="object"&&typeof v!="function")return{default:v};var x=function(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,m)}();if(x&&x.has(v))return x.get(v);var p,f={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in v){var c;Object.prototype.hasOwnProperty.call(v,p)&&((c=u?Object.getOwnPropertyDescriptor(v,p):null)&&(c.get||c.set)?Object.defineProperty(f,p,c):f[p]=v[p])}return f.default=v,x&&x.set(v,f),f}(i("./constants"));g.default={modeAdjust:function(v,x,p,f,u){return u===d.CORNER?{x:v,y:x,w:p,h:f}:u===d.CORNERS?{x:v,y:x,w:p-v,h:f-x}:u===d.RADIUS?{x:v-p,y:x-f,w:2*p,h:2*f}:u===d.CENTER?{x:v-.5*p,y:x-.5*f,w:p,h:f}:void 0}}},{"./constants":262,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],270:[function(i,_,g){i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator");var h=(l=i("../core/main"))&&l.__esModule?l:{default:l};i("./internationalization");var l=Promise.resolve();Promise.all([new Promise(function(d,v){document.readyState==="complete"?d():window.addEventListener("load",d,!1)}),l]).then(function(){window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!h.default.instance&&new h.default})},{"../core/main":273,"./internationalization":271,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/web.dom-collections.iterator":236}],271:[function(i,_,g){i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.setTranslatorLanguage=g.currentTranslatorLanguage=g.availableTranslatorLanguages=g.initialize=g.translator=void 0;var h,l=v(i("i18next")),d=v(i("i18next-browser-languagedetector"));function v(f){return f&&f.__esModule?f:{default:f}}function x(f,u){for(var c=0;c<u.length;c++){var m=u[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var p=function(){function f(m,b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(m,b)}var u,c;return u=f,(c=[{key:"fetchWithTimeout",value:function(m,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(m,b),new Promise(function(w,M){return setTimeout(function(){return M(new Error("timeout"))},S)})])}},{key:"init",value:function(m){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=m,this.options=b}},{key:"read",value:function(m,b,S){var w=this.options.loadPath;m===this.options.fallback?S(null,h[m][b]):(void 0).includes(m)?(w=this.services.interpolator.interpolate(w,{lng:m,ns:b}),this.loadUrl(w,S)):S("Not found",!1)}},{key:"loadUrl",value:function(m,b){this.fetchWithTimeout(m).then(function(S){if(S.ok)return S.json();throw new Error("failed loading ".concat(m))},function(){throw new Error("failed loading ".concat(m))}).then(function(S){return b(null,S)}).catch(b)}}])&&x(u.prototype,c),f}();p.type="backend",g.translator=function(f,u){console.debug("p5.js translator called before translations were loaded"),l.default.t(f,u)},g.initialize=function(){return l.default.use(d.default).use(p).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:h}).then(function(f){g.translator=f},function(f){return console.debug("Translations failed to load (".concat(f,")"))})},g.availableTranslatorLanguages=function(){return l.default.languages},g.currentTranslatorLanguage=function(f){return l.default.language},g.setTranslatorLanguage=function(f){return l.default.changeLanguage(f||void 0,function(u){return console.debug("Translations failed to load (".concat(u,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236,i18next:3,"i18next-browser-languagedetector":3}],272:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("./main"))&&i.__esModule?i:{default:i}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},i.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},i.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},i.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},i=i.default,g.default=i},{"./main":273}],273:[function(i,_,g){function h(f){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function l(f){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(f)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-own-property-names"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-names"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,i("./shim");var d=function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var u=function(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,w)}();if(u&&u.has(f))return u.get(f);var c,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in f){var S;Object.prototype.hasOwnProperty.call(f,c)&&((S=b?Object.getOwnPropertyDescriptor(f,c):null)&&(S.get||S.set)?Object.defineProperty(m,c,S):m[c]=f[c])}return m.default=f,u&&u.set(f,m),m}(i("./constants"));function v(f,u){for(var c=0;c<u.length;c++){var m=u[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}var x,p=function(){function f(m,b,S){var w=this;if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=b,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},b=Object.getOwnPropertyNames(f.prototype._registeredMethods);var M=!0,A=!1,P=void 0;try{for(var R,k=b[Symbol.iterator]();!(M=(R=k.next()).done);M=!0){var L=R.value;this._registeredMethods[L]=f.prototype._registeredMethods[L].slice()}}catch(q){A=!0,P=q}finally{try{M||k.return==null||k.return()}finally{if(A)throw P}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){w._userNode&&typeof w._userNode=="string"&&(w._userNode=document.getElementById(w._userNode));var q=w._isGlobal?window:w;if(q.preload){var K,ne=document.getElementById(w._loadingScreenId),ee=(ne||((ne=document.createElement("div")).innerHTML="Loading...",ne.style.position="absolute",ne.id=w._loadingScreenId,(w._userNode||document.body).appendChild(ne)),w._preloadMethods);for(K in ee){ee[K]=ee[K]||f;var se=ee[K];se!==f.prototype&&se!==f||(w._isGlobal&&(window[K]=w._wrapPreload(w,K)),se=w),w._registeredPreloadMethods[K]=se[K],se[K]=w._wrapPreload(se,K)}q.preload(),w._runIfPreloadsAreDone()}else w._setup(),w._recording||w._draw()},this._runIfPreloadsAreDone=function(){var q,K=this._isGlobal?window:this;K._preloadCount===0&&((q=document.getElementById(K._loadingScreenId))&&q.parentNode.removeChild(q),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),K._setup(),this._recording||K._draw()))},this._decrementPreload=function(){var q=this._isGlobal?window:this;q._preloadDone||typeof q.preload!="function"||(q._setProperty("_preloadCount",q._preloadCount-1),q._runIfPreloadsAreDone())},this._wrapPreload=function(q,K){var ne=this;return function(){ne._incrementPreload();for(var ee=arguments.length,se=new Array(ee),me=0;me<ee;me++)se[me]=arguments[me];return ne._registeredPreloadMethods[K].apply(q,se)}},this._incrementPreload=function(){var q=this._isGlobal?window:this;q._preloadDone||q._setProperty("_preloadCount",q._preloadCount+1)},this._setup=function(){w.createCanvas(w._defaultCanvasSize.width,w._defaultCanvasSize.height,"p2d");var q=w._isGlobal?window:w;if(typeof q.preload=="function")for(var K in w._preloadMethods)q[K]=w._preloadMethods[K][K],q[K]&&w&&(q[K]=q[K].bind(w));w._millisStart=window.performance.now(),q._preloadDone=!0,typeof q.setup=="function"&&q.setup();var ne=document.getElementsByTagName("canvas"),ee=!0,se=!1,me=void 0;try{for(var X,Z=ne[Symbol.iterator]();!(ee=(X=Z.next()).done);ee=!0){var ie=X.value;ie.dataset.hidden==="true"&&(ie.style.visibility="",delete ie.dataset.hidden)}}catch(ye){se=!0,me=ye}finally{try{ee||Z.return==null||Z.return()}finally{if(se)throw me}}w._lastTargetFrameTime=window.performance.now(),w._lastRealFrameTime=window.performance.now(),w._setupDone=!0,(w._accessibleOutputs.grid||w._accessibleOutputs.text)&&w._updateAccsOutput()},this._draw=function(){var q=window.performance.now(),K=q-w._lastTargetFrameTime,ne=1e3/w._targetFrameRate;(!w._loop||ne-5<=K)&&(w.deltaTime=q-w._lastRealFrameTime,w._setProperty("deltaTime",w.deltaTime),w._frameRate=1e3/w.deltaTime,w.redraw(),w._lastTargetFrameTime=Math.max(w._lastTargetFrameTime+ne,q),w._lastRealFrameTime=q,w._updateMouseCoords!==void 0&&(w._updateMouseCoords(),w._setProperty("movedX",0),w._setProperty("movedY",0))),w._loop&&(w._requestAnimId=window.requestAnimationFrame(w._draw))},this._setProperty=function(q,K){w[q]=K,w._isGlobal&&(window[q]=K)},this.remove=function(){if((ne=document.getElementById(w._loadingScreenId))&&(ne.parentNode.removeChild(ne),w._incrementPreload()),w._curElement){for(var q in w._loop=!1,w._requestAnimId&&window.cancelAnimationFrame(w._requestAnimId),w._events)window.removeEventListener(q,w._events[q]);var K=!0,ne=!1,ee=void 0;try{for(var se,me=w._elements[Symbol.iterator]();!(K=(se=me.next()).done);K=!0){var X,Z=se.value;for(X in Z.elt&&Z.elt.parentNode&&Z.elt.parentNode.removeChild(Z.elt),Z._events)Z.elt.removeEventListener(X,Z._events[X])}}catch($){ne=!0,ee=$}finally{try{K||me.return==null||me.return()}finally{if(ne)throw ee}}var ie=w;w._registeredMethods.remove.forEach(function($){$!==void 0&&$.call(ie)})}if(w._isGlobal){for(var ye in f.prototype)try{delete window[ye]}catch{window[ye]=void 0}for(var fe in w)if(w.hasOwnProperty(fe))try{delete window[fe]}catch{window[fe]=void 0}f.instance=null}},this._registeredMethods.init.forEach(function(q){q!==void 0&&q.call(this)},this),this._setupPromisePreloads();var B,I,F=this._createFriendlyGlobalFunctionBinder();if(m)m(this),f._checkForUserDefinedFunctions(this);else{for(var z in this._isGlobal=!0,f.instance=this,f.prototype)typeof f.prototype[z]=="function"?(B=z.substring(2),this._events.hasOwnProperty(B)||(Math.hasOwnProperty(z)&&Math[z]===f.prototype[z]?F(z,f.prototype[z]):F(z,f.prototype[z].bind(this)))):F(z,f.prototype[z]);for(var G in this)this.hasOwnProperty(G)&&F(G,this[G])}for(I in this._events){var N=this["_on".concat(I)];N&&(N=N.bind(this),window.addEventListener(I,N,{passive:!1}),this._events[I]=N)}function O(){w._setProperty("focused",!0)}function H(){w._setProperty("focused",!1)}window.addEventListener("focus",O),window.addEventListener("blur",H),this.registerMethod("remove",function(){window.removeEventListener("focus",O),window.removeEventListener("blur",H)}),document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)}var u,c;return u=f,(c=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=d.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(m,b){f.prototype._preloadMethods.hasOwnProperty(m)||(f.prototype._preloadMethods[m]=b)}},{key:"registerMethod",value:function(m,b){var S=this||f.prototype;S._registeredMethods.hasOwnProperty(m)||(S._registeredMethods[m]=[]),S._registeredMethods[m].push(b)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=m.globalObject||window;return m.log||console.log.bind(console),function(S,w){f.disableFriendlyErrors,b[S]=w}}}])&&v(u.prototype,c),f}();for(x in p.instance=null,p.disableFriendlyErrors=!1,d)p.prototype[x]=d[x];p.VERSION=d.VERSION,p.prototype._preloadMethods={loadJSON:p.prototype,loadImage:p.prototype,loadStrings:p.prototype,loadXML:p.prototype,loadBytes:p.prototype,loadTable:p.prototype,loadFont:p.prototype,loadModel:p.prototype,loadShader:p.prototype},p.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},p.prototype._registeredPreloadMethods={},g.default=p},{"./constants":262,"./shim":284,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-own-property-names":177,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],274:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("./main"))&&i.__esModule?i:{default:i};function l(d,v){for(var x=0;x<v.length;x++){var p=v[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}h.default.Element=function(){function d(f,u){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.elt=f,this._pInst=this._pixelsState=u,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var v,x,p;return v=d,p=[{key:"_adjustListener",value:function(f,u,c){return u===!1?h.default.Element._detachListener(f,c):h.default.Element._attachListener(f,u,c),this}},{key:"_attachListener",value:function(f,u,c){c._events[f]&&h.default.Element._detachListener(f,c),u=u.bind(c),c.elt.addEventListener(f,u,!1),c._events[f]=u}},{key:"_detachListener",value:function(f,u){var c=u._events[f];u.elt.removeEventListener(f,c,!1),u._events[f]=null}}],(x=[{key:"parent",value:function(f){return f===void 0?this.elt.parentNode:(typeof f=="string"?(f[0]==="#"&&(f=f.substring(1)),f=document.getElementById(f)):f instanceof h.default.Element&&(f=f.elt),f.appendChild(this.elt),this)}},{key:"id",value:function(f){return f===void 0?this.elt.id:(this.elt.id=f,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(f){return f===void 0?this.elt.className:(this.elt.className=f,this)}},{key:"mousePressed",value:function(f){return h.default.Element._adjustListener("mousedown",function(u){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(u),f.call(this,u)},this),this}},{key:"doubleClicked",value:function(f){return h.default.Element._adjustListener("dblclick",f,this),this}},{key:"mouseWheel",value:function(f){return h.default.Element._adjustListener("wheel",f,this),this}},{key:"mouseReleased",value:function(f){return h.default.Element._adjustListener("mouseup",f,this),this}},{key:"mouseClicked",value:function(f){return h.default.Element._adjustListener("click",f,this),this}},{key:"mouseMoved",value:function(f){return h.default.Element._adjustListener("mousemove",f,this),this}},{key:"mouseOver",value:function(f){return h.default.Element._adjustListener("mouseover",f,this),this}},{key:"mouseOut",value:function(f){return h.default.Element._adjustListener("mouseout",f,this),this}},{key:"touchStarted",value:function(f){return h.default.Element._adjustListener("touchstart",f,this),this}},{key:"touchMoved",value:function(f){return h.default.Element._adjustListener("touchmove",f,this),this}},{key:"touchEnded",value:function(f){return h.default.Element._adjustListener("touchend",f,this),this}},{key:"dragOver",value:function(f){return h.default.Element._adjustListener("dragover",f,this),this}},{key:"dragLeave",value:function(f){return h.default.Element._adjustListener("dragleave",f,this),this}},{key:"_setProperty",value:function(f,u){this[f]=u}}])&&l(v.prototype,x),p&&l(v,p),d}(),i=h.default.Element,g.default=i},{"./main":273}],275:[function(i,_,g){function h(S){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(b=i("./main"))&&b.__esModule?b:{default:b},d=function(S){if(S&&S.__esModule)return S;if(S===null||v(S)!=="object"&&typeof S!="function")return{default:S};var w=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(w&&w.has(S))return w.get(S);var M,A={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in S){var R;Object.prototype.hasOwnProperty.call(S,M)&&((R=P?Object.getOwnPropertyDescriptor(S,M):null)&&(R.get||R.set)?Object.defineProperty(A,M,R):A[M]=S[M])}return A.default=S,w&&w.set(S,A),A}(i("./constants"));function v(S){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(w){return h(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":h(w)})(S)}function x(S,w){for(var M=0;M<w.length;M++){var A=w[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}function p(S,w){return(p=Object.setPrototypeOf||function(M,A){return M.__proto__=A,M})(S,w)}function f(S){return function(){var w,M=m(S);return u(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=m(this).constructor,Reflect.construct(M,arguments,w)):M.apply(this,arguments))}}function u(S,w){return!w||v(w)!=="object"&&typeof w!="function"?c(S):w}function c(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function m(S){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(S)}l.default.Graphics=function(S){var w=A;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),S&&p(w,S);var M=f(A);function A(P,R,k,L,B){var I;if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");z=B||document.createElement("canvas"),(I=M.call(this,z,L)).canvas=z;var F,z=k||d.P2D;k=L._userNode||document.body;for(F in B||k.appendChild(I.canvas),l.default.prototype)I[F]||(typeof l.default.prototype[F]=="function"?I[F]=l.default.prototype[F].bind(c(I)):I[F]=l.default.prototype[F]);return l.default.prototype._initializeInstanceVariables.apply(c(I)),I.width=P,I.height=R,I._pixelDensity=L._pixelDensity,z===d.WEBGL?I._renderer=new l.default.RendererGL(I.canvas,c(I),!1):I._renderer=new l.default.Renderer2D(I.canvas,c(I),!1),L._elements.push(c(I)),Object.defineProperty(c(I),"deltaTime",{get:function(){return this._pInst.deltaTime}}),I._renderer.resize(P,R),I._renderer._applyDefaults(),u(I,c(I))}return w=A,(S=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var P,R=this._pInst._elements.indexOf(this);for(P in R!==-1&&this._pInst._elements.splice(R,1),this._events)this.elt.removeEventListener(P,this._events[P])}},{key:"createFramebuffer",value:function(P){return new l.default.Framebuffer(this,P)}}])&&x(w.prototype,S),A}(l.default.Element);var b=l.default.Graphics;g.default=b},{"./constants":262,"./main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],276:[function(i,_,g){function h(S){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(m=i("./main"))&&m.__esModule?m:{default:m},d=function(S){if(S&&S.__esModule)return S;if(S===null||v(S)!=="object"&&typeof S!="function")return{default:S};var w=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(w&&w.has(S))return w.get(S);var M,A={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in S){var R;Object.prototype.hasOwnProperty.call(S,M)&&((R=P?Object.getOwnPropertyDescriptor(S,M):null)&&(R.get||R.set)?Object.defineProperty(A,M,R):A[M]=S[M])}return A.default=S,w&&w.set(S,A),A}(i("../core/constants"));function v(S){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(w){return h(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":h(w)})(S)}function x(S,w){for(var M=0;M<w.length;M++){var A=w[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}function p(S,w){return(p=Object.setPrototypeOf||function(M,A){return M.__proto__=A,M})(S,w)}function f(S){return function(){var w,M,A=c(S);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=c(this).constructor,Reflect.construct(A,arguments,w)):A.apply(this,arguments),A=this,!(M=w)||v(M)!=="object"&&typeof M!="function"?u(A):M}}function u(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function c(S){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(S)}var m=function(S){var w=A;if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),S&&p(w,S);var M=f(A);function A(P,R,k){var L;if(this instanceof A)return(L=M.call(this,P,R)).canvas=P,L._pixelsState=R,k?(L._isMainCanvas=!0,L._pInst._setProperty("_curElement",u(L)),L._pInst._setProperty("canvas",L.canvas),L._pInst._setProperty("width",L.width),L._pInst._setProperty("height",L.height)):(L.canvas.style.display="none",L._styles=[]),L._textSize=12,L._textLeading=15,L._textFont="sans-serif",L._textStyle=d.NORMAL,L._textAscent=null,L._textDescent=null,L._textAlign=d.LEFT,L._textBaseline=d.BASELINE,L._textWrap=d.WORD,L._rectMode=d.CORNER,L._ellipseMode=d.CENTER,L._curveTightness=0,L._imageMode=d.CORNER,L._tint=null,L._doStroke=!0,L._doFill=!0,L._strokeSet=!1,L._fillSet=!1,L._leadingSet=!1,L;throw new TypeError("Cannot call a class as a function")}return w=A,(S=[{key:"push",value:function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(P){P.properties&&Object.assign(this,P.properties)}},{key:"resize",value:function(P,R){this.width=P,this.height=R,this.elt.width=P*this._pInst._pixelDensity,this.elt.height=R*this._pInst._pixelDensity,this.elt.style.width="".concat(P,"px"),this.elt.style.height="".concat(R,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(P,R,k,L){var B=this._pixelsState,I=B._pixelDensity,F=this.canvas;if(P===void 0&&R===void 0)P=R=0,k=B.width,L=B.height;else if(P*=I,R*=I,k===void 0&&L===void 0)return P<0||R<0||P>=F.width||R>=F.height?[0,0,0,0]:this._getPixel(P,R);return(B=new l.default.Image(k,L)).canvas.getContext("2d").drawImage(F,P,R,k*I,L*I,0,0,k,L),B}},{key:"textLeading",value:function(P){return typeof P=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",P),this._pInst):this._textLeading}},{key:"textStyle",value:function(P){return P?(P!==d.NORMAL&&P!==d.ITALIC&&P!==d.BOLD&&P!==d.BOLDITALIC||this._setProperty("_textStyle",P),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(P,R){return P!==void 0?(this._setProperty("_textAlign",P),R!==void 0&&this._setProperty("_textBaseline",R),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(P){return this._setProperty("_textWrap",P),this._textWrap}},{key:"text",value:function(P,R,k,L,B){var I,F,z,G,N=this._pInst,O=this._textWrap,H=Number.MAX_VALUE,q=k;if((this._doFill||this._doStroke)&&P!==void 0){if(I=(P=(P=typeof P!="string"?P.toString():P).replace(/(\t)/g,"  ")).split(`
`),L!==void 0){switch(this._rectMode===d.CENTER&&(R-=L/2),this._textAlign){case d.CENTER:R+=L/2;break;case d.RIGHT:R+=L}if(B!==void 0){this._rectMode===d.CENTER&&(k-=B/2,q-=B/2),P=k;var K=N.textAscent();switch(this._textBaseline){case d.BOTTOM:G=k+B,k=Math.max(G,k),q+=K;break;case d.CENTER:G=k+B/2,k=Math.max(G,k),q+=K/2}H=k+B-K,this._textBaseline===d.CENTER&&(H=P+B-K/2)}else this._textBaseline!==d.BOTTOM&&this._textBaseline!==d.CENTER||(q=k-(P=N.textSize()*this._textLeading)/2,H=k+P/2);if(O===d.WORD){for(var ne=[],ee=0;ee<I.length;ee++){for(var se="",me=I[ee].split(" "),X=0;X<me.length;X++)F="".concat(se+me[X])+" ",se=L<(z=this.textWidth(F))&&0<se.length?(ne.push(se),"".concat(me[X])+" "):F;ne.push(se)}var Z=0;this._textBaseline===d.CENTER?Z=(ne.length-1)*N.textLeading()/2:this._textBaseline===d.BOTTOM&&(Z=(ne.length-1)*N.textLeading());for(var ie=0;ie<I.length;ie++){se="",me=I[ie].split(" ");for(var ye=0;ye<me.length;ye++)F="".concat(se+me[ye])+" ",L<(z=this.textWidth(F))&&0<se.length?(this._renderText(N,se.trim(),R,k-Z,H,q),se="".concat(me[ye])+" ",k+=N.textLeading()):se=F;this._renderText(N,se.trim(),R,k-Z,H,q),k+=N.textLeading()}}else{for(var fe=[],$=0;$<I.length;$++)for(var re=I[$].split(se=""),de=0;de<re.length;de++)F="".concat(se+re[de]),(z=this.textWidth(F))<=L?se+=re[de]:L<z&&0<se.length&&(fe.push(se),se="".concat(re[de]));fe.push(se);var ge=0;this._textBaseline===d.CENTER?ge=(fe.length-1)*N.textLeading()/2:this._textBaseline===d.BOTTOM&&(ge=(fe.length-1)*N.textLeading());for(var ve=0;ve<I.length;ve++){re=I[ve].split(se="");for(var we=0;we<re.length;we++)F="".concat(se+re[we]),(z=this.textWidth(F))<=L?se+=re[we]:L<z&&0<se.length&&(this._renderText(N,se.trim(),R,k-ge,H,q),k+=N.textLeading(),se="".concat(re[we]))}this._renderText(N,se.trim(),R,k-ge,H,q),k+=N.textLeading()}}else{var Se=0;this._textBaseline===d.CENTER?Se=(I.length-1)*N.textLeading()/2:this._textBaseline===d.BOTTOM&&(Se=(I.length-1)*N.textLeading());for(var ae=0;ae<I.length;ae++)this._renderText(N,I[ae],R,k-Se,H,q-Se),k+=N.textLeading()}return N}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var P=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return v(P)==="object"&&P.font&&P.font.supported}},{key:"_updateTextMetrics",value:function(){var P,R,k,L,B,I;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((P=document.createElement("span")).style.fontFamily=this._textFont,P.style.fontSize="".concat(this._textSize,"px"),P.innerHTML="ABCjgq|",(I=document.createElement("div")).style.display="inline-block",I.style.width="1px",I.style.height="0px",(R=document.createElement("div")).appendChild(P),R.appendChild(I),R.style.height="0px",R.style.overflow="hidden",document.body.appendChild(R),I.style.verticalAlign="baseline",L=b(I),B=b(P),k=L[1]-B[1],I.style.verticalAlign="bottom",L=b(I),B=b(P),I=L[1]-B[1]-k,document.body.removeChild(R),this._setProperty("_textAscent",k),this._setProperty("_textDescent",I)),this}}])&&x(w.prototype,S),A}(l.default.Element);function b(S){var w=0,M=0;if(S.offsetParent)for(;w+=S.offsetLeft,M+=S.offsetTop,S=S.offsetParent;);else w+=S.offsetLeft,M+=S.offsetTop;return[w,M]}m.prototype.textSize=function(S){return typeof S=="number"?(this._setProperty("_textSize",S),this._leadingSet||this._setProperty("_textLeading",S*d._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},l.default.Renderer=m,i=l.default.Renderer,g.default=i},{"../core/constants":262,"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],277:[function(i,_,g){function h(b){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.reflect.get"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.reflect.get"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(m=i("./main"))&&m.__esModule?m:{default:m},d=function(b){if(b&&b.__esModule)return b;if(b===null||v(b)!=="object"&&typeof b!="function")return{default:b};var S=function(){var R;return typeof WeakMap!="function"?null:(R=new WeakMap,R)}();if(S&&S.has(b))return S.get(b);var w,M={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(w in b){var P;Object.prototype.hasOwnProperty.call(b,w)&&((P=A?Object.getOwnPropertyDescriptor(b,w):null)&&(P.get||P.set)?Object.defineProperty(M,w,P):M[w]=b[w])}return M.default=b,S&&S.set(b,M),M}(i("./constants"));function v(b){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(S){return h(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":h(S)})(b)}function x(b,S){for(var w=0;w<S.length;w++){var M=S[w];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(b,M.key,M)}}function p(b,S,w){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(M,A,P){if(M=function(R,k){for(;!Object.prototype.hasOwnProperty.call(R,k)&&(R=u(R))!==null;);return R}(M,A))return(M=Object.getOwnPropertyDescriptor(M,A)).get?M.get.call(P):M.value})(b,S,w||b)}function f(b,S){return(f=Object.setPrototypeOf||function(w,M){return w.__proto__=M,w})(b,S)}function u(b){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(b)}i("./p5.Renderer");var c="rgba(0,0,0,0)",m=function(b){var S=M;if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),b&&f(S,b);var w=function(A){return function(){var P,R=u(A);if(P=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(P=u(this).constructor,Reflect.construct(R,arguments,P)):R.apply(this,arguments),R=this,!P||v(P)!=="object"&&typeof P!="function"){if(R!==void 0)return R;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return P}}(M);function M(A,P,R){if(this instanceof M)return(A=w.call(this,A,P,R)).drawingContext=A.canvas.getContext("2d"),A._pInst._setProperty("drawingContext",A.drawingContext),A;throw new TypeError("Cannot call a class as a function")}return S=M,(b=[{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(A,P){p(u(M.prototype),"resize",this).call(this,A,P),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var A,P;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof l.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(A=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(A,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(A=this._getFill(),P=(P=this._pInst).color.apply(P,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(P.levels),P=P.toString(),this._setFill(P),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(A),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setFill(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",A.levels)}},{key:"stroke",value:function(){var A=(A=this._pInst).color.apply(A,arguments);this._setStroke(A.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",A.levels)}},{key:"erase",value:function(A,P){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,A=this._pInst.color(255,A).toString(),this.drawingContext.fillStyle=A,this._cachedStrokeStyle=this.drawingContext.strokeStyle,A=this._pInst.color(255,P).toString(),this.drawingContext.strokeStyle=A,P=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=P,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"image",value:function(A,P,R,k,L,B,I,F,z){A.gifProperties&&A._animateGif(this._pInst);try{l.default.MediaElement&&A instanceof l.default.MediaElement&&A._ensureCanvas();var G=(G=this._tint&&A.canvas?this._getTintedImageCanvas(A):G)||A.canvas||A.elt,N=1;A.width&&0<A.width&&(N=G.width/A.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(G,N*P,N*R,N*k,N*L,B,I,F,z),this._isErasing&&this._pInst.erase()}catch(O){if(O.name!=="NS_ERROR_NOT_AVAILABLE")throw O}}},{key:"_getTintedImageCanvas",value:function(A){if(!A.canvas)return A;A.tintCanvas||(A.tintCanvas=document.createElement("canvas")),A.tintCanvas.width!==A.canvas.width&&(A.tintCanvas.width=A.canvas.width),A.tintCanvas.height!==A.canvas.height&&(A.tintCanvas.height=A.canvas.height);var P=A.tintCanvas.getContext("2d");return P.save(),P.clearRect(0,0,A.canvas.width,A.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(P.drawImage(A.canvas,0,0),P.globalCompositeOperation="luminosity",P.drawImage(A.canvas,0,0),P.globalCompositeOperation="color",P.drawImage(A.canvas,0,0),P.globalCompositeOperation="multiply",P.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),P.fillRect(0,0,A.canvas.width,A.canvas.height),P.globalCompositeOperation="destination-in"),P.globalAlpha=this._tint[3]/255,P.drawImage(A.canvas,0,0),P.restore(),A.tintCanvas}},{key:"blendMode",value:function(A){if(A===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(A!==d.BLEND&&A!==d.REMOVE&&A!==d.DARKEST&&A!==d.LIGHTEST&&A!==d.DIFFERENCE&&A!==d.MULTIPLY&&A!==d.EXCLUSION&&A!==d.SCREEN&&A!==d.REPLACE&&A!==d.OVERLAY&&A!==d.HARD_LIGHT&&A!==d.SOFT_LIGHT&&A!==d.DODGE&&A!==d.BURN&&A!==d.ADD)throw new Error("Mode ".concat(A," not recognized."));this._cachedBlendMode=A,this.drawingContext.globalCompositeOperation=A}}},{key:"blend",value:function(){for(var A=this.drawingContext.globalCompositeOperation,P=arguments.length,R=new Array(P),k=0;k<P;k++)R[k]=arguments[k];var L=R[R.length-1],B=Array.prototype.slice.call(R,0,R.length-1);this.drawingContext.globalCompositeOperation=L,l.default.prototype.copy.apply(this,B),this.drawingContext.globalCompositeOperation=A}},{key:"_getPixel",value:function(A,P){return[(A=this.drawingContext.getImageData(A,P,1,1).data)[0],A[1],A[2],A[3]]}},{key:"loadPixels",value:function(){var A=this._pixelsState,P=A._pixelDensity,R=this.width*P;P=this.height*P,R=this.drawingContext.getImageData(0,0,R,P),A._setProperty("imageData",R),A._setProperty("pixels",R.data)}},{key:"set",value:function(A,P,R){A=Math.floor(A),P=Math.floor(P);var k=this._pixelsState;if(R instanceof l.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(k._pixelDensity,k._pixelDensity),this.drawingContext.clearRect(A,P,R.width,R.height),this.drawingContext.drawImage(R.canvas,A,P),this.drawingContext.restore();else{var L=0,B=0,I=0,F=0,z=4*(P*k._pixelDensity*(this.width*k._pixelDensity)+A*k._pixelDensity);if(k.imageData||k.loadPixels.call(k),typeof R=="number")z<k.pixels.length&&(I=B=L=R,F=255);else if(R instanceof Array){if(R.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");z<k.pixels.length&&(L=R[0],B=R[1],I=R[2],F=R[3])}else R instanceof l.default.Color&&z<k.pixels.length&&(L=R.levels[0],B=R.levels[1],I=R.levels[2],F=R.levels[3]);for(var G=0;G<k._pixelDensity;G++)for(var N=0;N<k._pixelDensity;N++)z=4*((P*k._pixelDensity+N)*this.width*k._pixelDensity+(A*k._pixelDensity+G)),k.pixels[z]=L,k.pixels[z+1]=B,k.pixels[z+2]=I,k.pixels[z+3]=F}}},{key:"updatePixels",value:function(A,P,R,k){var L=this._pixelsState,B=L._pixelDensity;A===void 0&&P===void 0&&R===void 0&&k===void 0&&(P=A=0,R=this.width,k=this.height),A*=B,P*=B,R*=B,k*=B,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=L.imageData),this.drawingContext.putImageData(L.imageData,A,P,0,0,R,k)}},{key:"_acuteArcToBezier",value:function(A,P){var R=P/2,k=Math.cos(R),L=Math.sin(R),B=1/Math.tan(R),I=(R=A+R,Math.cos(R)),F=(R=Math.sin(R),(4-k)/3);return L+=(k-F)*B,{ax:Math.cos(A).toFixed(7),ay:Math.sin(A).toFixed(7),bx:(F*I+L*R).toFixed(7),by:(F*R-L*I).toFixed(7),cx:(F*I-L*R).toFixed(7),cy:(F*R+L*I).toFixed(7),dx:Math.cos(A+P).toFixed(7),dy:Math.sin(A+P).toFixed(7)}}},{key:"arc",value:function(A,P,R,k,L,B,I){var F,z=this.drawingContext,G=R/2,N=k/2,O=[];for(A+=G,P+=N;1e-5<=B-L;)F=Math.min(B-L,d.HALF_PI),O.push(this._acuteArcToBezier(L,F)),L+=F;return this._doFill&&(z.beginPath(),O.forEach(function(H,q){q===0&&z.moveTo(A+H.ax*G,P+H.ay*N),z.bezierCurveTo(A+H.bx*G,P+H.by*N,A+H.cx*G,P+H.cy*N,A+H.dx*G,P+H.dy*N)}),I!==d.PIE&&I!=null||z.lineTo(A,P),z.closePath(),z.fill()),this._doStroke&&(z.beginPath(),O.forEach(function(H,q){q===0&&z.moveTo(A+H.ax*G,P+H.ay*N),z.bezierCurveTo(A+H.bx*G,P+H.by*N,A+H.cx*G,P+H.cy*N,A+H.dx*G,P+H.dy*N)}),I===d.PIE?(z.lineTo(A,P),z.closePath()):I===d.CHORD&&z.closePath(),z.stroke()),this}},{key:"ellipse",value:function(A){var P=this.drawingContext,R=this._doFill,k=this._doStroke,L=parseFloat(A[0]),B=parseFloat(A[1]),I=parseFloat(A[2]);if(A=parseFloat(A[3]),R&&!k){if(this._getFill()===c)return this}else if(!R&&k&&this._getStroke()===c)return this;var F=I/2*.5522847498,z=A/2*.5522847498,G=L+I,N=B+A;I=L+I/2,A=B+A/2,P.beginPath(),P.moveTo(L,A),P.bezierCurveTo(L,A-z,I-F,B,I,B),P.bezierCurveTo(I+F,B,G,A-z,G,A),P.bezierCurveTo(G,A+z,I+F,N,I,N),P.bezierCurveTo(I-F,N,L,A+z,L,A),R&&P.fill(),k&&P.stroke()}},{key:"line",value:function(A,P,R,k){var L=this.drawingContext;return this._doStroke&&this._getStroke()!==c&&(L.beginPath(),L.moveTo(A,P),L.lineTo(R,k),L.stroke()),this}},{key:"point",value:function(A,P){var R,k,L=this.drawingContext;return this._doStroke&&this._getStroke()!==c?(R=this._getStroke(),k=this._getFill(),this._setFill(R),L.beginPath(),L.arc(A,P,L.lineWidth/2,0,d.TWO_PI,!1),L.fill(),void this._setFill(k)):this}},{key:"quad",value:function(A,P,R,k,L,B,I,F){var z=this.drawingContext,G=this._doFill,N=this._doStroke;if(G&&!N){if(this._getFill()===c)return this}else if(!G&&N&&this._getStroke()===c)return this;return z.beginPath(),z.moveTo(A,P),z.lineTo(R,k),z.lineTo(L,B),z.lineTo(I,F),z.closePath(),G&&z.fill(),N&&z.stroke(),this}},{key:"rect",value:function(A){var P,R,k=A[0],L=A[1],B=A[2],I=A[3],F=A[4],z=A[5],G=A[6],N=(A=A[7],this.drawingContext),O=this._doFill,H=this._doStroke;if(O&&!H){if(this._getFill()===c)return this}else if(!O&&H&&this._getStroke()===c)return this;return N.beginPath(),F===void 0?N.rect(k,L,B,I):(z===void 0&&(z=F),G===void 0&&(G=z),A===void 0&&(A=G),H=(O=Math.abs(B))/2,R=(P=Math.abs(I))/2,P<2*(F=O<2*F?H:F)&&(F=R),P<2*(z=O<2*z?H:z)&&(z=R),P<2*(G=O<2*G?H:G)&&(G=R),P<2*(A=O<2*A?H:A)&&(A=R),N.beginPath(),N.moveTo(k+F,L),N.arcTo(k+B,L,k+B,L+I,z),N.arcTo(k+B,L+I,k,L+I,G),N.arcTo(k,L+I,k,L,A),N.arcTo(k,L,k+B,L,F),N.closePath()),this._doFill&&N.fill(),this._doStroke&&N.stroke(),this}},{key:"triangle",value:function(A){var P=this.drawingContext,R=this._doFill,k=this._doStroke,L=A[0],B=A[1],I=A[2],F=A[3],z=A[4];if(A=A[5],R&&!k){if(this._getFill()===c)return this}else if(!R&&k&&this._getStroke()===c)return this;P.beginPath(),P.moveTo(L,B),P.lineTo(I,F),P.lineTo(z,A),P.closePath(),R&&P.fill(),k&&P.stroke()}},{key:"endShape",value:function(A,P,R,k,L,B,I){if(P.length!==0&&(this._doStroke||this._doFill)){var F,z,G,N=A===d.CLOSE,O=(N&&!B&&P.push(P[0]),P.length);if(!R||I!==d.POLYGON&&I!==null)if(!k||I!==d.POLYGON&&I!==null)if(!L||I!==d.POLYGON&&I!==null)if(I===d.POINTS)for(z=0;z<O;z++)F=P[z],this._doStroke&&this._pInst.stroke(F[6]),this._pInst.point(F[0],F[1]);else if(I===d.LINES)for(z=0;z+1<O;z+=2)F=P[z],this._doStroke&&this._pInst.stroke(P[z+1][6]),this._pInst.line(F[0],F[1],P[z+1][0],P[z+1][1]);else if(I===d.TRIANGLES)for(z=0;z+2<O;z+=3)F=P[z],this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(P[z+1][0],P[z+1][1]),this.drawingContext.lineTo(P[z+2][0],P[z+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(P[z+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(P[z+2][6]),this.drawingContext.stroke());else if(I===d.TRIANGLE_STRIP)for(z=0;z+1<O;z++)F=P[z],this.drawingContext.beginPath(),this.drawingContext.moveTo(P[z+1][0],P[z+1][1]),this.drawingContext.lineTo(F[0],F[1]),this._doStroke&&this._pInst.stroke(P[z+1][6]),this._doFill&&this._pInst.fill(P[z+1][5]),z+2<O&&(this.drawingContext.lineTo(P[z+2][0],P[z+2][1]),this._doStroke&&this._pInst.stroke(P[z+2][6]),this._doFill&&this._pInst.fill(P[z+2][5])),this._doFillStrokeClose(N);else if(I===d.TRIANGLE_FAN){if(2<O){for(this.drawingContext.beginPath(),z=2;z<O;z++)F=P[z],this.drawingContext.moveTo(P[0][0],P[0][1]),this.drawingContext.lineTo(P[z-1][0],P[z-1][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(P[0][0],P[0][1]),z<O-1&&(this._doFill&&F[5]!==P[z+1][5]||this._doStroke&&F[6]!==P[z+1][6])&&(this._doFill&&(this._pInst.fill(F[5]),this.drawingContext.fill(),this._pInst.fill(P[z+1][5])),this._doStroke&&(this._pInst.stroke(F[6]),this.drawingContext.stroke(),this._pInst.stroke(P[z+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(N)}}else if(I===d.QUADS)for(z=0;z+3<O;z+=4){for(F=P[z],this.drawingContext.beginPath(),this.drawingContext.moveTo(F[0],F[1]),G=1;G<4;G++)this.drawingContext.lineTo(P[z+G][0],P[z+G][1]);this.drawingContext.lineTo(F[0],F[1]),this._doFill&&this._pInst.fill(P[z+3][5]),this._doStroke&&this._pInst.stroke(P[z+3][6]),this._doFillStrokeClose(N)}else if(I===d.QUAD_STRIP){if(3<O)for(z=0;z+1<O;z+=2)F=P[z],this.drawingContext.beginPath(),z+3<O?(this.drawingContext.moveTo(P[z+2][0],P[z+2][1]),this.drawingContext.lineTo(F[0],F[1]),this.drawingContext.lineTo(P[z+1][0],P[z+1][1]),this.drawingContext.lineTo(P[z+3][0],P[z+3][1]),this._doFill&&this._pInst.fill(P[z+3][5]),this._doStroke&&this._pInst.stroke(P[z+3][6])):(this.drawingContext.moveTo(F[0],F[1]),this.drawingContext.lineTo(P[z+1][0],P[z+1][1])),this._doFillStrokeClose(N)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(P[0][0],P[0][1]),z=1;z<O;z++)(F=P[z]).isVert&&(F.moveTo?this.drawingContext.moveTo(F[0],F[1]):this.drawingContext.lineTo(F[0],F[1]));this._doFillStrokeClose(N)}else{for(this.drawingContext.beginPath(),z=0;z<O;z++)P[z].isVert?P[z].moveTo?this.drawingContext.moveTo(P[z][0],P[z][1]):this.drawingContext.lineTo(P[z][0],P[z][1]):this.drawingContext.quadraticCurveTo(P[z][0],P[z][1],P[z][2],P[z][3]);this._doFillStrokeClose(N)}else{for(this.drawingContext.beginPath(),z=0;z<O;z++)P[z].isVert?P[z].moveTo?this.drawingContext.moveTo(P[z][0],P[z][1]):this.drawingContext.lineTo(P[z][0],P[z][1]):this.drawingContext.bezierCurveTo(P[z][0],P[z][1],P[z][2],P[z][3],P[z][4],P[z][5]);this._doFillStrokeClose(N)}else if(3<O){var H=[],q=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(P[1][0],P[1][1]),z=1;z+2<O;z++)F=P[z],H[0]=[F[0],F[1]],H[1]=[F[0]+(q*P[z+1][0]-q*P[z-1][0])/6,F[1]+(q*P[z+1][1]-q*P[z-1][1])/6],H[2]=[P[z+1][0]+(q*P[z][0]-q*P[z+2][0])/6,P[z+1][1]+(q*P[z][1]-q*P[z+2][1])/6],H[3]=[P[z+1][0],P[z+1][1]],this.drawingContext.bezierCurveTo(H[1][0],H[1][1],H[2][0],H[2][1],H[3][0],H[3][1]);N&&this.drawingContext.lineTo(P[z+1][0],P[z+1][1]),this._doFillStrokeClose(N)}B=L=k=R=!1,N&&P.pop()}return this}},{key:"strokeCap",value:function(A){return A!==d.ROUND&&A!==d.SQUARE&&A!==d.PROJECT||(this.drawingContext.lineCap=A),this}},{key:"strokeJoin",value:function(A){return A!==d.ROUND&&A!==d.BEVEL&&A!==d.MITER||(this.drawingContext.lineJoin=A),this}},{key:"strokeWeight",value:function(A){return this.drawingContext.lineWidth=A===void 0||A===0?1e-4:A,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(A){A!==this._cachedFillStyle&&(this.drawingContext.fillStyle=A,this._cachedFillStyle=A)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(A){A!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=A,this._cachedStrokeStyle=A)}},{key:"bezier",value:function(A,P,R,k,L,B,I,F){return this._pInst.beginShape(),this._pInst.vertex(A,P),this._pInst.bezierVertex(R,k,L,B,I,F),this._pInst.endShape(),this}},{key:"curve",value:function(A,P,R,k,L,B,I,F){return this._pInst.beginShape(),this._pInst.curveVertex(A,P),this._pInst.curveVertex(R,k),this._pInst.curveVertex(L,B),this._pInst.curveVertex(I,F),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(A){A&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(A,P,R,k,L,B){this.drawingContext.transform(A,P,R,k,L,B)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(A){this.drawingContext.rotate(A)}},{key:"scale",value:function(A,P){return this.drawingContext.scale(A,P),this}},{key:"translate",value:function(A,P){return A instanceof l.default.Vector&&(P=A.y,A=A.x),this.drawingContext.translate(A,P),this}},{key:"_renderText",value:function(A,P,R,k,L,B){if(!(k<B||L<=k))return A.push(),this._isOpenType()?this._textFont._renderPath(P,R,k,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(P,R,k),this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(P,R,k))),A.pop(),A}},{key:"textWidth",value:function(A){return this._isOpenType()?this._textFont._textWidth(A,this._textSize):this.drawingContext.measureText(A).width}},{key:"_applyTextProperties",value:function(){var A,P=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),A=this._textFont,this._isOpenType()&&(A=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(A||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,P}},{key:"push",value:function(){return this.drawingContext.save(),p(u(M.prototype),"push",this).call(this)}},{key:"pop",value:function(A){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,p(u(M.prototype),"pop",this).call(this,A)}}])&&x(S.prototype,b),M}(l.default.Renderer);m.prototype.text=function(b,S,w,M,A){M!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(P=!0,this.drawingContext.textBaseline=d.TOP);var P;return M=l.default.Renderer.prototype.text.apply(this,arguments),P&&(this.drawingContext.textBaseline=d.BASELINE),M},l.default.Renderer2D=m,i=l.default.Renderer2D,g.default=i},{"./constants":262,"./main":273,"./p5.Renderer":276,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],278:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator");var h=(i=i("./main"))&&i.__esModule?i:{default:i};function l(){return{}}h.default.prototype._promisePreloads=[];var d=!(h.default.prototype.registerPromisePreload=function(v){h.default.prototype._promisePreloads.push(v)});h.default.prototype._setupPromisePreloads=function(){var v=!0,x=!1,p=void 0;try{for(var f,u=this._promisePreloads[Symbol.iterator]();!(v=(f=u.next()).done);v=!0){var c=f.value,m=this,b=c.method,S=c.addCallbacks,w=c.legacyPreloadSetup,M=c.target||this,A=M[b].bind(M);if(M===h.default.prototype){if(d)continue;m=null,A=M[b]}M[b]=this._wrapPromisePreload(m,A,S),w&&(M[w.method]=this._legacyPreloadGenerator(m,w,M[b]))}}catch(P){x=!0,p=P}finally{try{v||u.return==null||u.return()}finally{if(x)throw p}}d=!0},h.default.prototype._wrapPromisePreload=function(v,x,p){var f=function(){for(var u=this,c=(this._incrementPreload(),null),m=null,b=arguments.length,S=new Array(b),w=0;w<b;w++)S[w]=arguments[w];if(p)for(var M=S.length-1;0<=M&&!m&&typeof S[M]=="function";M--)m=c,c=S.pop();var A=Promise.resolve(x.apply(this,S));return c&&A.then(c),m&&A.catch(m),A.then(function(){return u._decrementPreload()}),A};return v?f.bind(v):f},h.default.prototype._legacyPreloadGenerator=function(v,x,p){var f=x.createBaseObject||l;return x=function(){var u=this;this._incrementPreload();for(var c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];var S=f.apply(this,m);return p.apply(this,m).then(function(w){Object.assign(S,w),u._decrementPreload()}),S},v?x.bind(v):x}},{"./main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],279:[function(i,_,g){function h(f){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(p=i("./main"))&&p.__esModule?p:{default:p},d=function(f){if(f&&f.__esModule)return f;if(f===null||v(f)!=="object"&&typeof f!="function")return{default:f};var u=function(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,w)}();if(u&&u.has(f))return u.get(f);var c,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in f){var S;Object.prototype.hasOwnProperty.call(f,c)&&((S=b?Object.getOwnPropertyDescriptor(f,c):null)&&(S.get||S.set)?Object.defineProperty(m,c,S):m[c]=f[c])}return m.default=f,u&&u.set(f,m),m}(i("./constants"));function v(f){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(f)}i("./p5.Graphics"),i("./p5.Renderer2D"),i("../webgl/p5.RendererGL");var x="defaultCanvas0",p=(l.default.prototype.createCanvas=function(f,u,c,m){var b,S,w;if(l.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(c=d.P2D,m=arguments[2]):b=c||d.P2D,m)(w=document.getElementById(x))&&w.parentNode.removeChild(w),w=m,this._defaultGraphicsCreated=!1;else{if(b===d.WEBGL)(w=document.getElementById(x))&&(w.parentNode.removeChild(w),S=this._renderer,this._elements=this._elements.filter(function(A){return A!==S})),(w=document.createElement("canvas")).id=x,w.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)w=this.canvas;else{w=m||document.createElement("canvas");for(var M=0;document.getElementById("defaultCanvas".concat(M));)M++;x="defaultCanvas".concat(M),w.id=x,w.classList.add("p5Canvas")}this._setupDone||(w.dataset.hidden=!0,w.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(c=document.createElement("main"),document.body.appendChild(c)),document.getElementsByTagName("main")[0])).appendChild(w)}return b===d.WEBGL?(this._setProperty("_renderer",new l.default.RendererGL(w,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new l.default.Renderer2D(w,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(f,u),this._renderer._applyDefaults(),this._renderer},l.default.prototype.resizeCanvas=function(f,u,c){if(l.default._validateParameters("resizeCanvas",arguments),this._renderer){var m,b,S={};for(m in this.drawingContext){var w=this.drawingContext[m];v(w)!=="object"&&typeof w!="function"&&(S[m]=w)}for(b in this.width=f,this.height=u,this._renderer.resize(f,u),S)try{this.drawingContext[b]=S[b]}catch{}c||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},l.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},l.default.prototype.createGraphics=function(f,u,c,m){return arguments[2]instanceof HTMLCanvasElement&&(c=d.P2D,m=arguments[2]),l.default._validateParameters("createGraphics",arguments),new l.default.Graphics(f,u,c,this,m)},l.default.prototype.createFramebuffer=function(f){return new l.default.Framebuffer(this,f)},l.default.prototype.blendMode=function(f){l.default._validateParameters("blendMode",arguments),f===d.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),f=d.BLEND),this._renderer.blendMode(f)},l.default);g.default=p},{"../webgl/p5.RendererGL":328,"./constants":262,"./main":273,"./p5.Graphics":275,"./p5.Renderer2D":277,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],280:[function(i,_,g){function h(u){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function l(u){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(u)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=p(i("../main")),v=function(u){if(u&&u.__esModule)return u;if(u===null||l(u)!=="object"&&typeof u!="function")return{default:u};var c=function(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,M)}();if(c&&c.has(u))return c.get(u);var m,b={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in u){var w;Object.prototype.hasOwnProperty.call(u,m)&&((w=S?Object.getOwnPropertyDescriptor(u,m):null)&&(w.get||w.set)?Object.defineProperty(b,m,w):b[m]=u[m])}return b.default=u,c&&c.set(u,b),b}(i("../constants")),x=p(i("../helpers"));function p(u){return u&&u.__esModule?u:{default:u}}function f(u){return function(c){if(Array.isArray(c)){for(var m=0,b=new Array(c.length);m<c.length;m++)b[m]=c[m];return b}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i("../friendly_errors/fes_core"),i("../friendly_errors/file_errors"),i("../friendly_errors/validate_params"),d.default.prototype._normalizeArcAngles=function(u,c,m,b,S){var w;return u-=v.TWO_PI*Math.floor(u/v.TWO_PI),c-=v.TWO_PI*Math.floor(c/v.TWO_PI),w=Math.min(Math.abs(u-c),v.TWO_PI-Math.abs(u-c)),S&&(u=u<=v.HALF_PI?Math.atan(m/b*Math.tan(u)):u>v.HALF_PI&&u<=3*v.HALF_PI?Math.atan(m/b*Math.tan(u))+v.PI:Math.atan(m/b*Math.tan(u))+v.TWO_PI,c=c<=v.HALF_PI?Math.atan(m/b*Math.tan(c)):c>v.HALF_PI&&c<=3*v.HALF_PI?Math.atan(m/b*Math.tan(c))+v.PI:Math.atan(m/b*Math.tan(c))+v.TWO_PI),c<u&&(c+=v.TWO_PI),{start:u,stop:c,correspondToSamePoint:w<1e-5}},d.default.prototype.arc=function(u,c,m,b,S,w,M,A){return d.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&S!==w&&(S=this._toRadians(S),w=this._toRadians(w),m=Math.abs(m),b=Math.abs(b),u=x.default.modeAdjust(u,c,m,b,this._renderer._ellipseMode),(c=this._normalizeArcAngles(S,w,u.w,u.h,!0)).correspondToSamePoint?this._renderer.ellipse([u.x,u.y,u.w,u.h,A]):(this._renderer.arc(u.x,u.y,u.w,u.h,c.start,c.stop,M,A),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[u.x,u.y,u.w,u.h,c.start,c.stop,M]))),this},d.default.prototype.ellipse=function(u,c,m,b,S){return d.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},d.default.prototype.circle=function(){d.default._validateParameters("circle",arguments);var u=Array.prototype.slice.call(arguments,0,2);return u.push(arguments[2]),u.push(arguments[2]),this._renderEllipse.apply(this,f(u))},d.default.prototype._renderEllipse=function(u,c,m,b,S){return(this._renderer._doStroke||this._renderer._doFill)&&(m<0&&(m=Math.abs(m)),b===void 0?b=m:b<0&&(b=Math.abs(b)),u=x.default.modeAdjust(u,c,m,b,this._renderer._ellipseMode),this._renderer.ellipse([u.x,u.y,u.w,u.h,S]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[u.x,u.y,u.w,u.h])),this},d.default.prototype.line=function(){for(var u,c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];return d.default._validateParameters("line",m),this._renderer._doStroke&&(u=this._renderer).line.apply(u,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",m),this},d.default.prototype.point=function(){for(var u,c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];return d.default._validateParameters("point",m),this._renderer._doStroke&&(m.length===1&&m[0]instanceof d.default.Vector?this._renderer.point.call(this._renderer,m[0].x,m[0].y,m[0].z):((u=this._renderer).point.apply(u,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",m))),this},d.default.prototype.quad=function(){for(var u,c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];return d.default._validateParameters("quad",m),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&m.length<12?this._renderer.quad.call(this._renderer,m[0],m[1],0,m[2],m[3],0,m[4],m[5],0,m[6],m[7],0,m[8],m[9]):((u=this._renderer).quad.apply(u,m),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",m))),this},d.default.prototype.rect=function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];return d.default._validateParameters("rect",c),this._renderRect.apply(this,c)},d.default.prototype.square=function(u,c,m,b,S,w,M){return d.default._validateParameters("square",arguments),this._renderRect.call(this,u,c,m,m,b,S,w,M)},d.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var u=x.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),c=[u.x,u.y,u.w,u.h],m=4;m<arguments.length;m++)c[m]=arguments[m];this._renderer.rect(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[u.x,u.y,u.w,u.h])}return this},d.default.prototype.triangle=function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];return d.default._validateParameters("triangle",c),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",c),this},i=d.default,g.default=i},{"../constants":262,"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../helpers":269,"../main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],281:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function l(p){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(x=i("../main"))&&x.__esModule?x:{default:x},v=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var f=function(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,S)}();if(f&&f.has(p))return f.get(p);var u,c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p){var b;Object.prototype.hasOwnProperty.call(p,u)&&((b=m?Object.getOwnPropertyDescriptor(p,u):null)&&(b.get||b.set)?Object.defineProperty(c,u,b):c[u]=p[u])}return c.default=p,f&&f.set(p,c),c}(i("../constants"));d.default.prototype.ellipseMode=function(p){return d.default._validateParameters("ellipseMode",arguments),p!==v.CORNER&&p!==v.CORNERS&&p!==v.RADIUS&&p!==v.CENTER||(this._renderer._ellipseMode=p),this},d.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},d.default.prototype.rectMode=function(p){return d.default._validateParameters("rectMode",arguments),p!==v.CORNER&&p!==v.CORNERS&&p!==v.RADIUS&&p!==v.CENTER||(this._renderer._rectMode=p),this},d.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},d.default.prototype.strokeCap=function(p){return d.default._validateParameters("strokeCap",arguments),p!==v.ROUND&&p!==v.SQUARE&&p!==v.PROJECT||this._renderer.strokeCap(p),this},d.default.prototype.strokeJoin=function(p){return d.default._validateParameters("strokeJoin",arguments),p!==v.ROUND&&p!==v.BEVEL&&p!==v.MITER||this._renderer.strokeJoin(p),this},d.default.prototype.strokeWeight=function(p){return d.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(p),this};var x=d.default;g.default=x},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],282:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(l=i("../main"))&&l.__esModule?l:{default:l};i("../friendly_errors/fes_core"),i("../friendly_errors/file_errors"),i("../friendly_errors/validate_params"),h.default.prototype.bezier=function(){for(var d,v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return h.default._validateParameters("bezier",x),(this._renderer._doStroke||this._renderer._doFill)&&(d=this._renderer).bezier.apply(d,x),this},h.default.prototype.bezierDetail=function(d){return h.default._validateParameters("bezierDetail",arguments),this._bezierDetail=d,this},h.default.prototype.bezierPoint=function(d,v,x,p,f){h.default._validateParameters("bezierPoint",arguments);var u=1-f;return Math.pow(u,3)*d+3*Math.pow(u,2)*f*v+3*u*Math.pow(f,2)*x+Math.pow(f,3)*p},h.default.prototype.bezierTangent=function(d,v,x,p,f){h.default._validateParameters("bezierTangent",arguments);var u=1-f;return 3*p*Math.pow(f,2)-3*x*Math.pow(f,2)+6*x*u*f-6*v*u*f+3*v*Math.pow(u,2)-3*d*Math.pow(u,2)},h.default.prototype.curve=function(){for(var d,v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return h.default._validateParameters("curve",x),this._renderer._doStroke&&(d=this._renderer).curve.apply(d,x),this},h.default.prototype.curveDetail=function(d){return h.default._validateParameters("curveDetail",arguments),this._curveDetail=d<3?3:d,this},h.default.prototype.curveTightness=function(d){return h.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=d,this},h.default.prototype.curvePoint=function(d,v,x,p,f){h.default._validateParameters("curvePoint",arguments);var u=this._renderer._curveTightness,c=f*f*f,m=f*f;return d*((u-1)/2*c+(1-u)*m+(u-1)/2*f)+v*((u+3)/2*c+(-5-u)/2*m+1)+x*((-3-u)/2*c+(u+2)*m+(1-u)/2*f)+p*((1-u)/2*c+(u-1)/2*m)},h.default.prototype.curveTangent=function(d,v,x,p,f){h.default._validateParameters("curveTangent",arguments);var u=this._renderer._curveTightness,c=f*f*3;return d*((u-1)/2*c+(1-u)*(f=2*f)+(u-1)/2)+v*((u+3)/2*c+(-5-u)/2*f)+x*((-3-u)/2*c+(u+2)*f+(1-u)/2)+p*((1-u)/2*c+(u-1)/2*f)};var l=h.default;g.default=l},{"../friendly_errors/fes_core":264,"../friendly_errors/file_errors":265,"../friendly_errors/validate_params":268,"../main":273}],283:[function(i,_,g){function h(M){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(M)}function l(M){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(A){return h(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":h(A)})(M)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.slice"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(w=i("../main"))&&w.__esModule?w:{default:w},v=function(M){if(M&&M.__esModule)return M;if(M===null||l(M)!=="object"&&typeof M!="function")return{default:M};var A=function(){var B;return typeof WeakMap!="function"?null:(B=new WeakMap,B)}();if(A&&A.has(M))return A.get(M);var P,R={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in M){var L;Object.prototype.hasOwnProperty.call(M,P)&&((L=k?Object.getOwnPropertyDescriptor(M,P):null)&&(L.get||L.set)?Object.defineProperty(R,P,L):R[P]=M[P])}return R.default=M,A&&A.set(M,R),R}(i("../constants")),x=null,p=[],f=[],u=!1,c=!1,m=!1,b=!1,S=!0,w=(d.default.prototype.beginContour=function(){return f=[],b=!0,this},d.default.prototype.beginShape=function(M){var A;return d.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(A=this._renderer).beginShape.apply(A,arguments):(x=M===v.POINTS||M===v.LINES||M===v.TRIANGLES||M===v.TRIANGLE_FAN||M===v.TRIANGLE_STRIP||M===v.QUADS||M===v.QUAD_STRIP?M:null,p=[],f=[]),this},d.default.prototype.bezierVertex=function(){for(var M,A=arguments.length,P=new Array(A),R=0;R<A;R++)P[R]=arguments[R];if(d.default._validateParameters("bezierVertex",P),this._renderer.isP3D)(M=this._renderer).bezierVertex.apply(M,P);else if(p.length===0)d.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{u=!0;for(var k=[],L=0;L<P.length;L++)k[L]=P[L];k.isVert=!1,(b?f:p).push(k)}return this},d.default.prototype.curveVertex=function(){for(var M,A=arguments.length,P=new Array(A),R=0;R<A;R++)P[R]=arguments[R];return d.default._validateParameters("curveVertex",P),this._renderer.isP3D?(M=this._renderer).curveVertex.apply(M,P):(c=!0,this.vertex(P[0],P[1])),this},d.default.prototype.endContour=function(){var M=f[0].slice();M.isVert=f[0].isVert,M.moveTo=!1,f.push(M),S&&(p.push(p[0]),S=!1);for(var A=0;A<f.length;A++)p.push(f[A]);return this},d.default.prototype.endShape=function(M){if(d.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(M,c,u,m,b,x);else{if(p.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var A=M===v.CLOSE;A&&!b&&p.push(p[0]),this._renderer.endShape(M,p,c,u,m,b,x),S=!(b=m=u=c=!1),A&&p.pop()}return this},d.default.prototype.quadraticVertex=function(){for(var M,A=arguments.length,P=new Array(A),R=0;R<A;R++)P[R]=arguments[R];if(d.default._validateParameters("quadraticVertex",P),this._renderer.isP3D)(M=this._renderer).quadraticVertex.apply(M,P);else{if(this._contourInited)return(M={}).x=P[0],M.y=P[1],M.x3=P[2],M.y3=P[3],M.type=v.QUADRATIC,this._contourVertices.push(M),this;if(0<p.length){m=!0;for(var k=[],L=0;L<P.length;L++)k[L]=P[L];k.isVert=!1,(b?f:p).push(k)}else d.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},d.default.prototype.vertex=function(M,A,P,R,k){var L;return this._renderer.isP3D?(L=this._renderer).vertex.apply(L,arguments):((L=[]).isVert=!0,L[0]=M,L[1]=A,L[2]=0,L[3]=0,L[4]=0,L[5]=this._renderer._getFill(),L[6]=this._renderer._getStroke(),P&&(L.moveTo=P),(b?(f.length===0&&(L.moveTo=!0),f):p).push(L)),this},d.default.prototype.normal=function(M,A,P){var R;return this._assert3d("normal"),d.default._validateParameters("normal",arguments),(R=this._renderer).normal.apply(R,arguments),this},d.default);g.default=w},{"../constants":262,"../main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],284:[function(i,_,g){function h(f){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function l(f){return function(u){if(Array.isArray(u)){for(var c=0,m=new Array(u.length);c<u.length;c++)m[c]=u[c];return m}}(f)||function(u){if(Symbol.iterator in Object(u)||Object.prototype.toString.call(u)==="[object Arguments]")return Array.from(u)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(f){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(f)}var v,x,p;i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.uint8-clamped-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.uint8-clamped-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f,u){window.setTimeout(f,1e3/60)},typeof Uint8ClampedArray>"u"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),Object.assign||(v=Object.keys,i=Object.defineProperty,x=typeof Symbol=="function"&&d(Symbol())==="symbol",p=Object.prototype.propertyIsEnumerable,i(Object,"assign",{value:function(f,u){if(f==null)throw new TypeError("target must be an object");for(var c,m=Object(f),b=1;b<arguments.length;++b){var S=Object(arguments[b]),w=v(S);for(x&&Object.getOwnPropertySymbols&&w.push.apply(w,l(Object.getOwnPropertySymbols(S).filter(function(M){return function(A){return p.call(M,A)}}(S)))),c=0;c<w.length;++c)m[w[c]]=S[w[c]]}return m},configurable:!0,enumerable:!1,writable:!0}))},{"core-js/modules/es.array.filter":155,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/web.dom-collections.iterator":236}],285:[function(i,_,g){i("core-js/modules/es.array.for-each"),i("core-js/modules/es.object.assign"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.object.assign"),i("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("./main"))&&i.__esModule?i:{default:i}).default.prototype.noLoop=function(){this._loop=!1},i.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},i.default.prototype.isLooping=function(){return this._loop},i.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},i.default.prototype.pop=function(){var h=this._styles.pop();h?(this._renderer.pop(h.renderer),Object.assign(this,h.props)):console.warn("pop() was called without matching push()")},i.default.prototype.redraw=function(h){if(!this._inUserDraw&&this._setupDone){var l=parseInt(h),d=((isNaN(l)||l<1)&&(l=1),this._isGlobal?window:this);if(typeof d.draw=="function"){d.setup===void 0&&d.scale(d._pixelDensity,d._pixelDensity);for(var v=function(p){p.call(d)},x=0;x<l;x++){d.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),d._renderer.isP3D&&d._renderer._update(),d._setProperty("frameCount",d.frameCount+1),d._registeredMethods.pre.forEach(v),this._inUserDraw=!0;try{d.draw()}finally{this._inUserDraw=!1}d._registeredMethods.post.forEach(v)}}}},i=i.default,g.default=i},{"./main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.object.assign":174,"core-js/modules/web.dom-collections.for-each":235}],286:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("./main"))&&i.__esModule?i:{default:i};function l(d){return function(v){if(Array.isArray(v)){for(var x=0,p=new Array(v.length);x<v.length;x++)p[x]=v[x];return p}}(d)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.applyMatrix=function(){var d=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||d?(d=this._renderer).applyMatrix.apply(d,l(arguments.length<=0?void 0:arguments[0])):(d=this._renderer).applyMatrix.apply(d,arguments),this},h.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},h.default.prototype.rotate=function(d,v){return h.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(d),v),this},h.default.prototype.rotateX=function(d){return this._assert3d("rotateX"),h.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(d)),this},h.default.prototype.rotateY=function(d){return this._assert3d("rotateY"),h.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(d)),this},h.default.prototype.rotateZ=function(d){return this._assert3d("rotateZ"),h.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(d)),this},h.default.prototype.scale=function(d,v,x){var p;return h.default._validateParameters("scale",arguments),d instanceof h.default.Vector?(d=(p=d).x,v=p.y,x=p.z):d instanceof Array&&(d=(p=d)[0],v=p[1],x=p[2]||1),isNaN(v)?v=x=d:isNaN(x)&&(x=1),this._renderer.scale.call(this._renderer,d,v,x),this},h.default.prototype.shearX=function(d){return h.default._validateParameters("shearX",arguments),d=this._toRadians(d),this._renderer.applyMatrix(1,0,Math.tan(d),1,0,0),this},h.default.prototype.shearY=function(d){return h.default._validateParameters("shearY",arguments),d=this._toRadians(d),this._renderer.applyMatrix(1,Math.tan(d),0,1,0,0),this},h.default.prototype.translate=function(d,v,x){return h.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(d,v,x):this._renderer.translate(d,v),this},i=h.default,g.default=i},{"./main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236}],287:[function(i,_,g){function h(x){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(x)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.ends-with"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.ends-with"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator");var l=(i=i("../core/main"))&&i.__esModule?i:{default:i};function d(x){return function(p){if(Array.isArray(p)){for(var f=0,u=new Array(p.length);f<p.length;f++)u[f]=p[f];return u}}(x)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v(x){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(x)}l.default.prototype.storeItem=function(x,p){typeof x!="string"&&console.log("The argument that you passed to storeItem() - ".concat(x," is not a string.")),x.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(x," must not end with 'p5TypeID'.")),p===void 0&&console.log("You cannot store undefined variables using storeItem().");var f=v(p);switch(f){case"number":case"boolean":p=p.toString();break;case"object":p instanceof l.default.Color?f="p5.Color":p instanceof l.default.Vector&&(f="p5.Vector",p=[p.x,p.y,p.z]),p=JSON.stringify(p)}localStorage.setItem(x,p),x="".concat(x,"p5TypeID"),localStorage.setItem(x,f)},l.default.prototype.getItem=function(x){var p=localStorage.getItem(x),f=localStorage.getItem("".concat(x,"p5TypeID"));if(f===void 0)console.log("Unable to determine type of item stored under ".concat(x,"in local storage. Did you save the item with something other than setItem()?"));else if(p!==null)switch(f){case"number":p=parseFloat(p);break;case"boolean":p=p==="true";break;case"object":p=JSON.parse(p);break;case"p5.Color":p=JSON.parse(p),p=this.color.apply(this,d(p.levels));break;case"p5.Vector":p=JSON.parse(p),p=this.createVector.apply(this,d(p))}return p},l.default.prototype.clearStorage=function(){localStorage.clear()},l.default.prototype.removeItem=function(x){typeof x!="string"&&console.log("The argument that you passed to removeItem() - ".concat(x," is not a string.")),localStorage.removeItem(x),localStorage.removeItem("".concat(x,"p5TypeID"))}},{"../core/main":273,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.ends-with":188,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],288:[function(i,_,g){function h(m){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(i=i("../core/main"))&&i.__esModule?i:{default:i};function d(m){return(d=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(b){return h(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":h(b)})(m)}function v(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),b&&function(S,w){(Object.setPrototypeOf||function(M,A){return M.__proto__=A,M})(S,w)}(m,b)}function x(m){return function(){var b,S=p(m);if(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=p(this).constructor,Reflect.construct(S,arguments,b)):S.apply(this,arguments),S=this,!b||d(b)!=="object"&&typeof b!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function p(m){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(m)}function f(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function u(m,b){for(var S=0;S<b.length;S++){var w=b[S];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,w.key,w)}}function c(m,b,S){b&&u(m.prototype,b)}l.default.prototype.createStringDict=function(m,b){return l.default._validateParameters("createStringDict",arguments),new l.default.StringDict(m,b)},l.default.prototype.createNumberDict=function(m,b){return l.default._validateParameters("createNumberDict",arguments),new l.default.NumberDict(m,b)},l.default.TypedDict=function(){function m(b,S){return f(this,m),b instanceof Object?this.data=b:(this.data={},this.data[b]=S),this}return c(m,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(b){return this.data.hasOwnProperty(b)}},{key:"get",value:function(b){if(this.data.hasOwnProperty(b))return this.data[b];console.log("".concat(b," does not exist in this Dictionary"))}},{key:"set",value:function(b,S){this._validate(S)?this.data[b]=S:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(b){for(var S in b)this.set(S,b[S])}},{key:"create",value:function(b,S){b instanceof Object&&S===void 0?this._addObj(b):b!==void 0?this.set(b,S):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(b){if(!this.data.hasOwnProperty(b))throw new Error("".concat(b," does not exist in this Dictionary"));delete this.data[b]}},{key:"print",value:function(){for(var b in this.data)console.log("key:".concat(b," value:").concat(this.data[b]))}},{key:"saveTable",value:function(b){var S,w="";for(S in this.data)w+="".concat(S,",").concat(this.data[S],`
`);var M=new Blob([w],{type:"text/csv"});l.default.prototype.downloadFile(M,b||"mycsv","csv")}},{key:"saveJSON",value:function(b,S){l.default.prototype.saveJSON(this.data,b,S)}},{key:"_validate",value:function(b){return!0}}]),m}(),l.default.StringDict=function(){v(b,l.default.TypedDict);var m=x(b);function b(){f(this,b);for(var S=arguments.length,w=new Array(S),M=0;M<S;M++)w[M]=arguments[M];return m.call.apply(m,[this].concat(w))}return c(b,[{key:"_validate",value:function(S){return typeof S=="string"}}]),b}(),l.default.NumberDict=function(){v(b,l.default.TypedDict);var m=x(b);function b(){f(this,b);for(var S=arguments.length,w=new Array(S),M=0;M<S;M++)w[M]=arguments[M];return m.call.apply(m,[this].concat(w))}return c(b,[{key:"_validate",value:function(S){return typeof S=="number"}},{key:"add",value:function(S,w){this.data.hasOwnProperty(S)?this.data[S]+=w:console.log("The key - ".concat(S," does not exist in this dictionary."))}},{key:"sub",value:function(S,w){this.add(S,-w)}},{key:"mult",value:function(S,w){this.data.hasOwnProperty(S)?this.data[S]*=w:console.log("The key - ".concat(S," does not exist in this dictionary."))}},{key:"div",value:function(S,w){this.data.hasOwnProperty(S)?this.data[S]/=w:console.log("The key - ".concat(S," does not exist in this dictionary."))}},{key:"_valueTest",value:function(S){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var w,M=this.data[Object.keys(this.data)[0]];for(w in this.data)this.data[w]*S<M*S&&(M=this.data[w]);return M}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(S){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var w=Object.keys(this.data)[0],M=1;M<Object.keys(this.data).length;M++)Object.keys(this.data)[M]*S<w*S&&(w=Object.keys(this.data)[M]);return w}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),b}(),i=l.default.TypedDict,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],289:[function(i,_,g){function h(M){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(M)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.every"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/web.url"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.every"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/web.url"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(i=i("../core/main"))&&i.__esModule?i:{default:i};function d(M,A){for(var P=0;P<A.length;P++){var R=A[P];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(M,R.key,R)}}function v(M,A,P){A&&d(M.prototype,A),P&&d(M,P)}function x(M,A){return(x=Object.setPrototypeOf||function(P,R){return P.__proto__=R,P})(M,A)}function p(M){return function(){var A,P,R=u(M);return A=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(A=u(this).constructor,Reflect.construct(R,arguments,A)):R.apply(this,arguments),R=this,!(P=A)||m(P)!=="object"&&typeof P!="function"?f(R):P}}function f(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function u(M){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)})(M)}function c(M,A){if(!(M instanceof A))throw new TypeError("Cannot call a class as a function")}function m(M){return(m=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(A){return h(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":h(A)})(M)}function b(M,A,P){return(A._userNode||document.body).appendChild(M),P=new(P?l.default.MediaElement:l.default.Element)(M,A),A._elements.push(P),P}function S(M,A,P,R){var k=document.createElement(A),L=(typeof(P=P||"")=="string"&&(P=[P]),!0),B=(A=!1,void 0);try{for(var I,F=P[Symbol.iterator]();!(L=(I=F.next()).done);L=!0){var z=I.value,G=document.createElement("source");G.setAttribute("src",z),k.appendChild(G)}}catch(O){A=!0,B=O}finally{try{L||F.return==null||F.return()}finally{if(A)throw B}}typeof R=="function"&&k.addEventListener("canplaythrough",function O(){R(),k.removeEventListener("canplaythrough",O)});var N=b(k,M,!0);return N.loadedmetadata=!1,k.addEventListener("loadedmetadata",function(){N.width=k.videoWidth,N.height=k.videoHeight,N.elt.width===0&&(N.elt.width=k.videoWidth),N.elt.height===0&&(N.elt.height=k.videoHeight),N.presetPlaybackRate&&(N.elt.playbackRate=N.presetPlaybackRate,delete N.presetPlaybackRate),N.loadedmetadata=!0}),N}function w(M,A,P,R){c(this,w),this.callback=M,this.time=A,this.id=P,this.val=R}l.default.prototype.select=function(M,A){return l.default._validateParameters("select",arguments),(A=this._getContainer(A).querySelector(M))?this._wrapElement(A):null},l.default.prototype.selectAll=function(M,A){l.default._validateParameters("selectAll",arguments);var P=[],R=this._getContainer(A).querySelectorAll(M);if(R)for(var k=0;k<R.length;k++){var L=this._wrapElement(R[k]);P.push(L)}return P},l.default.prototype._getContainer=function(M){var A=document;return typeof M=="string"?A=document.querySelector(M)||document:M instanceof l.default.Element?A=M.elt:M instanceof HTMLElement&&(A=M),A},l.default.prototype._wrapElement=function(M){var A,P=Array.prototype.slice.call(M.children);return M.tagName==="INPUT"&&M.type==="checkbox"?((A=new l.default.Element(M,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},A):M.tagName==="VIDEO"||M.tagName==="AUDIO"?new l.default.MediaElement(M,this):M.tagName==="SELECT"?this.createSelect(new l.default.Element(M,this)):0<P.length&&P.every(function(R){return R.tagName==="INPUT"||R.tagName==="LABEL"})?this.createRadio(new l.default.Element(M,this)):new l.default.Element(M,this)},l.default.prototype.removeElements=function(M){l.default._validateParameters("removeElements",arguments),this._elements.filter(function(A){return!(A.elt instanceof HTMLCanvasElement)}).map(function(A){return A.remove()})},l.default.Element.prototype.changed=function(M){return l.default.Element._adjustListener("change",M,this),this},l.default.Element.prototype.input=function(M){return l.default.Element._adjustListener("input",M,this),this},l.default.prototype.createDiv=function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("div");return A.innerHTML=M,b(A,this)},l.default.prototype.createP=function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("p");return A.innerHTML=M,b(A,this)},l.default.prototype.createSpan=function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=document.createElement("span");return A.innerHTML=M,b(A,this)},l.default.prototype.createImg=function(){l.default._validateParameters("createImg",arguments);var M,A=document.createElement("img"),P=arguments;return 1<P.length&&typeof P[1]=="string"&&(A.alt=P[1]),2<P.length&&typeof P[2]=="string"&&(A.crossOrigin=P[2]),A.src=P[0],M=b(A,this),A.addEventListener("load",function(){M.width=A.offsetWidth||A.width,M.height=A.offsetHeight||A.height;var R=P[P.length-1];typeof R=="function"&&R(M)}),M},l.default.prototype.createA=function(M,A,P){l.default._validateParameters("createA",arguments);var R=document.createElement("a");return R.href=M,R.innerHTML=A,P&&(R.target=P),b(R,this)},l.default.prototype.createSlider=function(M,A,P,R){l.default._validateParameters("createSlider",arguments);var k=document.createElement("input");return k.type="range",k.min=M,k.max=A,R===0?k.step=1e-18:R&&(k.step=R),typeof P=="number"&&(k.value=P),b(k,this)},l.default.prototype.createButton=function(M,A){l.default._validateParameters("createButton",arguments);var P=document.createElement("button");return P.innerHTML=M,A&&(P.value=A),b(P,this)},l.default.prototype.createCheckbox=function(){for(var M=arguments.length,A=new Array(M),P=0;P<M;P++)A[P]=arguments[P];l.default._validateParameters("createCheckbox",A);var R=document.createElement("div"),k=document.createElement("input"),L=(k.type="checkbox",document.createElement("label")),B=(L.appendChild(k),R.appendChild(L),b(R,this));return B.checked=function(){var I=B.elt.firstElementChild.getElementsByTagName("input")[0];if(I){if(arguments.length===0)return I.checked;I.checked=!(arguments.length<=0||!arguments[0])}return B},this.value=function(I){return B.value=I,this},A[0]&&(B.value(A[0]),(R=document.createElement("span")).innerHTML=A[0],L.appendChild(R)),A[1]&&(k.checked=!0),B},l.default.prototype.createSelect=function(){for(var M,A=arguments.length,P=new Array(A),R=0;R<A;R++)P[R]=arguments[R];l.default._validateParameters("createSelect",P);var k,L=P[0];return L instanceof l.default.Element&&L.elt instanceof HTMLSelectElement?this.elt=(M=L).elt:L instanceof HTMLSelectElement?(M=b(L,this),this.elt=L):(k=document.createElement("select"),L&&typeof L=="boolean"&&k.setAttribute("multiple","true"),M=b(k,this),this.elt=k),M.option=function(B,I){var F;if(B!==void 0){for(var z,G=0;G<this.elt.length;G+=1)if(this.elt[G].textContent===B){F=G;break}F!==void 0?I===!1?this.elt.remove(F):this.elt[F].value=I:((z=document.createElement("option")).textContent=B,z.value=I===void 0?B:I,this.elt.appendChild(z),this._pInst._elements.push(z))}},M.selected=function(B){if(B!==void 0){for(var I=0;I<this.elt.length;I+=1)this.elt[I].value.toString()===B.toString()&&(this.elt.selectedIndex=I);return this}if(this.elt.getAttribute("multiple")){var F=[],z=!0,G=!1,N=void 0;try{for(var O,H=this.elt.selectedOptions[Symbol.iterator]();!(z=(O=H.next()).done);z=!0){var q=O.value;F.push(q.value)}}catch(K){G=!0,N=K}finally{try{z||H.return==null||H.return()}finally{if(G)throw N}}return F}return this.elt.value},M.disable=function(B){if(typeof B=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===B&&(this.elt[I].disabled=!0,this.elt[I].selected=!1);else this.elt.disabled=!0;return this},M.enable=function(B){if(typeof B=="string")for(var I=0;I<this.elt.length;I++)this.elt[I].value.toString()===B&&(this.elt[I].disabled=!1,this.elt[I].selected=!1);else{this.elt.disabled=!1;for(var F=0;F<this.elt.length;F++)this.elt[F].disabled=!1,this.elt[F].selected=!1}return this},M},l.default.prototype.createRadio=function(){function M(B){return B instanceof HTMLInputElement&&B.type==="radio"}function A(B){return B instanceof HTMLLabelElement}var P,R,k,L=arguments.length<=0?void 0:arguments[0];return L instanceof l.default.Element&&(L.elt instanceof HTMLDivElement||L.elt instanceof HTMLSpanElement)?(P=L,this.elt=L.elt):L instanceof HTMLDivElement||L instanceof HTMLSpanElement?(P=b(L,this),R=this.elt=L,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(k=arguments.length<=1?void 0:arguments[1])):(typeof L=="string"&&(k=L),R=document.createElement("div"),P=b(R,this),this.elt=R),P._name=k||"radioOption",P._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(B){return M(B)||A(B)&&M(B.firstElementChild)}).map(function(B){return M(B)?B:B.firstElementChild})},P.option=function(B,I){var F,z,G,N=!0,O=!1,H=void 0;try{for(var q,K=P._getOptionsArray()[Symbol.iterator]();!(N=(q=K.next()).done);N=!0){var ne=q.value;if(ne.value===B){F=ne;break}}}catch(ee){O=!0,H=ee}finally{try{N||K.return==null||K.return()}finally{if(O)throw H}}return F===void 0&&((F=document.createElement("input")).setAttribute("type","radio"),F.setAttribute("value",B)),F.setAttribute("name",P._name),A(F.parentElement)?z=F.parentElement:(z=document.createElement("label")).insertAdjacentElement("afterbegin",F),z.lastElementChild instanceof HTMLSpanElement?G=z.lastElementChild:(G=document.createElement("span"),F.insertAdjacentElement("afterend",G)),G.innerHTML=I===void 0?B:I,this.elt.appendChild(z),F},P.remove=function(B){var I=!0,F=!1,z=void 0;try{for(var G,N=P._getOptionsArray()[Symbol.iterator]();!(I=(G=N.next()).done);I=!0){var O=G.value;if(O.value===B)return void(A(O.parentElement)?O.parentElement:O).remove()}}catch(H){F=!0,z=H}finally{try{I||N.return==null||N.return()}finally{if(F)throw z}}},P.value=function(){var B="",I=!0,F=!1,z=void 0;try{for(var G,N=P._getOptionsArray()[Symbol.iterator]();!(I=(G=N.next()).done);I=!0){var O=G.value;if(O.checked){B=O.value;break}}}catch(H){F=!0,z=H}finally{try{I||N.return==null||N.return()}finally{if(F)throw z}}return B},P.selected=function(B){var I=null;if(B===void 0){var F=!0,z=!1,G=void 0;try{for(var N,O=P._getOptionsArray()[Symbol.iterator]();!(F=(N=O.next()).done);F=!0){var H=N.value;if(H.checked){I=H;break}}}catch(se){z=!0,G=se}finally{try{F||O.return==null||O.return()}finally{if(z)throw G}}}else{P._getOptionsArray().forEach(function(se){se.checked=!1,se.removeAttribute("checked")});var q=!0;z=!1,G=void 0;try{for(var K,ne=P._getOptionsArray()[Symbol.iterator]();!(q=(K=ne.next()).done);q=!0){var ee=K.value;ee.value===B&&(ee.setAttribute("checked",!0),ee.checked=!0,I=ee)}}catch(se){z=!0,G=se}finally{try{q||ne.return==null||ne.return()}finally{if(z)throw G}}}return I},P.disable=function(){var B=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],I=!0,F=!1,z=void 0;try{for(var G,N=P._getOptionsArray()[Symbol.iterator]();!(I=(G=N.next()).done);I=!0)G.value.setAttribute("disabled",B)}catch(O){F=!0,z=O}finally{try{I||N.return==null||N.return()}finally{if(F)throw z}}},P},l.default.prototype.createColorPicker=function(M){l.default._validateParameters("createColorPicker",arguments);var A=document.createElement("input");return A.type="color",M?M instanceof l.default.Color?A.value=M.toString("#rrggbb"):(l.default.prototype._colorMode="rgb",l.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},A.value=l.default.prototype.color(M).toString("#rrggbb")):A.value="#000000",(A=b(A,this)).color=function(){return M&&(M.mode&&(l.default.prototype._colorMode=M.mode),M.maxes&&(l.default.prototype._colorMaxes=M.maxes)),l.default.prototype.color(this.elt.value)},A},l.default.prototype.createInput=function(){var M=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",A=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",P=(l.default._validateParameters("createInput",arguments),document.createElement("input"));return P.setAttribute("value",M),P.setAttribute("type",A),b(P,this)},l.default.prototype.createFileInput=function(M){var A,P=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(l.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(A=document.createElement("input")).setAttribute("type","file"),P&&A.setAttribute("multiple",!0),A.addEventListener("change",function(R){var k=!0,L=!1,B=void 0;try{for(var I,F=R.target.files[Symbol.iterator]();!(k=(I=F.next()).done);k=!0){var z=I.value;l.default.File._load(z,M)}}catch(G){L=!0,B=G}finally{try{k||F.return==null||F.return()}finally{if(L)throw B}}},!1),b(A,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},l.default.prototype.createVideo=function(M,A){return l.default._validateParameters("createVideo",arguments),S(this,"video",M,A)},l.default.prototype.createAudio=function(M,A){return l.default._validateParameters("createAudio",arguments),S(this,"audio",M,A)},l.default.prototype.VIDEO="video",l.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(M){var A=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return A?new Promise(function(P,R){A.call(navigator,M,P,R)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),l.default.prototype.createCapture=function(){for(var M=arguments.length,A=new Array(M),P=0;P<M;P++)A[P]=arguments[P];if(l.default._validateParameters("createCapture",A),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var R,k=!0,L=!0,B=0,I=A;B<I.length;B++){var F=I[B];F===l.default.prototype.VIDEO?L=!1:F===l.default.prototype.AUDIO?k=!1:m(F)==="object"?z=F:typeof F=="function"&&(R=F)}var z=z||{video:k,audio:L},G=document.createElement("video"),N=(G.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(z).then(function(O){try{"srcObject"in G?G.srcObject=O:G.src=window.URL.createObjectURL(O)}catch{G.src=O}},console.log),b(G,this,!0));return N.loadedmetadata=!1,G.addEventListener("loadedmetadata",function(){G.play(),G.width?(N.width=G.width,N.height=G.height):(N.width=N.elt.width=G.videoWidth,N.height=N.elt.height=G.videoHeight),N.loadedmetadata=!0,R&&R(G.srcObject)}),N},l.default.prototype.createElement=function(M,A){return l.default._validateParameters("createElement",arguments),M=document.createElement(M),A!==void 0&&(M.innerHTML=A),b(M,this)},l.default.Element.prototype.addClass=function(M){return this.elt.className?this.hasClass(M)||(this.elt.className=this.elt.className+" "+M):this.elt.className=M,this},l.default.Element.prototype.removeClass=function(M){return this.elt.classList.remove(M),this},l.default.Element.prototype.hasClass=function(M){return this.elt.classList.contains(M)},l.default.Element.prototype.toggleClass=function(M){return this.elt.classList.contains(M)?this.elt.classList.remove(M):this.elt.classList.add(M),this},l.default.Element.prototype.child=function(M){return M===void 0?this.elt.childNodes:(typeof M=="string"?(M[0]==="#"&&(M=M.substring(1)),M=document.getElementById(M)):M instanceof l.default.Element&&(M=M.elt),M instanceof HTMLElement&&this.elt.appendChild(M),this)},l.default.Element.prototype.center=function(M){var A=this.elt.style.display,P=this.elt.style.display==="none",R=this.parent().style.display==="none",k={x:this.elt.offsetLeft,y:this.elt.offsetTop},L=(P&&this.show(),R&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),B=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return M==="both"||M===void 0?this.position(L/2+this.parent().offsetLeft,B/2+this.parent().offsetTop):M==="horizontal"?this.position(L/2+this.parent().offsetLeft,k.y):M==="vertical"&&this.position(k.x,B/2+this.parent().offsetTop),this.style("display",A),P&&this.hide(),R&&this.parent().hide(),this},l.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},l.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},l.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var M="";return this.elt.style.transform&&(M=(M=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=M,this},l.default.Element.prototype._rotate=function(){var M="";return this.elt.style.transform&&(M=(M=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=M,this},l.default.Element.prototype.style=function(M,A){if((A=A instanceof l.default.Color?"rgba("+A.levels[0]+","+A.levels[1]+","+A.levels[2]+","+A.levels[3]/255+")":A)===void 0){if(M.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(M);for(var P=M.split(";"),R=0;R<P.length;R++){var k=P[R].split(":");k[0]&&k[1]&&(this.elt.style[k[0].trim()]=k[1].trim())}}else this.elt.style[M]=A,M!=="width"&&M!=="height"&&M!=="left"&&M!=="top"||(A=window.getComputedStyle(this.elt).getPropertyValue(M).replace(/[^\d.]/g,""),this[M]=Math.round(parseFloat(A,10)));return this},l.default.Element.prototype.attribute=function(M,A){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return A===void 0?this.elt.getAttribute(M):(this.elt.setAttribute(M,A),this);if(A===void 0)return this.elt.firstChild.getAttribute(M);for(var P=0;P<this.elt.childNodes.length;P++)this.elt.childNodes[P].setAttribute(M,A)},l.default.Element.prototype.removeAttribute=function(M){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var A=0;A<this.elt.childNodes.length;A++)this.elt.childNodes[A].removeAttribute(M);return this.elt.removeAttribute(M),this},l.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},l.default.Element.prototype.show=function(){return this.elt.style.display="block",this},l.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},l.default.Element.prototype.size=function(M,A){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var P=M,R=A,k=l.default.prototype.AUTO;if(P!==k||R!==k){if(P===k?P=A*this.width/this.height:R===k&&(R=M*this.height/this.width),this.elt instanceof HTMLCanvasElement){var L,B={},I=this.elt.getContext("2d");for(L in I)B[L]=I[L];for(L in this.elt.setAttribute("width",P*this._pInst._pixelDensity),this.elt.setAttribute("height",R*this._pInst._pixelDensity),this.elt.style.width=P+"px",this.elt.style.height=R+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),B)this.elt.getContext("2d")[L]=B[L]}else this.elt.style.width=P+"px",this.elt.style.height=R+"px",this.elt.width=P,this.elt.height=R;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},l.default.Element.prototype.remove=function(){this instanceof l.default.MediaElement&&(this.stop(),(A=this.elt.srcObject)!==null&&A.getTracks().forEach(function(P){P.stop()}));var M,A=this._pInst._elements.indexOf(this);for(M in A!==-1&&this._pInst._elements.splice(A,1),this._events)this.elt.removeEventListener(M,this._events[M]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},l.default.Element.prototype.drop=function(M,A){var P;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",P=function(R){R.preventDefault()}),this.elt.addEventListener("dragleave",P)),l.default.Element._attachListener("drop",function(R){R.preventDefault(),typeof A=="function"&&A.call(this,R),R=R.dataTransfer.files;var k=!0,L=!1,B=void 0;try{for(var I,F=R[Symbol.iterator]();!(k=(I=F.next()).done);k=!0){var z=I.value;l.default.File._load(z,M)}}catch(G){L=!0,B=G}finally{try{k||F.return==null||F.return()}finally{if(L)throw B}}},this)):console.log("The File APIs are not fully supported in this browser."),this},i=function(M){var A=R;if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(M&&M.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),M&&x(A,M);var P=p(R);function R(k,L){c(this,R);var B=f(L=P.call(this,k,L));return L.elt.crossOrigin="anonymous",L._prevTime=0,L._cueIDCounter=0,L._cues=[],L.pixels=[],L._pixelsState=f(L),L._pixelDensity=1,L._modified=!1,L._frameOnCanvas=-1,Object.defineProperty(B,"src",{get:function(){var I=B.elt.children[0].src,F=B.elt.src===window.location.href?"":B.elt.src;return I===window.location.href?F:I},set:function(I){for(var F=0;F<B.elt.children.length;F++)B.elt.removeChild(B.elt.children[F]);var z=document.createElement("source");z.src=I,k.appendChild(z),B.elt.src=I,B.modified=!0}}),B._onended=function(){},B.elt.onended=function(){B._onended(B)},L}return v(R,[{key:"play",value:function(){var k;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(k=this.elt.play())&&k.catch&&k.catch(function(L){L.name==="NotAllowedError"?console.error(L):console.error("Media play method encountered an unexpected error",L)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var k=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(k)},{passive:!0,once:!0})}},{key:"autoplay",value:function(k){var L=this,B=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",k),k&&!B&&(k=function(){return L._setupAutoplayFailDetection()},this.elt.readyState===4?k():this.elt.addEventListener("canplay",k,{passive:!0,once:!0})),this}},{key:"volume",value:function(k){if(k===void 0)return this.elt.volume;this.elt.volume=k}},{key:"speed",value:function(k){if(k===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=k:this.presetPlaybackRate=k}},{key:"time",value:function(k){return k===void 0?this.elt.currentTime:(this.elt.currentTime=k,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var k=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&k&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var k=arguments.length,L=new Array(k),B=0;B<k;B++)L[B]=arguments[B];return l.default.Renderer2D.prototype.loadPixels.apply(this,L)}},{key:"updatePixels",value:function(k,L,B,I){return this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.updatePixels.call(this,k,L,B,I)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var k=arguments.length,L=new Array(k),B=0;B<k;B++)L[B]=arguments[B];return l.default.Renderer2D.prototype.get.apply(this,L)}},{key:"_getPixel",value:function(){this.loadPixels();for(var k=arguments.length,L=new Array(k),B=0;B<k;B++)L[B]=arguments[B];return l.default.Renderer2D.prototype._getPixel.apply(this,L)}},{key:"set",value:function(k,L,B){this.loadedmetadata&&(this._ensureCanvas(),l.default.Renderer2D.prototype.set.call(this,k,L,B),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var k=arguments.length,L=new Array(k),B=0;B<k;B++)L[B]=arguments[B];l.default.prototype.copy.apply(this,L)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var k=arguments.length,L=new Array(k),B=0;B<k;B++)L[B]=arguments[B];l.default.Image.prototype.mask.apply(this,L)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(k){this._modified=k}},{key:"onended",value:function(k){return this._onended=k,this}},{key:"connect",value:function(k){var L,B;if(typeof l.default.prototype.getAudioContext=="function")L=l.default.prototype.getAudioContext(),B=l.default.soundOut.input;else try{B=(L=k.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=L.createMediaElementSource(this.elt),this.audioSourceNode.connect(B)),k?k.input?this.audioSourceNode.connect(k.input):this.audioSourceNode.connect(k):this.audioSourceNode.connect(B)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(k,L,B){var I=this._cueIDCounter++;return L=new w(L,k,I,B),this._cues.push(L),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),I}},{key:"removeCue",value:function(k){for(var L=0;L<this._cues.length;L++)this._cues[L].id===k&&(console.log(k),this._cues.splice(L,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var k=this.time(),L=0;L<this._cues.length;L++){var B=this._cues[L].time,I=this._cues[L].val;this._prevTime<B&&B<=k&&this._cues[L].callback(I)}this._prevTime=k}}]),R}(l.default.Element),l.default.MediaElement=i,i=function(){function M(A,P){c(this,M),this.file=A,this._pInst=P,P=A.type.split("/"),this.type=P[0],this.subtype=P[1],this.name=A.name,this.size=A.size,this.data=void 0}return v(M,null,[{key:"_createLoader",value:function(A,P){var R=new FileReader;return R.onload=function(k){var L,B=new l.default.File(A);B.file.type==="application/json"?B.data=JSON.parse(k.target.result):B.file.type==="text/xml"?(L=new DOMParser().parseFromString(k.target.result,"text/xml"),B.data=new l.default.XML(L.documentElement)):B.data=k.target.result,P(B)},R}},{key:"_load",value:function(A,P){var R;/^text\//.test(A.type)||A.type==="application/json"?l.default.File._createLoader(A,P).readAsText(A):/^(video|audio)\//.test(A.type)?((R=new l.default.File(A)).data=URL.createObjectURL(A),P(R)):l.default.File._createLoader(A,P).readAsDataURL(A)}}]),M}(),l.default.File=i,i=l.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.every":153,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238}],290:[function(i,_,g){function h(M){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(M)}function l(M){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(A){return h(A)}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":h(A)})(M)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(w=i("../core/main"))&&w.__esModule?w:{default:w},v=function(M){if(M&&M.__esModule)return M;if(M===null||l(M)!=="object"&&typeof M!="function")return{default:M};var A=function(){var B;return typeof WeakMap!="function"?null:(B=new WeakMap,B)}();if(A&&A.has(M))return A.get(M);var P,R={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(P in M){var L;Object.prototype.hasOwnProperty.call(M,P)&&((L=k?Object.getOwnPropertyDescriptor(M,P):null)&&(L.get||L.set)?Object.defineProperty(R,P,L):R[P]=M[P])}return R.default=M,A&&A.set(M,R),R}(i("../core/constants"));d.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",d.default.prototype.accelerationX=0,d.default.prototype.accelerationY=0,d.default.prototype.accelerationZ=0,d.default.prototype.pAccelerationX=0,d.default.prototype.pAccelerationY=0,d.default.prototype.pAccelerationZ=0,d.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},d.default.prototype.rotationX=0,d.default.prototype.rotationY=0,d.default.prototype.rotationZ=0,d.default.prototype.pRotationX=0,d.default.prototype.pRotationY=0;var x=d.default.prototype.pRotationZ=0,p=0,f=0,u="clockwise",c="clockwise",m="clockwise",b=(d.default.prototype.pRotateDirectionX=void 0,d.default.prototype.pRotateDirectionY=void 0,d.default.prototype.pRotateDirectionZ=void 0,d.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},d.default.prototype.turnAxis=void 0,.5),S=30,w=(d.default.prototype.setMoveThreshold=function(M){d.default._validateParameters("setMoveThreshold",arguments),b=M},d.default.prototype.setShakeThreshold=function(M){d.default._validateParameters("setShakeThreshold",arguments),S=M},d.default.prototype._ondeviceorientation=function(M){this._updatePRotations(),this._angleMode===v.radians&&(M.beta=M.beta*(_PI/180),M.gamma=M.gamma*(_PI/180),M.alpha=M.alpha*(_PI/180)),this._setProperty("rotationX",M.beta),this._setProperty("rotationY",M.gamma),this._setProperty("rotationZ",M.alpha),this._handleMotion()},d.default.prototype._ondevicemotion=function(M){this._updatePAccelerations(),this._setProperty("accelerationX",2*M.acceleration.x),this._setProperty("accelerationY",2*M.acceleration.y),this._setProperty("accelerationZ",2*M.acceleration.z),this._handleMotion()},d.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var M,A,P,R,k,L=this._isGlobal?window:this;typeof L.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>b||Math.abs(this.accelerationY-this.pAccelerationY)>b||Math.abs(this.accelerationZ-this.pAccelerationZ)>b)&&L.deviceMoved(),typeof L.deviceTurned=="function"&&(A=this.rotationX+180,M=this.pRotationX+180,P=x+180,0<A-M&&A-M<270||A-M<-270?u="clockwise":(A-M<0||270<A-M)&&(u="counter-clockwise"),u!==this.pRotateDirectionX&&(P=A),90<Math.abs(A-P)&&Math.abs(A-P)<270&&(P=A,this._setProperty("turnAxis","X"),L.deviceTurned()),this.pRotateDirectionX=u,x=P-180,M=this.rotationY+180,A=this.pRotationY+180,P=p+180,0<M-A&&M-A<270||M-A<-270?c="clockwise":(M-A<0||270<M-this.pRotationY)&&(c="counter-clockwise"),c!==this.pRotateDirectionY&&(P=M),90<Math.abs(M-P)&&Math.abs(M-P)<270&&(P=M,this._setProperty("turnAxis","Y"),L.deviceTurned()),this.pRotateDirectionY=c,p=P-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?m="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(m="counter-clockwise"),m!==this.pRotateDirectionZ&&(f=this.rotationZ),90<Math.abs(this.rotationZ-f)&&Math.abs(this.rotationZ-f)<270&&(f=this.rotationZ,this._setProperty("turnAxis","Z"),L.deviceTurned()),this.pRotateDirectionZ=m,this._setProperty("turnAxis",void 0)),typeof L.deviceShaken=="function"&&(this.pAccelerationX!==null&&(R=Math.abs(this.accelerationX-this.pAccelerationX),k=Math.abs(this.accelerationY-this.pAccelerationY)),S<R+k&&L.deviceShaken())},d.default);g.default=w},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],291:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};h.default.prototype.isKeyPressed=!1,h.default.prototype.keyIsPressed=!1,h.default.prototype.key="",h.default.prototype.keyCode=0,h.default.prototype._onkeydown=function(l){var d;this._downKeys[l.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",l.which),this._downKeys[l.which]=!0,this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(d=this._isGlobal?window:this).keyPressed!="function"||l.charCode||d.keyPressed(l)===!1&&l.preventDefault())},h.default.prototype._onkeyup=function(l){this._downKeys[l.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),this._setProperty("keyCode",l.which);var d=this._isGlobal?window:this;typeof d.keyReleased=="function"&&d.keyReleased(l)===!1&&l.preventDefault()},h.default.prototype._onkeypress=function(l){var d;l.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",l.which),this._setProperty("key",l.key||String.fromCharCode(l.which)||l.which),typeof(d=this._isGlobal?window:this).keyTyped=="function"&&d.keyTyped(l)===!1&&l.preventDefault())},h.default.prototype._onblur=function(l){this._downKeys={}},h.default.prototype.keyIsDown=function(l){return h.default._validateParameters("keyIsDown",arguments),this._downKeys[l]||!1},h.default.prototype._areDownKeys=function(){for(var l in this._downKeys)if(this._downKeys.hasOwnProperty(l)&&this._downKeys[l]===!0)return!0;return!1},i=h.default,g.default=i},{"../core/main":273}],292:[function(i,_,g){function h(x){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(x)}function l(x){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(p){return h(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":h(p)})(x)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.string.includes"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(d=i("../core/main"))&&d.__esModule?d:{default:d},v=function(x){if(x&&x.__esModule)return x;if(x===null||l(x)!=="object"&&typeof x!="function")return{default:x};var p=function(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,b)}();if(p&&p.has(x))return p.get(x);var f,u={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(f in x){var m;Object.prototype.hasOwnProperty.call(x,f)&&((m=c?Object.getOwnPropertyDescriptor(x,f):null)&&(m.get||m.set)?Object.defineProperty(u,f,m):u[f]=x[f])}return u.default=x,p&&p.set(x,u),u}(i("../core/constants"));d.default.prototype.movedX=0,d.default.prototype.movedY=0,d.default.prototype._hasMouseInteracted=!1,d.default.prototype.mouseX=0,d.default.prototype.mouseY=0,d.default.prototype.pmouseX=0,d.default.prototype.pmouseY=0,d.default.prototype.winMouseX=0,d.default.prototype.winMouseY=0,d.default.prototype.pwinMouseX=0,d.default.prototype.pwinMouseY=0,d.default.prototype.mouseButton=0,d.default.prototype.mouseIsPressed=!1,d.default.prototype._updateNextMouseCoords=function(x){var p,f,u,c,m;this._curElement!==null&&(!x.touches||0<x.touches.length)&&(p=this._curElement.elt,f=this.width,u=this.height,(c=x)&&!c.clientX&&(c.touches?c=c.touches[0]:c.changedTouches&&(c=c.changedTouches[0])),m=p.getBoundingClientRect(),f=p.scrollWidth/f||1,p=p.scrollHeight/u||1,u={x:(c.clientX-m.left)/f,y:(c.clientY-m.top)/p,winX:c.clientX,winY:c.clientY,id:c.identifier},this._setProperty("movedX",x.movementX),this._setProperty("movedY",x.movementY),this._setProperty("mouseX",u.x),this._setProperty("mouseY",u.y),this._setProperty("winMouseX",u.winX),this._setProperty("winMouseY",u.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},d.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},d.default.prototype._setMouseButton=function(x){x.button===1?this._setProperty("mouseButton",v.CENTER):x.button===2?this._setProperty("mouseButton",v.RIGHT):this._setProperty("mouseButton",v.LEFT)},d.default.prototype._onmousemove=function(x){var p=this._isGlobal?window:this;this._updateNextMouseCoords(x),this.mouseIsPressed?typeof p.mouseDragged=="function"?p.mouseDragged(x)===!1&&x.preventDefault():typeof p.touchMoved=="function"&&p.touchMoved(x)===!1&&x.preventDefault():typeof p.mouseMoved=="function"&&p.mouseMoved(x)===!1&&x.preventDefault()},d.default.prototype._onmousedown=function(x){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(x),this._updateNextMouseCoords(x),typeof p.mousePressed=="function"?p.mousePressed(x)===!1&&x.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof p.touchStarted=="function"&&p.touchStarted(x)===!1&&x.preventDefault()},d.default.prototype._onmouseup=function(x){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),typeof p.mouseReleased=="function"?p.mouseReleased(x)===!1&&x.preventDefault():typeof p.touchEnded=="function"&&p.touchEnded(x)===!1&&x.preventDefault()},d.default.prototype._ondragend=d.default.prototype._onmouseup,d.default.prototype._ondragover=d.default.prototype._onmousemove,d.default.prototype._onclick=function(x){var p=this._isGlobal?window:this;typeof p.mouseClicked=="function"&&p.mouseClicked(x)===!1&&x.preventDefault()},d.default.prototype._ondblclick=function(x){var p=this._isGlobal?window:this;typeof p.doubleClicked=="function"&&p.doubleClicked(x)===!1&&x.preventDefault()},d.default.prototype._mouseWheelDeltaY=0,d.default.prototype._pmouseWheelDeltaY=0,d.default.prototype._onwheel=function(x){var p=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",x.deltaY),typeof p.mouseWheel=="function"&&(x.delta=x.deltaY,p.mouseWheel(x)===!1&&x.preventDefault())},d.default.prototype.requestPointerLock=function(){var x=this._curElement.elt;return x.requestPointerLock=x.requestPointerLock||x.mozRequestPointerLock,x.requestPointerLock?(x.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},d.default.prototype.exitPointerLock=function(){document.exitPointerLock()},i=d.default,g.default=i},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],293:[function(i,_,g){i("core-js/modules/es.array.includes"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.string.includes"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.prototype.touches=[],i.default.prototype._updateTouchCoords=function(h){if(this._curElement!==null){for(var l=[],d=0;d<h.touches.length;d++)l[d]=function(v,x,p,f){var u=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,c=v.getBoundingClientRect();return x=v.scrollWidth/x||1,v=v.scrollHeight/p||1,{x:((p=f.touches[u]||f.changedTouches[u]).clientX-c.left)/x,y:(p.clientY-c.top)/v,winX:p.clientX,winY:p.clientY,id:p.identifier}}(this._curElement.elt,this.width,this.height,h,d);this._setProperty("touches",l)}},i.default.prototype._ontouchstart=function(h){var l=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(h),this._updateNextMouseCoords(h),this._updateMouseCoords(),typeof l.touchStarted=="function"?l.touchStarted(h)===!1&&h.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&typeof l.mousePressed=="function"&&l.mousePressed(h)===!1&&h.preventDefault()},i.default.prototype._ontouchmove=function(h){var l=this._isGlobal?window:this;this._updateTouchCoords(h),this._updateNextMouseCoords(h),typeof l.touchMoved=="function"?l.touchMoved(h)===!1&&h.preventDefault():typeof l.mouseDragged=="function"&&l.mouseDragged(h)===!1&&h.preventDefault()},i.default.prototype._ontouchend=function(h){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(h),this._updateNextMouseCoords(h);var l=this._isGlobal?window:this;typeof l.touchEnded=="function"?l.touchEnded(h)===!1&&h.preventDefault():typeof l.mouseReleased=="function"&&l.mouseReleased(h)===!1&&h.preventDefault()},i=i.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.string.includes":189}],294:[function(i,_,g){i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.typed-array.int32-array"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.typed-array.int32-array"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h,l,d,v,x={_toPixels:function(p){var f,u;return p instanceof ImageData?p.data:p.getContext("2d")?p.getContext("2d").getImageData(0,0,p.width,p.height).data:p.getContext("webgl")?(u=(f=p.getContext("webgl")).drawingBufferWidth*f.drawingBufferHeight*4,u=new Uint8Array(u),f.readPixels(0,0,p.width,p.height,f.RGBA,f.UNSIGNED_BYTE,u),u):void 0},_getARGB:function(p,f){return p[3+(f*=4)]<<24&4278190080|p[f]<<16&16711680|p[1+f]<<8&65280|255&p[2+f]},_setPixels:function(p,f){for(var u,c=0,m=p.length;c<m;c++)p[0+(u=4*c)]=(16711680&f[c])>>>16,p[1+u]=(65280&f[c])>>>8,p[2+u]=255&f[c],p[3+u]=(4278190080&f[c])>>>24},_toImageData:function(p){return p instanceof ImageData?p:p.getContext("2d").getImageData(0,0,p.width,p.height)},_createImageData:function(p,f){return x._tmpCanvas=document.createElement("canvas"),x._tmpCtx=x._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(p,f)},apply:function(p,f,u){var c=p.getContext("2d"),m=c.getImageData(0,0,p.width,p.height);(f=f(m,u))instanceof ImageData?c.putImageData(f,0,0,0,0,p.width,p.height):c.putImageData(m,0,0,0,0,p.width,p.height)},threshold:function(p,f){for(var u=x._toPixels(p),c=(f===void 0&&(f=.5),Math.floor(255*f)),m=0;m<u.length;m+=4){var b=c<=.2126*u[m]+.7152*u[m+1]+.0722*u[m+2]?255:0;u[m]=u[m+1]=u[m+2]=b}},gray:function(p){for(var f=x._toPixels(p),u=0;u<f.length;u+=4){var c=f[u],m=f[u+1],b=f[u+2];f[u]=f[u+1]=f[u+2]=.2126*c+.7152*m+.0722*b}},opaque:function(p){for(var f=x._toPixels(p),u=0;u<f.length;u+=4)f[u+3]=255;return f},invert:function(p){for(var f=x._toPixels(p),u=0;u<f.length;u+=4)f[u]=255-f[u],f[u+1]=255-f[u+1],f[u+2]=255-f[u+2]},posterize:function(p,f){var u=x._toPixels(p);if(f<2||255<f)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var c=f-1,m=0;m<u.length;m+=4){var b=u[m],S=u[m+1],w=u[m+2];u[m]=255*(b*f>>8)/c,u[m+1]=255*(S*f>>8)/c,u[m+2]=255*(w*f>>8)/c}},dilate:function(p){for(var f,u,c,m,b,S,w,M,A,P=x._toPixels(p),R=0,k=P.length?P.length/4:0,L=new Int32Array(k);R<k;)for(u=(f=R)+p.width;R<u;)m=c=x._getARGB(P,R),(A=R-1)<f&&(A=R),u<=(M=R+1)&&(M=R),(b=R-p.width)<0&&(b=0),k<=(S=R+p.width)&&(S=R),b=x._getARGB(P,b),A=x._getARGB(P,A),S=x._getARGB(P,S),(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))<(w=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))&&(c=A,m=w),m<(w=77*((A=x._getARGB(P,M))>>16&255)+151*(A>>8&255)+28*(255&A))&&(c=A,m=w),m<(M=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(c=b,m=M),m<(A=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))&&(c=S,m=A),L[R++]=c;x._setPixels(P,L)},erode:function(p){for(var f,u,c,m,b,S,w,M,A,P=x._toPixels(p),R=0,k=P.length?P.length/4:0,L=new Int32Array(k);R<k;)for(u=(f=R)+p.width;R<u;)m=c=x._getARGB(P,R),(A=R-1)<f&&(A=R),u<=(M=R+1)&&(M=R),(b=R-p.width)<0&&(b=0),k<=(S=R+p.width)&&(S=R),b=x._getARGB(P,b),A=x._getARGB(P,A),S=x._getARGB(P,S),(w=77*(A>>16&255)+151*(A>>8&255)+28*(255&A))<(m=77*(m>>16&255)+151*(m>>8&255)+28*(255&m))&&(c=A,m=w),(w=77*((A=x._getARGB(P,M))>>16&255)+151*(A>>8&255)+28*(255&A))<m&&(c=A,m=w),(M=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<m&&(c=b,m=M),(A=77*(S>>16&255)+151*(S>>8&255)+28*(255&S))<m&&(c=S,m=A),L[R++]=c;x._setPixels(P,L)},blur:function(p,f){for(var u,c,m,b,S,w,M,A,P,R,k=x._toPixels(p),L=p.width,B=p.height,I=L*B,F=new Int32Array(I),z=0;z<I;z++)F[z]=x._getARGB(k,z);var G,N,O,H,q,K,ne,ee,se=new Int32Array(I),me=new Int32Array(I),X=new Int32Array(I),Z=new Int32Array(I),ie=0,ye=3.5*f|0;if(h!==(ye=ye<1?1:ye<248?ye:248)){l=1+(h=ye)<<1,d=new Int32Array(l),v=new Array(l);for(var fe=0;fe<l;fe++)v[fe]=new Int32Array(256);for(var $=1,re=ye-1;$<ye;$++){d[ye+$]=d[re]=K=re*re,ne=v[ye+$],ee=v[re--];for(var de=0;de<256;de++)ne[de]=ee[de]=K*de}q=d[ye]=ye*ye,ne=v[ye];for(var ge=0;ge<256;ge++)ne[ge]=q*ge}for(N=0;N<B;N++){for(G=0;G<L;G++){if(b=m=c=S=u=0,(w=G-h)<0)R=-w,w=0;else{if(L<=w)break;R=0}for(O=R;O<l&&!(L<=w);O++){var ve=F[w+ie];S+=(H=v[O])[(-16777216&ve)>>>24],c+=H[(16711680&ve)>>16],m+=H[(65280&ve)>>8],b+=H[255&ve],u+=d[O],w++}se[M=ie+G]=S/u,me[M]=c/u,X[M]=m/u,Z[M]=b/u}ie+=L}for(P=(A=-h)*L,N=ie=0;N<B;N++){for(G=0;G<L;G++){if(b=m=c=S=u=0,A<0)R=M=-A,w=G;else{if(B<=A)break;R=0,M=A,w=G+P}for(O=R;O<l&&!(B<=M);O++)S+=(H=v[O])[se[w]],c+=H[me[w]],m+=H[X[w]],b+=H[Z[w]],u+=d[O],M++,w+=L;F[G+ie]=S/u<<24|c/u<<16|m/u<<8|b/u}ie+=L,P+=L,A++}x._setPixels(k,F)}};g.default=x},{"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int32-array":215,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232}],295:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.set"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.set"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=d(i("../core/main")),l=d(i("omggif"));function d(x){return x&&x.__esModule?x:{default:x}}function v(x){return function(p){if(Array.isArray(p)){for(var f=0,u=new Array(p.length);f<p.length;f++)u[f]=p[f];return u}}(x)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}h.default.prototype.createImage=function(x,p){return h.default._validateParameters("createImage",arguments),new h.default.Image(x,p)},h.default.prototype.saveCanvas=function(){h.default._validateParameters("saveCanvas",arguments);var x,p,f,u,c=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(x=arguments[0],c.shift()):arguments[0]instanceof h.default.Element?(x=arguments[0].elt,c.shift()):x=this._curElement&&this._curElement.elt,1<=c.length&&(p=c[0]),f=(f=2<=c.length?c[1]:f)||h.default.prototype._checkFileExtension(p,f)[1]||"png"){default:u="image/png";break;case"jpeg":case"jpg":u="image/jpeg"}x.toBlob(function(m){h.default.prototype.downloadFile(m,p,f)},u)},h.default.prototype.encodeAndDownloadGif=function(x,p){for(var f=x.gifProperties,u=((ne=f.loopLimit)===1?ne=null:ne===null&&(ne=0),new Uint8Array(x.width*x.height*f.numFrames)),c=[],m={},b=0;b<f.numFrames;b++){for(var S=new Set,w=f.frames[b].image.data,M=w.length,A=new Uint32Array(x.width*x.height),P=0,R=0;P<M;P+=4,R++){var k=w[P+0]<<16|w[P+1]<<8|w[P+2]<<0;S.add(k),A[R]=k}var L=v(S).sort().toString();m[L]===void 0?m[L]={freq:1,frames:[b]}:(m[L].freq+=1,m[L].frames.push(b)),c.push(A)}for(var B=[],I=Object.keys(m).sort(function(X,Z){return m[Z].freq-m[X].freq}),F=I[0].split(",").map(function(X){return parseInt(X)}),z=(B=B.concat(m[F].frames),new Set(F)),G=1;G<I.length;G++){var N=I[G].split(",").map(function(X){return parseInt(X)}).filter(function(X){return!z.has(X)});if(F.length+N.length<=256){for(var O=0;O<N.length;O++)F.push(N[O]),z.add(N[O]);B=B.concat(m[I[G]].frames)}}B=new Set(B);for(var H={},q=0;q<F.length;q++)H[F[q]]||(H[F[q]]=q);for(var K=1;K<F.length;)K<<=1;F.length=K;for(var ne={loop:ne,palette:new Uint32Array(F)},ee=new l.default.GifWriter(u,x.width,x.height,ne),se={},me=0;me<f.numFrames;me++)(function(X){var Z=!B.has(X),ie=Z?[]:F,ye=new Uint8Array(x.width*x.height),fe={},$=new Set,re=(c[X].forEach(function(Se,ae){Z?(fe[Se]===void 0&&(fe[Se]=ie.length,ie.push(Se)),ye[ae]=fe[Se]):ye[ae]=H[Se],0<X&&c[X-1][ae]!==Se&&$.add(Se)}),{});if(0<(de=ie.filter(function(Se){return!$.has(Se)})).length){var de=de[0],ge=(Z?fe:H)[de];if(0<X){for(var ve=0;ve<c[X].length;ve++)c[X-1][ve]===c[X][ve]&&(ye[ve]=ge);re.transparent=ge,se.frameOpts.disposal=1}}if(re.delay=f.frames[X].delay/10,Z){for(var we=1;we<ie.length;)we<<=1;ie.length=we,re.palette=new Uint32Array(ie)}0<X&&ee.addFrame(0,0,x.width,x.height,se.pixelPaletteIndex,se.frameOpts),se={pixelPaletteIndex:ye,frameOpts:re}})(me);se.frameOpts.disposal=1,ee.addFrame(0,0,x.width,x.height,se.pixelPaletteIndex,se.frameOpts),ne=new Blob([u.slice(0,ee.end())],{type:"image/gif"}),h.default.prototype.downloadFile(ne,p,"gif")},h.default.prototype.saveFrames=function(x,p,f,u,c){h.default._validateParameters("saveFrames",arguments),f=h.default.prototype.constrain(f=f||3,0,15),f*=1e3,u=h.default.prototype.constrain(u||15,0,22);var m=0,b=h.default.prototype._makeFrame,S=this._curElement.elt,w=[],M=setInterval(function(){w.push(b(x+m,p,S)),m++},1e3/u);setTimeout(function(){if(clearInterval(M),c)c(w);else{var A=!0,P=!1,R=void 0;try{for(var k,L=w[Symbol.iterator]();!(A=(k=L.next()).done);A=!0){var B=k.value;h.default.prototype.downloadFile(B.imageData,B.filename,B.ext)}}catch(I){P=!0,R=I}finally{try{A||L.return==null||L.return()}finally{if(P)throw R}}}w=[]},.01+f)},h.default.prototype._makeFrame=function(x,p,f){var u;if(f=this?this._curElement.elt:f,p)switch(p.toLowerCase()){case"png":u="image/png";break;case"jpeg":case"jpg":u="image/jpeg";break;default:u="image/png"}else p="png",u="image/png";f=(f=f.toDataURL(u)).replace(u,"image/octet-stream");var c={};return c.imageData=f,c.filename=x,c.ext=p,c},i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236,omggif:246}],296:[function(i,_,g){function h(S){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(S)}function l(S){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(w){return h(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":h(w)})(S)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.copy-within"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint8-clamped-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.copy-within"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint8-clamped-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,i("regenerator-runtime/runtime");var d=u(i("../core/main")),v=u(i("../core/helpers")),x=function(S){if(S&&S.__esModule)return S;if(S===null||l(S)!=="object"&&typeof S!="function")return{default:S};var w=function(){var k;return typeof WeakMap!="function"?null:(k=new WeakMap,k)}();if(w&&w.has(S))return w.get(S);var M,A={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(M in S){var R;Object.prototype.hasOwnProperty.call(S,M)&&((R=P?Object.getOwnPropertyDescriptor(S,M):null)&&(R.get||R.set)?Object.defineProperty(A,M,R):A[M]=S[M])}return A.default=S,w&&w.set(S,A),A}(i("../core/constants")),p=u(i("omggif")),f=i("gifenc");function u(S){return S&&S.__esModule?S:{default:S}}function c(S,w,M,A,P,R,k){try{var L=S[R](k),B=L.value}catch(I){return void M(I)}L.done?w(B):Promise.resolve(B).then(A,P)}function m(S,w,M,A,P,R,k,L,B,I,F){var z,G,N,O,H,q,K,ne,ee;return S===x.COVER&&(z=w,N=M,K=R,ne=k,q=L,ee=B,G=I,O=F,K/=H=Math.max(K/G,ne/O),ne/=H,H=q,q=ee,z===x.CENTER?H+=(G-K)/2:z===x.RIGHT&&(H+=G-K),N===x.CENTER?q+=(O-ne)/2:N===x.BOTTOM&&(q+=O-ne),L=(ee={x:H,y:q,w:K,h:ne}).x,B=ee.y,I=ee.w,F=ee.h),S===x.CONTAIN&&(z=w,G=M,N=A,O=P,H=R,q=k,K=I,ne=F,K/=ee=Math.max(K/H,ne/q),ne/=ee,ee=N,N=O,z===x.CENTER?ee+=(H-K)/2:z===x.RIGHT&&(ee+=H-K),G===x.CENTER?N+=(q-ne)/2:G===x.BOTTOM&&(N+=q-ne),A=(S={x:ee,y:N,w:K,h:ne}).x,P=S.y,R=S.w,k=S.h),{sx:L,sy:B,sw:I,sh:F,dx:A,dy:P,dw:R,dh:k}}function b(S,w){return 0<S&&S<w?S:w}i("../core/friendly_errors/validate_params"),i("../core/friendly_errors/file_errors"),i("../core/friendly_errors/fes_core"),d.default.prototype.loadImage=function(S,w,M){d.default._validateParameters("loadImage",arguments);var A=new d.default.Image(1,1,this),P=this,R=new Request(S,{method:"GET",mode:"cors"});return fetch(S,R).then(function(k){var L,B=k.headers.get("content-type");B===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),B&&B.includes("image/gif")?k.arrayBuffer().then(function(I){if(I){I=new Uint8Array(I);for(var F=A,z=w,G=M,N=(function(X){P._decrementPreload()}).bind(P),O=new p.default.GifReader(I),H=(F.width=F.canvas.width=O.width,F.height=F.canvas.height=O.height,[]),q=O.numFrames(),K=new Uint8ClampedArray(F.width*F.height*4),ne=0;ne<q;ne++){var ee=O.frameInfo(ne),se=F.drawingContext.getImageData(0,0,F.width,F.height),me=(K=se.data.slice(),function(X,Z){try{Z.decodeAndBlitFrameRGBA(X,K)}catch(ie){d.default._friendlyFileLoadError(8,F.src),typeof G=="function"?G(ie):console.error(ie)}}(ne,O),new ImageData(K,F.width,F.height));(me=(F.drawingContext.putImageData(me,0,0),ee.delay))===0&&(me=10),H.push({image:F.drawingContext.getImageData(0,0,F.width,F.height),delay:10*me}),ee.disposal===2?F.drawingContext.clearRect(ee.x,ee.y,ee.width,ee.height):ee.disposal===3&&F.drawingContext.putImageData(se,0,0,ee.x,ee.y,ee.width,ee.height)}(I=O.loopCount())===null?I=1:I===0&&(I=null),F.drawingContext.putImageData(H[0].image,0,0),1<H.length&&(F.gifProperties={displayIndex:0,loopLimit:I,loopCount:0,frames:H,numFrames:q,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof z=="function"&&z(F),N()}},function(I){typeof M=="function"?(M(I),P._decrementPreload()):console.error(I)}):((L=new Image).onload=function(){A.width=A.canvas.width=L.width,A.height=A.canvas.height=L.height,A.drawingContext.drawImage(L,0,0),A.modified=!0,typeof w=="function"&&w(A),P._decrementPreload()},L.onerror=function(I){d.default._friendlyFileLoadError(0,L.src),typeof M=="function"?(M(I),P._decrementPreload()):console.error(I)},S.indexOf("data:image/")!==0&&(L.crossOrigin="Anonymous"),L.src=S),A.modified=!0}).catch(function(k){d.default._friendlyFileLoadError(0,S),typeof M=="function"?(M(k),P._decrementPreload()):console.error(k)}),A},d.default.prototype.saveGif=function(){S=regeneratorRuntime.mark(function M(A,P){var R,k,L,B,I,F,z,G,N,O,H,q,K,ne,ee,se,me,X,Z,ie,ye,fe,$,re,de,ge,ve=arguments;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(R=2<ve.length&&ve[2]!==void 0?ve[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof A!="string")throw TypeError("fileName parameter must be a string");we.next=3;break;case 3:if(typeof P!="number")throw TypeError("Duration parameter must be a number");we.next=5;break;case 5:if(k=R&&R.delay||0,L=R&&R.units||"seconds",B=R&&R.silent||!1,I=R&&R.notificationDuration||0,F=R&&R.notificationID||"progressBar",typeof k!="number")throw TypeError("Delay parameter must be a number");we.next=12;break;case 12:if(L!=="seconds"&&L!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');we.next=14;break;case 14:if(typeof B!="boolean")throw TypeError("Silent parameter must be a boolean");we.next=16;break;case 16:if(typeof I!="number")throw TypeError("Notification duration parameter must be a number");we.next=18;break;case 18:if(typeof F!="string")throw TypeError("Notification ID parameter must be a string");we.next=20;break;case 20:return this._recording=!0,O=this._targetFrameRate,z=(z=1/(O=O!==1/0&&O!==void 0&&O!==0?O:60)*1e3)<20?20:z,N=(G=L==="seconds"?P*O:P)+(O=L==="seconds"?k*O:k),O=O,this.frameCount=O,H=this._pixelDensity,this.pixelDensity(1),q=[],document.getElementById(F)!==null&&document.getElementById(F).remove(),B||((K=this.createP("")).id(F),K.style("font-size","16px"),K.style("font-family","Montserrat"),K.style("background-color","#ffffffa0"),K.style("padding","8px"),K.style("border-radius","10px"),K.position(0,0)),this._renderer instanceof d.default.RendererGL&&(ee=this.drawingContext,ne=new Uint8Array(ee.drawingBufferWidth*ee.drawingBufferHeight*4)),this.noLoop(),we.next=39,Promise.resolve();case 39:if(O<N)return this.redraw(),re=void 0,re=this._renderer instanceof d.default.RendererGL?(ne=new Uint8Array(ee.drawingBufferWidth*ee.drawingBufferHeight*4),ee.readPixels(0,0,ee.drawingBufferWidth,ee.drawingBufferHeight,ee.RGBA,ee.UNSIGNED_BYTE,ne),function(Se){for(var ae=parseInt(height/2),oe=4*width,Ee=new Uint8Array(4*width),Oe=0;Oe<ae;++Oe){var ze=Oe*oe,Be=(height-Oe-1)*oe;Ee.set(Se.subarray(ze,ze+oe)),Se.copyWithin(ze,Be,Be+oe),Se.set(Ee,Be)}return Se}(ne)):this.drawingContext.getImageData(0,0,this.width,this.height).data,q.push(re),O++,B||K.html("Saved frame <b>"+q.length.toString()+"</b> out of "+G.toString()),we.next=48,new Promise(function(Se){return setTimeout(Se,0)});we.next=50;break;case 48:we.next=39;break;case 50:B||K.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(H),se=(0,f.GIFEncoder)(),me=function(Se){for(var ae=new Uint8Array(Se.length*Se[0].length),oe=0;oe<Se.length;oe++)ae.set(Se[oe],oe*Se[0].length);var Ee=(0,f.quantize)(ae,256,{format:"rgba4444",oneBitAlpha:!0});return Ee.length===256?Ee[Ee.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:Ee.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),Ee}(q),X={},Z=function(Se){for(var ae=Se.length/4,oe=new Uint8Array(ae),Ee=0;Ee<ae;Ee++){var Oe=Se[4*Ee]<<24|Se[4*Ee+1]<<16|Se[4*Ee+2]<<8|Se[4*Ee+3];X[Oe]===void 0&&(X[Oe]=(0,f.nearestColorIndex)(me,Se.slice(4*Ee,4*(Ee+1)))),oe[Ee]=X[Oe]}return oe},ie=me.length-1,ye=[],fe=0;case 60:if(!(fe<q.length)){we.next=71;break}if($=Z(q[fe]),re=$.slice(),fe===0)se.writeFrame($,this.width,this.height,{palette:me,delay:z,dispose:1});else{for(de=0;de<$.length;de++)$[de]===ye[de]&&($[de]=ie);se.writeFrame($,this.width,this.height,{delay:z,transparent:!0,transparentIndex:ie,dispose:1})}return ye=re,B||K.html("Rendered frame <b>"+fe.toString()+"</b> out of "+G.toString()),we.next=68,new Promise(function(Se){return setTimeout(Se,0)});case 68:fe++,we.next=60;break;case 71:se.finish(),ge=se.bytesView(),ge=new Blob([ge],{type:"image/gif"}),q=[],this._recording=!1,this.loop(),B||(K.html("Done. Downloading your gif!"),0<I&&setTimeout(function(){return K.remove()},1e3*I)),d.default.prototype.downloadFile(ge,A,"gif");case 80:case"end":return we.stop()}},M,this)});var S,w=function(){var M=this,A=arguments;return new Promise(function(P,R){var k=S.apply(M,A);function L(I){c(k,P,R,L,B,"next",I)}function B(I){c(k,P,R,L,B,"throw",I)}L(void 0)})};return function(M,A){return w.apply(this,arguments)}}(),d.default.prototype.image=function(S,w,M,A,P,R,k,L,B,I,F,z){d.default._validateParameters("image",arguments);var G=S.width,N=S.height,O=(z=z||x.CENTER,F=F||x.CENTER,S.elt&&S.elt.videoWidth&&!S.canvas&&(G=S.elt.videoWidth,N=S.elt.videoHeight),A||G);P=P||N,R=R||0,k=k||0,L=b(L||G,G),G=b(B||N,N),B=1,S.elt&&!S.canvas&&S.elt.style.width&&(B=S.elt.videoWidth&&!A?S.elt.videoWidth:S.elt.width,B/=parseInt(S.elt.style.width,10)),R*=B,k*=B,G*=B,L*=B,N=m(I,F,z,(N=v.default.modeAdjust(w,M,O,P,this._renderer._imageMode)).x,N.y,N.w,N.h,R,k,L,G),this._renderer.image(S,N.sx,N.sy,N.sw,N.sh,N.dx,N.dy,N.dw,N.dh)},d.default.prototype.tint=function(){for(var S=arguments.length,w=new Array(S),M=0;M<S;M++)w[M]=arguments[M];d.default._validateParameters("tint",w);var A=this.color.apply(this,w);this._renderer._tint=A.levels},d.default.prototype.noTint=function(){this._renderer._tint=null},d.default.prototype._getTintedImageCanvas=d.default.Renderer2D.prototype._getTintedImageCanvas,d.default.prototype.imageMode=function(S){d.default._validateParameters("imageMode",arguments),S!==x.CORNER&&S!==x.CORNERS&&S!==x.CENTER||(this._renderer._imageMode=S)},i=d.default,g.default=i},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/helpers":269,"../core/main":273,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,gifenc:243,omggif:246,"regenerator-runtime/runtime":250}],297:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=d(i("../core/main")),l=d(i("./filters"));function d(x){return x&&x.__esModule?x:{default:x}}function v(x,p){for(var f=0;f<p.length;f++){var u=p[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(x,u.key,u)}}h.default.Image=function(){function x(u,c){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");this.width=u,this.height=c,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var p,f;return p=x,(f=[{key:"_animateGif",value:function(u){var c,m=this.gifProperties;u=u._lastRealFrameTime,m.lastChangeTime===0&&(m.lastChangeTime=u),m.playing&&(m.timeDisplayed=u-m.lastChangeTime,c=m.frames[m.displayIndex].delay,m.timeDisplayed>=c&&(c=Math.floor(m.timeDisplayed/c),m.timeDisplayed=0,m.lastChangeTime=u,m.displayIndex+=c,m.loopCount=Math.floor(m.displayIndex/m.numFrames),m.loopLimit!==null&&m.loopCount>=m.loopLimit?m.playing=!1:(u=m.displayIndex%m.numFrames,this.drawingContext.putImageData(m.frames[u].image,0,0),m.displayIndex=u,this.setModified(!0))))}},{key:"_setProperty",value:function(u,c){this[u]=c,this.setModified(!0)}},{key:"loadPixels",value:function(){h.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(u,c,m,b){h.default.Renderer2D.prototype.updatePixels.call(this,u,c,m,b),this.setModified(!0)}},{key:"get",value:function(u,c,m,b){return h.default._validateParameters("p5.Image.get",arguments),h.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];return h.default.Renderer2D.prototype._getPixel.apply(this,c)}},{key:"set",value:function(u,c,m){h.default.Renderer2D.prototype.set.call(this,u,c,m),this.setModified(!0)}},{key:"resize",value:function(u,c){u===0&&c===0?(u=this.canvas.width,c=this.canvas.height):u===0?u=this.canvas.width*c/this.canvas.height:c===0&&(c=this.canvas.height*u/this.canvas.width),u=Math.floor(u),c=Math.floor(c);var m=document.createElement("canvas");if(m.width=u,m.height=c,this.gifProperties)for(var b=this.gifProperties,S=0;S<b.numFrames;S++){for(var w=this.drawingContext.createImageData(u,c),M=(L=L=k=R=P=void 0,b.frames[S].image),A=w,P=0,R=0;R<A.height;R++)for(var k=0;k<A.width;k++){var L=Math.floor(k*M.width/A.width);L=4*(Math.floor(R*M.height/A.height)*M.width+L),A.data[P++]=M.data[L++],A.data[P++]=M.data[L++],A.data[P++]=M.data[L++],A.data[P++]=M.data[+L]}b.frames[S].image=w}m.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,m.width,m.height),this.canvas.width=this.width=u,this.canvas.height=this.height=c,this.drawingContext.drawImage(m,0,0,u,c,0,0,u,c),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];h.default.prototype.copy.apply(this,c)}},{key:"mask",value:function(u){var c=this.drawingContext.globalCompositeOperation,m=1,b=[u=u===void 0?this:u,0,0,(m=u instanceof h.default.Renderer?u._pInst._pixelDensity:m)*u.width,m*u.height,0,0,this.width,this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var S=0;S<this.gifProperties.frames.length;S++)this.drawingContext.putImageData(this.gifProperties.frames[S].image,0,0),this.copy.apply(this,b),this.gifProperties.frames[S].image=this.drawingContext.getImageData(0,0,this.width,this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,b);this.drawingContext.globalCompositeOperation=c,this.setModified(!0)}},{key:"filter",value:function(u,c){l.default.apply(this.canvas,l.default[u],c),this.setModified(!0)}},{key:"blend",value:function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];h.default._validateParameters("p5.Image.blend",arguments),h.default.prototype.blend.apply(this,c),this.setModified(!0)}},{key:"setModified",value:function(u){this._modified=u}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(u,c){this.gifProperties?h.default.prototype.encodeAndDownloadGif(this,u):h.default.prototype.saveCanvas(this.canvas,u,c)}},{key:"reset",value:function(){var u;this.gifProperties&&((u=this.gifProperties).playing=!0,u.timeSinceStart=0,u.timeDisplayed=0,u.lastChangeTime=0,u.loopCount=0,u.displayIndex=0,this.drawingContext.putImageData(u.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var u;if(this.gifProperties)return(u=this.gifProperties).displayIndex%u.numFrames}},{key:"setFrame",value:function(u){var c;this.gifProperties&&(u<(c=this.gifProperties).numFrames&&0<=u?(c.timeDisplayed=0,c.lastChangeTime=0,c.displayIndex=u,this.drawingContext.putImageData(c.frames[u].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(u,c){if(this.gifProperties){var m=this.gifProperties;if(c<m.numFrames&&0<=c)m.frames[c].delay=u;else{var b=!0,S=(c=!1,void 0);try{for(var w,M=m.frames[Symbol.iterator]();!(b=(w=M.next()).done);b=!0)w.value.delay=u}catch(A){c=!0,S=A}finally{try{b||M.return==null||M.return()}finally{if(c)throw S}}}}}}])&&v(p.prototype,f),x}(),i=h.default.Image,g.default=i},{"../core/main":273,"./filters":294,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],298:[function(i,_,g){i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.filter"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=d(i("../core/main")),l=d(i("./filters"));function d(v){return v&&v.__esModule?v:{default:v}}i("../color/p5.Color"),h.default.prototype.pixels=[],h.default.prototype.blend=function(){for(var v,x=arguments.length,p=new Array(x),f=0;f<x;f++)p[f]=arguments[f];h.default._validateParameters("blend",p),this._renderer?(v=this._renderer).blend.apply(v,p):h.default.Renderer2D.prototype.blend.apply(this,p)},h.default.prototype.copy=function(){for(var v,x,p,f,u,c,m,b,S,w=arguments.length,M=new Array(w),A=0;A<w;A++)M[A]=arguments[A];if(h.default._validateParameters("copy",M),M.length===9)v=M[0],x=M[1],p=M[2],f=M[3],u=M[4],c=M[5],m=M[6],b=M[7],S=M[8];else{if(M.length!==8)throw new Error("Signature not supported");v=this,x=M[0],p=M[1],f=M[2],u=M[3],c=M[4],m=M[5],b=M[6],S=M[7]}h.default.prototype._copyHelper(this,v,x,p,f,u,c,m,b,S)},h.default.prototype._copyHelper=function(v,x,p,f,u,c,m,b,S,w){x.loadPixels();var M=x.canvas.width/x.width,A=0,P=0;x._renderer&&x._renderer.isP3D&&(A=x.width/2,P=x.height/2),v._renderer&&v._renderer.isP3D?h.default.RendererGL.prototype.image.call(v._renderer,x,p+A,f+P,u,c,m,b,S,w):v.drawingContext.drawImage(x.canvas,M*(p+A),M*(f+P),M*u,M*c,m,b,S,w)},h.default.prototype.filter=function(v,x){h.default._validateParameters("filter",arguments),this.canvas!==void 0?l.default.apply(this.canvas,l.default[v],x):l.default.apply(this.elt,l.default[v],x)},h.default.prototype.get=function(v,x,p,f){var u;return h.default._validateParameters("get",arguments),(u=this._renderer).get.apply(u,arguments)},h.default.prototype.loadPixels=function(){for(var v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];h.default._validateParameters("loadPixels",x),this._renderer.loadPixels()},h.default.prototype.set=function(v,x,p){this._renderer.set(v,x,p)},h.default.prototype.updatePixels=function(v,x,p,f){h.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(v,x,p,f)},i=h.default,g.default=i},{"../color/p5.Color":260,"../core/main":273,"./filters":294,"core-js/modules/es.array.filter":155}],299:[function(i,_,g){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(c)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.last-index-of"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.from-entries"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/web.url"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.last-index-of"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.from-entries"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.promise"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/web.url"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=x(i("../core/main")),d=(i("whatwg-fetch"),i("es6-promise/auto"),x(i("fetch-jsonp"))),v=x(i("file-saver"));function x(c){return c&&c.__esModule?c:{default:c}}function p(c){return(p=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(c)}function f(c){return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(c,m){m&&m!==!0&&m!=="true"||(m="");var b="";return(c=c||"untitled")&&c.includes(".")&&(b=c.split(".").pop()),m&&b!==m&&(b=m,c="".concat(c,".").concat(b)),[c,b]}i("../core/friendly_errors/validate_params"),i("../core/friendly_errors/file_errors"),i("../core/friendly_errors/fes_core"),l.default.prototype.loadJSON=function(){for(var c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];l.default._validateParameters("loadJSON",m);for(var S,w,M,A=m[0],P={},R="json",k=1;k<m.length;k++){var L=m[k];typeof L=="string"?L!=="jsonp"&&L!=="json"||(R=L):typeof L=="function"?S?w=L:S=L:p(L)==="object"&&(L.hasOwnProperty("jsonpCallback")||L.hasOwnProperty("jsonpCallbackFunction"))&&(R="jsonp",M=L)}var B=this;return this.httpDo(A,"GET",M,R,function(I){for(var F in I)P[F]=I[F];S!==void 0&&S(I),B._decrementPreload()},function(I){if(l.default._friendlyFileLoadError(5,A),!w)throw I;w(I)}),P},l.default.prototype.loadStrings=function(){for(var c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];l.default._validateParameters("loadStrings",m);for(var S,w,M=[],A=1;A<m.length;A++){var P=m[A];typeof P=="function"&&(S===void 0?S=P:w===void 0&&(w=P))}var R=this;return l.default.prototype.httpDo.call(this,m[0],"GET","text",function(k){for(var L=k.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),B=0,I=L.length;B<I;B+=32768)Array.prototype.push.apply(M,L.slice(B,Math.min(B+32768,I)));S!==void 0&&S(M),R._decrementPreload()},function(k){if(l.default._friendlyFileLoadError(3,k),!w)throw k;w(k)}),M},l.default.prototype.loadTable=function(c){var m,b,S,w=!1,M=c.substring(c.lastIndexOf(".")+1,c.length);M==="csv"?S=",":M==="ssv"?S=";":M==="tsv"&&(S="	");for(var A=1;A<arguments.length;A++)typeof arguments[A]=="function"?m===void 0?m=arguments[A]:b===void 0&&(b=arguments[A]):typeof arguments[A]=="string"&&(arguments[A]==="header"&&(w=!0),arguments[A]==="csv"?S=",":arguments[A]==="ssv"?S=";":arguments[A]==="tsv"&&(S="	"));var P=new l.default.Table,R=this;return this.httpDo(c,"GET","table",function(k){for(var L,B,I={},F=[],z=0,G=null,N=function(){I.currentState=0,I.token=""},O=function(){G.push(I.token),N()},H=function(){I.currentState=4,F.push(G),G=null};;){if((L=k[z++])==null){if(I.escaped)throw new Error("Unclosed quote in file.");if(G){O(),H();break}}if(G===null&&(I.escaped=!1,G=[],N()),I.currentState===0){if(L==='"'){I.escaped=!0,I.currentState=1;continue}I.currentState=1}if(I.currentState===1&&I.escaped)if(L==='"')k[z]==='"'?(I.token+='"',z++):(I.escaped=!1,I.currentState=2);else{if(L==="\r")continue;I.token+=L}else L==="\r"?(k[z]===`
`&&z++,O(),H()):L===`
`?(O(),H()):L===S?O():I.currentState===1&&(I.token+=L)}if(w)P.columns=F.shift();else for(var q=0;q<F[0].length;q++)P.columns[q]="null";for(var K=0;K<F.length;K++)(F[K].length!==1||F[K][0]!=="undefined"&&F[K][0]!=="")&&((B=new l.default.TableRow).arr=F[K],B.obj=function(ne,ee){if((ee=ee||[])===void 0)for(var se=0;se<ne.length;se++)ee[se.toString()]=se;return Object.fromEntries(ee.map(function(me,X){return[me,ne[X]]}))}(F[K],P.columns),P.addRow(B));typeof m=="function"&&m(P),R._decrementPreload()},function(k){l.default._friendlyFileLoadError(2,c),b?b(k):console.error(k)}),P},l.default.prototype.loadXML=function(){for(var c=arguments.length,m=new Array(c),b=0;b<c;b++)m[b]=arguments[b];for(var S,w,M=new l.default.XML,A=1;A<m.length;A++){var P=m[A];typeof P=="function"&&(S===void 0?S=P:w===void 0&&(w=P))}var R=this;return this.httpDo(m[0],"GET","xml",function(k){for(var L in k)M[L]=k[L];S!==void 0&&S(M),R._decrementPreload()},function(k){if(l.default._friendlyFileLoadError(1,k),!w)throw k;w(k)}),M},l.default.prototype.loadBytes=function(c,m,b){var S={},w=this;return this.httpDo(c,"GET","arrayBuffer",function(M){S.bytes=new Uint8Array(M),typeof m=="function"&&m(S),w._decrementPreload()},function(M){if(l.default._friendlyFileLoadError(6,c),!b)throw M;b(M)}),S},l.default.prototype.httpGet=function(){l.default._validateParameters("httpGet",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"GET"),l.default.prototype.httpDo.apply(this,c)},l.default.prototype.httpPost=function(){l.default._validateParameters("httpPost",arguments);var c=Array.prototype.slice.call(arguments);return c.splice(1,0,"POST"),l.default.prototype.httpDo.apply(this,c)},l.default.prototype.httpDo=function(){for(var c,m,b,S={},w=0,M="text/plain",A=arguments.length-1;0<A&&typeof(A<0||arguments.length<=A?void 0:arguments[A])=="function";A--)w++;var P=arguments.length<=0?void 0:arguments[0];if((F=arguments.length-w)==2&&typeof P=="string"&&p(arguments.length<=1?void 0:arguments[1])==="object")z=new Request(P,arguments.length<=1?void 0:arguments[1]),m=arguments.length<=2?void 0:arguments[2],b=arguments.length<=3?void 0:arguments[3];else{for(var R,k="GET",L=1;L<arguments.length;L++){var B=L<0||arguments.length<=L?void 0:arguments[L];if(typeof B=="string")B==="GET"||B==="POST"||B==="PUT"||B==="DELETE"?k=B:B==="json"||B==="jsonp"||B==="binary"||B==="arrayBuffer"||B==="xml"||B==="text"||B==="table"?c=B:R=B;else if(typeof B=="number")R=B.toString();else if(p(B)==="object")if(B.hasOwnProperty("jsonpCallback")||B.hasOwnProperty("jsonpCallbackFunction"))for(var I in B)S[I]=B[I];else M=B instanceof l.default.XML?(R=B.serialize(),"application/xml"):(R=JSON.stringify(B),"application/json");else typeof B=="function"&&(m?b=B:m=B)}var F=k==="GET"?new Headers:new Headers({"Content-Type":M}),z=new Request(P,{method:k,mode:"cors",body:R,headers:F})}return(F=(F=(c=c||(P.includes("json")?"json":P.includes("xml")?"xml":"text"))==="jsonp"?(0,d.default)(P,S):fetch(z)).then(function(G){if(!G.ok)throw(N=new Error(G.body)).status=G.status,N.ok=!1,N;var N=0;switch((N=c!=="jsonp"?G.headers.get("content-length"):N)&&64e6<N&&l.default._friendlyFileLoadError(7,P),c){case"json":case"jsonp":return G.json();case"binary":return G.blob();case"arrayBuffer":return G.arrayBuffer();case"xml":return G.text().then(function(O){return O=new DOMParser().parseFromString(O,"text/xml"),new l.default.XML(O.documentElement)});default:return G.text()}})).then(m||function(){}),F.catch(b||console.error),F},window.URL=window.URL||window.webkitURL,l.default.prototype._pWriters=[],l.default.prototype.createWriter=function(c,m){var b,S;for(S in l.default.prototype._pWriters)if(l.default.prototype._pWriters[S].name===c)return b=new l.default.PrintWriter(c+this.millis(),m),l.default.prototype._pWriters.push(b),b;return b=new l.default.PrintWriter(c,m),l.default.prototype._pWriters.push(b),b},l.default.PrintWriter=function(c,m){var b=this;this.name=c,this.content="",this.write=function(S){this.content+=S},this.print=function(S){this.content+="".concat(S,`
`)},this.clear=function(){this.content=""},this.close=function(){var S,w=[];for(S in w.push(this.content),l.default.prototype.writeFile(w,c,m),l.default.prototype._pWriters)l.default.prototype._pWriters[S].name===this.name&&l.default.prototype._pWriters.splice(S,1);b.clear(),b={}}},l.default.prototype.save=function(c,m,b){var S=arguments,w=(this._curElement||this).elt;if(S.length===0)l.default.prototype.saveCanvas(w);else if(S[0]instanceof l.default.Renderer||S[0]instanceof l.default.Graphics)l.default.prototype.saveCanvas(S[0].elt,S[1],S[2]);else if(S.length===1&&typeof S[0]=="string")l.default.prototype.saveCanvas(w,S[0]);else switch(u(S[1],S[2])[1]){case"json":return void l.default.prototype.saveJSON(S[0],S[1],S[2]);case"txt":return void l.default.prototype.saveStrings(S[0],S[1],S[2]);default:S[0]instanceof Array?l.default.prototype.saveStrings(S[0],S[1],S[2]):S[0]instanceof l.default.Table?l.default.prototype.saveTable(S[0],S[1],S[2]):S[0]instanceof l.default.Image?l.default.prototype.saveCanvas(S[0].canvas,S[1]):S[0]instanceof l.default.SoundFile&&l.default.prototype.saveSound(S[0],S[1],S[2],S[3])}},l.default.prototype.saveJSON=function(c,m,b){l.default._validateParameters("saveJSON",arguments),b=b?JSON.stringify(c):JSON.stringify(c,void 0,2),this.saveStrings(b.split(`
`),m,"json")},l.default.prototype.saveJSONObject=l.default.prototype.saveJSON,l.default.prototype.saveJSONArray=l.default.prototype.saveJSON,l.default.prototype.saveStrings=function(c,m,b,S){l.default._validateParameters("saveStrings",arguments);for(var w=this.createWriter(m,b||"txt"),M=0;M<c.length;M++)S?w.write(c[M]+`\r
`):w.write(c[M]+`
`);w.close(),w.clear()},l.default.prototype.saveTable=function(c,m,b){l.default._validateParameters("saveTable",arguments),S=b===void 0?m.substring(m.lastIndexOf(".")+1,m.length):b;var S,w=this.createWriter(m,S),M=c.columns,A=S==="tsv"?"	":",";if(S!=="html"){if(M[0]!=="0"){for(var P=0;P<M.length;P++)P<M.length-1?w.write(M[P]+A):w.write(M[P]);w.write(`
`)}for(var R=0;R<c.rows.length;R++){var k=void 0;for(k=0;k<c.rows[R].arr.length;k++)k<c.rows[R].arr.length-1?S==="csv"&&String(c.rows[R].arr[k]).includes(",")?w.write('"'+c.rows[R].arr[k]+'"'+A):w.write(c.rows[R].arr[k]+A):S==="csv"&&String(c.rows[R].arr[k]).includes(",")?w.write('"'+c.rows[R].arr[k]+'"'):w.write(c.rows[R].arr[k]);w.write(`
`)}}else{if(w.print("<html>"),w.print("<head>"),w.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),w.print("</head>"),w.print("<body>"),w.print("  <table>"),M[0]!=="0"){w.print("    <tr>");for(var L=0;L<M.length;L++){var B=f(M[L]);w.print("      <td>".concat(B)),w.print("      </td>")}w.print("    </tr>")}for(var I=0;I<c.rows.length;I++){w.print("    <tr>");for(var F=0;F<c.columns.length;F++){var z=f(c.rows[I].getString(F));w.print("      <td>".concat(z)),w.print("      </td>")}w.print("    </tr>")}w.print("  </table>"),w.print("</body>"),w.print("</html>")}w.close(),w.clear()},l.default.prototype.writeFile=function(c,m,b){var S="application/octet-stream";l.default.prototype._isSafari()&&(S="text/plain"),c=new Blob(c,{type:S}),l.default.prototype.downloadFile(c,m,b)},l.default.prototype.downloadFile=function(c,m,b){var S;b=(m=u(m,b))[0],c instanceof Blob?v.default.saveAs(c,b):((S=document.createElement("a")).href=c,S.download=b,S.onclick=function(w){document.body.removeChild(w.target),w.stopPropagation()},S.style.display="none",document.body.appendChild(S),l.default.prototype._isSafari()&&(c=(c=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(m[1],'"'),alert(c)),S.click())},l.default.prototype._checkFileExtension=u,l.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},i=l.default,g.default=i},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.promise":181,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/web.dom-collections.iterator":236,"core-js/modules/web.url":238,"es6-promise/auto":239,"fetch-jsonp":241,"file-saver":242,"whatwg-fetch":251}],300:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.replace"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(d,v){for(var x=0;x<v.length;x++){var p=v[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}h.default.Table=function(){function d(p){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=[]}var v,x;return v=d,(x=[{key:"addRow",value:function(p){if((p=p||new h.default.TableRow).arr===void 0||p.obj===void 0)throw new Error("invalid TableRow: ".concat(p));return(p.table=this).rows.push(p),p}},{key:"removeRow",value:function(p){this.rows[p].table=null,p=this.rows.splice(p+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(p)}},{key:"getRow",value:function(p){return this.rows[p]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(p,f){if(typeof f=="string"){for(var u=0;u<this.rows.length;u++)if(this.rows[u].obj[f]===p)return this.rows[u]}else for(var c=0;c<this.rows.length;c++)if(this.rows[c].arr[f]===p)return this.rows[c];return null}},{key:"findRows",value:function(p,f){var u=[];if(typeof f=="string")for(var c=0;c<this.rows.length;c++)this.rows[c].obj[f]===p&&u.push(this.rows[c]);else for(var m=0;m<this.rows.length;m++)this.rows[m].arr[f]===p&&u.push(this.rows[m]);return u}},{key:"matchRow",value:function(p,f){if(typeof f=="number"){for(var u=0;u<this.rows.length;u++)if(this.rows[u].arr[f].match(p))return this.rows[u]}else for(var c=0;c<this.rows.length;c++)if(this.rows[c].obj[f].match(p))return this.rows[c];return null}},{key:"matchRows",value:function(p,f){var u=[];if(typeof f=="number")for(var c=0;c<this.rows.length;c++)this.rows[c].arr[f].match(p)&&u.push(this.rows[c]);else for(var m=0;m<this.rows.length;m++)this.rows[m].obj[f].match(p)&&u.push(this.rows[m]);return u}},{key:"getColumn",value:function(p){var f=[];if(typeof p=="string")for(var u=0;u<this.rows.length;u++)f.push(this.rows[u].obj[p]);else for(var c=0;c<this.rows.length;c++)f.push(this.rows[c].arr[p]);return f}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(p){this.columns.push(p||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(p,f){for(var u=[],c=0;c<p.length;c++)u.push(p.charAt(c).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var m=new RegExp(u.join("|"),"g");if(f===void 0)for(var b=0;b<this.columns.length;b++)for(var S=0;S<this.rows.length;S++){var w=(w=this.rows[S].arr[b]).replace(m,"");this.rows[S].arr[b]=w,this.rows[S].obj[this.columns[b]]=w}else if(typeof f=="string")for(var M=0;M<this.rows.length;M++){var A=(A=this.rows[M].obj[f]).replace(m,""),P=(this.rows[M].obj[f]=A,this.columns.indexOf(f));this.rows[M].arr[P]=A}else for(var R=0;R<this.rows.length;R++){var k=(k=this.rows[R].arr[f]).replace(m,"");this.rows[R].arr[f]=k,this.rows[R].obj[this.columns[f]]=k}}},{key:"trim",value:function(p){var f=new RegExp(" ","g");if(p===void 0)for(var u=0;u<this.columns.length;u++)for(var c=0;c<this.rows.length;c++){var m=(m=this.rows[c].arr[u]).replace(f,"");this.rows[c].arr[u]=m,this.rows[c].obj[this.columns[u]]=m}else if(typeof p=="string")for(var b=0;b<this.rows.length;b++){var S=(S=this.rows[b].obj[p]).replace(f,""),w=(this.rows[b].obj[p]=S,this.columns.indexOf(p));this.rows[b].arr[w]=S}else for(var M=0;M<this.rows.length;M++){var A=(A=this.rows[M].arr[p]).replace(f,"");this.rows[M].arr[p]=A,this.rows[M].obj[this.columns[p]]=A}}},{key:"removeColumn",value:function(p){typeof p=="string"?u=this.columns.indexOf(f=p):f=this.columns[u=p];var f,u;p=this.columns.splice(u+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(p);for(var c=0;c<this.rows.length;c++){var m=this.rows[c].arr,b=m.splice(u+1,m.length);m.pop(),this.rows[c].arr=m.concat(b),delete this.rows[c].obj[f]}}},{key:"set",value:function(p,f,u){this.rows[p].set(f,u)}},{key:"setNum",value:function(p,f,u){this.rows[p].setNum(f,u)}},{key:"setString",value:function(p,f,u){this.rows[p].setString(f,u)}},{key:"get",value:function(p,f){return this.rows[p].get(f)}},{key:"getNum",value:function(p,f){return this.rows[p].getNum(f)}},{key:"getString",value:function(p,f){return this.rows[p].getString(f)}},{key:"getObject",value:function(p){for(var f,u={},c=0;c<this.rows.length;c++)if(f=this.rows[c].obj,typeof p=="string"){if(!(0<=this.columns.indexOf(p)))throw new Error('This table has no column named "'.concat(p,'"'));u[f[p]]=f}else u[c]=this.rows[c].obj;return u}},{key:"getArray",value:function(){for(var p=[],f=0;f<this.rows.length;f++)p.push(this.rows[f].arr);return p}}])&&l(v.prototype,x),d}(),i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.join":161,"core-js/modules/es.array.splice":166,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.match":191,"core-js/modules/es.string.replace":194}],301:[function(i,_,g){function h(l,d){for(var v=0;v<d.length;v++){var x=d[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(l,x.key,x)}}i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.from-entries"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.split"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.from-entries"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.split"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.TableRow=function(){function l(x,p){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");var f=[];x&&(f=x.split(p=p||",")),this.arr=f,this.obj=Object.fromEntries(f.entries()),this.table=null}var d,v;return d=l,(v=[{key:"set",value:function(x,p){if(typeof x=="string"){var f=this.table.columns.indexOf(x);if(!(0<=f))throw new Error('This table has no column named "'.concat(x,'"'));this.obj[x]=p,this.arr[f]=p}else{if(!(x<this.table.columns.length))throw new Error("Column #".concat(x," is out of the range of this table"));this.arr[x]=p,f=this.table.columns[x],this.obj[f]=p}}},{key:"setNum",value:function(x,p){p=parseFloat(p),this.set(x,p)}},{key:"setString",value:function(x,p){p=p.toString(),this.set(x,p)}},{key:"get",value:function(x){return(typeof x=="string"?this.obj:this.arr)[x]}},{key:"getNum",value:function(x){var p=parseFloat(typeof x=="string"?this.obj[x]:this.arr[x]);if(p.toString()==="NaN")throw"Error: ".concat(this.obj[x]," is NaN (Not a Number)");return p}},{key:"getString",value:function(x){return(typeof x=="string"?this.obj:this.arr)[x].toString()}}])&&h(d.prototype,v),l}(),i=i.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.from-entries":175,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.split":196,"core-js/modules/web.dom-collections.iterator":236}],302:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.replace"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(d,v){for(var x=0;x<v.length;x++){var p=v[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}h.default.XML=function(){function d(p){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");p?this.DOM=p:(p=document.implementation.createDocument(null,"doc"),this.DOM=p.createElement("root"))}var v,x;return v=d,(x=[{key:"getParent",value:function(){return new h.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(p){var f=this.DOM.innerHTML,u=this.DOM.attributes,c=document.implementation.createDocument(null,"default").createElement(p);c.innerHTML=f;for(var m=0;m<u.length;m++)c.setAttribute(u[m].nodeName,u.nodeValue);this.DOM=c}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var p=[],f=0;f<this.DOM.childNodes.length;f++)p.push(this.DOM.childNodes[f].nodeName);return p}},{key:"getChildren",value:function(p){return function(f){for(var u=[],c=0;c<f.length;c++)u.push(new h.default.XML(f[c]));return u}(p?this.DOM.getElementsByTagName(p):this.DOM.children)}},{key:"getChild",value:function(p){if(typeof p!="string")return new h.default.XML(this.DOM.children[p]);var f=!0,u=!1,c=void 0;try{for(var m,b=this.DOM.children[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var S=m.value;if(S.tagName===p)return new h.default.XML(S)}}catch(w){u=!0,c=w}finally{try{f||b.return==null||b.return()}finally{if(u)throw c}}}},{key:"addChild",value:function(p){p instanceof h.default.XML&&this.DOM.appendChild(p.DOM)}},{key:"removeChild",value:function(p){var f=-1;if(typeof p=="string"){for(var u=0;u<this.DOM.children.length;u++)if(this.DOM.children[u].tagName===p){f=u;break}}else f=p;f!==-1&&this.DOM.removeChild(this.DOM.children[f])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var p=[],f=!0,u=!1,c=void 0;try{for(var m,b=this.DOM.attributes[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var S=m.value;p.push(S.nodeName)}}catch(w){u=!0,c=w}finally{try{f||b.return==null||b.return()}finally{if(u)throw c}}return p}},{key:"hasAttribute",value:function(p){var f={},u=!0,c=!1,m=void 0;try{for(var b,S=this.DOM.attributes[Symbol.iterator]();!(u=(b=S.next()).done);u=!0){var w=b.value;f[w.nodeName]=w.nodeValue}}catch(M){c=!0,m=M}finally{try{u||S.return==null||S.return()}finally{if(c)throw m}}return!!f[p]}},{key:"getNum",value:function(p,f){var u={},c=!0,m=!1,b=void 0;try{for(var S,w=this.DOM.attributes[Symbol.iterator]();!(c=(S=w.next()).done);c=!0){var M=S.value;u[M.nodeName]=M.nodeValue}}catch(A){m=!0,b=A}finally{try{c||w.return==null||w.return()}finally{if(m)throw b}}return Number(u[p])||f||0}},{key:"getString",value:function(p,f){var u={},c=!0,m=!1,b=void 0;try{for(var S,w=this.DOM.attributes[Symbol.iterator]();!(c=(S=w.next()).done);c=!0){var M=S.value;u[M.nodeName]=M.nodeValue}}catch(A){m=!0,b=A}finally{try{c||w.return==null||w.return()}finally{if(m)throw b}}return u[p]?String(u[p]):f||null}},{key:"setAttribute",value:function(p,f){this.DOM.setAttribute(p,f)}},{key:"getContent",value:function(p){var f=this.DOM.textContent;return(f=f.replace(/\s\s+/g,","))||p||null}},{key:"setContent",value:function(p){this.DOM.children.length||(this.DOM.textContent=p)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&l(v.prototype,x),d}(),i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.replace":194,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],303:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(){if(typeof Math.hypot=="function")return Math.hypot.apply(null,arguments);for(var d=arguments.length,v=[],x=0,p=0;p<d;p++){var f=arguments[p];if((f=+f)==1/0||f===-1/0)return 1/0;x<(f=Math.abs(f))&&(x=f),v[p]=f}x===0&&(x=1);for(var u=0,c=0,m=0;m<d;m++){var b,S=u+(b=(b=v[m]/x)*b-c);c=S-u-b,u=S}return Math.sqrt(u)*x}h.default.prototype.abs=Math.abs,h.default.prototype.ceil=Math.ceil,h.default.prototype.constrain=function(d,v,x){return h.default._validateParameters("constrain",arguments),Math.max(Math.min(d,x),v)},h.default.prototype.dist=function(){for(var d=arguments.length,v=new Array(d),x=0;x<d;x++)v[x]=arguments[x];return h.default._validateParameters("dist",v),v.length===4?l(v[2]-v[0],v[3]-v[1]):v.length===6?l(v[3]-v[0],v[4]-v[1],v[5]-v[2]):void 0},h.default.prototype.exp=Math.exp,h.default.prototype.floor=Math.floor,h.default.prototype.lerp=function(d,v,x){return h.default._validateParameters("lerp",arguments),x*(v-d)+d},h.default.prototype.log=Math.log,h.default.prototype.mag=function(d,v){return h.default._validateParameters("mag",arguments),l(d,v)},h.default.prototype.map=function(d,v,x,p,f,u){return h.default._validateParameters("map",arguments),d=(d-v)/(x-v)*(f-p)+p,u?p<f?this.constrain(d,p,f):this.constrain(d,f,p):d},h.default.prototype.max=function(){for(var d=function(f){var u=-1/0,c=!0,m=!1,b=void 0;try{for(var S,w=f[Symbol.iterator]();!(c=(S=w.next()).done);c=!0){var M=S.value;u=u<M?M:u}}catch(A){m=!0,b=A}finally{try{c||w.return==null||w.return()}finally{if(m)throw b}}return u},v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return x[0]instanceof Array?d(x[0]):d(x)},h.default.prototype.min=function(){for(var d=function(f){var u=1/0,c=!0,m=!1,b=void 0;try{for(var S,w=f[Symbol.iterator]();!(c=(S=w.next()).done);c=!0){var M=S.value;u=M<u?M:u}}catch(A){m=!0,b=A}finally{try{c||w.return==null||w.return()}finally{if(m)throw b}}return u},v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return x[0]instanceof Array?d(x[0]):d(x)},h.default.prototype.norm=function(d,v,x){return h.default._validateParameters("norm",arguments),this.map(d,v,x,0,1)},h.default.prototype.pow=Math.pow,h.default.prototype.round=function(d,v){return v?(v=Math.pow(10,v),Math.round(d*v)/v):Math.round(d)},h.default.prototype.sq=function(d){return d*d},h.default.prototype.sqrt=Math.sqrt,h.default.prototype.fract=function(d){h.default._validateParameters("fract",arguments);var v,x=0;return d=Number(d),isNaN(d)||Math.abs(d)===1/0?d:(d<0&&(d=-d,x=1),String(d).includes(".")&&!String(d).includes("e")?(v=String(d),v=+("0"+v.slice(v.indexOf("."))),Math.abs(x-v)):d<1?Math.abs(x-d):0)},i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],304:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(v,x,p){return(l=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(f,u,c){var m=[null];return m.push.apply(m,u),u=new(Function.bind.apply(f,m)),c&&d(u,c.prototype),u}).apply(null,arguments)}function d(v,x){return(d=Object.setPrototypeOf||function(p,f){return p.__proto__=f,p})(v,x)}h.default.prototype.createVector=function(v,x,p){return this instanceof h.default?l(h.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new h.default.Vector(v,x,p)},i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186}],305:[function(i,_,g){function h(p){return .5*(1-Math.cos(p*Math.PI))}Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,i=(i=i("../core/main"))&&i.__esModule?i:{default:i};var l,d=4095,v=4,x=.5;i.default.prototype.noise=function(p){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(l==null){l=new Array(4096);for(var c=0;c<4096;c++)l[c]=Math.random()}p<0&&(p=-p),f<0&&(f=-f),u<0&&(u=-u);for(var m,b,S=Math.floor(p),w=Math.floor(f),M=Math.floor(u),A=p-S,P=f-w,R=u-M,k=0,L=.5,B=0;B<v;B++){var I=S+(w<<4)+(M<<8),F=h(A),z=h(P),G=l[I&d];G+=F*(l[I+1&d]-G),m=l[I+16&d],G+=z*((m+=F*(l[I+16+1&d]-m))-G),m=l[(I+=256)&d],m+=F*(l[I+1&d]-m),b=l[I+16&d],m+=z*((b+=F*(l[I+16+1&d]-b))-m),k+=(G+=h(R)*(m-G))*L,L*=x,S<<=1,w<<=1,M<<=1,1<=(A*=2)&&(S++,A--),1<=(P*=2)&&(w++,P--),1<=(R*=2)&&(M++,R--)}return k},i.default.prototype.noiseDetail=function(p,f){0<p&&(v=p),0<f&&(x=f)},i.default.prototype.noiseSeed=function(p){u=4294967296;var f,u,c=function(){return(f=(1664525*f+1013904223)%u)/u};(function(b){f=(b??Math.random()*u)>>>0})(p),l=new Array(4096);for(var m=0;m<4096;m++)l[m]=c()},i=i.default,g.default=i},{"../core/main":273}],306:[function(i,_,g){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(c)}function l(c){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(c)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.every"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.some"),i("core-js/modules/es.math.sign"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.number.is-finite"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.sub"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.every"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.some"),i("core-js/modules/es.math.sign"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.number.is-finite"),i("core-js/modules/es.string.sub"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(u=i("../core/main"))&&u.__esModule?u:{default:u},v=function(c){if(c&&c.__esModule)return c;if(c===null||l(c)!=="object"&&typeof c!="function")return{default:c};var m=function(){var A;return typeof WeakMap!="function"?null:(A=new WeakMap,A)}();if(m&&m.has(c))return m.get(c);var b,S={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in c){var M;Object.prototype.hasOwnProperty.call(c,b)&&((M=w?Object.getOwnPropertyDescriptor(c,b):null)&&(M.get||M.set)?Object.defineProperty(S,b,M):S[b]=c[b])}return S.default=c,m&&m.set(c,S),S}(i("../core/constants"));function x(c,m){for(var b=0;b<m.length;b++){var S=m[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(c,S.key,S)}}function p(c,m){return c!==0&&(this.x=this.x%c),m!==0&&(this.y=this.y%m),this}function f(c,m,b){return c!==0&&(this.x=this.x%c),m!==0&&(this.y=this.y%m),b!==0&&(this.z=this.z%b),this}d.default.Vector=function(){function c(){var w=c;if(!((P=this)instanceof w))throw new TypeError("Cannot call a class as a function");var M,A,P=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],M=(arguments.length<=2?void 0:arguments[2])||0,A=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(M=(arguments.length<=0?void 0:arguments[0])||0,A=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=M,this.y=A,this.z=P}var m,b,S;return m=c,S=[{key:"fromAngle",value:function(w,M){return new d.default.Vector((M=M===void 0?1:M)*Math.cos(w),M*Math.sin(w),0)}},{key:"fromAngles",value:function(w,M,A){A===void 0&&(A=1);var P=Math.cos(M),R=(M=Math.sin(M),Math.cos(w));return w=Math.sin(w),new d.default.Vector(A*w*M,-A*R,A*w*P)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*v.TWO_PI)}},{key:"random3D",value:function(){var w=Math.random()*v.TWO_PI,M=2*Math.random()-1,A=(P=Math.sqrt(1-M*M))*Math.cos(w),P=P*Math.sin(w);return new d.default.Vector(A,P,M)}},{key:"copy",value:function(w){return w.copy(w)}},{key:"add",value:function(w,M,A){return A?A.set(w):(A=w.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),A.add(M),A}},{key:"rem",value:function(w,M){if(w instanceof d.default.Vector&&M instanceof d.default.Vector)return(w=w.copy()).rem(M),w}},{key:"sub",value:function(w,M,A){return A?A.set(w):(A=w.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),A.sub(M),A}},{key:"mult",value:function(w,M,A){return A?A.set(w):(A=w.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),A.mult(M),A}},{key:"rotate",value:function(w,M,A){return arguments.length===2?A=w.copy():(A instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),A.set(w)),A.rotate(M),A}},{key:"div",value:function(w,M,A){return A?A.set(w):(A=w.copy(),arguments.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),A.div(M),A}},{key:"dot",value:function(w,M){return w.dot(M)}},{key:"cross",value:function(w,M){return w.cross(M)}},{key:"dist",value:function(w,M){return w.dist(M)}},{key:"lerp",value:function(w,M,A,P){return P?P.set(w):(P=w.copy(),arguments.length===4&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),P.lerp(M,A),P}},{key:"slerp",value:function(w,M,A,P){return P?P.set(w):(P=w.copy(),arguments.length===4&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),P.slerp(M,A),P}},{key:"mag",value:function(w){return w.mag()}},{key:"magSq",value:function(w){return w.magSq()}},{key:"normalize",value:function(w,M){return arguments.length<2?M=w.copy():(M instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),M.set(w)),M.normalize()}},{key:"limit",value:function(w,M,A){return arguments.length<3?A=w.copy():(A instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),A.set(w)),A.limit(M)}},{key:"setMag",value:function(w,M,A){return arguments.length<3?A=w.copy():(A instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),A.set(w)),A.setMag(M)}},{key:"heading",value:function(w){return w.heading()}},{key:"angleBetween",value:function(w,M){return w.angleBetween(M)}},{key:"reflect",value:function(w,M,A){return arguments.length<3?A=w.copy():(A instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),A.set(w)),A.reflect(M)}},{key:"array",value:function(w){return w.array()}},{key:"equals",value:function(w,M){var A;return w instanceof d.default.Vector?A=w:w instanceof Array?A=new d.default.Vector().set(w):d.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),A.equals(M)}}],(b=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(w,M,A){return w instanceof d.default.Vector?(this.x=w.x||0,this.y=w.y||0,this.z=w.z||0):Array.isArray(w)?(this.x=w[0]||0,this.y=w[1]||0,this.z=w[2]||0):(this.x=w||0,this.y=M||0,this.z=A||0),this}},{key:"copy",value:function(){return this.isPInst?new d.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new d.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(w,M,A){return w instanceof d.default.Vector?(this.x+=w.x||0,this.y+=w.y||0,this.z+=w.z||0):Array.isArray(w)?(this.x+=w[0]||0,this.y+=w[1]||0,this.z+=w[2]||0):(this.x+=w||0,this.y+=M||0,this.z+=A||0),this}},{key:"rem",value:function(w,M,A){var P;if(w instanceof d.default.Vector){if([w.x,w.y,w.z].every(Number.isFinite))return R=parseFloat(w.x),k=parseFloat(w.y),P=parseFloat(w.z),f.call(this,R,k,P)}else if(Array.isArray(w)){if(w.every(function(L){return Number.isFinite(L)}))return w.length===2?p.call(this,w[0],w[1]):w.length===3?f.call(this,w[0],w[1],w[2]):void 0}else if(arguments.length===1){if(Number.isFinite(w)&&w!==0)return this.x=this.x%w,this.y=this.y%w,this.z=this.z%w,this}else if(arguments.length===2){var R=Array.prototype.slice.call(arguments);if(R.every(function(L){return Number.isFinite(L)})&&R.length===2)return p.call(this,R[0],R[1])}else if(arguments.length===3){var k=Array.prototype.slice.call(arguments);if(k.every(function(L){return Number.isFinite(L)})&&k.length===3)return f.call(this,k[0],k[1],k[2])}}},{key:"sub",value:function(w,M,A){return w instanceof d.default.Vector?(this.x-=w.x||0,this.y-=w.y||0,this.z-=w.z||0):Array.isArray(w)?(this.x-=w[0]||0,this.y-=w[1]||0,this.z-=w[2]||0):(this.x-=w||0,this.y-=M||0,this.z-=A||0),this}},{key:"mult",value:function(w,M,A){var P;return w instanceof d.default.Vector?Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"?(this.x*=w.x,this.y*=w.y,this.z*=w.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(w)?w.every(function(R){return Number.isFinite(R)})&&w.every(function(R){return typeof R=="number"})?w.length===1?(this.x*=w[0],this.y*=w[0],this.z*=w[0]):w.length===2?(this.x*=w[0],this.y*=w[1]):w.length===3&&(this.x*=w[0],this.y*=w[1],this.z*=w[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(P=Array.prototype.slice.call(arguments)).every(function(R){return Number.isFinite(R)})&&P.every(function(R){return typeof R=="number"})?(arguments.length===1&&(this.x*=w,this.y*=w,this.z*=w),arguments.length===2&&(this.x*=w,this.y*=M),arguments.length===3&&(this.x*=w,this.y*=M,this.z*=A)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(w,M,A){if(w instanceof d.default.Vector)if(Number.isFinite(w.x)&&Number.isFinite(w.y)&&Number.isFinite(w.z)&&typeof w.x=="number"&&typeof w.y=="number"&&typeof w.z=="number"){var P=w.z===0&&this.z===0;if(w.x===0||w.y===0||!P&&w.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=w.x,this.y/=w.y,P||(this.z/=w.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(w))if(w.every(function(R){return Number.isFinite(R)})&&w.every(function(R){return typeof R=="number"})){if(w.some(function(R){return R===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;w.length===1?(this.x/=w[0],this.y/=w[0],this.z/=w[0]):w.length===2?(this.x/=w[0],this.y/=w[1]):w.length===3&&(this.x/=w[0],this.y/=w[1],this.z/=w[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if((P=Array.prototype.slice.call(arguments)).every(function(R){return Number.isFinite(R)})&&P.every(function(R){return typeof R=="number"})){if(P.some(function(R){return R===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;arguments.length===1&&(this.x/=w,this.y/=w,this.z/=w),arguments.length===2&&(this.x/=w,this.y/=M),arguments.length===3&&(this.x/=w,this.y/=M,this.z/=A)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var w=this.x,M=this.y,A=this.z;return w*w+M*M+A*A}},{key:"dot",value:function(w,M,A){return w instanceof d.default.Vector?this.dot(w.x,w.y,w.z):this.x*(w||0)+this.y*(M||0)+this.z*(A||0)}},{key:"cross",value:function(w){var M=this.y*w.z-this.z*w.y,A=this.z*w.x-this.x*w.z;return w=this.x*w.y-this.y*w.x,this.isPInst?new d.default.Vector(this._fromRadians,this._toRadians,M,A,w):new d.default.Vector(M,A,w)}},{key:"dist",value:function(w){return w.copy().sub(this).mag()}},{key:"normalize",value:function(){var w=this.mag();return w!==0&&this.mult(1/w),this}},{key:"limit",value:function(w){var M=this.magSq();return w*w<M&&this.div(Math.sqrt(M)).mult(w),this}},{key:"setMag",value:function(w){return this.normalize().mult(w)}},{key:"heading",value:function(){var w=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(w):w}},{key:"setHeading",value:function(w){this.isPInst&&(w=this._toRadians(w));var M=this.mag();return this.x=M*Math.cos(w),this.y=M*Math.sin(w),this}},{key:"rotate",value:function(w){w=this.heading()+w;var M=(this.isPInst&&(w=this._toRadians(w)),this.mag());return this.x=Math.cos(w)*M,this.y=Math.sin(w)*M,this}},{key:"angleBetween",value:function(w){var M;return this.magSq()*w.magSq()==0?NaN:(M=this.cross(w),w=Math.atan2(M.mag(),this.dot(w))*Math.sign(M.z||1),this.isPInst?this._fromRadians(w):w)}},{key:"lerp",value:function(w,M,A,P){return w instanceof d.default.Vector?this.lerp(w.x,w.y,w.z,M):(this.x+=(w-this.x)*P||0,this.y+=(M-this.y)*P||0,this.z+=(A-this.z)*P||0,this)}},{key:"slerp",value:function(w,M){if(M!==0){if(M===1)return this.set(w);var A=this.mag(),P=w.mag();if(A*P==0)this.mult(1-M).add(w.x*M,w.y*M,w.z*M);else{var R=this.cross(w),k=R.mag(),L=Math.atan2(k,this.dot(w));if(0<k)R.x/=k,R.y/=k,R.z/=k;else{if(L<.5*Math.PI)return this.mult(1-M).add(w.x*M,w.y*M,w.z*M),this;this.z===0&&w.z===0?R.set(0,0,1):this.x!==0?R.set(this.y,-this.x,0).normalize():R.set(1,0,0)}k=R.cross(this),R=(w=1-M+M*P/A)*Math.cos(M*L),P=w*Math.sin(M*L),this.x=this.x*R+k.x*P,this.y=this.y*R+k.y*P,this.z=this.z*R+k.z*P}}return this}},{key:"reflect",value:function(w){return w.normalize(),this.sub(w.mult(2*this.dot(w)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(w,M,A){var P,R;return w=w instanceof d.default.Vector?(P=w.x||0,R=w.y||0,w.z||0):Array.isArray(w)?(P=w[0]||0,R=w[1]||0,w[2]||0):(P=w||0,R=M||0,A||0),this.x===P&&this.y===R&&this.z===w}}])&&x(m.prototype,b),S&&x(m,S),c}();var u=d.default.Vector;g.default=u},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.every":153,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.constructor":171,"core-js/modules/es.number.is-finite":172,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],307:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i},l="_lcg_random_state",d=4294967296,v=0;h.default.prototype._lcg=function(x){return this[x]=(1664525*this[x]+1013904223)%d,this[x]/d},h.default.prototype._lcgSetSeed=function(x,p){this[x]=(p??Math.random()*d)>>>0},h.default.prototype.randomSeed=function(x){this._lcgSetSeed(l,x),this._gaussian_previous=!1},h.default.prototype.random=function(x,p){var f,u;return h.default._validateParameters("random",arguments),f=this[l]!=null?this._lcg(l):Math.random(),x===void 0?f:p===void 0?x instanceof Array?x[Math.floor(f*x.length)]:f*x:(p<x&&(u=x,x=p,p=u),f*(p-x)+x)},h.default.prototype.randomGaussian=function(x){var p,f,u,c,m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)p=v,this._gaussian_previous=!1;else{for(;1<=(c=(f=this.random(2)-1)*f+(u=this.random(2)-1)*u););p=f*(c=Math.sqrt(-2*Math.log(c)/c)),v=u*c,this._gaussian_previous=!0}return p*m+(x||0)},i=h.default,g.default=i},{"../core/main":273}],308:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function l(p){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(x=i("../core/main"))&&x.__esModule?x:{default:x},v=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var f=function(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,S)}();if(f&&f.has(p))return f.get(p);var u,c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p){var b;Object.prototype.hasOwnProperty.call(p,u)&&((b=m?Object.getOwnPropertyDescriptor(p,u):null)&&(b.get||b.set)?Object.defineProperty(c,u,b):c[u]=p[u])}return c.default=p,f&&f.set(p,c),c}(i("../core/constants"));d.default.prototype._angleMode=v.RADIANS,d.default.prototype.acos=function(p){return this._fromRadians(Math.acos(p))},d.default.prototype.asin=function(p){return this._fromRadians(Math.asin(p))},d.default.prototype.atan=function(p){return this._fromRadians(Math.atan(p))},d.default.prototype.atan2=function(p,f){return this._fromRadians(Math.atan2(p,f))},d.default.prototype.cos=function(p){return Math.cos(this._toRadians(p))},d.default.prototype.sin=function(p){return Math.sin(this._toRadians(p))},d.default.prototype.tan=function(p){return Math.tan(this._toRadians(p))},d.default.prototype.degrees=function(p){return p*v.RAD_TO_DEG},d.default.prototype.radians=function(p){return p*v.DEG_TO_RAD},d.default.prototype.angleMode=function(p){if(d.default._validateParameters("angleMode",arguments),p===void 0)return this._angleMode;p!==v.DEGREES&&p!==v.RADIANS||(this._angleMode=p)},d.default.prototype._toRadians=function(p){return this._angleMode===v.DEGREES?p*v.DEG_TO_RAD:p},d.default.prototype._toDegrees=function(p){return this._angleMode===v.RADIANS?p*v.RAD_TO_DEG:p},d.default.prototype._fromRadians=function(p){return this._angleMode===v.DEGREES?p*v.RAD_TO_DEG:p};var x=d.default;g.default=x},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],309:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};h.default.prototype.textAlign=function(l,d){var v;return h.default._validateParameters("textAlign",arguments),(v=this._renderer).textAlign.apply(v,arguments)},h.default.prototype.textLeading=function(l){var d;return h.default._validateParameters("textLeading",arguments),(d=this._renderer).textLeading.apply(d,arguments)},h.default.prototype.textSize=function(l){var d;return h.default._validateParameters("textSize",arguments),(d=this._renderer).textSize.apply(d,arguments)},h.default.prototype.textStyle=function(l){var d;return h.default._validateParameters("textStyle",arguments),(d=this._renderer).textStyle.apply(d,arguments)},h.default.prototype.textWidth=function(){for(var l,d=arguments.length,v=new Array(d),x=0;x<d;x++)v[x]=arguments[x];return v[0]+="",h.default._validateParameters("textWidth",v),v[0].length===0?0:(l=this._renderer).textWidth.apply(l,v)},h.default.prototype.textAscent=function(){for(var l=arguments.length,d=new Array(l),v=0;v<l;v++)d[v]=arguments[v];return h.default._validateParameters("textAscent",d),this._renderer.textAscent()},h.default.prototype.textDescent=function(){for(var l=arguments.length,d=new Array(l),v=0;v<l;v++)d[v]=arguments[v];return h.default._validateParameters("textDescent",d),this._renderer.textDescent()},h.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},h.default.prototype.textWrap=function(l){if(l!=="WORD"&&l!=="CHAR")throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(l)},i=h.default,g.default=i},{"../core/main":273}],310:[function(i,_,g){function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(c)}function l(c){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(m){return h(m)}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":h(m)})(c)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.last-index-of"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.last-index-of"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.split"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(u=i("../core/main"))&&u.__esModule?u:{default:u},v=f(i("../core/constants")),x=f(i("opentype.js"));function p(){var c;return typeof WeakMap!="function"?null:(c=new WeakMap,p=function(){return c},c)}function f(c){if(c&&c.__esModule)return c;if(c===null||l(c)!=="object"&&typeof c!="function")return{default:c};var m=p();if(m&&m.has(c))return m.get(c);var b,S,w={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in c)Object.prototype.hasOwnProperty.call(c,b)&&((S=M?Object.getOwnPropertyDescriptor(c,b):null)&&(S.get||S.set)?Object.defineProperty(w,b,S):w[b]=c[b]);return w.default=c,m&&m.set(c,w),w}i("../core/friendly_errors/validate_params"),i("../core/friendly_errors/file_errors"),i("../core/friendly_errors/fes_core"),d.default.prototype.loadFont=function(c,m,b){d.default._validateParameters("loadFont",arguments);var S=new d.default.Font(this),w=this;return x.load(c,function(M,A){if(M)return d.default._friendlyFileLoadError(4,c),b!==void 0?b(M):void console.error(M,c);S.font=A,m!==void 0&&m(S),w._decrementPreload();var P=(A=(M=c.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:M.slice(A+1);["ttf","otf","woff","woff2"].includes(P)&&(P=M.slice(0,A!==-1?A:0),(M=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(P,`;
src: url(`).concat(c,`);
}
`))),document.head.appendChild(M))}),S},d.default.prototype.text=function(c,m,b,S,w){var M;return d.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(M=this._renderer).text.apply(M,arguments):this},d.default.prototype.textFont=function(c,m){if(d.default._validateParameters("textFont",arguments),arguments.length){if(c)return this._renderer._setProperty("_textFont",c),m&&(this._renderer._setProperty("_textSize",m),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",m*v._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var u=d.default;g.default=u},{"../core/constants":262,"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.last-index-of":162,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,"opentype.js":247}],311:[function(i,_,g){function h(k){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(k)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(l=i("../core/main"))&&l.__esModule?l:{default:l},d=function(k){if(k&&k.__esModule)return k;if(k===null||v(k)!=="object"&&typeof k!="function")return{default:k};var L=function(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,G)}();if(L&&L.has(k))return L.get(k);var B,I={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(B in k){var z;Object.prototype.hasOwnProperty.call(k,B)&&((z=F?Object.getOwnPropertyDescriptor(k,B):null)&&(z.get||z.set)?Object.defineProperty(I,B,z):I[B]=k[B])}return I.default=k,L&&L.set(k,I),I}(i("../core/constants"));function v(k){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(L){return h(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":h(L)})(k)}function x(k,L){for(var B=0;B<L.length;B++){var I=L[B];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(k,I.key,I)}}function p(k,L){var B=k.length;return k[L<0?L%B+B:L%B]}function f(k,L,B,I){var F,z,G;return I?(f.tmpPoint1===void 0&&(f.tmpPoint1=[],f.tmpPoint2=[]),z=f.tmpPoint1,G=f.tmpPoint2,z.x=L.x-k.x,z.y=L.y-k.y,G.x=B.x-L.x,G.y=B.y-L.y,F=z.x*G.x+z.y*G.y,z=Math.sqrt(z.x*z.x+z.y*z.y),G=Math.sqrt(G.x*G.x+G.y*G.y),Math.acos(F/(z*G))<I):(L[0]-k[0])*(B[1]-k[1])-(B[0]-k[0])*(L[1]-k[1])==0}function u(k,L,B,I,F,z,G,N,O){var H=1-O,q=(K=Math.pow(H,3))*k+3*(ne=Math.pow(H,2))*O*B+3*H*O*O*F+(ee=(me=O*O)*O)*G,K=K*L+3*ne*O*I+3*H*O*O*z+ee*N,ne=k+2*O*(B-k)+me*(F-2*B+k),ee=L+2*O*(I-L)+me*(z-2*I+L),se=B+2*O*(F-B)+me*(G-2*F+B),me=I+2*O*(z-I)+me*(N-2*z+I);return k=H*k+O*B,B=H*L+O*I,L=H*F+O*G,I=H*z+O*N,F=90-180*Math.atan2(ne-se,ee-me)/Math.PI,(se<ne||ee<me)&&(F+=180),{x:q,y:K,m:{x:ne,y:ee},n:{x:se,y:me},start:{x:k,y:B},end:{x:L,y:I},alpha:F}}function c(k,L,B,I,F,z,G,N,O){return O==null?P(k,L,B,I,F,z,G,N):u(k,L,B,I,F,z,G,N,function(H,q,K,ne,ee,se,me,X,Z){if(!(Z<0||P(H,q,K,ne,ee,se,me,X)<Z)){var ie,ye=.5,fe=1-ye;for(ie=P(H,q,K,ne,ee,se,me,X,fe);.01<Math.abs(ie-Z);)ie=P(H,q,K,ne,ee,se,me,X,fe+=(ie<Z?1:-1)*(ye/=2));return fe}}(k,L,B,I,F,z,G,N,O))}function m(k,L,B){for(var I,F,z,G,N,O=0,H=0,q=(k=function(K,ne){function ee(Se,ae,oe){var Ee,Oe;if(!Se)return["C",ae.x,ae.y,ae.x,ae.y,ae.x,ae.y];switch(Se[0]in{T:1,Q:1}||(ae.qx=ae.qy=null),Se[0]){case"M":ae.X=Se[1],ae.Y=Se[2];break;case"A":Se=["C"].concat(S.apply(0,[ae.x,ae.y].concat(Se.slice(1))));break;case"S":Oe=oe==="C"||oe==="S"?(Ee=2*ae.x-ae.bx,2*ae.y-ae.by):(Ee=ae.x,ae.y),Se=["C",Ee,Oe].concat(Se.slice(1));break;case"T":oe==="Q"||oe==="T"?(ae.qx=2*ae.x-ae.qx,ae.qy=2*ae.y-ae.qy):(ae.qx=ae.x,ae.qy=ae.y),Se=["C"].concat(A(ae.x,ae.y,ae.qx,ae.qy,Se[1],Se[2]));break;case"Q":ae.qx=Se[1],ae.qy=Se[2],Se=["C"].concat(A(ae.x,ae.y,Se[1],Se[2],Se[3],Se[4]));break;case"L":Se=["C"].concat(M(ae.x,ae.y,Se[1],Se[2]));break;case"H":Se=["C"].concat(M(ae.x,ae.y,Se[1],ae.y));break;case"V":Se=["C"].concat(M(ae.x,ae.y,ae.x,Se[1]));break;case"Z":Se=["C"].concat(M(ae.x,ae.y,ae.X,ae.Y))}return Se}function se(Se,ae){if(7<Se[ae].length){Se[ae].shift();for(var oe=Se[ae];oe.length;)$[ae]="A",Se.splice(ae++,0,["C"].concat(oe.splice(0,6)));Se.splice(ae,1),X=Math.max(Z.length,0)}}function me(Se,ae,oe,Ee,Oe){Se&&ae&&Se[Oe][0]==="M"&&ae[Oe][0]!=="M"&&(ae.splice(Oe,0,["M",Ee.x,Ee.y]),oe.bx=0,oe.by=0,oe.x=Se[Oe][1],oe.y=Se[Oe][2],X=Math.max(Z.length,0))}var X,Z=b(K),ie=ne,ye={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},fe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},$=[],re="",de="";X=Math.max(Z.length,0);for(var ge=0;ge<X;ge++){(re=Z[ge]?Z[ge][0]:re)!=="C"&&($[ge]=re,ge&&(de=$[ge-1])),Z[ge]=ee(Z[ge],ye,de),$[ge]!=="A"&&re==="C"&&($[ge]="C"),se(Z,ge),me(Z,ie,ye,fe,ge),me(ie,Z,fe,ye,ge);var ve=Z[ge],we=ve.length;ye.x=ve[we-2],ye.y=ve[we-1],ye.bx=parseFloat(ve[we-4])||ye.x,ye.by=parseFloat(ve[we-3])||ye.y,fe.bx=ie,fe.by=ie,fe.x=ie,fe.y=ie}return ie?[Z,ie]:Z}(k)).length;H<q;H++){if((z=k[H])[0]==="M")I=+z[1],F=+z[2];else{if(L<O+(G=c(I,F,z[1],z[2],z[3],z[4],z[5],z[6]))&&!B)return{x:(N=c(I,F,z[1],z[2],z[3],z[4],z[5],z[6],L-O)).x,y:N.y,alpha:N.alpha};O+=G,I=+z[5],F=+z[6]}z.shift()}return(N=B?O:u(I,F,z[0],z[1],z[2],z[3],z[4],z[5],1)).alpha?{x:N.x,y:N.y,alpha:N.alpha}:N}function b(k){var L=[],B=0,I=0,F=0,z=0,G=0;if(k){k[0][0]==="M"&&(F=B=+k[0][1],z=I=+k[0][2],G++,L[0]=["M",B,I]);for(var N,O,H=k.length===3&&k[0][0]==="M"&&k[1][0].toUpperCase()==="R"&&k[2][0].toUpperCase()==="Z",q=G,K=k.length;q<K;q++){if(L.push(N=[]),(O=k[q])[0]!==String.prototype.toUpperCase.call(O[0]))switch(N[0]=String.prototype.toUpperCase.call(O[0]),N[0]){case"A":N[1]=O[1],N[2]=O[2],N[3]=O[3],N[4]=O[4],N[5]=O[5],N[6]=+(O[6]+B),N[7]=+(O[7]+I);break;case"V":N[1]=+O[1]+I;break;case"H":N[1]=+O[1]+B;break;case"R":for(var ne,ee=2,se=(ne=[B,I].concat(O.slice(1))).length;ee<se;ee++)ne[ee]=+ne[ee]+B,ne[++ee]=+ne[ee]+I;L.pop(),L=L.concat(w(ne,H));break;case"M":F=+O[1]+B,z=+O[2]+I;break;default:for(var me=1,X=O.length;me<X;me++)N[me]=+O[me]+(me%2?B:I)}else if(O[0]==="R")ne=[B,I].concat(O.slice(1)),L.pop(),L=L.concat(w(ne,H)),N=["R"].concat(O.slice(-2));else for(var Z=0,ie=O.length;Z<ie;Z++)N[Z]=O[Z];switch(N[0]){case"Z":B=F,I=z;break;case"H":B=N[1];break;case"V":I=N[1];break;case"M":F=N[N.length-2],z=N[N.length-1];break;default:B=N[N.length-2],I=N[N.length-1]}}}return L}function S(k,L,B,I,F,z,G,N,O,H){function q(we,Se,ae){return{x:we*Math.cos(ae)-Se*Math.sin(ae),y:we*Math.sin(ae)+Se*Math.cos(ae)}}var K,ne=120*(Z=Math.PI)/180,ee=Z/180*(+F||0),se=[],me=(H?(re=H[0],K=H[1],fe=H[2],$=H[3]):(k=(ie=q(k,L,-ee)).x,L=ie.y,1<(me=(X=(k-(N=(ie=q(N,O,-ee)).x))/2)*X/(B*B)+(ie=(L-(O=ie.y))/2)*ie/(I*I))&&(B*=me=Math.sqrt(me),I*=me),me=B*B,ye=I*I,fe=(z=(z===G?-1:1)*Math.sqrt(Math.abs((me*ye-me*ie*ie-ye*X*X)/(me*ie*ie+ye*X*X))))*B*ie/I+(k+N)/2,$=z*-I*X/B+(L+O)/2,re=Math.asin(((L-$)/I).toFixed(9)),K=Math.asin(((O-$)/I).toFixed(9)),(re=k<fe?Z-re:re)<0&&(re=2*Z+re),(K=N<fe?Z-K:K)<0&&(K=2*Z+K),G&&K<re&&(re-=2*Z),!G&&re<K&&(K-=2*Z)),K-re),X=(Math.abs(me)>ne&&(ye=K,ie=N,z=O,K=re+ne*(G&&re<K?1:-1),se=S(N=fe+B*Math.cos(K),O=$+I*Math.sin(K),B,I,F,0,G,ie,z,[K,ye,fe,$])),me=K-re,Math.cos(re)),Z=Math.sin(re),ie=(ne=Math.cos(K),F=Math.sin(K),4/3*B*(G=Math.tan(me/4))),ye=[k,L],fe=[k+ie*Z,L-(z=4/3*I*G)*X],$=[N+ie*F,O-z*ne],re=[N,O];if(fe[0]=2*ye[0]-fe[0],fe[1]=2*ye[1]-fe[1],H)return[fe,$,re].concat(se);for(var de=[],ge=0,ve=(se=[fe,$,re].concat(se).join().split(",")).length;ge<ve;ge++)de[ge]=ge%2?q(se[ge-1],se[ge],ee).y:q(se[ge],se[ge+1],ee).x;return de}function w(k,L){for(var B=[],I=0,F=k.length;I<F-2*!L;I+=2){var z=[{x:+k[I-2],y:+k[I-1]},{x:+k[I],y:+k[I+1]},{x:+k[I+2],y:+k[I+3]},{x:+k[I+4],y:+k[I+5]}];L?I?F-4===I?z[3]={x:+k[0],y:+k[1]}:F-2===I&&(z[2]={x:+k[0],y:+k[1]},z[3]={x:+k[2],y:+k[3]}):z[0]={x:+k[F-2],y:+k[F-1]}:F-4===I?z[3]=z[2]:I||(z[0]={x:+k[I],y:+k[I+1]}),B.push(["C",(-z[0].x+6*z[1].x+z[2].x)/6,(-z[0].y+6*z[1].y+z[2].y)/6,(z[1].x+6*z[2].x-z[3].x)/6,(z[1].y+6*z[2].y-z[3].y)/6,z[2].x,z[2].y])}return B}function M(k,L,B,I){return[k,L,B,I,B,I]}function A(k,L,B,I,F,z){return[1/3*k+2/3*B,1/3*L+2/3*I,1/3*F+2/3*B,1/3*z+2/3*I,F,z]}function P(k,L,B,I,F,z,G,N,O){for(var H=(O=1<(O=O??1)?1:O<0?0:O)/2,q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],K=0,ne=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ee=0;ee<12;ee++){var se=R(me=H*q[ee]+H,k,B,F,G),me=R(me,L,I,z,N);K+=ne[ee]*Math.sqrt(se*se+me*me)}return H*K}function R(k,L,B,I,F){return k*(k*(-3*L+9*B-9*I+3*F)+6*L-12*B+6*I)-3*L+3*B}l.default.Font=function(){function k(I){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");this.parent=I,this.cache={},this.font=void 0}var L,B;return L=k,(B=[{key:"textBounds",value:function(I){var F=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,G=3<arguments.length?arguments[3]:void 0,N=4<arguments.length?arguments[4]:void 0,O=N&&N.renderer&&N.renderer._pInst||this.parent;if((ye=O._renderer.drawingContext).textAlign||d.LEFT,ye.textBaseline||d.BASELINE,G=G||O._renderer._textSize,!fe){for(var H=[],q=[],K=[],ne=(K[0]=[],[]),ee=this._scale(G),se=O._renderer.textLeading(),me=0,X=(this.font.forEachGlyph(I,F,z,G,N,function($,re,de,ge){var ve=$.getMetrics();$.index===0||$.index===10?K[me+=1]=[]:(K[me].push(re+ve.xMin*ee),K[me].push(re+ve.xMax*ee),ne.push(de+me*se+-ve.yMin*ee),ne.push(de+me*se+-ve.yMax*ee))}),0<K[me].length&&(H[me]=Math.min.apply(null,K[me]),q[me]=Math.max.apply(null,K[me])),0),Z=0;Z<=me;Z++){H[Z]=Math.min.apply(null,K[Z]),q[Z]=Math.max.apply(null,K[Z]);var ie=q[Z]-H[Z];X<ie&&(X=ie)}var ye,fe={x:ye=Math.min.apply(null,H),y:z=Math.min.apply(null,ne),h:Math.max.apply(null,ne)-z,w:X,advance:ye-F};G=this._handleAlignment(O._renderer,I,fe.x,fe.y,fe.w+fe.advance),fe.x=G.x,fe.y=G.y}return fe}},{key:"textToPoints",value:function(I,F,z,G,N){var O=0,H=[],q=this._getGlyphs(I);G=G||this.parent._renderer._textSize;for(var K,ne=0;ne<q.length;ne++){if(!(q[K=ne].name&&q[K].name==="space"||I.length===q.length&&I[K]===" "))for(var ee=function(Z){for(var ie,ye=[],fe=0;fe<Z.length;fe++)Z[fe].type==="M"&&(ie&&ye.push(ie),ie=[]),ie.push(function($){var re=[$.type];return $.type==="M"||$.type==="L"?re.push($.x,$.y):$.type==="C"?re.push($.x1,$.y1,$.x2,$.y2,$.x,$.y):$.type==="Q"&&re.push($.x1,$.y1,$.x,$.y),re}(Z[fe]));return ye.push(ie),ye}(q[ne].getPath(F,z,G).commands),se=0;se<ee.length;se++)for(var me=function(Z,ie){ie=function(de,ge){if(v(de)!=="object")de=ge;else for(var ve in ge)de[ve]===void 0&&(de[ve]=ge[ve]);return de}(ie,{sampleFactor:.1,simplifyThreshold:0});for(var ye=m(Z,0,1),fe=ye/(ye*ie.sampleFactor),$=[],re=0;re<ye;re+=fe)$.push(m(Z,re));return ie.simplifyThreshold&&function(de){for(var ge=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,ve=de.length-1;3<de.length&&0<=ve;--ve)f(p(de,ve-1),p(de,ve),p(de,ve+1),ge)&&de.splice(ve%de.length,1)}($,ie.simplifyThreshold),$}(ee[se],N),X=0;X<me.length;X++)me[X].x+=O,H.push(me[X]);O+=q[ne].advanceWidth*this._scale(G)}return H}},{key:"_getGlyphs",value:function(I){return this.font.stringToGlyphs(I)}},{key:"_getPath",value:function(I,F,z,G){var N=(G&&G.renderer&&G.renderer._pInst||this.parent)._renderer;return F=this._handleAlignment(N,I,F,z),this.font.getPath(I,F.x,F.y,N._textSize,G)}},{key:"_getPathData",value:function(I,F,z,G){var N=3;return typeof I=="string"&&2<arguments.length?I=this._getPath(I,F,z,G):v(F)==="object"&&(G=F),G&&typeof G.decimals=="number"&&(N=G.decimals),I.toPathData(N)}},{key:"_getSVG",value:function(I,F,z,G){var N=3;return typeof I=="string"&&2<arguments.length?I=this._getPath(I,F,z,G):v(F)==="object"&&(G=F),G&&(typeof G.decimals=="number"&&(N=G.decimals),typeof G.strokeWidth=="number"&&(I.strokeWidth=G.strokeWidth),G.fill!==void 0&&(I.fill=G.fill),G.stroke!==void 0&&(I.stroke=G.stroke)),I.toSVG(N)}},{key:"_renderPath",value:function(I,F,z,G){var N=G&&G.renderer||this.parent._renderer,O=N.drawingContext,H=(I=(v(I)==="object"&&I.commands?I:this._getPath(I,F,z,G)).commands,O.beginPath(),!0);F=!1,z=void 0;try{for(var q,K=I[Symbol.iterator]();!(H=(q=K.next()).done);H=!0){var ne=q.value;ne.type==="M"?O.moveTo(ne.x,ne.y):ne.type==="L"?O.lineTo(ne.x,ne.y):ne.type==="C"?O.bezierCurveTo(ne.x1,ne.y1,ne.x2,ne.y2,ne.x,ne.y):ne.type==="Q"?O.quadraticCurveTo(ne.x1,ne.y1,ne.x,ne.y):ne.type==="Z"&&O.closePath()}}catch(ee){F=!0,z=ee}finally{try{H||K.return==null||K.return()}finally{if(F)throw z}}return N._doStroke&&N._strokeSet&&O.stroke(),N._doFill&&(N._fillSet||N._setFill(d._DEFAULT_TEXT_FILL),O.fill()),this}},{key:"_textWidth",value:function(I,F){return this.font.getAdvanceWidth(I,F)}},{key:"_textAscent",value:function(I){return this.font.ascender*this._scale(I)}},{key:"_textDescent",value:function(I){return-this.font.descender*this._scale(I)}},{key:"_scale",value:function(I){return 1/this.font.unitsPerEm*(I||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(I,F,z,G,N){var O=I._textSize;switch(N===void 0&&(N=this._textWidth(F,O)),I._textAlign){case d.CENTER:z-=N/2;break;case d.RIGHT:z-=N}switch(I._textBaseline){case d.TOP:G+=this._textAscent(O);break;case d.CENTER:G+=this._textAscent(O)/2;break;case d.BOTTOM:G-=this._textDescent(O)}return{x:z,y:G}}}])&&x(L.prototype,B),k}(),i=l.default,g.default=i},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.function.name":167,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],312:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.array-buffer.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.array-buffer.constructor"),i("core-js/modules/es.object.to-string"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.prototype.append=function(h,l){return h.push(l),h},i.default.prototype.arrayCopy=function(h,l,d,v,x){var p,f;h=x!==void 0?(f=Math.min(x,h.length),p=v,h.slice(l,f+l)):(f=d!==void 0?(f=d,Math.min(f,h.length)):h.length,d=l,h.slice(p=0,f)),Array.prototype.splice.apply(d,[p,f].concat(h))},i.default.prototype.concat=function(h,l){return h.concat(l)},i.default.prototype.reverse=function(h){return h.reverse()},i.default.prototype.shorten=function(h){return h.pop(),h},i.default.prototype.shuffle=function(h,l){for(var d,v,x=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(h),p=(h=l||x?h:h.slice()).length;1<p;)d=this.random(0,1)*p|0,v=h[--p],h[p]=h[d],h[d]=v;return h},i.default.prototype.sort=function(h,l){var d=l?h.slice(0,Math.min(l,h.length)):h;return l=l?h.slice(Math.min(l,h.length)):[],(d=typeof d[0]=="string"?d.sort():d.sort(function(v,x){return v-x})).concat(l)},i.default.prototype.splice=function(h,l,d){return Array.prototype.splice.apply(h,[d,0].concat(l)),h},i.default.prototype.subset=function(h,l,d){return d!==void 0?h.slice(l,l+d):h.slice(l,h.length)},i=i.default,g.default=i},{"../core/main":273,"core-js/modules/es.array-buffer.constructor":150,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180}],313:[function(i,_,g){i("core-js/modules/es.array.map"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.repeat"),i("core-js/modules/es.array.map"),i("core-js/modules/es.number.constructor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.repeat"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};h.default.prototype.float=function(l){return l instanceof Array?l.map(parseFloat):parseFloat(l)},h.default.prototype.int=function(l){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return l===1/0||l==="Infinity"?1/0:l===-1/0||l==="-Infinity"?-1/0:typeof l=="string"?parseInt(l,d):typeof l=="number"?0|l:typeof l=="boolean"?l?1:0:l instanceof Array?l.map(function(v){return h.default.prototype.int(v,d)}):void 0},h.default.prototype.str=function(l){return l instanceof Array?l.map(h.default.prototype.str):String(l)},h.default.prototype.boolean=function(l){return typeof l=="number"?l!==0:typeof l=="string"?l.toLowerCase()==="true":typeof l=="boolean"?l:l instanceof Array?l.map(h.default.prototype.boolean):void 0},h.default.prototype.byte=function(l){return typeof(l=h.default.prototype.int(l,10))=="number"?(l+128)%256-128:l instanceof Array?l.map(h.default.prototype.byte):void 0},h.default.prototype.char=function(l){return typeof l!="number"||isNaN(l)?l instanceof Array?l.map(h.default.prototype.char):typeof l=="string"?h.default.prototype.char(parseInt(l,10)):void 0:String.fromCharCode(l)},h.default.prototype.unchar=function(l){return typeof l=="string"&&l.length===1?l.charCodeAt(0):l instanceof Array?l.map(h.default.prototype.unchar):void 0},h.default.prototype.hex=function(l,d){if(d=d??8,l instanceof Array)return l.map(function(x){return h.default.prototype.hex(x,d)});if(l===1/0||l===-1/0)return(l===1/0?"F":"0").repeat(d);if(typeof l=="number"){l<0&&(l=4294967295+l+1);for(var v=Number(l).toString(16).toUpperCase();v.length<d;)v="0".concat(v);return v.length>=d?v.substring(v.length-d,v.length):v}},h.default.prototype.unhex=function(l){return l instanceof Array?l.map(h.default.prototype.unhex):parseInt("0x".concat(l),16)},i=h.default,g.default=i},{"../core/main":273,"core-js/modules/es.array.map":163,"core-js/modules/es.number.constructor":171,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.repeat":193}],314:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.pad-start"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.filter"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.constructor"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.pad-start"),i("core-js/modules/es.string.replace"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(f=i("../core/main"))&&f.__esModule?f:{default:f};function l(u,c){return function(m){if(Array.isArray(m))return m}(u)||function(m,b){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]"){var S=[],w=!0,M=!1,A=void 0;try{for(var P,R=m[Symbol.iterator]();!(w=(P=R.next()).done)&&(S.push(P.value),!b||S.length!==b);w=!0);}catch(k){M=!0,A=k}finally{try{w||R.return==null||R.return()}finally{if(M)throw A}}return S}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(u,c,m){var b=(S=l(u.toString().split("."),2))[0],S=S[1];return m===void 0?(b=b.padStart(c,"0"),S?b+"."+S:b):(b=(u=l(u.toFixed(m).toString().split("."),2))[0],S=u[1],(b=b.padStart(c,"0"))+"."+S)}function v(u,c){var m=(u=u.toString()).indexOf("."),b=m!==-1?u.substring(m):"";if(u=(u=m!==-1?u.substring(0,m):u).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),c===0)b="";else if(c!==void 0)if(c>b.length)for(var S=c-(b+=m===-1?".":"").length+1,w=0;w<S;w++)b+="0";else b=b.substring(0,c+1);return u+b}function x(u){return 0<parseFloat(u)?"+".concat(u.toString()):u.toString()}function p(u){return 0<=parseFloat(u)?" ".concat(u.toString()):u.toString()}i("../core/friendly_errors/validate_params"),i("../core/friendly_errors/file_errors"),i("../core/friendly_errors/fes_core"),h.default.prototype.join=function(u,c){return h.default._validateParameters("join",arguments),u.join(c)},h.default.prototype.match=function(u,c){return h.default._validateParameters("match",arguments),u.match(c)},h.default.prototype.matchAll=function(u,c){h.default._validateParameters("matchAll",arguments);for(var m=new RegExp(c,"g"),b=m.exec(u),S=[];b!==null;)S.push(b),b=m.exec(u);return S},h.default.prototype.nf=function(u,c,m){return h.default._validateParameters("nf",arguments),u instanceof Array?u.map(function(b){return d(b,c,m)}):Object.prototype.toString.call(u)==="[object Arguments]"?u.length===3?this.nf(u[0],u[1],u[2]):u.length===2?this.nf(u[0],u[1]):this.nf(u[0]):d(u,c,m)},h.default.prototype.nfc=function(u,c){return h.default._validateParameters("nfc",arguments),u instanceof Array?u.map(function(m){return v(m,c)}):v(u,c)},h.default.prototype.nfp=function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];h.default._validateParameters("nfp",c);var b=h.default.prototype.nf.apply(this,c);return b instanceof Array?b.map(x):x(b)},h.default.prototype.nfs=function(){for(var u=arguments.length,c=new Array(u),m=0;m<u;m++)c[m]=arguments[m];h.default._validateParameters("nfs",c);var b=h.default.prototype.nf.apply(this,c);return b instanceof Array?b.map(p):p(b)},h.default.prototype.split=function(u,c){return h.default._validateParameters("split",arguments),u.split(c)},h.default.prototype.splitTokens=function(u,c){var m,b;return h.default._validateParameters("splitTokens",arguments),b=c!==void 0?(b=/\]/g.exec(c=c),(m=/\[/g.exec(c))&&b?(c=c.slice(0,b.index)+c.slice(b.index+1),m=/\[/g.exec(c),c=c.slice(0,m.index)+c.slice(m.index+1),new RegExp("[\\[".concat(c,"\\]]"),"g")):b?(c=c.slice(0,b.index)+c.slice(b.index+1),new RegExp("[".concat(c,"\\]]"),"g")):m?(c=c.slice(0,m.index)+c.slice(m.index+1),new RegExp("[".concat(c,"\\[]"),"g")):new RegExp("[".concat(c,"]"),"g")):/\s/g,u.split(b).filter(function(S){return S})},h.default.prototype.trim=function(u){return h.default._validateParameters("trim",arguments),u instanceof Array?u.map(this.trim):u.trim()};var f=h.default;g.default=f},{"../core/friendly_errors/fes_core":264,"../core/friendly_errors/file_errors":265,"../core/friendly_errors/validate_params":268,"../core/main":273,"core-js/modules/es.array.filter":155,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.constructor":184,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.match":191,"core-js/modules/es.string.pad-start":192,"core-js/modules/es.string.replace":194,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],315:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.prototype.day=function(){return new Date().getDate()},i.default.prototype.hour=function(){return new Date().getHours()},i.default.prototype.minute=function(){return new Date().getMinutes()},i.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},i.default.prototype.month=function(){return new Date().getMonth()+1},i.default.prototype.second=function(){return new Date().getSeconds()},i.default.prototype.year=function(){return new Date().getFullYear()},i=i.default,g.default=i},{"../core/main":273}],316:[function(i,_,g){function h(f){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function l(f){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(f)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.math.sign"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.math.sign"),i("core-js/modules/es.number.to-fixed"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(p=i("../core/main"))&&p.__esModule?p:{default:p},v=(i("./p5.Geometry"),function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var u=function(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,w)}();if(u&&u.has(f))return u.get(f);var c,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in f){var S;Object.prototype.hasOwnProperty.call(f,c)&&((S=b?Object.getOwnPropertyDescriptor(f,c):null)&&(S.get||S.set)?Object.defineProperty(m,c,S):m[c]=f[c])}return m.default=f,u&&u.set(f,m),m}(i("../core/constants")));function x(f,u,c,m,b,S,w){f=f<=0?1:f,u=u<0?0:u,c=c<=0?f:c,m=m<3?3:m;for(var M,A,P=(S=S===void 0||S)?-2:0,R=(b=b<1?1:b)+((w=w===void 0?u!==0:w)?2:0),k=Math.atan2(f-u,c),L=Math.sin(k),B=Math.cos(k),I=P;I<=R;++I){var F=I/b,z=c*F,G=void 0;for(G=I<0?(F=z=0,f):b<I?(z=c,F=1,u):f+(u-f)*F,I!==-2&&I!==b+2||(G=0),z-=c/2,M=0;M<m;++M){var N=M/(m-1),O=2*Math.PI*N,H=Math.sin(O),q=(O=Math.cos(O),this.vertices.push(new d.default.Vector(H*G,z,O*G)));q=I<0?new d.default.Vector(0,-1,0):b<I&&u?new d.default.Vector(0,1,0):new d.default.Vector(H*B,L,O*B),this.vertexNormals.push(q),this.uvs.push(N,F)}}var K=0;if(S){for(A=0;A<m;++A)this.faces.push([K+A,K+m+(A+1)%m,K+m+A]);K+=2*m}for(I=0;I<b;++I){for(M=0;M<m;++M){var ne=(M+1)%m;this.faces.push([K+M,K+ne,K+m+ne]),this.faces.push([K+M,K+m+ne,K+m+M])}K+=m}if(w)for(K+=m,M=0;M<m;++M)this.faces.push([K+M,K+(M+1)%m,K+m])}d.default.prototype.plane=function(f,u,c,m){this._assert3d("plane"),d.default._validateParameters("plane",arguments),f===void 0&&(f=50),u===void 0&&(u=f),m===void 0&&(m=1);var b,S="plane|".concat(c=c===void 0?1:c,"|").concat(m);return this._renderer.geometryInHash(S)||((b=new d.default.Geometry(c,m,function(){for(var w,M,A=0;A<=this.detailY;A++)for(var P=A/this.detailY,R=0;R<=this.detailX;R++)w=R/this.detailX,M=new d.default.Vector(w-.5,P-.5,0),this.vertices.push(M),this.uvs.push(w,P)})).computeFaces().computeNormals(),c<=1&&m<=1?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(S,b)),this._renderer.drawBuffersScaled(S,f,u,1),this},d.default.prototype.box=function(f,u,c,m,b){this._assert3d("box"),d.default._validateParameters("box",arguments),f===void 0&&(f=50),u===void 0&&(u=f),c===void 0&&(c=u);var S,w=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return b===void 0&&(b=w?1:4),w="box|".concat(m=m===void 0?w?1:4:m,"|").concat(b),this._renderer.geometryInHash(w)||((S=new d.default.Geometry(m,b,function(){var M=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(A,P){P*=4;for(var R=0;R<4;R++){var k=A[R];k=new d.default.Vector((2*(1&k)-1)/2,((2&k)-1)/2,((4&k)/2-1)/2),M.vertices.push(k),M.uvs.push(1&R,(2&R)/2)}M.faces.push([P,1+P,2+P]),M.faces.push([2+P,1+P,3+P])})})).computeNormals(),m<=4&&b<=4?S._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(w,S)),this._renderer.drawBuffersScaled(w,f,u,c),this},d.default.prototype.sphere=function(f,u,c){return this._assert3d("sphere"),d.default._validateParameters("sphere",arguments),this.ellipsoid(f=f===void 0?50:f,f,f,u=u===void 0?24:u,c=c===void 0?16:c),this},d.default.prototype.cylinder=function(f,u,c,m,b,S){this._assert3d("cylinder"),d.default._validateParameters("cylinder",arguments),f===void 0&&(f=50),u===void 0&&(u=f),m===void 0&&(m=1),S===void 0&&(S=!0),b===void 0&&(b=!0);var w,M="cylinder|".concat(c=c===void 0?24:c,"|").concat(m,"|").concat(b,"|").concat(S);return this._renderer.geometryInHash(M)||(w=new d.default.Geometry(c,m),x.call(w,1,1,1,c,m,b,S),c<=24&&m<=16?w._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(M,w)),this._renderer.drawBuffersScaled(M,f,u,f),this},d.default.prototype.cone=function(f,u,c,m,b){this._assert3d("cone"),d.default._validateParameters("cone",arguments),f===void 0&&(f=50),u===void 0&&(u=f),m===void 0&&(m=1),b===void 0&&(b=!0);var S,w="cone|".concat(c=c===void 0?24:c,"|").concat(m,"|").concat(b);return this._renderer.geometryInHash(w)||(S=new d.default.Geometry(c,m),x.call(S,1,0,1,c,m,b,!1),c<=24&&m<=16?S._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,S)),this._renderer.drawBuffersScaled(w,f,u,f),this},d.default.prototype.ellipsoid=function(f,u,c,m,b){this._assert3d("ellipsoid"),d.default._validateParameters("ellipsoid",arguments),f===void 0&&(f=50),u===void 0&&(u=f),c===void 0&&(c=f),b===void 0&&(b=16);var S,w="ellipsoid|".concat(m=m===void 0?24:m,"|").concat(b);return this._renderer.geometryInHash(w)||((S=new d.default.Geometry(m,b,function(){for(var M=0;M<=this.detailY;M++)for(var A=M/this.detailY,P=Math.PI*A-Math.PI/2,R=Math.cos(P),k=Math.sin(P),L=0;L<=this.detailX;L++){var B=L/this.detailX,I=2*Math.PI*B,F=Math.cos(I);I=Math.sin(I),I=new d.default.Vector(R*I,k,R*F),this.vertices.push(I),this.vertexNormals.push(I),this.uvs.push(B,A)}})).computeFaces(),m<=24&&b<=24?S._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(w,S)),this._renderer.drawBuffersScaled(w,f,u,c),this},d.default.prototype.torus=function(f,u,c,m){if(this._assert3d("torus"),d.default._validateParameters("torus",arguments),f===void 0)f=50;else if(!f)return;if(u===void 0)u=10;else if(!u)return;c===void 0&&(c=24),m===void 0&&(m=16);var b,S=(u/f).toPrecision(4);return u="torus|".concat(S,"|").concat(c,"|").concat(m),this._renderer.geometryInHash(u)||((b=new d.default.Geometry(c,m,function(){for(var w=0;w<=this.detailY;w++)for(var M=w/this.detailY,A=2*Math.PI*M,P=Math.cos(A),R=Math.sin(A),k=1+S*P,L=0;L<=this.detailX;L++){var B=L/this.detailX,I=2*Math.PI*B,F=Math.cos(I),z=(I=Math.sin(I),new d.default.Vector(k*F,k*I,S*R));F=new d.default.Vector(P*F,P*I,R),this.vertices.push(z),this.vertexNormals.push(F),this.uvs.push(B,M)}})).computeFaces(),c<=24&&m<=16?b._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(u,b)),this._renderer.drawBuffersScaled(u,f,f,f),this},d.default.RendererGL.prototype.point=function(f,u,c){var m=[];return m.push(new d.default.Vector(f,u,c=c===void 0?0:c)),this._drawPoints(m,this.immediateMode.buffers.point),this},d.default.RendererGL.prototype.triangle=function(f){var u=f[0],c=f[1],m=f[2],b=f[3],S=f[4],w=(f=f[5],this.geometryInHash("tri")||((w=new d.default.Geometry(1,1,function(){var P=[];P.push(new d.default.Vector(0,0,0)),P.push(new d.default.Vector(1,0,0)),P.push(new d.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=P,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),w.computeNormals(),this.createBuffers("tri",w)),this.uMVMatrix.copy());try{var M=Math.sign(u*b-m*c+m*f-S*b+S*c-u*f),A=new d.default.Matrix([m-u,b-c,0,0,S-u,f-c,0,0,0,0,M,0,u,c,0,1]).mult(this.uMVMatrix);this.uMVMatrix=A,this.drawBuffers("tri")}finally{this.uMVMatrix=w}return this},d.default.RendererGL.prototype.ellipse=function(f){this.arc(f[0],f[1],f[2],f[3],0,v.TWO_PI,v.OPEN,f[4])},d.default.RendererGL.prototype.arc=function(f){var u,c=arguments[1],m=arguments[2],b=arguments[3],S=arguments[4],w=arguments[5],M=arguments[6],A=arguments[7]||25,P=(Math.abs(w-S)>=v.TWO_PI?"".concat(R="ellipse","|"):"".concat(R="arc","|").concat(S,"|").concat(w,"|").concat(M,"|")).concat(A,"|"),R=(this.geometryInHash(P)||((u=new d.default.Geometry(A,1,function(){if(S.toFixed(10)!==w.toFixed(10)){M!==v.PIE&&M!==void 0||(this.vertices.push(new d.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var k=0;k<=A;k++){var L=k/A*(w-S)+S,B=.5+Math.cos(L)/2;L=.5+Math.sin(L)/2,this.vertices.push(new d.default.Vector(B,L,0)),this.uvs.push([B,L]),k<A-1&&(this.faces.push([0,k+1,k+2]),this.edges.push([k+1,k+2]))}switch(M){case v.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case v.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case v.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),A<=50?u._edgesToVertices(u):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(R," with more than 50 detail")),this.createBuffers(P,u)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([f,c,0]),this.uMVMatrix.scale(m,b,1),this.drawBuffers(P)}finally{this.uMVMatrix=R}return this},d.default.RendererGL.prototype.rect=function(f){var u=f[0],c=f[1],m=f[2],b=f[3];if(f[4]===void 0){var S=this._pInst._glAttributes.perPixelLighting,w=f[4]||(S?1:24),M=f[5]||(S?1:16),A=(S="rect|".concat(w,"|").concat(M),this.geometryInHash(S)||((A=new d.default.Geometry(w,M,function(){for(var q=0;q<=this.detailY;q++)for(var K=q/this.detailY,ne=0;ne<=this.detailX;ne++){var ee=ne/this.detailX,se=new d.default.Vector(ee,K,0);this.vertices.push(se),this.uvs.push(ee,K)}0<w&&0<M&&(this.edges=[[0,w],[w,(w+1)*(M+1)-1],[(w+1)*(M+1)-1,(w+1)*M],[(w+1)*M,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(S,A)),this.uMVMatrix.copy());try{this.uMVMatrix.translate([u,c,0]),this.uMVMatrix.scale(m,b,1),this.drawBuffers(S)}finally{this.uMVMatrix=A}}else{S=f[4],A=f[5]===void 0?S:f[5];var P=f[6]===void 0?A:f[6],R=(f=f[7]===void 0?P:f[7],m),k=b,L=((I=((R+=u)<u&&(I=u,u=R,R=I),(k+=c)<c&&(I=c,c=k,k=I),Math.min((R-u)/2,(k-c)/2)))<S&&(S=I),I<A&&(A=I),I<P&&(P=I),I<f&&(f=I),u),B=c,I=R,F=(u=k,this.beginShape(),A!==0?(this.vertex(I-A,B),this.quadraticVertex(I,B,I,B+A)):this.vertex(I,B),P!==0?(this.vertex(I,u-P),this.quadraticVertex(I,u,I-P,u)):this.vertex(I,u),f!==0?(this.vertex(L+f,u),this.quadraticVertex(L,u,L,u-f)):this.vertex(L,u),S!==0?(this.vertex(L,B+S),this.quadraticVertex(L,B,L+S,B)):this.vertex(L,B),!(this.immediateMode.geometry.uvs.length=0));c=!1,R=void 0;try{for(var z,G=this.immediateMode.geometry.vertices[Symbol.iterator]();!(F=(z=G.next()).done);F=!0){var N=z.value,O=(N.x-L)/m,H=(N.y-B)/b;this.immediateMode.geometry.uvs.push(O,H)}}catch(q){c=!0,R=q}finally{try{F||G.return==null||G.return()}finally{if(c)throw R}}this.endShape(v.CLOSE)}return this},d.default.RendererGL.prototype.quad=function(f,u,c,m,b,S,w,M,A,P,R,k,L,B){L===void 0&&(L=2),B===void 0&&(B=2);var I="quad|".concat(f,"|").concat(u,"|").concat(c,"|").concat(m,"|").concat(b,"|").concat(S,"|").concat(w,"|").concat(M,"|").concat(A,"|").concat(P,"|").concat(R,"|").concat(k,"|").concat(L,"|").concat(B);if(!this.geometryInHash(I)){var F=new d.default.Geometry(L,B,function(){for(var q=1/(this.detailX-1),K=1/(this.detailY-1),ne=0;ne<this.detailY;ne++)for(var ee=0;ee<this.detailX;ee++){var se=ee*q,me=ne*K;this.vertices.push(new d.default.Vector((1-se)*((1-me)*f+me*P)+se*((1-me)*m+me*w),(1-se)*((1-me)*u+me*R)+se*((1-me)*b+me*M),(1-se)*((1-me)*c+me*k)+se*((1-me)*S+me*A))),this.uvs.push([se,me])}});F.faces=[];for(var z=0;z<B-1;z++)for(var G=0;G<L-1;G++){var N=G+z*L,O=G+1+(z+1)*L,H=G+(z+1)*L;F.faces.push([N,G+1+z*L,O]),F.faces.push([N,O,H])}F.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(I,F)}return this.drawBuffers(I),this},d.default.RendererGL.prototype.bezier=function(f,u,c,m,b,S,w,M,A,P,R,k){arguments.length===8&&(R=M,P=w,M=S,w=b,b=m,m=c,c=S=A=k=0);var L=this._pInst._bezierDetail||20;this.beginShape();for(var B=0;B<=L;B++){var I=Math.pow(1-B/L,3),F=B/L*3*Math.pow(1-B/L,2),z=3*Math.pow(B/L,2)*(1-B/L),G=Math.pow(B/L,3);this.vertex(f*I+m*F+w*z+P*G,u*I+b*F+M*z+R*G,c*I+S*F+A*z+k*G)}return this.endShape(),this},d.default.RendererGL.prototype.curve=function(f,u,c,m,b,S,w,M,A,P,R,k){arguments.length===8&&(P=w,R=M,w=b,M=m,b=m=c,c=S=A=k=0);var L=this._pInst._curveDetail;this.beginShape();for(var B=0;B<=L;B++){var I=.5*Math.pow(B/L,3),F=.5*Math.pow(B/L,2),z=B/L*.5;this.vertex(I*(3*m-f-3*w+P)+F*(2*f-5*m+4*w-P)+z*(-f+w)+2*m*.5,I*(3*b-u-3*M+R)+F*(2*u-5*b+4*M-R)+z*(-u+M)+2*b*.5,I*(3*S-c-3*A+k)+F*(2*c-5*S+4*A-k)+z*(-c+A)+2*S*.5)}return this.endShape(),this},d.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(v.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(v.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},d.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var f,u,c,m,b,S,w=[],M=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var P=1/this._lutBezierDetail,R=0,k=1,L=0;R<1;){if(S=parseFloat(R.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(S),k.toFixed(6)===P.toFixed(6)){S=parseFloat(k.toFixed(6))+parseFloat(R.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(S);break}R+=P,k-=P,++L}}for(var B=this._lookUpTableBezier.length,I=[],F=0;F<4;F++)I.push([]);I[0]=this.immediateMode.geometry.vertexColors.slice(-4),I[3]=this.curFillColor.slice();var z=[];for(F=0;F<4;F++)z.push([]);if(z[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),z[3]=this.curStrokeColor.slice(),A===6){this.isBezier=!0,w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],M=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var G=Math.hypot(w[0]-w[1],M[0]-M[1]),N=Math.hypot(w[1]-w[2],M[1]-M[2]),O=Math.hypot(w[2]-w[3],M[2]-M[3]);for(G/=N=G+N+O,O/=N,b=0;b<4;b++)I[1].push(I[0][b]*(1-G)+I[3][b]*G),I[2].push(I[0][b]*O+I[3][b]*(1-O)),z[1].push(z[0][b]*(1-G)+z[3][b]*G),z[2].push(z[0][b]*O+z[3][b]*(1-O));for(m=0;m<B;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=f=u=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[m][F]*I[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[m][F]*z[F][b];f+=w[F]*this._lookUpTableBezier[m][F],u+=M[F]*this._lookUpTableBezier[m][F]}this.vertex(f,u)}this.curFillColor=I[3],this.curStrokeColor=z[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(A===9){this.isBezier=!0,w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],M=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var H=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],q=Math.hypot(w[0]-w[1],M[0]-M[1],H[0]-H[1]),K=(N=Math.hypot(w[1]-w[2],M[1]-M[2],H[1]-H[2]),Math.hypot(w[2]-w[3],M[2]-M[3],H[2]-H[3]));for(q/=A=q+N+K,K/=A,b=0;b<4;b++)I[1].push(I[0][b]*(1-q)+I[3][b]*q),I[2].push(I[0][b]*K+I[3][b]*(1-K)),z[1].push(z[0][b]*(1-q)+z[3][b]*q),z[2].push(z[0][b]*K+z[3][b]*(1-K));for(m=0;m<B;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=f=u=c=0;F<4;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableBezier[m][F]*I[F][b],this.curStrokeColor[b]+=this._lookUpTableBezier[m][F]*z[F][b];f+=w[F]*this._lookUpTableBezier[m][F],u+=M[F]*this._lookUpTableBezier[m][F],c+=H[F]*this._lookUpTableBezier[m][F]}this.vertex(f,u,c)}this.curFillColor=I[3],this.curStrokeColor=z[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},d.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var f,u,c,m,b,S,w=[],M=[],A=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var P=1/this._lutQuadraticDetail,R=0,k=1,L=0;R<1;){if(S=parseFloat(R.toFixed(6)),this._lookUpTableQuadratic[L]=this._quadraticCoefficients(S),k.toFixed(6)===P.toFixed(6)){S=parseFloat(k.toFixed(6))+parseFloat(R.toFixed(6)),++L,this._lookUpTableQuadratic[L]=this._quadraticCoefficients(S);break}R+=P,k-=P,++L}}for(var B=this._lookUpTableQuadratic.length,I=[],F=0;F<3;F++)I.push([]);I[0]=this.immediateMode.geometry.vertexColors.slice(-4),I[2]=this.curFillColor.slice();var z=[];for(F=0;F<3;F++)z.push([]);if(z[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),z[2]=this.curStrokeColor.slice(),A===4){this.isQuadratic=!0,w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],M=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var G=Math.hypot(w[0]-w[1],M[0]-M[1]);for(G/=G+Math.hypot(w[1]-w[2],M[1]-M[2]),b=0;b<4;b++)I[1].push(I[0][b]*(1-G)+I[2][b]*G),z[1].push(z[0][b]*(1-G)+z[2][b]*G);for(m=0;m<B;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=f=u=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[m][F]*I[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[m][F]*z[F][b];f+=w[F]*this._lookUpTableQuadratic[m][F],u+=M[F]*this._lookUpTableQuadratic[m][F]}this.vertex(f,u)}this.curFillColor=I[2],this.curStrokeColor=z[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(A===6){this.isQuadratic=!0,w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],M=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var N=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],O=Math.hypot(w[0]-w[1],M[0]-M[1],N[0]-N[1]);for(O/=O+Math.hypot(w[1]-w[2],M[1]-M[2],N[1]-N[2]),b=0;b<4;b++)I[1].push(I[0][b]*(1-O)+I[2][b]*O),z[1].push(z[0][b]*(1-O)+z[2][b]*O);for(m=0;m<B;m++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],F=f=u=c=0;F<3;F++){for(b=0;b<4;b++)this.curFillColor[b]+=this._lookUpTableQuadratic[m][F]*I[F][b],this.curStrokeColor[b]+=this._lookUpTableQuadratic[m][F]*z[F][b];f+=w[F]*this._lookUpTableQuadratic[m][F],u+=M[F]*this._lookUpTableQuadratic[m][F],c+=N[F]*this._lookUpTableQuadratic[m][F]}this.vertex(f,u,c)}this.curFillColor=I[2],this.curStrokeColor=z[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},d.default.RendererGL.prototype.curveVertex=function(){var f,u,c,m,b,S,w=[],M=[],A=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var P=1/this._lutBezierDetail,R=0,k=1,L=0;R<1;){if(S=parseFloat(R.toFixed(6)),this._lookUpTableBezier[L]=this._bezierCoefficients(S),k.toFixed(6)===P.toFixed(6)){S=parseFloat(k.toFixed(6))+parseFloat(R.toFixed(6)),++L,this._lookUpTableBezier[L]=this._bezierCoefficients(S);break}R+=P,k-=P,++L}}var B=this._lookUpTableBezier.length;if(A===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),M=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),b=0;b<B;b++)u=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],c=M[0]*this._lookUpTableBezier[b][0]+M[1]*this._lookUpTableBezier[b][1]+M[2]*this._lookUpTableBezier[b][2]+M[3]*this._lookUpTableBezier[b][3],this.vertex(u,c);for(b=0;b<A;b++)this.immediateMode._curveVertex.shift()}}else if(A===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),M=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),f=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),b=0;b<B;b++)u=w[0]*this._lookUpTableBezier[b][0]+w[1]*this._lookUpTableBezier[b][1]+w[2]*this._lookUpTableBezier[b][2]+w[3]*this._lookUpTableBezier[b][3],c=M[0]*this._lookUpTableBezier[b][0]+M[1]*this._lookUpTableBezier[b][1]+M[2]*this._lookUpTableBezier[b][2]+M[3]*this._lookUpTableBezier[b][3],m=f[0]*this._lookUpTableBezier[b][0]+f[1]*this._lookUpTableBezier[b][1]+f[2]*this._lookUpTableBezier[b][2]+f[3]*this._lookUpTableBezier[b][3],this.vertex(u,c,m);for(b=0;b<A;b++)this.immediateMode._curveVertex.shift()}},d.default.RendererGL.prototype.image=function(f,u,c,m,b,S,w,M,A){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(f),this._pInst.textureMode(v.NORMAL);var P=0,R=(u<=f.width&&(P=u/f.width),1);u+m<=f.width&&(R=(u+m)/f.width),u=0,c<=f.height&&(u=c/f.height),m=1,c+b<=f.height&&(m=(c+b)/f.height),this.beginShape(),this.vertex(S,w,0,P,u),this.vertex(S+M,w,0,R,u),this.vertex(S+M,w+A,0,R,m),this.vertex(S,w+A,0,P,m),this.endShape(v.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(v.REMOVE)};var p=d.default;g.default=p},{"../core/constants":262,"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.number.to-fixed":173,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],317:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.math.sign"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.math.sign"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(x=i("../core/main"))&&x.__esModule?x:{default:x},d=function(p){if(p&&p.__esModule)return p;if(p===null||v(p)!=="object"&&typeof p!="function")return{default:p};var f=function(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,S)}();if(f&&f.has(p))return f.get(p);var u,c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p){var b;Object.prototype.hasOwnProperty.call(p,u)&&((b=m?Object.getOwnPropertyDescriptor(p,u):null)&&(b.get||b.set)?Object.defineProperty(c,u,b):c[u]=p[u])}return c.default=p,f&&f.set(p,c),c}(i("../core/constants"));function v(p){return(v=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}l.default.prototype.orbitControl=function(p,f,u,c){var m=this,b=(this._assert3d("orbitControl"),l.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);p===void 0&&(p=1),f===void 0&&(f=p),u===void 0&&(u=1),v(c)!=="object"&&(c={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var S=c.disableTouchActions;this.touchActionsDisabled===!0||S!==void 0&&!S||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),c=(S=c.freeRotation)!==void 0&&S;var w,M,A,P=[],R=(S=(this.touches.forEach(function(z){m._renderer.prevTouches.forEach(function(G){z.id===G.id&&(G={x:z.x,y:z.y,px:G.x,py:G.y},P.push(G))})}),this._renderer.prevTouches=this.touches,0),0),k=0,L=0,B=0,I=this.height<this.width?this.height:this.width,F=!1;return 0<P.length?(F=0<P[0].x&&P[0].x<this.width&&0<P[0].y&&P[0].y<this.height,P.length===1?(R=-p*((w=P[0]).x-w.px)/I,k=f*(w.y-w.py)/I):(w=P[0],M=P[1],S=-(Math.hypot(w.x-M.x,w.y-M.y)-Math.hypot(w.px-M.px,w.py-M.py))*u*4e-4,L=.5*(w.x+M.x)-.5*(w.px+M.px),B=.5*(w.y+M.y)-.5*(w.py+M.py)),0<this.touches.length?F&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(F=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(S=Math.sign(this._mouseWheelDeltaY)*u,S*=.01,this._mouseWheelDeltaY=0,F&&(this._renderer.executeZoom=!0)):this._renderer.zoomFlag=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(R=-p*this.movedX/I,k=f*this.movedY/I):this.mouseButton===this.RIGHT&&(L=this.movedX,B=this.movedY),F&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),S!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=S),.001<Math.abs(this._renderer.zoomVelocity)?(c?b._orbitFree(0,0,this._renderer.zoomVelocity):b._orbit(0,0,this._renderer.zoomVelocity),b.projMatrix.mat4[15]!==0&&(b.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),b.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=b.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=b.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,R===0&&k===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*R,.6*k),1e-6<this._renderer.rotateVelocity.magSq()?(c?b._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):b._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),L===0&&B===0||!this._renderer.executeRotateAndMove||(w=2*L/this.width,M=2*-B/this.height,this._renderer.moveVelocity.add(.15*w,.15*M)),1e-6<this._renderer.moveVelocity.magSq()?(u=b._getLocalAxes(),p=b.eyeX-b.centerX,f=b.eyeY-b.centerY,I=b.eyeZ-b.centerZ,F=Math.sqrt(p*p+f*f+I*I),S=new l.default.Vector(b.centerX,b.centerY,b.centerZ),S=b.cameraMatrix.multiplyPoint(S),(S=this._renderer.uPMatrix.multiplyAndNormalizePoint(S)).x-=this._renderer.moveVelocity.x,S.y-=this._renderer.moveVelocity.y,k=(R=this._renderer.uPMatrix.mat4)[15]===0?(A=(R[8]+S.x)/R[0]*F,(R[9]+S.y)/R[5]*F):(A=(S.x-R[12])/R[0],(S.y-R[13])/R[5]),b.setPosition(b.eyeX+A*u.x[0]+k*u.y[0],b.eyeY+A*u.x[1]+k*u.y[1],b.eyeZ+A*u.x[2]+k*u.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},l.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var p=arguments.length,f=new Array(p),u=0;u<p;u++)f[u]=arguments[u];l.default._validateParameters("debugMode",f);for(var c=this._registeredMethods.post.length-1;0<=c;c--)this._registeredMethods.post[c].toString()!==this._grid().toString()&&this._registeredMethods.post[c].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(c,1);f[0]===d.GRID?this.registerMethod("post",this._grid.call(this,f[1],f[2],f[3],f[4],f[5])):f[0]===d.AXES?this.registerMethod("post",this._axesIcon.call(this,f[1],f[2],f[3],f[4])):(this.registerMethod("post",this._grid.call(this,f[0],f[1],f[2],f[3],f[4])),this.registerMethod("post",this._axesIcon.call(this,f[5],f[6],f[7],f[8])))},l.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var p=this._registeredMethods.post.length-1;0<=p;p--)this._registeredMethods.post[p].toString()!==this._grid().toString()&&this._registeredMethods.post[p].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(p,1)},l.default.prototype._grid=function(p,f,u,c,m){p===void 0&&(p=this.width/2),f===void 0&&(f=Math.round(p/30)<4?4:Math.round(p/30)),u===void 0&&(u=0),c===void 0&&(c=0),m===void 0&&(m=0);var b=p/f,S=p/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var w=0;w<=f;w++)this.beginShape(this.LINES),this.vertex(-S+u,c,w*b-S+m),this.vertex(S+u,c,w*b-S+m),this.endShape();for(var M=0;M<=f;M++)this.beginShape(this.LINES),this.vertex(M*b-S+u,c,-S+m),this.vertex(M*b-S+u,c,S+m),this.endShape();this.pop()}},l.default.prototype._axesIcon=function(p,f,u,c){return p===void 0&&(p=40<this.width/20?this.width/20:40),f===void 0&&(f=-this.width/4),u===void 0&&(u=f),c===void 0&&(c=f),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(f,u,c),this.vertex(f+p,u,c),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(f,u,c),this.vertex(f,u+p,c),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(f,u,c),this.vertex(f,u,c+p),this.endShape(),this.pop()}};var x=l.default;g.default=x},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.splice":166,"core-js/modules/es.math.hypot":169,"core-js/modules/es.math.sign":170,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.for-each":235,"core-js/modules/web.dom-collections.iterator":236}],318:[function(i,_,g){Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};h.default.prototype.ambientLight=function(l,d,v,x){this._assert3d("ambientLight"),h.default._validateParameters("ambientLight",arguments);var p=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(p._array[0],p._array[1],p._array[2]),this._renderer._enableLighting=!0,this},h.default.prototype.specularColor=function(l,d,v){this._assert3d("specularColor"),h.default._validateParameters("specularColor",arguments);var x=this.color.apply(this,arguments);return this._renderer.specularColors=[x._array[0],x._array[1],x._array[2]],this},h.default.prototype.directionalLight=function(l,d,v,x,p,f){this._assert3d("directionalLight"),h.default._validateParameters("directionalLight",arguments),l=l instanceof h.default.Color?l:this.color(l,d,v);var u,c;return v=typeof(d=arguments[arguments.length-1])=="number"?(u=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(u=d.x,c=d.y,d.z),d=Math.sqrt(u*u+c*c+v*v),this._renderer.directionalLightDirections.push(u/d,c/d,v/d),this._renderer.directionalLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.pointLight=function(l,d,v,x,p,f){this._assert3d("pointLight"),h.default._validateParameters("pointLight",arguments),l=l instanceof h.default.Color?l:this.color(l,d,v);var u,c;return v=typeof(d=arguments[arguments.length-1])=="number"?(u=arguments[arguments.length-3],c=arguments[arguments.length-2],arguments[arguments.length-1]):(u=d.x,c=d.y,d.z),this._renderer.pointLightPositions.push(u,c,v),this._renderer.pointLightDiffuseColors.push(l._array[0],l._array[1],l._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},h.default.prototype.lights=function(){this._assert3d("lights");var l=this.color("rgb(128,128,128)");return this.ambientLight(l),this.directionalLight(l,0,0,-1),this},h.default.prototype.lightFalloff=function(l,d,v){return this._assert3d("lightFalloff"),h.default._validateParameters("lightFalloff",arguments),l<0&&(l=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),v<0&&(v=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),l===0&&d===0&&v===0&&(l=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=l,this._renderer.linearAttenuation=d,this._renderer.quadraticAttenuation=v,this},h.default.prototype.spotLight=function(l,d,v,x,p,f,u,c,m,b,S){this._assert3d("spotLight"),h.default._validateParameters("spotLight",arguments);var w,M,A,P=arguments.length;switch(P){case 11:case 10:w=this.color(l,d,v),M=new h.default.Vector(x,p,f),A=new h.default.Vector(u,c,m);break;case 9:l instanceof h.default.Color?(w=l,M=new h.default.Vector(d,v,x),A=new h.default.Vector(p,f,u),b=c,S=m):x instanceof h.default.Vector?(w=this.color(l,d,v),M=x,A=new h.default.Vector(p,f,u),b=c,S=m):u instanceof h.default.Vector?(w=this.color(l,d,v),M=new h.default.Vector(x,p,f),A=u,b=c,S=m):(w=this.color(l,d,v),M=new h.default.Vector(x,p,f),A=new h.default.Vector(u,c,m));break;case 8:A=l instanceof h.default.Color?(w=l,M=new h.default.Vector(d,v,x),new h.default.Vector(p,f,u)):x instanceof h.default.Vector?(w=this.color(l,d,v),M=x,new h.default.Vector(p,f,u)):(w=this.color(l,d,v),M=new h.default.Vector(x,p,f),u),b=c;break;case 7:l instanceof h.default.Color&&d instanceof h.default.Vector?(w=l,M=d,A=new h.default.Vector(v,x,p),b=f,S=u):l instanceof h.default.Color&&p instanceof h.default.Vector?(w=l,M=new h.default.Vector(d,v,x),A=p,b=f,S=u):x instanceof h.default.Vector&&p instanceof h.default.Vector?(w=this.color(l,d,v),M=x,A=p,b=f,S=u):A=l instanceof h.default.Color?(w=l,M=new h.default.Vector(d,v,x),new h.default.Vector(p,f,u)):x instanceof h.default.Vector?(w=this.color(l,d,v),M=x,new h.default.Vector(p,f,u)):(w=this.color(l,d,v),M=new h.default.Vector(x,p,f),u);break;case 6:x instanceof h.default.Vector&&p instanceof h.default.Vector?(w=this.color(l,d,v),M=x,A=p,b=f):l instanceof h.default.Color&&p instanceof h.default.Vector?(w=l,M=new h.default.Vector(d,v,x),A=p,b=f):l instanceof h.default.Color&&d instanceof h.default.Vector&&(w=l,M=d,A=new h.default.Vector(v,x,p),b=f);break;case 5:l instanceof h.default.Color&&d instanceof h.default.Vector&&v instanceof h.default.Vector?(w=l,M=d,A=v,b=x,S=p):x instanceof h.default.Vector&&p instanceof h.default.Vector?(w=this.color(l,d,v),M=x,A=p):l instanceof h.default.Color&&p instanceof h.default.Vector?(w=l,M=new h.default.Vector(d,v,x),A=p):l instanceof h.default.Color&&d instanceof h.default.Vector&&(w=l,M=d,A=new h.default.Vector(v,x,p));break;case 4:w=l,M=d,A=v,b=x;break;case 3:w=l,M=d,A=v;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(P<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(w._array[0],w._array[1],w._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(M.x,M.y,M.z),A.normalize(),this._renderer.spotLightDirections.push(A.x,A.y,A.z),b===void 0&&(b=Math.PI/3),S!==void 0&&S<1?(S=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):S===void 0&&(S=100),b=this._renderer._pInst._toRadians(b),this._renderer.spotLightAngle.push(Math.cos(b)),this._renderer.spotLightConc.push(S),this._renderer._enableLighting=!0,this},h.default.prototype.noLights=function(){this._assert3d("noLights");for(var l=arguments.length,d=new Array(l),v=0;v<l;v++)d[v]=arguments[v];return h.default._validateParameters("noLights",d),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this},i=h.default,g.default=i},{"../core/main":273}],319:[function(i,_,g){i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.splice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.match"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.trim"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(l=i("../core/main"))&&l.__esModule?l:{default:l};i("./p5.Geometry"),h.default.prototype.loadModel=function(d){h.default._validateParameters("loadModel",arguments);var v,x,p,f=d.slice(-4),u=(typeof arguments[1]=="boolean"?(v=arguments[1],x=arguments[2],p=arguments[3],arguments[4]!==void 0&&(f=arguments[4])):(v=!1,x=arguments[1],p=arguments[2],arguments[3]!==void 0&&(f=arguments[3])),new h.default.Geometry),c=(u.gid="".concat(d,"|").concat(v),this);return f.match(/\.stl$/i)?this.httpDo(d,"GET","arrayBuffer",function(m){(function(b,S){if(function(w){for(var M=new DataView(w),A=[115,111,108,105,100],P=0;P<5;P++)if(function(R,k,L){for(var B=0,I=R.length;B<I;B++)if(R[B]!==k.getUint8(L+B,!1))return;return 1}(A,M,P))return;return 1}(S))(function(w,M){for(var A,P,R,k,L,B,I,F=new DataView(M),z=F.getUint32(80,!0),G=!1,N=0;N<70;N++)F.getUint32(N,!1)===1129270351&&F.getUint8(N+4)===82&&F.getUint8(N+5)===61&&(G=!0,k=[],L=F.getUint8(N+6)/255,B=F.getUint8(N+7)/255,I=F.getUint8(N+8)/255);for(var O=0;O<z;O++){for(var H,q=84+50*O,K=F.getFloat32(q,!0),ne=F.getFloat32(4+q,!0),ee=F.getFloat32(8+q,!0),se=(G&&(R=32768&(H=F.getUint16(48+q,!0))?(A=L,P=B,I):(A=(31&H)/31,P=(H>>5&31)/31,(H>>10&31)/31)),new h.default.Vector(K,ne,ee)),me=1;me<=3;me++){var X=q+12*me;X=new h.default.Vector(F.getFloat32(X,!0),F.getFloat32(4+X,!0),F.getFloat32(8+X,!0)),w.vertices.push(X),w.vertexNormals.push(se),G&&k.push(A,P,R)}w.faces.push([3*O,3*O+1,3*O+2]),w.uvs.push([0,0],[0,0],[0,0])}})(b,S);else{if(S=new DataView(S),!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");(function(w,M){for(var A,P,R="",k=[],L=0;L<M.length;++L){for(var B=M[L].trim(),I=B.split(" "),F=0;F<I.length;++F)I[F]===""&&I.splice(F,1);if(I.length!==0)switch(R){case"":if(I[0]!=="solid")return console.error(B),console.error('Invalid state "'.concat(I[0],'", should be "solid"'));R="solid";break;case"solid":if(I[0]!=="facet"||I[1]!=="normal")return console.error(B),console.error('Invalid state "'.concat(I[0],'", should be "facet normal"'));A=new h.default.Vector(parseFloat(I[2]),parseFloat(I[3]),parseFloat(I[4])),w.vertexNormals.push(A,A,A),R="facet normal";break;case"facet normal":if(I[0]!=="outer"||I[1]!=="loop")return console.error(B),console.error('Invalid state "'.concat(I[0],'", should be "outer loop"'));R="vertex";break;case"vertex":if(I[0]==="vertex")P=new h.default.Vector(parseFloat(I[1]),parseFloat(I[2]),parseFloat(I[3])),w.vertices.push(P),w.uvs.push([0,0]),k.push(w.vertices.indexOf(P));else{if(I[0]!=="endloop")return console.error(B),console.error('Invalid state "'.concat(I[0],'", should be "vertex" or "endloop"'));w.faces.push(k),k=[],R="endloop"}break;case"endloop":if(I[0]!=="endfacet")return console.error(B),console.error('Invalid state "'.concat(I[0],'", should be "endfacet"'));R="endfacet";break;case"endfacet":if(I[0]!=="endsolid"){if(I[0]!=="facet"||I[1]!=="normal")return console.error(B),console.error('Invalid state "'.concat(I[0],'", should be "endsolid" or "facet normal"'));A=new h.default.Vector(parseFloat(I[2]),parseFloat(I[3]),parseFloat(I[4])),w.vertexNormals.push(A,A,A),R="facet normal"}break;default:console.error('Invalid state "'.concat(R,'"'))}}})(b,S=new TextDecoder("utf-8").decode(S).split(`
`))}})(u,m),v&&u.normalize(),c._decrementPreload(),typeof x=="function"&&x(u)},p):f.match(/\.obj$/i)?this.loadStrings(d,function(m){for(var b=u,S=m,w={v:[],vt:[],vn:[]},M={},A=0;A<S.length;++A){var P=S[A].trim().split(/\b\s+/);if(0<P.length){if(P[0]==="v"||P[0]==="vn"){var R=new h.default.Vector(parseFloat(P[1]),parseFloat(P[2]),parseFloat(P[3]));w[P[0]].push(R)}else if(P[0]==="vt")R=[parseFloat(P[1]),1-parseFloat(P[2])],w[P[0]].push(R);else if(P[0]==="f")for(var k=3;k<P.length;++k){for(var L=[],B=[1,k-1,k],I=0;I<B.length;++I){var F=P[B[I]],z=0;if(M[F]!==void 0)z=M[F];else{for(var G=F.split("/"),N=0;N<G.length;N++)G[N]=parseInt(G[N])-1;z=M[F]=b.vertices.length,b.vertices.push(w.v[G[0]].copy()),w.vt[G[1]]?b.uvs.push(w.vt[G[1]].slice()):b.uvs.push([0,0]),w.vn[G[2]]&&b.vertexNormals.push(w.vn[G[2]].copy())}L.push(z)}L[0]!==L[1]&&L[0]!==L[2]&&L[1]!==L[2]&&b.faces.push(L)}}}b.vertexNormals.length===0&&b.computeNormals(),v&&u.normalize(),c._decrementPreload(),typeof x=="function"&&x(u)},p):(h.default._friendlyFileLoadError(3,d),p?p():h.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),u},h.default.prototype.model=function(d){this._assert3d("model"),h.default._validateParameters("model",arguments),0<d.vertices.length&&(this._renderer.geometryInHash(d.gid)||(d.edges.length===0&&d._makeTriangleEdges(),d._edgesToVertices(),this._renderer.createBuffers(d.gid,d)),this._renderer.drawBuffers(d.gid))};var l=h.default;g.default=l},{"../core/main":273,"./p5.Geometry":323,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.splice":166,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.match":191,"core-js/modules/es.string.split":196,"core-js/modules/es.string.trim":199}],320:[function(i,_,g){function h(p){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(p)}function l(p){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(f){return h(f)}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":h(f)})(p)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.join"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(x=i("../core/main"))&&x.__esModule?x:{default:x},v=function(p){if(p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var f=function(){var S;return typeof WeakMap!="function"?null:(S=new WeakMap,S)}();if(f&&f.has(p))return f.get(p);var u,c={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(u in p){var b;Object.prototype.hasOwnProperty.call(p,u)&&((b=m?Object.getOwnPropertyDescriptor(p,u):null)&&(b.get||b.set)?Object.defineProperty(c,u,b):c[u]=p[u])}return c.default=p,f&&f.set(p,c),c}(i("../core/constants"));i("./p5.Texture"),d.default.prototype.loadShader=function(p,f,u,c){function m(){S._decrementPreload(),u&&u(b)}d.default._validateParameters("loadShader",arguments),c=c||console.error;var b=new d.default.Shader,S=this,w=!1,M=!1;return this.loadStrings(p,function(A){b._vertSrc=A.join(`
`),M=!0,w&&m()},c),this.loadStrings(f,function(A){b._fragSrc=A.join(`
`),w=!0,M&&m()},c),b},d.default.prototype.createShader=function(p,f){return this._assert3d("createShader"),d.default._validateParameters("createShader",arguments),new d.default.Shader(this._renderer,p,f)},d.default.prototype.shader=function(p){return this._assert3d("shader"),d.default._validateParameters("shader",arguments),p._renderer===void 0&&(p._renderer=this._renderer),p.init(),p.isStrokeShader()?this._renderer.userStrokeShader=p:(this._renderer.userFillShader=p,this._renderer._useNormalMaterial=!1),this},d.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},d.default.prototype.texture=function(p){return this._assert3d("texture"),d.default._validateParameters("texture",arguments),p.gifProperties&&p._animateGif(this),this._renderer.drawMode=v.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=p,this._renderer._setProperty("_doFill",!0),this},d.default.prototype.textureMode=function(p){p!==v.IMAGE&&p!==v.NORMAL?console.warn("You tried to set ".concat(p," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=p},d.default.prototype.textureWrap=function(p){var f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:p,u=(this._renderer.textureWrapX=p,this._renderer.textureWrapY=f,!0),c=!1,m=void 0;try{for(var b,S=this._renderer.textures.values()[Symbol.iterator]();!(u=(b=S.next()).done);u=!0)b.value.setWrapMode(p,f)}catch(w){c=!0,m=w}finally{try{u||S.return==null||S.return()}finally{if(c)throw m}}},d.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var p=arguments.length,f=new Array(p),u=0;u<p;u++)f[u]=arguments[u];return d.default._validateParameters("normalMaterial",f),this._renderer.drawMode=v.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},d.default.prototype.ambientMaterial=function(p,f,u){this._assert3d("ambientMaterial"),d.default._validateParameters("ambientMaterial",arguments);var c=d.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=c._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},d.default.prototype.emissiveMaterial=function(p,f,u,c){this._assert3d("emissiveMaterial"),d.default._validateParameters("emissiveMaterial",arguments);var m=d.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=m._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},d.default.prototype.specularMaterial=function(p,f,u,c){this._assert3d("specularMaterial"),d.default._validateParameters("specularMaterial",arguments);var m=d.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=m._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},d.default.prototype.shininess=function(p){return this._assert3d("shininess"),d.default._validateParameters("shininess",arguments),this._renderer._useShininess=p=p<1?1:p,this},d.default.RendererGL.prototype._applyColorBlend=function(p){var f=this.GL,u=this.drawMode===v.TEXTURE;return(u=this.userFillShader||this.userStrokeShader||this.userPointShader||u||this.curBlendMode!==v.BLEND||p[p.length-1]<1||this._isErasing)!==this._isBlending&&(u||this.curBlendMode!==v.BLEND&&this.curBlendMode!==v.ADD?f.enable(f.BLEND):f.disable(f.BLEND),f.depthMask(!0),this._isBlending=u),this._applyBlendMode(),p},d.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var p=this.GL;switch(this.curBlendMode){case v.BLEND:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case v.ADD:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE);break;case v.REMOVE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ZERO,p.ONE_MINUS_SRC_ALPHA);break;case v.MULTIPLY:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.DST_COLOR,p.ONE_MINUS_SRC_ALPHA);break;case v.SCREEN:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_COLOR);break;case v.EXCLUSION:p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.ONE_MINUS_DST_COLOR,p.ONE_MINUS_SRC_COLOR,p.ONE,p.ONE);break;case v.REPLACE:p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ZERO);break;case v.SUBTRACT:p.blendEquationSeparate(p.FUNC_REVERSE_SUBTRACT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case v.DARKEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case v.LIGHTEST:this.blendExt?(p.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,p.FUNC_ADD),p.blendFuncSeparate(p.ONE,p.ONE,p.ONE,p.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var x=d.default;g.default=x},{"../core/constants":262,"../core/main":273,"./p5.Texture":330,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.join":161,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],321:[function(i,_,g){i("core-js/modules/es.array.slice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.string.sub"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.math.hypot"),i("core-js/modules/es.string.sub"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(d,v){for(var x=0;x<v.length;x++){var p=v[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}h.default.prototype.camera=function(){var d;this._assert3d("camera");for(var v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return h.default._validateParameters("camera",x),(d=this._renderer._curCamera).camera.apply(d,x),this},h.default.prototype.perspective=function(){var d;this._assert3d("perspective");for(var v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return h.default._validateParameters("perspective",x),(d=this._renderer._curCamera).perspective.apply(d,x),this},h.default.prototype.ortho=function(){var d;this._assert3d("ortho");for(var v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return h.default._validateParameters("ortho",x),(d=this._renderer._curCamera).ortho.apply(d,x),this},h.default.prototype.frustum=function(){var d;this._assert3d("frustum");for(var v=arguments.length,x=new Array(v),p=0;p<v;p++)x[p]=arguments[p];return h.default._validateParameters("frustum",x),(d=this._renderer._curCamera).frustum.apply(d,x),this},h.default.prototype.createCamera=function(){this._assert3d("createCamera");var d=new h.default.Camera(this._renderer);return d._computeCameraDefaultSettings(),d._setDefaultCamera(),this._renderer._curCamera=d},h.default.Camera=function(){function d(p){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._renderer=p,this.cameraType="default",this.cameraMatrix=new h.default.Matrix,this.projMatrix=new h.default.Matrix,this.yScale=1}var v,x;return v=d,(x=[{key:"perspective",value:function(p,f,u,c){this.cameraType=0<arguments.length?"custom":"default",p===void 0?(p=this.defaultCameraFOV,this.cameraFOV=p):this.cameraFOV=this._renderer._pInst._toRadians(p),f===void 0&&(f=this.defaultAspectRatio),u===void 0&&(u=this.defaultCameraNear),c===void 0&&(c=this.defaultCameraFar),u<=1e-4&&(u=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),c<u&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=f,this.cameraNear=u,this.cameraFar=c,this.projMatrix=h.default.Matrix.identity(),p=1/Math.tan(this.cameraFOV/2);var m=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(p/f,0,0,0,0,-p*this.yScale,0,0,0,0,(c+u)*m,-1,0,0,2*c*u*m,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])}},{key:"ortho",value:function(p,f,u,c,m,b){p===void 0&&(p=-this._renderer.width/2),f===void 0&&(f=+this._renderer.width/2),u===void 0&&(u=-this._renderer.height/2),c===void 0&&(c=+this._renderer.height/2),m===void 0&&(m=0),b===void 0&&(b=Math.max(this._renderer.width,this._renderer.height)),this.cameraNear=m;var S=f-p,w=c-u,M=(this.cameraFar=b)-m,A=2/S,P=2/w*this.yScale,R=-2/M;f=-(f+p)/S,p=-(c+u)/w,S=-(b+m)/M,this.projMatrix=h.default.Matrix.identity(),this.projMatrix.set(A,0,0,0,0,-P,0,0,0,0,R,0,f,p,S,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"frustum",value:function(p,f,u,c,m,b){p===void 0&&(p=.05*-this._renderer.width),f===void 0&&(f=.05*+this._renderer.width),u===void 0&&(u=.05*+this._renderer.height),c===void 0&&(c=.05*-this._renderer.height),m===void 0&&(m=this.defaultCameraNear),b===void 0&&(b=this.defaultCameraFar),this.cameraNear=m;var S=f-p,w=c-u,M=(this.cameraFar=b)-m,A=2*m/S,P=2*m/w*this.yScale,R=-2*b*m/M;f=(f+p)/S,p=(c+u)/w,S=-(b+m)/M,this.projMatrix=h.default.Matrix.identity(),this.projMatrix.set(A,0,0,0,0,-P,0,0,f,p,S,-1,0,0,R,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"}},{key:"_rotateView",value:function(p,f,u,c){var m=this.centerX,b=this.centerY,S=this.centerZ,w=(m-=this.eyeX,b-=this.eyeY,S-=this.eyeZ,h.default.Matrix.identity(this._renderer._pInst));(p=(w.rotate(this._renderer._pInst._toRadians(p),f,u,c),[m*w.mat4[0]+b*w.mat4[4]+S*w.mat4[8],m*w.mat4[1]+b*w.mat4[5]+S*w.mat4[9],m*w.mat4[2]+b*w.mat4[6]+S*w.mat4[10]]))[0]+=this.eyeX,p[1]+=this.eyeY,p[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,p[0],p[1],p[2],this.upX,this.upY,this.upZ)}},{key:"pan",value:function(p){var f=this._getLocalAxes();this._rotateView(p,f.y[0],f.y[1],f.y[2])}},{key:"tilt",value:function(p){var f=this._getLocalAxes();this._rotateView(p,f.x[0],f.x[1],f.x[2])}},{key:"lookAt",value:function(p,f,u){this.camera(this.eyeX,this.eyeY,this.eyeZ,p,f,u,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(p,f,u,c,m,b,S,w,M){return p===void 0&&(p=this.defaultEyeX,f=this.defaultEyeY,u=this.defaultEyeZ,c=p,m=f,w=1,M=S=b=0),this.eyeX=p,this.eyeY=f,this.eyeZ=u,c!==void 0&&(this.centerX=c,this.centerY=m,this.centerZ=b),S!==void 0&&(this.upX=S,this.upY=w,this.upZ=M),c=this._getLocalAxes(),this.cameraMatrix.set(c.x[0],c.y[0],c.z[0],0,c.x[1],c.y[1],c.z[1],0,c.x[2],c.y[2],c.z[2],0,0,0,0,1),m=-p,this.cameraMatrix.translate([m,-f,-u]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this}},{key:"move",value:function(p,f,u){p=[(c=this._getLocalAxes()).x[0]*p,c.x[1]*p,c.x[2]*p],f=[c.y[0]*f,c.y[1]*f,c.y[2]*f];var c=[c.z[0]*u,c.z[1]*u,c.z[2]*u];this.camera(this.eyeX+p[0]+f[0]+c[0],this.eyeY+p[1]+f[1]+c[1],this.eyeZ+p[2]+f[2]+c[2],this.centerX+p[0]+f[0]+c[0],this.centerY+p[1]+f[1]+c[1],this.centerZ+p[2]+f[2]+c[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(p,f,u){var c=p-this.eyeX,m=f-this.eyeY,b=u-this.eyeZ;this.camera(p,f,u,this.centerX+c,this.centerY+m,this.centerZ+b,this.upX,this.upY,this.upZ)}},{key:"set",value:function(p){for(var f=0,u=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType"];f<u.length;f++){var c=u[f];this[c]=p[c]}this.cameraMatrix=p.cameraMatrix.copy(),this.projMatrix=p.projMatrix.copy(),this._isActive()&&(this._renderer.uMVMatrix.mat4=this.cameraMatrix.mat4.slice(),this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())}},{key:"slerp",value:function(p,f,u){var c,m,b,S,w,M,A,P,R,k,L,B,I,F,z,G,N,O;u===0?this.set(p):u===1?this.set(f):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=p.projMatrix.mat4[0]*Math.pow(f.projMatrix.mat4[0]/p.projMatrix.mat4[0],u),this.projMatrix.mat4[5]=p.projMatrix.mat4[5]*Math.pow(f.projMatrix.mat4[5]/p.projMatrix.mat4[5],u),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),S=new h.default.Vector(p.eyeX,p.eyeY,p.eyeZ),w=new h.default.Vector(f.eyeX,f.eyeY,f.eyeZ),G=new h.default.Vector(p.centerX,p.centerY,p.centerZ),O=new h.default.Vector(f.centerX,f.centerY,f.centerZ),b=h.default.Vector.dist(S,G),c=h.default.Vector.dist(w,O),c=b*Math.pow(c/b,u),b=h.default.Vector.sub(S,w),m=1,1e-6<(N=(F=S.copy().sub(w).sub(G).add(O)).magSq())&&(m=h.default.Vector.dot(b,F)/N,m=Math.max(0,Math.min(m,1))),b=h.default.Vector.lerp(h.default.Vector.lerp(S,G,m),h.default.Vector.lerp(w,O,m),u),F=p.cameraMatrix.createSubMatrix3x3(),N=f.cameraMatrix.createSubMatrix3x3(),S=F.column(2),G=N.column(2),w=F.column(1),O=N.column(1),p=new h.default.Vector,f=new h.default.Vector,M=new h.default.Vector,A=new h.default.Vector,1-(P=.5*((F=(N=N.mult3x3(F.copy().transpose3x3())).diagonal())[0]+F[1]+F[2]-1))<1e-7?(p.set(h.default.Vector.lerp(S,G,u)).normalize(),M.set(p).mult(m*c).add(b),A.set(p).mult((m-1)*c).add(b),f.set(h.default.Vector.lerp(w,O,u)).normalize()):(G=1/(1-P),O=Math.max(F[0],F[1],F[2]),B=N.mat3[1]+N.mat3[3],I=N.mat3[2]+N.mat3[6],z=N.mat3[5]+N.mat3[7],O=O===F[0]?(k=.5*B*(G/=R=Math.sqrt((F[0]-P)*G)),L=.5*I*G,.5*(N.mat3[7]-N.mat3[5])/R):O===F[1]?(L=.5*z*(G/=k=Math.sqrt((F[1]-P)*G)),R=.5*B*G,.5*(N.mat3[2]-N.mat3[6])/k):(R=.5*I*(G/=L=Math.sqrt((F[2]-P)*G)),k=.5*z*G,.5*(N.mat3[3]-N.mat3[1])/L),B=u*Math.atan2(O,P),I=Math.cos(B),F=Math.sin(B),(O=new h.default.Matrix("mat3",[I+(z=1-I)*R*R,z*(G=R*k)-F*L,z*(N=L*R)+F*k,z*G+F*L,I+z*k*k,z*(u=k*L)-F*R,z*N-F*k,z*u+F*R,I+z*L*L])).multiplyVec3(S,p),M.set(p).mult(m*c).add(b),A.set(p).mult((m-1)*c).add(b),O.multiplyVec3(w,f)),this.camera(M.x,M.y,M.z,A.x,A.y,A.z,f.x,f.y,f.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)}},{key:"copy",value:function(){var p=new h.default.Camera(this._renderer);return p.cameraFOV=this.cameraFOV,p.aspectRatio=this.aspectRatio,p.eyeX=this.eyeX,p.eyeY=this.eyeY,p.eyeZ=this.eyeZ,p.centerX=this.centerX,p.centerY=this.centerY,p.centerZ=this.centerZ,p.upX=this.upX,p.upY=this.upY,p.upZ=this.upZ,p.cameraNear=this.cameraNear,p.cameraFar=this.cameraFar,p.cameraType=this.cameraType,p.cameraMatrix=this.cameraMatrix.copy(),p.projMatrix=this.projMatrix.copy(),p}},{key:"_getLocalAxes",value:function(){var p,f=this.eyeX-this.centerX,u=this.eyeY-this.centerY,c=this.eyeZ-this.centerZ,m=((m=Math.sqrt(f*f+u*u+c*c))!==0&&(f/=m,u/=m,c/=m),this.upX),b=(M=this.upY)*c-(A=this.upZ)*u,S=-m*c+A*f,w=m*u-M*f,M=(m=u*w-c*S,-f*w+c*b),A=f*S-u*b;return(p=((p=Math.sqrt(b*b+S*S+w*w))!==0&&(b/=p,S/=p,w/=p),Math.sqrt(m*m+M*M+A*A)))!==0&&(m/=p,M/=p,A/=p),{x:[b,S,w],y:[m,M,A],z:[f,u,c]}}},{key:"_orbit",value:function(p,f,u){var c=this.eyeX-this.centerX,m=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,S=Math.hypot(c,m,b),w=(c=new h.default.Vector(c,m,b).normalize(),m=new h.default.Vector(this.upX,this.upY,this.upZ).normalize(),b=new h.default.Vector.cross(m,c).normalize(),new h.default.Vector.cross(b,m));(S=(S*=Math.pow(10,u))<this.cameraNear?this.cameraNear:S)>this.cameraFar&&(S=this.cameraFar),u=Math.acos(Math.max(-1,Math.min(1,h.default.Vector.dot(c,m))))+f,f=p,(u<=0||u>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),m.mult(Math.cos(u)),w.mult(Math.cos(f)*Math.sin(u)),b.mult(Math.sin(f)*Math.sin(u)),c.set(m).add(w).add(b),this.eyeX=S*c.x+this.centerX,this.eyeY=S*c.y+this.centerY,this.eyeZ=S*c.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(p,f,u){var c=this.eyeX-this.centerX,m=this.eyeY-this.centerY,b=this.eyeZ-this.centerZ,S=Math.hypot(c,m,b),w=(c=new h.default.Vector(c,m,b).normalize(),m=new h.default.Vector(this.upX,this.upY,this.upZ),b=new h.default.Vector.cross(m,c).normalize(),new h.default.Vector.cross(c,b)),M=Math.atan2(f,p),A=(M=(w.mult(Math.sin(M)),b.mult(Math.cos(M)).add(w),Math.sqrt(p*p+f*f)),w=new h.default.Vector.cross(c,b),p=((S=(S*=Math.pow(10,u))<this.cameraNear?this.cameraNear:S)>this.cameraFar&&(S=this.cameraFar),Math.cos(M)),f=Math.sin(M),(u=m.dot(c))*p+(M=m.dot(b))*f);u=-u*f+M*p,M=m.dot(w),m.x=A*c.x+u*b.x+M*w.x,m.y=A*c.y+u*b.y+M*w.y,m.z=A*c.z+u*b.z+M*w.z,b.mult(-f),c.mult(p).add(b).mult(S),this.camera(c.x+this.centerX,c.y+this.centerY,c.z+this.centerZ,this.centerX,this.centerY,this.centerZ,m.x,m.y,m.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&l(v.prototype,x),d}(),h.default.prototype.setCamera=function(d){this._renderer._curCamera=d,this._renderer.uPMatrix.set(d.projMatrix.mat4[0],d.projMatrix.mat4[1],d.projMatrix.mat4[2],d.projMatrix.mat4[3],d.projMatrix.mat4[4],d.projMatrix.mat4[5],d.projMatrix.mat4[6],d.projMatrix.mat4[7],d.projMatrix.mat4[8],d.projMatrix.mat4[9],d.projMatrix.mat4[10],d.projMatrix.mat4[11],d.projMatrix.mat4[12],d.projMatrix.mat4[13],d.projMatrix.mat4[14],d.projMatrix.mat4[15])},i=h.default.Camera,g.default=i},{"../core/main":273,"core-js/modules/es.array.slice":164,"core-js/modules/es.math.hypot":169,"core-js/modules/es.string.sub":198}],322:[function(i,_,g){function h(k){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(k)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.reflect.get"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint8-clamped-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.reflect.get"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint8-clamped-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var l=(R=i("../core/main"))&&R.__esModule?R:{default:R},d=function(k){if(k&&k.__esModule)return k;if(k===null||u(k)!=="object"&&typeof k!="function")return{default:k};var L=function(){var G;return typeof WeakMap!="function"?null:(G=new WeakMap,G)}();if(L&&L.has(k))return L.get(k);var B,I={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(B in k){var z;Object.prototype.hasOwnProperty.call(k,B)&&((z=F?Object.getOwnPropertyDescriptor(k,B):null)&&(z.get||z.set)?Object.defineProperty(I,B,z):I[B]=k[B])}return I.default=k,L&&L.set(k,I),I}(i("../core/constants")),v=i("./p5.Texture"),x=i("./p5.RendererGL");function p(k,L){return function(B){if(Array.isArray(B))return B}(k)||function(B,I){if(Symbol.iterator in Object(B)||Object.prototype.toString.call(B)==="[object Arguments]"){var F=[],z=!0,G=!1,N=void 0;try{for(var O,H=B[Symbol.iterator]();!(z=(O=H.next()).done)&&(F.push(O.value),!I||F.length!==I);z=!0);}catch(q){G=!0,N=q}finally{try{z||H.return==null||H.return()}finally{if(G)throw N}}return F}}(k,L)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(k,L,B){return L in k?Object.defineProperty(k,L,{value:B,enumerable:!0,configurable:!0,writable:!0}):k[L]=B,k}function u(k){return(u=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(L){return h(L)}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":h(L)})(k)}function c(k,L){if(!(k instanceof L))throw new TypeError("Cannot call a class as a function")}function m(k,L){for(var B=0;B<L.length;B++){var I=L[B];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(k,I.key,I)}}function b(k,L,B){L&&m(k.prototype,L)}function S(k,L,B){return(S=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(I,F,z){if(I=function(G,N){for(;!Object.prototype.hasOwnProperty.call(G,N)&&(G=M(G))!==null;);return G}(I,F))return(I=Object.getOwnPropertyDescriptor(I,F)).get?I.get.call(z):I.value})(k,L,B||k)}function w(k,L){return(w=Object.setPrototypeOf||function(B,I){return B.__proto__=I,B})(k,L)}function M(k){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)})(k)}var A=function(k){var L=I;if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(k&&k.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),k&&w(L,k);var B=function(F){return function(){var z,G=M(F);if(z=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(z=M(this).constructor,Reflect.construct(G,arguments,z)):G.apply(this,arguments),G=this,!z||u(z)!=="object"&&typeof z!="function"){if(G!==void 0)return G;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return z}}(I);function I(F){var z;return c(this,I),(z=B.call(this,F.target._renderer)).fbo=F,z.yScale=-1,z}return b(I,[{key:"_computeCameraDefaultSettings",value:function(){S(M(I.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultEyeZ=this.fbo.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_resize",value:function(){this.cameraType==="default"?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this.fbo.width/this.fbo.height)}}]),I}(l.default.Camera),P=(l.default.FramebufferCamera=A,function(){function k(L,B){c(this,k),this.framebuffer=L,this.property=B}return b(k,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),k}()),R=(l.default.FramebufferTexture=P,function(){function k(L){var B=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(c(this,k),this.target=L,this.target._renderer.framebuffers.add(this),this.pixels=[],this.format=B.format||d.UNSIGNED_BYTE,this.channels=B.channels||(L._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=B.depth===void 0||B.depth,this.depthFormat=B.depthFormat||d.FLOAT,this.textureFiltering=B.textureFiltering||d.LINEAR,B.antialias===void 0?this.antialiasSamples=L._renderer._pInst._glAttributes.antialias?2:0:typeof B.antialias=="number"?this.antialiasSamples=B.antialias:this.antialiasSamples=B.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&L.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),B.width&&B.height?(this.width=B.width,this.height=B.height,this.autoSized=!1):(B.width===void 0!=(B.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=L.width,this.height=L.height,this.autoSized=!0),this.density=B.density||L.pixelDensity(),B=L._renderer.GL,this.gl=B,this._checkIfFormatsAvailable(),this.framebuffer=B.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=B.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures(),L=this.target._renderer._curCamera,this.defaultCamera=this.createCamera(),this.target._renderer._curCamera=L}return b(k,[{key:"resize",value:function(L,B){this.autoSized=!1,this.width=L,this.height=B,this._handleResize()}},{key:"pixelDensity",value:function(L){if(!L)return this.density;this.autoSized=!1,this.density=L,this._handleResize()}},{key:"autoSized",value:function(L){if(L===void 0)return this.autoSized;this.autoSized=L,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var L=this.gl;(L=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!L.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,v.checkWebGLCapabilities)(this.target._renderer))).float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!L.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),L.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var L=this.gl,B=(this._updateSize(),L.getParameter(L.TEXTURE_BINDING_2D)),I=L.getParameter(L.FRAMEBUFFER_BINDING);if(!(z=L.createTexture()))throw new Error("Unable to create color texture");L.bindTexture(L.TEXTURE_2D,z);var F=this._glColorFormat();if(L.texImage2D(L.TEXTURE_2D,0,F.internalFormat,this.width*this.density,this.height*this.density,0,F.format,F.type,null),this.colorTexture=z,L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,z,0),this.useDepth){var z;if(!(z=L.createTexture()))throw new Error("Unable to create depth texture");var G=this._glDepthFormat();L.bindTexture(L.TEXTURE_2D,z),L.texImage2D(L.TEXTURE_2D,0,G.internalFormat,this.width*this.density,this.height*this.density,0,G.format,G.type,null),L.framebufferTexture2D(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.TEXTURE_2D,z,0),this.depthTexture=z}this.antialias&&(this.colorRenderbuffer=L.createRenderbuffer(),L.bindRenderbuffer(L.RENDERBUFFER,this.colorRenderbuffer),L.renderbufferStorageMultisample(L.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,L.getParameter(L.MAX_SAMPLES))),F.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(G=this._glDepthFormat(),this.depthRenderbuffer=L.createRenderbuffer(),L.bindRenderbuffer(L.RENDERBUFFER,this.depthRenderbuffer),L.renderbufferStorageMultisample(L.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,L.getParameter(L.MAX_SAMPLES))),G.internalFormat,this.width*this.density,this.height*this.density)),L.bindFramebuffer(L.FRAMEBUFFER,this.aaFramebuffer),L.framebufferRenderbuffer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new P(this,"depthTexture"),z=L.NEAREST,this.depthP5Texture=new l.default.Texture(this.target._renderer,this.depth,{minFilter:z,magFilter:z}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new P(this,"colorTexture"),F=this.textureFiltering===d.LINEAR?L.LINEAR:L.NEAREST,this.colorP5Texture=new l.default.Texture(this.target._renderer,this.color,{glMinFilter:F,glMagFilter:F}),this.target._renderer.textures.set(this.color,this.colorP5Texture),L.bindTexture(L.TEXTURE_2D,B),L.bindFramebuffer(L.FRAMEBUFFER,I)}},{key:"_glColorFormat",value:function(){var L,B,I=this.gl,F=this.format===d.FLOAT?I.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?I.HALF_FLOAT:I.getExtension("OES_texture_half_float").HALF_FLOAT_OES:I.UNSIGNED_BYTE,z=this.channels===d.RGBA?I.RGBA:I.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(f(B={},I.FLOAT,f({},I.RGBA,I.RGBA32F)),f(B,I.HALF_FLOAT,f({},I.RGBA,I.RGBA16F)),f(B,I.UNSIGNED_BYTE,(f(L={},I.RGBA,I.RGBA8),f(L,I.RGB,I.RGB8),L)),B[F][z]):this.format===d.HALF_FLOAT?I.RGBA:z,format:z,type:F}}},{key:"_glDepthFormat",value:function(){var L=this.gl,B=this.depthFormat===d.FLOAT?L.FLOAT:L.UNSIGNED_INT,I=L.DEPTH_COMPONENT;return{internalFormat:L=this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?L.DEPTH_COMPONENT32F:L.DEPTH_COMPONENT24:L.DEPTH_COMPONENT,format:I,type:B}}},{key:"_updateSize",value:function(){this.autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this.autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var L=this.color,B=this.depth,I=this.colorRenderbuffer,F=this.depthRenderbuffer;this._deleteTexture(L),B&&this._deleteTexture(B),L=this.gl,I&&L.deleteRenderbuffer(I),F&&L.deleteRenderbuffer(F),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var L=new A(this);return L._computeCameraDefaultSettings(),L._setDefaultCamera(),this.target._renderer._curCamera=L}},{key:"_deleteTexture",value:function(L){this.gl.deleteTexture(L.rawTexture()),this.target._renderer.textures.delete(L)}},{key:"remove",value:function(){var L=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),L.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&L.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&L.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&L.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){var L=this.gl;this.prevFramebuffer=L.getParameter(L.FRAMEBUFFER_BINDING),this.antialias?L.bindFramebuffer(L.FRAMEBUFFER,this.aaFramebuffer):L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),this.prevViewport=L.getParameter(L.VIEWPORT),L.viewport(0,0,this.width*this.density,this.height*this.density),this.target.push(),this.target.setCamera(this.defaultCamera),this.target._renderer.uMVMatrix.set(this.target._renderer._curCamera.cameraMatrix.mat4[0],this.target._renderer._curCamera.cameraMatrix.mat4[1],this.target._renderer._curCamera.cameraMatrix.mat4[2],this.target._renderer._curCamera.cameraMatrix.mat4[3],this.target._renderer._curCamera.cameraMatrix.mat4[4],this.target._renderer._curCamera.cameraMatrix.mat4[5],this.target._renderer._curCamera.cameraMatrix.mat4[6],this.target._renderer._curCamera.cameraMatrix.mat4[7],this.target._renderer._curCamera.cameraMatrix.mat4[8],this.target._renderer._curCamera.cameraMatrix.mat4[9],this.target._renderer._curCamera.cameraMatrix.mat4[10],this.target._renderer._curCamera.cameraMatrix.mat4[11],this.target._renderer._curCamera.cameraMatrix.mat4[12],this.target._renderer._curCamera.cameraMatrix.mat4[13],this.target._renderer._curCamera.cameraMatrix.mat4[14],this.target._renderer._curCamera.cameraMatrix.mat4[15])}},{key:"end",value:function(){var L=this.gl;if(this.antialias){L.bindFramebuffer(L.READ_FRAMEBUFFER,this.aaFramebuffer),L.bindFramebuffer(L.DRAW_FRAMEBUFFER,this.framebuffer);var B=[[L.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]];this.useDepth&&B.push([L.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var I=0,F=B;I<F.length;I++){var z=(G=p(F[I],2))[0],G=G[1];L.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,z,G)}}L.bindFramebuffer(L.FRAMEBUFFER,this.prevFramebuffer),L.viewport.apply(L,function(N){return function(O){if(Array.isArray(O)){for(var H=0,q=new Array(O.length);H<O.length;H++)q[H]=O[H];return q}}(N)||function(O){if(Symbol.iterator in Object(O)||Object.prototype.toString.call(O)==="[object Arguments]")return Array.from(O)}(N)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(this.prevViewport)),this.target.pop()}},{key:"draw",value:function(L){this.begin(),L(),this.end()}},{key:"loadPixels",value:function(){var L=this.gl,B=L.getParameter(L.FRAMEBUFFER_BINDING),I=(L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,x.readPixelsWebGL)(this.pixels,L,this.framebuffer,0,0,this.width*this.density,this.height*this.density,I.format,I.type),L.bindFramebuffer(L.FRAMEBUFFER,B)}},{key:"get",value:function(L,B,I,F){l.default._validateParameters("p5.Framebuffer.get",arguments);var z=this._glColorFormat();if(L===void 0&&B===void 0)B=L=0,I=this.width,F=this.height;else if(I===void 0&&F===void 0)return(L<0||B<0||L>=this.width||B>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),L=this.target.constrain(L,0,this.width-1),B=this.target.constrain(B,0,this.height-1)),(0,x.readPixelWebGL)(this.gl,this.framebuffer,L*this.density,B*this.density,z.format,z.type);L=this.target.constrain(L,0,this.width-1),B=this.target.constrain(B,0,this.height-1),I=this.target.constrain(I,1,this.width-L),F=this.target.constrain(F,1,this.height-B);for(var G=(0,x.readPixelsWebGL)(void 0,this.gl,this.framebuffer,L*this.density,B*this.density,I*this.density,F*this.density,z.format,z.type),N=new Uint8ClampedArray(I*F*this.density*this.density*4),O=(N.fill(255),z.type===this.gl.RGB?3:4),H=0;H<F*this.density;H++)for(var q=0;q<I*this.density;q++)for(var K=0;K<4;K++){var ne,ee=4*(H*I*this.density+q)+K;K<O&&(ne=O==4?ee:(H*I*this.density+q)*O+K,N[ee]=G[ne])}return(L=new l.default.Image(I*this.density,F*this.density)).imageData=L.canvas.getContext("2d").createImageData(L.width,L.height),L.imageData.data.set(N),L.pixels=L.imageData.data,L.updatePixels(),this.density!==1&&L.resize(I,F),L}},{key:"updatePixels",value:function(){var L=this.gl,B=(this.colorP5Texture.bindTexture(),this._glColorFormat()),I=B.format===L.RGBA?4:3,F=(I=this.width*this.height*this.density*this.density*I,B.type===L.UNSIGNED_BYTE?Uint8Array:Float32Array);if(!(this.pixels instanceof F)||this.pixels.length!==I)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");L.texImage2D(L.TEXTURE_2D,0,B.internalFormat,this.width*this.density,this.height*this.density,0,B.format,B.type,this.pixels),this.colorP5Texture.unbindTexture(),this.prevFramebuffer=L.getParameter(L.FRAMEBUFFER_BINDING),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(L.clearDepth(1),L.clear(L.DEPTH_BUFFER_BIT)),this.end()):(L.bindFramebuffer(L.FRAMEBUFFER,this.framebuffer),this.useDepth&&(L.clearDepth(1),L.clear(L.DEPTH_BUFFER_BIT)),L.bindFramebuffer(L.FRAMEBUFFER,this.prevFramebuffer))}}]),k}());i=l.default.Framebuffer=R,g.default=i},{"../core/constants":262,"../core/main":273,"./p5.RendererGL":328,"./p5.Texture":330,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.reflect.get":183,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.typed-array.uint8-clamped-array":233,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],323:[function(i,_,g){i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.string.sub"),i("core-js/modules/web.dom-collections.for-each"),i("core-js/modules/es.array.for-each"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.string.sub"),i("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(d,v){for(var x=0;x<v.length;x++){var p=v[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}h.default.Geometry=function(){function d(p,f,u){if(this instanceof d)return this.vertices=[],this.lineVertices=[],this.lineTangentsIn=[],this.lineTangentsOut=[],this.lineSides=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=[],this.detailX=p!==void 0?p:1,this.detailY=f!==void 0?f:1,this.dirtyFlags={},u instanceof Function&&u.call(this),this;throw new TypeError("Cannot call a class as a function")}var v,x;return v=d,(x=[{key:"reset",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"computeFaces",value:function(){this.faces.length=0;for(var p,f,u,c=this.detailX+1,m=0;m<this.detailY;m++)for(var b=0;b<this.detailX;b++)f=(m+1)*c+b+1,this.faces.push([m*c+b,p=m*c+b+1,u=(m+1)*c+b]),this.faces.push([u,p,f]);return this}},{key:"_getFaceNormal",value:function(p){p=this.faces[p];var f=this.vertices[p[0]],u=this.vertices[p[1]],c=(p=this.vertices[p[2]],u=h.default.Vector.sub(u,f),p=h.default.Vector.sub(p,f),f=h.default.Vector.cross(u,p),h.default.Vector.mag(f));return(u=c/(h.default.Vector.mag(u)*h.default.Vector.mag(p)))===0||isNaN(u)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),f):(1<u&&(u=1),f.mult(Math.asin(u)/c))}},{key:"computeNormals",value:function(){for(var p=this,f=this.vertexNormals,u=this.vertices,c=this.faces,m=f.length=0;m<u.length;++m)f.push(new h.default.Vector);for(c.forEach(function(b,S){for(var w=p._getFaceNormal(S),M=0;M<3;++M){var A=b[M];f[A].add(w)}}),m=0;m<u.length;++m)f[m].normalize();return this}},{key:"averageNormals",value:function(){for(var p=0;p<=this.detailY;p++){var f=this.detailX+1,u=h.default.Vector.add(this.vertexNormals[p*f],this.vertexNormals[p*f+this.detailX]);u=h.default.Vector.div(u,2),this.vertexNormals[p*f]=u,this.vertexNormals[p*f+this.detailX]=u}return this}},{key:"averagePoleNormals",value:function(){for(var p=new h.default.Vector(0,0,0),f=0;f<this.detailX;f++)p.add(this.vertexNormals[f]);p=h.default.Vector.div(p,this.detailX);for(var u=0;u<this.detailX;u++)this.vertexNormals[u]=p;p=new h.default.Vector(0,0,0);for(var c=this.vertices.length-1;c>this.vertices.length-1-this.detailX;c--)p.add(this.vertexNormals[c]);p=h.default.Vector.div(p,this.detailX);for(var m=this.vertices.length-1;m>this.vertices.length-1-this.detailX;m--)this.vertexNormals[m]=p;return this}},{key:"_makeTriangleEdges",value:function(){for(var p=this.edges.length=0;p<this.faces.length;p++)this.edges.push([this.faces[p][0],this.faces[p][1]]),this.edges.push([this.faces[p][1],this.faces[p][2]]),this.edges.push([this.faces[p][2],this.faces[p][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.length=0,this.lineTangentsIn.length=0,this.lineTangentsOut.length=0,this.lineSides.length=0;for(var p,f=1<this.edges.length&&this.edges[0][0]===this.edges[this.edges.length-1][1],u=!1,c=0;c<this.edges.length;c++){var m=this.edges[c-1],b=this.edges[c],S=this.vertices[b[0]],w=this.vertices[b[1]],M=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*b[0],4*(b[0]+1)):[0,0,0,0],A=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*b[1],4*(b[1]+1)):[0,0,0,0],P=w.copy().sub(S).normalize(),R=0<P.magSq();R&&this._addSegment(S,w,M,A,P),0<c&&m[1]===b[0]?(p&&R&&P.dot(p)<1-1e-8&&this._addJoin(S,p,P,M),!R||u||f||(this._addCap(S,P.copy().mult(-1),M),u=!0)):(u=!1,R&&(!f||0<c)&&(this._addCap(S,P.copy().mult(-1),M),u=!0),p&&(!f||c<this.edges.length-1)&&(this._addCap(this.vertices[m[1]],p,M),p=void 0)),c===this.edges.length-1&&(f?this._addJoin(w,P,this.vertices[this.edges[0][1]].copy().sub(w).normalize(),A):this._addCap(w,P,A)),R&&(p=P)}return this}},{key:"_addSegment",value:function(p,f,u,c,m){p=p.array(),f=f.array();var b=m.array();this.lineSides.push(1,-1,1,1,-1,-1);for(var S=0,w=[this.lineTangentsIn,this.lineTangentsOut];S<w.length;S++)w[S].push(b,b,b,b,b,b);return this.lineVertices.push(p,p,f,f,p,f),this.lineVertexColors.push(u,u,c,c,u,c),this}},{key:"_addCap",value:function(p,f,u){for(var c=p.array(),m=f.array(),b=[0,0,0],S=0;S<6;S++)this.lineVertices.push(c),this.lineTangentsIn.push(m),this.lineTangentsOut.push(b),this.lineVertexColors.push(u);return this.lineSides.push(-1,-2,2,2,1,-1),this}},{key:"_addJoin",value:function(p,f,u,c){for(var m=p.array(),b=f.array(),S=u.array(),w=0;w<12;w++)this.lineVertices.push(m),this.lineTangentsIn.push(b),this.lineTangentsOut.push(S),this.lineVertexColors.push(c);for(var M=0,A=[-1,1];M<A.length;M++){var P=A[M];this.lineSides.push(P,2*P,3*P,P,3*P,0)}return this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var p=this.vertices[0].copy(),f=this.vertices[0].copy(),u=0;u<this.vertices.length;u++)p.x=Math.max(p.x,this.vertices[u].x),f.x=Math.min(f.x,this.vertices[u].x),p.y=Math.max(p.y,this.vertices[u].y),f.y=Math.min(f.y,this.vertices[u].y),p.z=Math.max(p.z,this.vertices[u].z),f.z=Math.min(f.z,this.vertices[u].z);for(var c=h.default.Vector.lerp(p,f,.5),m=h.default.Vector.sub(p,f),b=200/Math.max(Math.max(m.x,m.y),m.z),S=0;S<this.vertices.length;S++)this.vertices[S].sub(c),this.vertices[S].mult(b)}return this}}])&&l(v.prototype,x),d}(),i=h.default.Geometry,g.default=i},{"../core/main":273,"core-js/modules/es.array.for-each":156,"core-js/modules/es.array.slice":164,"core-js/modules/es.string.sub":198,"core-js/modules/web.dom-collections.for-each":235}],324:[function(i,_,g){i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(x,p){for(var f=0;f<p.length;f++){var u=p[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(x,u.key,u)}}var d=Array,v=function(x){return Array.isArray(x)};typeof Float32Array<"u"&&(d=Float32Array,v=function(x){return Array.isArray(x)||x instanceof Float32Array}),h.default.Matrix=function(){function x(){var c=this,m=x;if(c instanceof m)return arguments.length&&((c=arguments.length-1)<0||arguments.length<=c?void 0:arguments[c])instanceof h.default&&(this.p5=(m=arguments.length-1)<0||arguments.length<=m?void 0:arguments[m]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new d([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new d([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var p,f,u;return p=x,u=[{key:"identity",value:function(c){return new h.default.Matrix(c)}}],(f=[{key:"set",value:function(c){return c instanceof h.default.Matrix?this.mat4=c.mat4:v(c)?this.mat4=c:arguments.length===16&&(this.mat4[0]=c,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this}},{key:"get",value:function(){return new h.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var c;return this.mat3!==void 0?((c=new h.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],c.mat3[1]=this.mat3[1],c.mat3[2]=this.mat3[2],c.mat3[3]=this.mat3[3],c.mat3[4]=this.mat3[4],c.mat3[5]=this.mat3[5],c.mat3[6]=this.mat3[6],c.mat3[7]=this.mat3[7],c.mat3[8]=this.mat3[8]):((c=new h.default.Matrix(this.p5)).mat4[0]=this.mat4[0],c.mat4[1]=this.mat4[1],c.mat4[2]=this.mat4[2],c.mat4[3]=this.mat4[3],c.mat4[4]=this.mat4[4],c.mat4[5]=this.mat4[5],c.mat4[6]=this.mat4[6],c.mat4[7]=this.mat4[7],c.mat4[8]=this.mat4[8],c.mat4[9]=this.mat4[9],c.mat4[10]=this.mat4[10],c.mat4[11]=this.mat4[11],c.mat4[12]=this.mat4[12],c.mat4[13]=this.mat4[13],c.mat4[14]=this.mat4[14],c.mat4[15]=this.mat4[15]),c}},{key:"transpose",value:function(c){var m,b,S,w,M,A;return c instanceof h.default.Matrix?(m=c.mat4[1],b=c.mat4[2],S=c.mat4[3],w=c.mat4[6],M=c.mat4[7],A=c.mat4[11],this.mat4[0]=c.mat4[0],this.mat4[1]=c.mat4[4],this.mat4[2]=c.mat4[8],this.mat4[3]=c.mat4[12],this.mat4[4]=m,this.mat4[5]=c.mat4[5],this.mat4[6]=c.mat4[9],this.mat4[7]=c.mat4[13],this.mat4[8]=b,this.mat4[9]=w,this.mat4[10]=c.mat4[10],this.mat4[11]=c.mat4[14],this.mat4[12]=S,this.mat4[13]=M,this.mat4[14]=A,this.mat4[15]=c.mat4[15]):v(c)&&(m=c[1],b=c[2],S=c[3],w=c[6],M=c[7],A=c[11],this.mat4[0]=c[0],this.mat4[1]=c[4],this.mat4[2]=c[8],this.mat4[3]=c[12],this.mat4[4]=m,this.mat4[5]=c[5],this.mat4[6]=c[9],this.mat4[7]=c[13],this.mat4[8]=b,this.mat4[9]=w,this.mat4[10]=c[10],this.mat4[11]=c[14],this.mat4[12]=S,this.mat4[13]=M,this.mat4[14]=A,this.mat4[15]=c[15]),this}},{key:"invert",value:function(c){c instanceof h.default.Matrix?(m=c.mat4[0],b=c.mat4[1],S=c.mat4[2],w=c.mat4[3],M=c.mat4[4],A=c.mat4[5],P=c.mat4[6],R=c.mat4[7],k=c.mat4[8],L=c.mat4[9],B=c.mat4[10],I=c.mat4[11],F=c.mat4[12],z=c.mat4[13],G=c.mat4[14],N=c.mat4[15]):v(c)&&(m=c[0],b=c[1],S=c[2],w=c[3],M=c[4],A=c[5],P=c[6],R=c[7],k=c[8],L=c[9],B=c[10],I=c[11],F=c[12],z=c[13],G=c[14],N=c[15]);var m,b,S,w,M,A,P,R,k,L,B,I,F,z,G,N,O=m*P-S*M,H=m*R-w*M,q=b*P-S*A,K=b*R-w*A,ne=S*R-w*P,ee=k*z-L*F,se=k*G-B*F,me=k*N-I*F,X=L*G-B*z,Z=L*N-I*z,ie=B*N-I*G,ye=(c=m*A-b*M)*ie-O*Z+H*X+q*me-K*se+ne*ee;return ye?(this.mat4[0]=(A*ie-P*Z+R*X)*(ye=1/ye),this.mat4[1]=(S*Z-b*ie-w*X)*ye,this.mat4[2]=(z*ne-G*K+N*q)*ye,this.mat4[3]=(B*K-L*ne-I*q)*ye,this.mat4[4]=(P*me-M*ie-R*se)*ye,this.mat4[5]=(m*ie-S*me+w*se)*ye,this.mat4[6]=(G*H-F*ne-N*O)*ye,this.mat4[7]=(k*ne-B*H+I*O)*ye,this.mat4[8]=(M*Z-A*me+R*ee)*ye,this.mat4[9]=(b*me-m*Z-w*ee)*ye,this.mat4[10]=(F*K-z*H+N*c)*ye,this.mat4[11]=(L*H-k*K-I*c)*ye,this.mat4[12]=(A*se-M*X-P*ee)*ye,this.mat4[13]=(m*X-b*se+S*ee)*ye,this.mat4[14]=(z*O-F*q-G*c)*ye,this.mat4[15]=(k*q-L*O+B*c)*ye,this):null}},{key:"invert3x3",value:function(){var c=this.mat3[0],m=this.mat3[1],b=this.mat3[2],S=this.mat3[3],w=this.mat3[4],M=this.mat3[5],A=this.mat3[6],P=this.mat3[7],R=this.mat3[8],k=R*w-M*P,L=-R*S+M*A,B=P*S-w*A,I=c*k+m*L+b*B;return I?(this.mat3[0]=k*(I=1/I),this.mat3[1]=(-R*m+b*P)*I,this.mat3[2]=(M*m-b*w)*I,this.mat3[3]=L*I,this.mat3[4]=(R*c-b*A)*I,this.mat3[5]=(-M*c+b*S)*I,this.mat3[6]=B*I,this.mat3[7]=(-P*c+m*A)*I,this.mat3[8]=(w*c-m*S)*I,this):null}},{key:"transpose3x3",value:function(c){var m=(c=c===void 0?this.mat3:c)[1],b=c[2],S=c[5];return this.mat3[0]=c[0],this.mat3[1]=c[3],this.mat3[2]=c[6],this.mat3[3]=m,this.mat3[4]=c[4],this.mat3[5]=c[7],this.mat3[6]=b,this.mat3[7]=S,this.mat3[8]=c[8],this}},{key:"inverseTranspose",value:function(c){if(c=c.mat4,this.mat3===void 0?h.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=c[0],this.mat3[1]=c[1],this.mat3[2]=c[2],this.mat3[3]=c[4],this.mat3[4]=c[5],this.mat3[5]=c[6],this.mat3[6]=c[8],this.mat3[7]=c[9],this.mat3[8]=c[10]),c=this.invert3x3())c.transpose3x3(this.mat3);else for(var m=0;m<9;m++)this.mat3[m]=0;return this}},{key:"determinant",value:function(){var c=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],m=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],b=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],S=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],w=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],M=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],A=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],P=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],R=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],k=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],L=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return c*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-m*L+b*k+S*R-w*P+M*A}},{key:"mult",value:function(c){var m;if(c===this||c===this.mat4)m=this.copy().mat4;else if(c instanceof h.default.Matrix)m=c.mat4;else if(v(c))m=c;else{if(arguments.length!==16)return;m=arguments}c=this.mat4[0];var b=this.mat4[1],S=this.mat4[2],w=this.mat4[3];return this.mat4[0]=c*m[0]+b*m[4]+S*m[8]+w*m[12],this.mat4[1]=c*m[1]+b*m[5]+S*m[9]+w*m[13],this.mat4[2]=c*m[2]+b*m[6]+S*m[10]+w*m[14],this.mat4[3]=c*m[3]+b*m[7]+S*m[11]+w*m[15],c=this.mat4[4],b=this.mat4[5],S=this.mat4[6],w=this.mat4[7],this.mat4[4]=c*m[0]+b*m[4]+S*m[8]+w*m[12],this.mat4[5]=c*m[1]+b*m[5]+S*m[9]+w*m[13],this.mat4[6]=c*m[2]+b*m[6]+S*m[10]+w*m[14],this.mat4[7]=c*m[3]+b*m[7]+S*m[11]+w*m[15],c=this.mat4[8],b=this.mat4[9],S=this.mat4[10],w=this.mat4[11],this.mat4[8]=c*m[0]+b*m[4]+S*m[8]+w*m[12],this.mat4[9]=c*m[1]+b*m[5]+S*m[9]+w*m[13],this.mat4[10]=c*m[2]+b*m[6]+S*m[10]+w*m[14],this.mat4[11]=c*m[3]+b*m[7]+S*m[11]+w*m[15],c=this.mat4[12],b=this.mat4[13],S=this.mat4[14],w=this.mat4[15],this.mat4[12]=c*m[0]+b*m[4]+S*m[8]+w*m[12],this.mat4[13]=c*m[1]+b*m[5]+S*m[9]+w*m[13],this.mat4[14]=c*m[2]+b*m[6]+S*m[10]+w*m[14],this.mat4[15]=c*m[3]+b*m[7]+S*m[11]+w*m[15],this}},{key:"apply",value:function(c){var m;if(c===this||c===this.mat4)m=this.copy().mat4;else if(c instanceof h.default.Matrix)m=c.mat4;else if(v(c))m=c;else{if(arguments.length!==16)return;m=arguments}var b=(c=this.mat4)[0],S=c[4],w=c[8],M=c[12];return c[0]=m[0]*b+m[1]*S+m[2]*w+m[3]*M,c[4]=m[4]*b+m[5]*S+m[6]*w+m[7]*M,c[8]=m[8]*b+m[9]*S+m[10]*w+m[11]*M,c[12]=m[12]*b+m[13]*S+m[14]*w+m[15]*M,b=c[1],S=c[5],w=c[9],M=c[13],c[1]=m[0]*b+m[1]*S+m[2]*w+m[3]*M,c[5]=m[4]*b+m[5]*S+m[6]*w+m[7]*M,c[9]=m[8]*b+m[9]*S+m[10]*w+m[11]*M,c[13]=m[12]*b+m[13]*S+m[14]*w+m[15]*M,b=c[2],S=c[6],w=c[10],M=c[14],c[2]=m[0]*b+m[1]*S+m[2]*w+m[3]*M,c[6]=m[4]*b+m[5]*S+m[6]*w+m[7]*M,c[10]=m[8]*b+m[9]*S+m[10]*w+m[11]*M,c[14]=m[12]*b+m[13]*S+m[14]*w+m[15]*M,b=c[3],S=c[7],w=c[11],M=c[15],c[3]=m[0]*b+m[1]*S+m[2]*w+m[3]*M,c[7]=m[4]*b+m[5]*S+m[6]*w+m[7]*M,c[11]=m[8]*b+m[9]*S+m[10]*w+m[11]*M,c[15]=m[12]*b+m[13]*S+m[14]*w+m[15]*M,this}},{key:"scale",value:function(c,m,b){return c instanceof h.default.Vector?(m=c.y,b=c.z,c=c.x):c instanceof Array&&(m=c[1],b=c[2],c=c[0]),this.mat4[0]*=c,this.mat4[1]*=c,this.mat4[2]*=c,this.mat4[3]*=c,this.mat4[4]*=m,this.mat4[5]*=m,this.mat4[6]*=m,this.mat4[7]*=m,this.mat4[8]*=b,this.mat4[9]*=b,this.mat4[10]*=b,this.mat4[11]*=b,this}},{key:"rotate",value:function(c,m,b,S){m instanceof h.default.Vector?(b=m.y,S=m.z,m=m.x):m instanceof Array&&(b=m[1],S=m[2],m=m[0]);var w=(m*=1/(w=Math.sqrt(m*m+b*b+S*S)),b*=1/w,S*=1/w,this.mat4[0]),M=this.mat4[1],A=this.mat4[2],P=this.mat4[3],R=this.mat4[4],k=this.mat4[5],L=this.mat4[6],B=this.mat4[7],I=this.mat4[8],F=this.mat4[9],z=this.mat4[10],G=this.mat4[11],N=Math.sin(c),O=1-(c=Math.cos(c)),H=m*m*O+c,q=b*m*O+S*N,K=S*m*O-b*N,ne=m*b*O-S*N,ee=b*b*O+c,se=S*b*O+m*N,me=m*S*O+b*N;return b=b*S*O-m*N,m=S*S*O+c,this.mat4[0]=w*H+R*q+I*K,this.mat4[1]=M*H+k*q+F*K,this.mat4[2]=A*H+L*q+z*K,this.mat4[3]=P*H+B*q+G*K,this.mat4[4]=w*ne+R*ee+I*se,this.mat4[5]=M*ne+k*ee+F*se,this.mat4[6]=A*ne+L*ee+z*se,this.mat4[7]=P*ne+B*ee+G*se,this.mat4[8]=w*me+R*b+I*m,this.mat4[9]=M*me+k*b+F*m,this.mat4[10]=A*me+L*b+z*m,this.mat4[11]=P*me+B*b+G*m,this}},{key:"translate",value:function(c){var m=c[0],b=c[1];c=c[2]||0,this.mat4[12]+=this.mat4[0]*m+this.mat4[4]*b+this.mat4[8]*c,this.mat4[13]+=this.mat4[1]*m+this.mat4[5]*b+this.mat4[9]*c,this.mat4[14]+=this.mat4[2]*m+this.mat4[6]*b+this.mat4[10]*c,this.mat4[15]+=this.mat4[3]*m+this.mat4[7]*b+this.mat4[11]*c}},{key:"rotateX",value:function(c){this.rotate(c,1,0,0)}},{key:"rotateY",value:function(c){this.rotate(c,0,1,0)}},{key:"rotateZ",value:function(c){this.rotate(c,0,0,1)}},{key:"perspective",value:function(c,m,b,S){c=1/Math.tan(c/2);var w=1/(b-S);return this.mat4[0]=c/m,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=c,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(S+b)*w,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*S*b*w,this.mat4[15]=0,this}},{key:"ortho",value:function(c,m,b,S,w,M){var A=1/(c-m),P=1/(b-S),R=1/(w-M);return this.mat4[0]=-2*A,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*P,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*R,this.mat4[11]=0,this.mat4[12]=(c+m)*A,this.mat4[13]=(S+b)*P,this.mat4[14]=(M+w)*R,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(c,m,b,S){var w=new Array(4),M=this.mat4;return w[0]=M[0]*c+M[4]*m+M[8]*b+M[12]*S,w[1]=M[1]*c+M[5]*m+M[9]*b+M[13]*S,w[2]=M[2]*c+M[6]*m+M[10]*b+M[14]*S,w[3]=M[3]*c+M[7]*m+M[11]*b+M[15]*S,w}},{key:"multiplyPoint",value:function(c){var m=c.x,b=c.y;return c=c.z,m=this.multiplyVec4(m,b,c,1),new h.default.Vector(m[0],m[1],m[2])}},{key:"multiplyAndNormalizePoint",value:function(c){var m=c.x,b=c.y;return c=c.z,(m=this.multiplyVec4(m,b,c,1))[0]/=m[3],m[1]/=m[3],m[2]/=m[3],new h.default.Vector(m[0],m[1],m[2])}},{key:"multiplyDirection",value:function(c){var m=c.x,b=c.y;return c=c.z,m=this.multiplyVec4(m,b,c,0),new h.default.Vector(m[0],m[1],m[2])}},{key:"mult3x3",value:function(c){var m;if(c===this||c===this.mat3)m=this.copy().mat3;else if(c instanceof h.default.Matrix)m=c.mat3;else if(v(c))m=c;else{if(arguments.length!==9)return;m=arguments}c=this.mat3[0];var b=this.mat3[1],S=this.mat3[2];return this.mat3[0]=c*m[0]+b*m[3]+S*m[6],this.mat3[1]=c*m[1]+b*m[4]+S*m[7],this.mat3[2]=c*m[2]+b*m[5]+S*m[8],c=this.mat3[3],b=this.mat3[4],S=this.mat3[5],this.mat3[3]=c*m[0]+b*m[3]+S*m[6],this.mat3[4]=c*m[1]+b*m[4]+S*m[7],this.mat3[5]=c*m[2]+b*m[5]+S*m[8],c=this.mat3[6],b=this.mat3[7],S=this.mat3[8],this.mat3[6]=c*m[0]+b*m[3]+S*m[6],this.mat3[7]=c*m[1]+b*m[4]+S*m[7],this.mat3[8]=c*m[2]+b*m[5]+S*m[8],this}},{key:"column",value:function(c){return new h.default.Vector(this.mat3[c],this.mat3[c+3],this.mat3[c+6])}},{key:"row",value:function(c){return new h.default.Vector(this.mat3[3*c],this.mat3[3*c+1],this.mat3[3*c+2])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(c,m){return(m=m===void 0?c.copy():m).x=this.row(0).dot(c),m.y=this.row(1).dot(c),m.z=this.row(2).dot(c),m}},{key:"createSubMatrix3x3",value:function(){var c=new h.default.Matrix("mat3");return c.mat3[0]=this.mat4[0],c.mat3[1]=this.mat4[1],c.mat3[2]=this.mat4[2],c.mat3[3]=this.mat4[4],c.mat3[4]=this.mat4[5],c.mat3[5]=this.mat4[6],c.mat3[6]=this.mat4[8],c.mat3[7]=this.mat4[9],c.mat3[8]=this.mat4[10],c}}])&&l(p.prototype,f),u&&l(p,u),x}(),i=h.default.Matrix,g.default=i},{"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.to-string":180,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229}],325:[function(i,_,g){function h(l,d){for(var v=0;v<d.length;v++){var x=d[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(l,x.key,x)}}i("core-js/modules/es.array.map"),i("core-js/modules/es.array.map"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,(i=(i=i("../core/main"))&&i.__esModule?i:{default:i}).default.RenderBuffer=function(){function l(x,p,f,u,c,m){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.size=x,this.src=p,this.dst=f,this.attr=u,this._renderer=c,this.map=m}var d,v;return d=l,(v=[{key:"_prepareBuffer",value:function(x,p){var f,u,c,m=p.attributes,b=this._renderer.GL,S=x.model||x;(m=m[this.attr])&&(f=x[this.dst],0<(u=S[this.src]).length?((c=!f)&&(x[this.dst]=f=b.createBuffer()),b.bindBuffer(b.ARRAY_BUFFER,f),!c&&S.dirtyFlags[this.src]===!1||(c=(x=this.map)?x(u):u,this._renderer._bindBuffer(f,b.ARRAY_BUFFER,c),S.dirtyFlags[this.src]=!1),p.enableAttrib(m,this.size)):(x=m.location)!==-1&&this._renderer.registerEnabled[x]&&(b.disableVertexAttribArray(x),this._renderer.registerEnabled[x]=!1))}}])&&h(d.prototype,v),l}(),i=i.default.RenderBuffer,g.default=i},{"../core/main":273,"core-js/modules/es.array.map":163}],326:[function(i,_,g){function h(u){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function l(u){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(u)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.map"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(f=i("../core/main"))&&f.__esModule?f:{default:f},v=function(u){if(u&&u.__esModule)return u;if(u===null||l(u)!=="object"&&typeof u!="function")return{default:u};var c=function(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,M)}();if(c&&c.has(u))return c.get(u);var m,b={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in u){var w;Object.prototype.hasOwnProperty.call(u,m)&&((w=S?Object.getOwnPropertyDescriptor(u,m):null)&&(w.get||w.set)?Object.defineProperty(b,m,w):b[m]=u[m])}return b.default=u,c&&c.set(u,b),b}(i("../core/constants"));function x(u){return function(c){if(Array.isArray(c)){for(var m=0,b=new Array(c.length);m<c.length;m++)b[m]=c[m];return b}}(u)||function(c){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]")return Array.from(c)}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i("./p5.RenderBuffer"),d.default.RendererGL.prototype.beginShape=function(u){return this.immediateMode.shapeMode=u!==void 0?u:v.TESS,this.immediateMode.geometry.reset(),this};var p={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},f=(d.default.RendererGL.prototype.vertex=function(u,c){if(this.immediateMode.shapeMode===v.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var m in p){var b=p[m];(m=this.immediateMode.geometry[m]).push.apply(m,x(m.slice(m.length-3*b,m.length-2*b)).concat(x(m.slice(m.length-b,m.length))))}var S,w,M=S=w=0,A=(arguments.length===3?M=arguments[2]:arguments.length===4?(S=arguments[2],w=arguments[3]):arguments.length===5&&(M=arguments[2],S=arguments[3],w=arguments[4]),new d.default.Vector(u,c,M));return this.immediateMode.geometry.vertices.push(A),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),A=this.curFillColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexColors.push(A[0],A[1],A[2],A[3]),A=this.curStrokeColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexStrokeColors.push(A[0],A[1],A[2],A[3]),this.textureMode===v.IMAGE&&(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(S/=this._tex.width,w/=this._tex.height):!this.isProcessingVertices&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(S,w),this.immediateMode._bezierVertex[0]=u,this.immediateMode._bezierVertex[1]=c,this.immediateMode._bezierVertex[2]=M,this.immediateMode._quadraticVertex[0]=u,this.immediateMode._quadraticVertex[1]=c,this.immediateMode._quadraticVertex[2]=M,this},d.default.RendererGL.prototype.normal=function(u,c,m){return u instanceof d.default.Vector?this._currentNormal=u:this._currentNormal=new d.default.Vector(u,c,m),this},d.default.RendererGL.prototype.endShape=function(u,c,m,b,S,w){return this.immediateMode.shapeMode===v.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),this.isProcessingVertices=!1,this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},d.default.RendererGL.prototype._processVertices=function(u){var c;this.immediateMode.geometry.vertices.length!==0&&(c=this._doStroke,u=u===v.CLOSE,c&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,u),this.immediateMode.geometry._edgesToVertices()),c=this.immediateMode.shapeMode===v.TESS,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||c)&&this.immediateMode.shapeMode!==v.LINES&&this._tesselateShape())},d.default.RendererGL.prototype._calculateEdges=function(u,c,m){var b=[],S=0;switch(u){case v.TRIANGLE_STRIP:for(S=0;S<c.length-2;S++)b.push([S,S+1]),b.push([S,S+2]);b.push([S,S+1]);break;case v.TRIANGLE_FAN:for(S=1;S<c.length-1;S++)b.push([0,S]),b.push([S,S+1]);b.push([0,c.length-1]);break;case v.TRIANGLES:for(S=0;S<c.length-2;S+=3)b.push([S,S+1]),b.push([S+1,S+2]),b.push([S+2,S]);break;case v.LINES:for(S=0;S<c.length-1;S+=2)b.push([S,S+1]);break;case v.QUADS:for(S=0;S<c.length-5;S+=6)b.push([S,S+1]),b.push([S+1,S+2]),b.push([S+3,S+5]),b.push([S+4,S+5]);break;case v.QUAD_STRIP:for(S=0;S<c.length-2;S+=2)b.push([S,S+1]),b.push([S,S+2]),b.push([S+1,S+3]);b.push([S,S+1]);break;default:for(S=0;S<c.length-1;S++)b.push([S,S+1])}return m&&b.push([c.length-1,0]),b},d.default.RendererGL.prototype._tesselateShape=function(){for(var u=this,c=(this.immediateMode.shapeMode=v.TRIANGLES,[this._flatten(this.immediateMode.geometry.vertices.map(function(M,A){return[M.x,M.y,M.z,u.immediateMode.geometry.uvs[2*A],u.immediateMode.geometry.uvs[2*A+1],u.immediateMode.geometry.vertexColors[4*A],u.immediateMode.geometry.vertexColors[4*A+1],u.immediateMode.geometry.vertexColors[4*A+2],u.immediateMode.geometry.vertexColors[4*A+3],u.immediateMode.geometry.vertexNormals[A].x,u.immediateMode.geometry.vertexNormals[A].y,u.immediateMode.geometry.vertexNormals[A].z]}))]),m=this._triangulate(c),b=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),S=0,w=m.length;S<w;S+=d.default.RendererGL.prototype.tessyVertexSize)b.push.apply(b,x(m.slice(S+5,S+9))),this.normal.apply(this,x(m.slice(S+9,S+12))),this.vertex.apply(this,x(m.slice(S,S+5)));this.immediateMode.geometry.vertexColors=b},d.default.RendererGL.prototype._drawImmediateFill=function(){var u=this.GL,c=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,this._getImmediateFillShader()),m=(this._setFillUniforms(c),!0),b=!1,S=void 0;try{for(var w,M=this.immediateMode.buffers.fill[Symbol.iterator]();!(m=(w=M.next()).done);m=!0)w.value._prepareBuffer(this.immediateMode.geometry,c)}catch(A){b=!0,S=A}finally{try{m||M.return==null||M.return()}finally{if(b)throw S}}this.immediateMode.shapeMode!==v.LINE_STRIP&&this.immediateMode.shapeMode!==v.LINES||(this.immediateMode.shapeMode=v.TRIANGLE_FAN),this.immediateMode.shapeMode===v.QUADS?this.immediateMode.shapeMode=v.TRIANGLES:this.immediateMode.shapeMode===v.QUAD_STRIP&&(this.immediateMode.shapeMode=v.TRIANGLE_STRIP),this._applyColorBlend(this.curFillColor),u.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),c.unbindShader()},d.default.RendererGL.prototype._drawImmediateStroke=function(){var u=this.GL,c=u.isEnabled(u.CULL_FACE),m=(u.disable(u.CULL_FACE),this._getImmediateStrokeShader()),b=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._setStrokeUniforms(m),!0),S=!1,w=void 0;try{for(var M,A=this.immediateMode.buffers.stroke[Symbol.iterator]();!(b=(M=A.next()).done);b=!0)M.value._prepareBuffer(this.immediateMode.geometry,m)}catch(P){S=!0,w=P}finally{try{b||A.return==null||A.return()}finally{if(S)throw w}}this._applyColorBlend(this.curStrokeColor),u.drawArrays(u.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),c&&u.enable(u.CULL_FACE),m.unbindShader()},d.default.RendererGL);g.default=f},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.map":163,"core-js/modules/es.array.slice":164,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],327:[function(i,_,g){function h(f){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(f)}function l(f){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(u){return h(u)}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":h(u)})(f)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.some"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.uint16-array"),i("core-js/modules/es.typed-array.uint32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.some"),i("core-js/modules/es.object.keys"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.uint16-array"),i("core-js/modules/es.typed-array.uint32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var d=(p=i("../core/main"))&&p.__esModule?p:{default:p},v=(i("./p5.RendererGL"),i("./p5.RenderBuffer"),function(f){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var u=function(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,w)}();if(u&&u.has(f))return u.get(f);var c,m={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(c in f){var S;Object.prototype.hasOwnProperty.call(f,c)&&((S=b?Object.getOwnPropertyDescriptor(f,c):null)&&(S.get||S.set)?Object.defineProperty(m,c,S):m[c]=f[c])}return m.default=f,u&&u.set(f,m),m}(i("../core/constants"))),x=0,p=(d.default.RendererGL.prototype._initBufferDefaults=function(f){var u;return this._freeBuffers(f),1e3<++x&&(u=Object.keys(this.retainedMode.geometry)[0],delete this.retainedMode.geometry[u],x--),this.retainedMode.geometry[f]={}},d.default.RendererGL.prototype._freeBuffers=function(f){var u,c=this.retainedMode.geometry[f];function m(b){var S=!0,w=!1,M=void 0;try{for(var A,P=b[Symbol.iterator]();!(S=(A=P.next()).done);S=!0){var R=A.value;c[R.dst]&&(u.deleteBuffer(c[R.dst]),c[R.dst]=null)}}catch(k){w=!0,M=k}finally{try{S||P.return==null||P.return()}finally{if(w)throw M}}}c&&(delete this.retainedMode.geometry[f],x--,u=this.GL,c.indexBuffer&&u.deleteBuffer(c.indexBuffer),m(this.retainedMode.buffers.stroke),m(this.retainedMode.buffers.fill))},d.default.RendererGL.prototype.createBuffers=function(f,u){var c,m,b,S=this.GL,w=((f=this._initBufferDefaults(f)).model=u,f.indexBuffer);return u.faces.length?(w=w||(f.indexBuffer=S.createBuffer()),b=(m=(c=d.default.RendererGL.prototype._flatten(u.faces)).some(function(M){return 65535<M}))?Uint32Array:Uint16Array,this._bindBuffer(w,S.ELEMENT_ARRAY_BUFFER,c,b),f.indexBufferType=m?S.UNSIGNED_INT:S.UNSIGNED_SHORT,f.vertexCount=3*u.faces.length):(w&&(S.deleteBuffer(w),f.indexBuffer=null),f.vertexCount=u.vertices?u.vertices.length:0),f.lineVertexCount=u.lineVertices?u.lineVertices.length:0,f},d.default.RendererGL.prototype.drawBuffers=function(f){var u=this.GL,c=this.retainedMode.geometry[f];if(this._doFill){this._useVertexColor=0<c.model.vertexColors.length;var m=this._getRetainedFillShader(),b=(this._setFillUniforms(m),!0),S=!1,w=void 0;try{for(var M,A=this.retainedMode.buffers.fill[Symbol.iterator]();!(b=(M=A.next()).done);b=!0)M.value._prepareBuffer(c,m)}catch(I){S=!0,w=I}finally{try{b||A.return==null||A.return()}finally{if(S)throw w}}c.indexBuffer&&this._bindBuffer(c.indexBuffer,u.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(u.TRIANGLES,f),m.unbindShader()}if(this._doStroke&&0<c.lineVertexCount){S=u.isEnabled(u.CULL_FACE);var P=(u.disable(u.CULL_FACE),this._getRetainedStrokeShader()),R=(this._useLineColor=0<c.model.vertexStrokeColors.length,this._setStrokeUniforms(P),!0),k=(w=!1,void 0);try{for(var L,B=this.retainedMode.buffers.stroke[Symbol.iterator]();!(R=(L=B.next()).done);R=!0)L.value._prepareBuffer(c,P)}catch(I){w=!0,k=I}finally{try{R||B.return==null||B.return()}finally{if(w)throw k}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(u.TRIANGLES,f),S&&u.enable(u.CULL_FACE),P.unbindShader()}return this},d.default.RendererGL.prototype.drawBuffersScaled=function(f,u,c,m){var b=this.uMVMatrix.copy();try{this.uMVMatrix.scale(u,c,m),this.drawBuffers(f)}finally{this.uMVMatrix=b}},d.default.RendererGL.prototype._drawArrays=function(f,u){return this.GL.drawArrays(f,0,this.retainedMode.geometry[u].lineVertexCount),this},d.default.RendererGL.prototype._drawElements=function(f,u){u=this.retainedMode.geometry[u];var c=this.GL;if(u.indexBuffer){if(this._pInst.webglVersion!==v.WEBGL2&&u.indexBufferType===c.UNSIGNED_INT&&!c.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");c.drawElements(c.TRIANGLES,u.vertexCount,u.indexBufferType,0)}else c.drawArrays(f||c.TRIANGLES,0,u.vertexCount)},d.default.RendererGL.prototype._drawPoints=function(f,u){var c=this.GL,m=this._getImmediatePointShader();this._setPointUniforms(m),this._bindBuffer(u,c.ARRAY_BUFFER,this._vToNArray(f),Float32Array,c.STATIC_DRAW),m.enableAttrib(m.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),c.drawArrays(c.Points,0,f.length),m.unbindShader()},d.default.RendererGL);g.default=p},{"../core/constants":262,"../core/main":273,"./p5.RenderBuffer":325,"./p5.RendererGL":328,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.some":165,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.keys":179,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],328:[function(i,_,g){function h(F){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(F)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.copy-within"),i("core-js/modules/es.array.every"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.some"),i("core-js/modules/es.map"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.set"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.float64-array"),i("core-js/modules/es.typed-array.int16-array"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint16-array"),i("core-js/modules/es.typed-array.uint32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.concat"),i("core-js/modules/es.array.copy-within"),i("core-js/modules/es.array.every"),i("core-js/modules/es.array.fill"),i("core-js/modules/es.array.from"),i("core-js/modules/es.array.includes"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.array.some"),i("core-js/modules/es.map"),i("core-js/modules/es.object.assign"),i("core-js/modules/es.object.get-prototype-of"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.reflect.construct"),i("core-js/modules/es.regexp.to-string"),i("core-js/modules/es.set"),i("core-js/modules/es.string.includes"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.float32-array"),i("core-js/modules/es.typed-array.float64-array"),i("core-js/modules/es.typed-array.int16-array"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.uint16-array"),i("core-js/modules/es.typed-array.uint32-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.readPixelsWebGL=B,g.readPixelWebGL=I,g.default=void 0;var l=x(i("../core/main")),d=function(F){if(F&&F.__esModule)return F;if(F===null||p(F)!=="object"&&typeof F!="function")return{default:F};var z=function(){var q;return typeof WeakMap!="function"?null:(q=new WeakMap,q)}();if(z&&z.has(F))return z.get(F);var G,N={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(G in F){var H;Object.prototype.hasOwnProperty.call(F,G)&&((H=O?Object.getOwnPropertyDescriptor(F,G):null)&&(H.get||H.set)?Object.defineProperty(N,G,H):N[G]=F[G])}return N.default=F,z&&z.set(F,N),N}(i("../core/constants")),v=x(i("libtess"));function x(F){return F&&F.__esModule?F:{default:F}}function p(F){return(p=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(z){return h(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":h(z)})(F)}function f(F){return function(z){if(Array.isArray(z)){for(var G=0,N=new Array(z.length);G<z.length;G++)N[G]=z[G];return N}}(F)||function(z){if(Symbol.iterator in Object(z)||Object.prototype.toString.call(z)==="[object Arguments]")return Array.from(z)}(F)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(F,z){for(var G=0;G<z.length;G++){var N=z[G];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(F,N.key,N)}}function c(F,z){return(c=Object.setPrototypeOf||function(G,N){return G.__proto__=N,G})(F,z)}function m(F){return function(){var z,G,N=S(F);return z=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(z=S(this).constructor,Reflect.construct(N,arguments,z)):N.apply(this,arguments),N=this,!(G=z)||p(G)!=="object"&&typeof G!="function"?b(N):G}}function b(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function S(F){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(F)}function w(F,z){R+="#define STROKE_CAP_".concat(F," ").concat(z,`
`),A[d[F]]=z}function M(F,z){R+="#define STROKE_JOIN_".concat(F," ").concat(z,`
`),P[d[F]]=z}i("./p5.Shader"),i("./p5.Camera"),i("../core/p5.Renderer"),i("./p5.Matrix"),i("path");var A={},P={},R="",k=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`,L={immediateVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

varying vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`attribute vec3 aPosition;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

varying vec3 vVertexNormal;
varying highp vec2 vVertTexCoord;
varying vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));
  vVertTexCoord = aTexCoord;
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,normalFrag:`precision mediump float;
varying vec3 vVertexNormal;
void main(void) {
  gl_FragColor = vec4(vVertexNormal, 1.0);
}`,basicFrag:`precision mediump float;
varying vec4 vColor;
void main(void) {
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,lightVert:(i=(w("ROUND",0),w("PROJECT",1),w("SQUARE",2),M("ROUND",0),M("MITER",1),M("BEVEL",2),`precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];

uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  if (uSpecular)
    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);
  lr.diffuse = _lambertDiffuse(lightDir, normal);
  return lr;
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`))+`// include lighting.glgl

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`precision highp float;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

varying highp vec2 vVertTexCoord;
varying vec3 vDiffuseColor;
varying vec3 vSpecularColor;
varying vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    gl_FragColor = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? texture2D(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    gl_FragColor = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp float;
precision highp int;

attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;
attribute vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = uNormalMatrix * aNormal;
  vTexCoord = aTexCoord;

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,phongFrag:i+`// include lighting.glsl
precision highp float;
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

varying vec3 vNormal;
varying vec2 vTexCoord;
varying vec3 vViewPosition;
varying vec3 vAmbientColor;
varying vec4 vColor;

void main(void) {

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec4 baseColor = isTexture
    // Textures come in with premultiplied alpha. To apply tint and still have
    // premultiplied alpha output, we need to multiply the RGB channels by the
    // tint RGB, and all channels by the tint alpha.
    ? texture2D(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
    // Colors come in with unmultiplied alpha, so we need to multiply the RGB
    // channels by alpha to convert it to premultiplied alpha.
    : vec4(vColor.rgb * vColor.a, vColor.a);
  gl_FragColor = vec4(diffuse * baseColor.rgb + 
                    vAmbientColor * (
                      uHasSetAmbient ? uAmbientMatColor.rgb : baseColor.rgb
                    ) + 
                    specular * uSpecularMatColor.rgb + 
                    uEmissiveMatColor.rgb, baseColor.a);
}
`,fontVert:k+`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec2 pixelScale = vec2(
    1. / uModelViewMatrix[0][0],
    1. / uModelViewMatrix[1][1]
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:k+`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:R+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump float;
precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

attribute vec4 aPosition;
attribute vec3 aTangentIn;
attribute vec3 aTangentOut;
attribute float aSide;
attribute vec4 aVertexColor;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 posp = uModelViewMatrix * aPosition;
  vec4 posqIn = uModelViewMatrix * (aPosition + vec4(aTangentIn, 0));
  vec4 posqOut = uModelViewMatrix * (aPosition + vec4(aTangentOut, 0));

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // using a scale <1 moves the lines towards the camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float scale = mix(1., 0.995, facingCamera);

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  posp.xyz = posp.xyz * scale;
  posqIn.xyz = posqIn.xyz * scale;
  posqOut.xyz = posqOut.xyz * scale;

  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = p.xy;

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)
    // invert Y, projections in Processing invert Y
    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * uStrokeWeight / 2.) * curPerspScale,
          tangentIn,
          c + (side * normalOut * uStrokeWeight / 2.) * curPerspScale,
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * uStrokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * curPerspScale * uStrokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * curPerspScale * uStrokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * uStrokeWeight / 2.));
    } else {
      vMaxDist = uStrokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      uStrokeWeight * 0.5 * curPerspScale;
    vMaxDist = uStrokeWeight / 2.;
  }
  vPosition = vCenter + offset / curPerspScale;

  gl_Position.xy = p.xy + offset.xy;
  gl_Position.zw = p.zw;
  
  vColor = (uUseLineColor ? aVertexColor : uMaterialColor);
}
`,lineFrag:R+`precision mediump float;
precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;
uniform float uStrokeWeight;

varying vec4 vColor;
varying vec2 vTangent;
varying vec2 vCenter;
varying vec2 vPosition;
varying float vMaxDist;
varying float vCap;
varying float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

void main() {
  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      dot(vPosition - vCenter, vTangent) > 0.
    ) {
      discard;
    }
    // Use full area for PROJECT
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      distSquared(vPosition, vCenter) > uStrokeWeight * uStrokeWeight * 0.25
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-vTangent.y, vTangent.x);
      if (abs(dot(vPosition - vCenter, normal)) > vMaxDist) {
        discard;
      }
    }
    // Use full area for MITER
  }
  gl_FragColor = vec4(vColor.rgb, 1.) * vColor.a;
}
`,pointVert:`attribute vec3 aPosition;
uniform float uPointSize;
varying float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
void main() {
	vec4 positionVec4 =  vec4(aPosition, 1.0);
	gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
	gl_PointSize = uPointSize;
	vStrokeWeight = uPointSize;
}`,pointFrag:`precision mediump float;
precision mediump int;
uniform vec4 uMaterialColor;
varying float vStrokeWeight;

void main(){
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(mask > 0.98){
    discard;
  }

  gl_FragColor = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
}
`};function B(F,z,G,N,O,H,q,K,ne,ee){var se=z.getParameter(z.FRAMEBUFFER_BINDING),me=H*q*(G=(z.bindFramebuffer(z.FRAMEBUFFER,G),K===z.RGBA?4:3)),X=ne===z.UNSIGNED_BYTE?Uint8Array:Float32Array;if(F instanceof X&&F.length===me||(F=new X(me)),z.readPixels(N,ee?ee-O-q:O,H,q,K,ne,F),z.bindFramebuffer(z.FRAMEBUFFER,se),ee)for(var Z=Math.floor(q/2),ie=new X(H*G),ye=0;ye<Z;ye++){var fe=ye*H*4,$=(q-ye-1)*H*4;ie.set(F.subarray(fe,fe+4*H)),F.copyWithin(fe,$,$+4*H),F.set(ie,$)}return F}function I(F,z,G,N,O,H,q){var K=F.getParameter(F.FRAMEBUFFER_BINDING);return F.bindFramebuffer(F.FRAMEBUFFER,z),z=O===F.RGBA?4:3,z=new(H===F.UNSIGNED_BYTE?Uint8Array:Float32Array)(z),F.readPixels(G,q?q-N-1:N,1,1,O,H,z),F.bindFramebuffer(F.FRAMEBUFFER,K),Array.from(z)}l.default.prototype.setAttributes=function(F,z){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var G=!0;if(z!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[F]!==z&&(this._glAttributes[F]=z,G=!1)):F instanceof Object&&this._glAttributes!==F&&(this._glAttributes=F,G=!1),this._renderer.isP3D&&!G){if(!this._setupDone){for(var N in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(N))return void l.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},l.default.RendererGL=function(F){var z=N;if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(F&&F.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),F&&c(z,F);var G=m(N);function N(O,H,q,K){if(this instanceof N)return(O=G.call(this,O,H,q))._setAttributeDefaults(H),O._initContext(),O.isP3D=!0,O.GL=O.drawingContext,O._pInst._setProperty("drawingContext",O.drawingContext),O._isErasing=!1,O._enableLighting=!1,O.ambientLightColors=[],O.specularColors=[1,1,1],O.directionalLightDirections=[],O.directionalLightDiffuseColors=[],O.directionalLightSpecularColors=[],O.pointLightPositions=[],O.pointLightDiffuseColors=[],O.pointLightSpecularColors=[],O.spotLightPositions=[],O.spotLightDirections=[],O.spotLightDiffuseColors=[],O.spotLightSpecularColors=[],O.spotLightAngle=[],O.spotLightConc=[],O.drawMode=d.FILL,O.curFillColor=O._cachedFillStyle=[1,1,1,1],O.curAmbientColor=O._cachedFillStyle=[1,1,1,1],O.curSpecularColor=O._cachedFillStyle=[0,0,0,0],O.curEmissiveColor=O._cachedFillStyle=[0,0,0,0],O.curStrokeColor=O._cachedStrokeStyle=[0,0,0,1],O.curBlendMode=d.BLEND,O._cachedBlendMode=void 0,O.webglVersion===d.WEBGL2?O.blendExt=O.GL:O.blendExt=O.GL.getExtension("EXT_blend_minmax"),O._isBlending=!1,O._hasSetAmbient=!1,O._useSpecularMaterial=!1,O._useEmissiveMaterial=!1,O._useNormalMaterial=!1,O._useShininess=1,O._useLineColor=!1,O._useVertexColor=!1,O.registerEnabled=[],O._tint=[255,255,255,255],O.constantAttenuation=1,O.linearAttenuation=0,O.quadraticAttenuation=0,O.uMVMatrix=new l.default.Matrix,O.uPMatrix=new l.default.Matrix,O.uNMatrix=new l.default.Matrix("mat3"),O._currentNormal=new l.default.Vector(0,0,1),O._curCamera=new l.default.Camera(b(O)),O._curCamera._computeCameraDefaultSettings(),O._curCamera._setDefaultCamera(),O.prevTouches=[],O.zoomVelocity=0,O.rotateVelocity=new l.default.Vector(0,0),O.moveVelocity=new l.default.Vector(0,0),O.executeZoom=!1,O.executeRotateAndMove=!1,O._defaultLightShader=void 0,O._defaultImmediateModeShader=void 0,O._defaultNormalShader=void 0,O._defaultColorShader=void 0,O._defaultPointShader=void 0,O.userFillShader=void 0,O.userStrokeShader=void 0,O.userPointShader=void 0,O.retainedMode={geometry:{},buffers:{stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",b(O),O._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",b(O),O._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",b(O),O._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",b(O),O._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",b(O))],fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(O),O._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",b(O),O._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",b(O)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",b(O)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(O),O._flatten)],text:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(O),O._vToNArray),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(O),O._flatten)]}},O.immediateMode={geometry:new l.default.Geometry,shapeMode:d.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new l.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(O),O._vToNArray),new l.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",b(O),O._vToNArray),new l.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",b(O)),new l.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",b(O)),new l.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(O),O._flatten)],stroke:[new l.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",b(O),O._flatten),new l.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",b(O),O._flatten),new l.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",b(O),O._flatten),new l.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",b(O),O._flatten),new l.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",b(O))],point:O.GL.createBuffer()}},O.pointSize=5,O.curStrokeWeight=1,O.curStrokeCap=d.ROUND,O.curStrokeJoin=d.ROUND,O.textures=new Map,O.framebuffers=new Set,O.textureMode=d.IMAGE,O.textureWrapX=d.CLAMP,O.textureWrapY=d.CLAMP,O._tex=null,O._curveTightness=6,O._lookUpTableBezier=[],O._lookUpTableQuadratic=[],O._lutBezierDetail=0,O._lutQuadraticDetail=0,O.isProcessingVertices=!1,O._tessy=O._initTessy(),O.fontInfos={},O._curShader=void 0,O;throw new TypeError("Cannot call a class as a function")}return z=N,(F=[{key:"_setAttributeDefaults",value:function(O){var H={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};O._glAttributes===null?O._glAttributes=H:O._glAttributes=Object.assign(H,O._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var O=this.drawingContext;O.enable(O.DEPTH_TEST),O.depthFunc(O.LEQUAL),O.viewport(0,0,O.drawingBufferWidth,O.drawingBufferHeight),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_resetContext",value:function(O,H){var q,K=this.width,ne=this.height,ee=this.canvas.id,se=this._pInst instanceof l.default.Graphics;se?((q=this._pInst).canvas.parentNode.removeChild(q.canvas),q.canvas=document.createElement("canvas"),(q._pInst._userNode||document.body).appendChild(q.canvas),l.default.Element.call(q,q.canvas,q._pInst),q.width=K,q.height=ne):((q=this.canvas)&&q.parentNode.removeChild(q),(q=document.createElement("canvas")).id=ee,(this._pInst._userNode||document.body).appendChild(q),this._pInst.canvas=q,this.canvas=q),ee=new l.default.RendererGL(this._pInst.canvas,this._pInst,!se),this._pInst._setProperty("_renderer",ee),ee.resize(K,ne),ee._applyDefaults(),se||this._pInst._elements.push(ee),typeof H=="function"&&setTimeout(function(){H.apply(window._renderer,O)},0)}},{key:"_update",value:function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"background",value:function(){var O=(K=(K=this._pInst).color.apply(K,arguments)).levels[0]/255,H=K.levels[1]/255,q=K.levels[2]/255,K=K.levels[3]/255;this.clear(O,H,q,K)}},{key:"fill",value:function(O,H,q,K){var ne=l.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ne._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(O,H,q,K){var ne=l.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ne._array}},{key:"strokeCap",value:function(O){this.curStrokeCap=O}},{key:"strokeJoin",value:function(O){this.curStrokeJoin=O}},{key:"filter",value:function(O){l.default._friendlyError("filter() does not work in WEBGL mode")}},{key:"blendMode",value:function(O){O===d.DARKEST||O===d.LIGHTEST||O===d.ADD||O===d.BLEND||O===d.SUBTRACT||O===d.SCREEN||O===d.EXCLUSION||O===d.REPLACE||O===d.MULTIPLY||O===d.REMOVE?this.curBlendMode=O:O!==d.BURN&&O!==d.OVERLAY&&O!==d.HARD_LIGHT&&O!==d.SOFT_LIGHT&&O!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(O,H){this._isErasing||(this._applyBlendMode(d.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,O/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,H/255])}},{key:"noErase",value:function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))}},{key:"strokeWeight",value:function(O){this.curStrokeWeight!==O&&(this.pointSize=O,this.curStrokeWeight=O)}},{key:"_getPixel",value:function(O,H){var q=this.GL;return I(q,null,O,H,q.RGBA,q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var O,H,q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(O=this._pInst._pixelDensity,H=this.GL,q._setProperty("pixels",B(q.pixels,H,null,0,0,this.width*O,this.height*O,H.RGBA,H.UNSIGNED_BYTE,this.height*O)))}},{key:"updatePixels",value:function(){var O=this._getTempFramebuffer();O.pixels=this._pixelsState.pixels,O.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(O,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(O){return this.retainedMode.geometry[O]!==void 0}},{key:"resize",value:function(O,H){l.default.Renderer.prototype.resize.call(this,O,H),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var q=((O=this._pixelsState).pixels!==void 0&&O._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);H=!1,O=void 0;try{for(var K,ne=this.framebuffers[Symbol.iterator]();!(q=(K=ne.next()).done);q=!0)K.value._canvasSizeChanged()}catch(ee){H=!0,O=ee}finally{try{q||ne.return==null||ne.return()}finally{if(H)throw O}}}},{key:"clear",value:function(){var O=(arguments.length<=0?void 0:arguments[0])||0,H=(arguments.length<=1?void 0:arguments[1])||0,q=(arguments.length<=2?void 0:arguments[2])||0,K=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(O*K,H*K,q*K,K),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(O,H,q,K,ne,ee){arguments.length===16?l.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([O,H,0,0,q,K,0,0,0,0,1,0,ne,ee,0,1])}},{key:"translate",value:function(O,H,q){return O instanceof l.default.Vector&&(q=O.z,H=O.y,O=O.x),this.uMVMatrix.translate([O,H,q]),this}},{key:"scale",value:function(O,H,q){return this.uMVMatrix.scale(O,H,q),this}},{key:"rotate",value:function(O,H){return H===void 0?this.rotateZ(O):(l.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)}},{key:"rotateX",value:function(O){return this.rotate(O,1,0,0),this}},{key:"rotateY",value:function(O){return this.rotate(O,0,1,0),this}},{key:"rotateZ",value:function(O){return this.rotate(O,0,0,1),this}},{key:"push",value:function(){var O=l.default.Renderer.prototype.push.apply(this),H=O.properties;return H.uMVMatrix=this.uMVMatrix.copy(),H.uPMatrix=this.uPMatrix.copy(),H._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),H.ambientLightColors=this.ambientLightColors.slice(),H.specularColors=this.specularColors.slice(),H.directionalLightDirections=this.directionalLightDirections.slice(),H.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),H.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),H.pointLightPositions=this.pointLightPositions.slice(),H.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),H.pointLightSpecularColors=this.pointLightSpecularColors.slice(),H.spotLightPositions=this.spotLightPositions.slice(),H.spotLightDirections=this.spotLightDirections.slice(),H.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),H.spotLightSpecularColors=this.spotLightSpecularColors.slice(),H.spotLightAngle=this.spotLightAngle.slice(),H.spotLightConc=this.spotLightConc.slice(),H.userFillShader=this.userFillShader,H.userStrokeShader=this.userStrokeShader,H.userPointShader=this.userPointShader,H.pointSize=this.pointSize,H.curStrokeWeight=this.curStrokeWeight,H.curStrokeColor=this.curStrokeColor,H.curFillColor=this.curFillColor,H.curAmbientColor=this.curAmbientColor,H.curSpecularColor=this.curSpecularColor,H.curEmissiveColor=this.curEmissiveColor,H._hasSetAmbient=this._hasSetAmbient,H._useSpecularMaterial=this._useSpecularMaterial,H._useEmissiveMaterial=this._useEmissiveMaterial,H._useShininess=this._useShininess,H.constantAttenuation=this.constantAttenuation,H.linearAttenuation=this.linearAttenuation,H.quadraticAttenuation=this.quadraticAttenuation,H._enableLighting=this._enableLighting,H._useNormalMaterial=this._useNormalMaterial,H._tex=this._tex,H.drawMode=this.drawMode,H._currentNormal=this._currentNormal,H.curBlendMode=this.curBlendMode,O}},{key:"resetMatrix",value:function(){return this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this}},{key:"_getImmediateStrokeShader",value:function(){var O=this.userStrokeShader;return O&&O.isStrokeShader()?O:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getImmediateFillShader",value:function(){var O=this.userFillShader;if(this._useNormalMaterial&&(!O||!O.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!O||!O.isLightShader())return this._getLightShader()}else if(this._tex){if(!O||!O.isTextureShader())return this._getLightShader()}else if(!O)return this._getImmediateModeShader();return O}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var O=this.userFillShader;if(this._enableLighting){if(!O||!O.isLightShader())return this._getLightShader()}else if(this._tex){if(!O||!O.isTextureShader())return this._getLightShader()}else if(!O)return this._getColorShader();return O}},{key:"_getImmediatePointShader",value:function(){var O=this.userPointShader;return O&&O.isPointShader()?O:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new l.default.Shader(this,L.phongVert,L.phongFrag):this._defaultLightShader=new l.default.Shader(this,L.lightVert,L.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new l.default.Shader(this,L.immediateVert,L.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new l.default.Shader(this,L.normalVert,L.normalFrag)),this._defaultNormalShader}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new l.default.Shader(this,L.normalVert,L.basicFrag)),this._defaultColorShader}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new l.default.Shader(this,L.pointVert,L.pointFrag)),this._defaultPointShader}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new l.default.Shader(this,L.lineVert,L.lineFrag)),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new l.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+L.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+L.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(O,H){var q="";return this.webglVersion===d.WEBGL2&&(q+=`#version 300 es
#define WEBGL2
`),O==="vert"?q+=`#define VERTEX_SHADER
`:O==="frag"&&(q+=`#define FRAGMENT_SHADER
`),H&&(q+="precision ".concat(H,` float;
`)),q}},{key:"_getEmptyTexture",value:function(){var O;return this._emptyTexture||((O=new l.default.Image(1,1)).set(0,0,255),this._emptyTexture=new l.default.Texture(this,O)),this._emptyTexture}},{key:"getTexture",value:function(O){O instanceof l.default.Framebuffer&&(O=O.color);var H=this.textures.get(O);return H||(H=new l.default.Texture(this,O),this.textures.set(O,H),H)}},{key:"createFramebuffer",value:function(O){return new l.default.Framebuffer(this,O)}},{key:"_setStrokeUniforms",value:function(O){O.bindShader(),O.setUniform("uUseLineColor",this._useLineColor),O.setUniform("uMaterialColor",this.curStrokeColor),O.setUniform("uStrokeWeight",this.curStrokeWeight),O.setUniform("uStrokeCap",A[this.curStrokeCap]),O.setUniform("uStrokeJoin",P[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(O){O.bindShader(),O.setUniform("uUseVertexColor",this._useVertexColor),O.setUniform("uMaterialColor",this.curFillColor),O.setUniform("isTexture",!!this._tex),this._tex&&O.setUniform("uSampler",this._tex),O.setUniform("uTint",this._tint),O.setUniform("uHasSetAmbient",this._hasSetAmbient),O.setUniform("uAmbientMatColor",this.curAmbientColor),O.setUniform("uSpecularMatColor",this.curSpecularColor),O.setUniform("uEmissiveMatColor",this.curEmissiveColor),O.setUniform("uSpecular",this._useSpecularMaterial),O.setUniform("uEmissive",this._useEmissiveMaterial),O.setUniform("uShininess",this._useShininess),O.setUniform("uUseLighting",this._enableLighting);var H=this.pointLightDiffuseColors.length/3;O.setUniform("uPointLightCount",H),O.setUniform("uPointLightLocation",this.pointLightPositions),O.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),O.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),H=this.directionalLightDiffuseColors.length/3,O.setUniform("uDirectionalLightCount",H),O.setUniform("uLightingDirection",this.directionalLightDirections),O.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),O.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),H=this.ambientLightColors.length/3,O.setUniform("uAmbientLightCount",H),O.setUniform("uAmbientColor",this.ambientLightColors),H=this.spotLightDiffuseColors.length/3,O.setUniform("uSpotLightCount",H),O.setUniform("uSpotLightAngle",this.spotLightAngle),O.setUniform("uSpotLightConc",this.spotLightConc),O.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),O.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),O.setUniform("uSpotLightLocation",this.spotLightPositions),O.setUniform("uSpotLightDirection",this.spotLightDirections),O.setUniform("uConstantAttenuation",this.constantAttenuation),O.setUniform("uLinearAttenuation",this.linearAttenuation),O.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),O.bindTextures()}},{key:"_setPointUniforms",value:function(O){O.bindShader(),O.setUniform("uMaterialColor",this.curStrokeColor),O.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(O,H,q,K,ne){H=H||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(H,O),q!==void 0&&(O=new(K||Float32Array)(q),this.GL.bufferData(H,O,ne||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(O,H){return O.length===H.length&&O.every(function(q,K){return q===H[K]})}},{key:"_isTypedArray",value:function(O){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(H){return O instanceof H})}},{key:"_flatten",value:function(O){if(O.length===0)return[];var H;if(2e4<O.length){for(var q=[],K=O.slice(),ne=K.pop();Array.isArray(ne)?K.push.apply(K,f(ne)):q.push(ne),K.length&&(ne=K.pop())!==void 0;);return q.reverse(),q}return(H=[]).concat.apply(H,f(O))}},{key:"_vToNArray",value:function(O){var H=[],q=!0,K=!1,ne=void 0;try{for(var ee,se=O[Symbol.iterator]();!(q=(ee=se.next()).done);q=!0){var me=ee.value;H.push(me.x,me.y,me.z)}}catch(X){K=!0,ne=X}finally{try{q||se.return==null||se.return()}finally{if(K)throw ne}}return H}},{key:"_bezierCoefficients",value:function(O){var H=O*O,q=1-O,K=q*q;return[K*q,3*K*O,3*q*H,H*O]}},{key:"_quadraticCoefficients",value:function(O){var H=1-O;return[H*H,2*H*O,O*O]}},{key:"_bezierToCatmull",value:function(O){return[O[1],O[1]+(O[2]-O[0])/this._curveTightness,O[2]-(O[3]-O[1])/this._curveTightness,O[2]]}},{key:"_initTessy",value:function(){var O=new v.default.GluTesselator;return O.gluTessCallback(v.default.gluEnum.GLU_TESS_VERTEX_DATA,function(H,q){for(var K=0;K<H.length;K++)q.push(H[K])}),O.gluTessCallback(v.default.gluEnum.GLU_TESS_BEGIN,function(H){H!==v.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(H))}),O.gluTessCallback(v.default.gluEnum.GLU_TESS_ERROR,function(H){console.log("error callback"),console.log("error number: ".concat(H))}),O.gluTessCallback(v.default.gluEnum.GLU_TESS_COMBINE,function(H,q,K){for(var ne=new Array(l.default.RendererGL.prototype.tessyVertexSize).fill(0),ee=0;ee<K.length;ee++)for(var se=0;se<ne.length;se++)K[ee]!==0&&q[ee]&&(ne[se]+=q[ee][se]*K[ee]);return ne}),O.gluTessCallback(v.default.gluEnum.GLU_TESS_EDGE_FLAG,function(H){}),O}},{key:"_triangulate",value:function(O){var H=O[0]?O[0][2]:void 0,q=!0,K=!0,ne=!1,ee=void 0;try{for(var se,me=O[Symbol.iterator]();!(K=(se=me.next()).done);K=!0)for(var X=se.value,Z=0;Z<X.length;Z+=l.default.RendererGL.prototype.tessyVertexSize)if(X[Z+2]!==H){q=!1;break}}catch(ve){ne=!0,ee=ve}finally{try{K||me.return==null||me.return()}finally{if(ne)throw ee}}q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),ne=[];var ie=(this._tessy.gluTessBeginPolygon(ne),!0),ye=(ee=!1,void 0);try{for(var fe,$=O[Symbol.iterator]();!(ie=(fe=$.next()).done);ie=!0){var re=fe.value;this._tessy.gluTessBeginContour();for(var de=0;de<re.length;de+=l.default.RendererGL.prototype.tessyVertexSize){var ge=re.slice(de,de+l.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(ge,ge)}this._tessy.gluTessEndContour()}}catch(ve){ee=!0,ye=ve}finally{try{ie||$.return==null||$.return()}finally{if(ee)throw ye}}return this._tessy.gluTessEndPolygon(),ne}}])&&u(z.prototype,F),N}(l.default.Renderer),l.default.prototype._assert3d=function(F){if(!this._renderer.isP3D)throw new Error("".concat(F,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},l.default.RendererGL.prototype.tessyVertexSize=12,i=l.default.RendererGL,g.default=i},{"../core/constants":262,"../core/main":273,"../core/p5.Renderer":276,"./p5.Camera":321,"./p5.Matrix":324,"./p5.Shader":329,"core-js/modules/es.array.concat":151,"core-js/modules/es.array.copy-within":152,"core-js/modules/es.array.every":153,"core-js/modules/es.array.fill":154,"core-js/modules/es.array.from":157,"core-js/modules/es.array.includes":158,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.array.some":165,"core-js/modules/es.map":168,"core-js/modules/es.object.assign":174,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.get-prototype-of":178,"core-js/modules/es.object.to-string":180,"core-js/modules/es.reflect.construct":182,"core-js/modules/es.regexp.to-string":186,"core-js/modules/es.set":187,"core-js/modules/es.string.includes":189,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.float32-array":209,"core-js/modules/es.typed-array.float64-array":210,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.int16-array":214,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint16-array":230,"core-js/modules/es.typed-array.uint32-array":231,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236,libtess:245,path:248}],329:[function(i,_,g){i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.index-of"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.array.slice"),i("core-js/modules/es.function.name"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var h=(i=i("../core/main"))&&i.__esModule?i:{default:i};function l(d,v){for(var x=0;x<v.length;x++){var p=v[x];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}h.default.Shader=function(){function d(p,f,u){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._renderer=p,this._vertSrc=f,this._fragSrc=u,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]}var v,x;return v=d,(x=[{key:"init",value:function(){if(this._glProgram===0){var p=this._renderer.GL;if(this._vertShader=p.createShader(p.VERTEX_SHADER),p.shaderSource(this._vertShader,this._vertSrc),p.compileShader(this._vertShader),!p.getShaderParameter(this._vertShader,p.COMPILE_STATUS))return h.default._friendlyError("Yikes! An error occurred compiling the vertex shader:".concat(p.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=p.createShader(p.FRAGMENT_SHADER),p.shaderSource(this._fragShader,this._fragSrc),p.compileShader(this._fragShader),!p.getShaderParameter(this._fragShader,p.COMPILE_STATUS))return h.default._friendlyError("Darn! An error occurred compiling the fragment shader:".concat(p.getShaderInfoLog(this._fragShader))),null;this._glProgram=p.createProgram(),p.attachShader(this._glProgram,this._vertShader),p.attachShader(this._glProgram,this._fragShader),p.linkProgram(this._glProgram),p.getProgramParameter(this._glProgram,p.LINK_STATUS)||h.default._friendlyError("Snap! Error linking shader program: ".concat(p.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var p=this._renderer.GL,f=p.getProgramParameter(this._glProgram,p.ACTIVE_ATTRIBUTES),u=0;u<f;++u){var c=p.getActiveAttrib(this._glProgram,u),m=c.name,b=p.getAttribLocation(this._glProgram,m),S={};S.name=m,S.location=b,S.index=u,S.type=c.type,S.size=c.size,this.attributes[m]=S}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var p=this._renderer.GL,f=p.getProgramParameter(this._glProgram,p.ACTIVE_UNIFORMS),u=0,c=0;c<f;++c){var m=p.getActiveUniform(this._glProgram,c),b={},S=(b.location=p.getUniformLocation(this._glProgram,m.name),b.size=m.size,m.name);1<m.size&&(S=S.substring(0,S.indexOf("[0]"))),b.name=S,b.type=m.type,b._cachedData=void 0,b.type===p.SAMPLER_2D&&(b.samplerIndex=u,u++,this.samplers.push(b)),b.isArray=1<m.size||b.type===p.FLOAT_MAT3||b.type===p.FLOAT_MAT4||b.type===p.FLOAT_VEC2||b.type===p.FLOAT_VEC3||b.type===p.FLOAT_VEC4||b.type===p.INT_VEC2||b.type===p.INT_VEC4||b.type===p.INT_VEC3,this.uniforms[S]=b}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var p=this._renderer.GL,f=!0,u=!1,c=void 0;try{for(var m,b=this.samplers[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var S=m.value,w=S.texture;w===void 0&&(w=this._renderer._getEmptyTexture()),p.activeTexture(p.TEXTURE0+S.samplerIndex),w.bindTexture(),w.update(),p.uniform1i(S.location,S.samplerIndex)}}catch(M){u=!0,c=M}finally{try{f||b.return==null||b.return()}finally{if(u)throw c}}}},{key:"updateTextures",value:function(){var p=!0,f=!1,u=void 0;try{for(var c,m=this.samplers[Symbol.iterator]();!(p=(c=m.next()).done);p=!0){var b=c.value.texture;b&&b.update()}}catch(S){f=!0,u=S}finally{try{p||m.return==null||m.return()}finally{if(f)throw u}}}},{key:"unbindTextures",value:function(){var p=!0,f=!1,u=void 0;try{for(var c,m=this.samplers[Symbol.iterator]();!(p=(c=m.next()).done);p=!0){var b=c.value;this.setUniform(b.name,this._renderer._getEmptyTexture())}}catch(S){f=!0,u=S}finally{try{p||m.return==null||m.return()}finally{if(f)throw u}}}},{key:"_setMatrixUniforms",value:function(){var p=this._renderer._curCamera.cameraMatrix,f=this._renderer.uPMatrix,u=this._renderer.uMVMatrix,c=u.copy();c.mult(f),this.isStrokeShader()&&(this._renderer._curCamera.cameraType==="default"?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",p.mat4),this.setUniform("uProjectionMatrix",f.mat4),this.setUniform("uModelViewMatrix",u.mat4),this.setUniform("uModelViewProjectionMatrix",c.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))}},{key:"useProgram",value:function(){var p=this._renderer.GL;return this._renderer._curShader!==this&&(p.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(p,f){var u=this.uniforms[p];if(u){var c=this._renderer.GL;if(u.isArray){if(u._cachedData&&this._renderer._arraysEqual(u._cachedData,f))return;u._cachedData=f.slice(0)}else{if(u._cachedData&&u._cachedData===f)return;Array.isArray(f)?u._cachedData=f.slice(0):u._cachedData=f}var m=u.location;switch(this.useProgram(),u.type){case c.BOOL:f===!0?c.uniform1i(m,1):c.uniform1i(m,0);break;case c.INT:1<u.size?f.length&&c.uniform1iv(m,f):c.uniform1i(m,f);break;case c.FLOAT:1<u.size?f.length&&c.uniform1fv(m,f):c.uniform1f(m,f);break;case c.FLOAT_MAT3:c.uniformMatrix3fv(m,!1,f);break;case c.FLOAT_MAT4:c.uniformMatrix4fv(m,!1,f);break;case c.FLOAT_VEC2:1<u.size?f.length&&c.uniform2fv(m,f):c.uniform2f(m,f[0],f[1]);break;case c.FLOAT_VEC3:1<u.size?f.length&&c.uniform3fv(m,f):c.uniform3f(m,f[0],f[1],f[2]);break;case c.FLOAT_VEC4:1<u.size?f.length&&c.uniform4fv(m,f):c.uniform4f(m,f[0],f[1],f[2],f[3]);break;case c.INT_VEC2:1<u.size?f.length&&c.uniform2iv(m,f):c.uniform2i(m,f[0],f[1]);break;case c.INT_VEC3:1<u.size?f.length&&c.uniform3iv(m,f):c.uniform3i(m,f[0],f[1],f[2]);break;case c.INT_VEC4:1<u.size?f.length&&c.uniform4iv(m,f):c.uniform4i(m,f[0],f[1],f[2],f[3]);break;case c.SAMPLER_2D:c.activeTexture(c.TEXTURE0+u.samplerIndex),u.texture=f instanceof h.default.Texture?f:this._renderer.getTexture(f),c.uniform1i(m,u.samplerIndex),u.texture.src.gifProperties&&u.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return this.attributes.aNormal!==void 0||this.uniforms.uUseLighting!==void 0||this.uniforms.uAmbientLightCount!==void 0||this.uniforms.uDirectionalLightCount!==void 0||this.uniforms.uPointLightCount!==void 0||this.uniforms.uAmbientColor!==void 0||this.uniforms.uDirectionalDiffuseColors!==void 0||this.uniforms.uDirectionalSpecularColors!==void 0||this.uniforms.uPointLightLocation!==void 0||this.uniforms.uPointLightDiffuseColors!==void 0||this.uniforms.uPointLightSpecularColors!==void 0||this.uniforms.uLightingDirection!==void 0||this.uniforms.uSpecular!==void 0}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(p,f,u,c,m,b){var S;return p&&(p=p.location)!==-1&&(S=this._renderer.GL,this._renderer.registerEnabled[p]||(S.enableVertexAttribArray(p),this._renderer.registerEnabled[p]=!0),this._renderer.GL.vertexAttribPointer(p,f,u||S.FLOAT,c||!1,m||0,b||0)),this}}])&&l(v.prototype,x),d}(),i=h.default.Shader,g.default=i},{"../core/main":273,"core-js/modules/es.array.index-of":159,"core-js/modules/es.array.iterator":160,"core-js/modules/es.array.slice":164,"core-js/modules/es.function.name":167,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/web.dom-collections.iterator":236}],330:[function(i,_,g){function h(u){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(u)}function l(u){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(c){return h(c)}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":h(c)})(u)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.typed-array.uint8-array"),i("core-js/modules/es.typed-array.copy-within"),i("core-js/modules/es.typed-array.every"),i("core-js/modules/es.typed-array.fill"),i("core-js/modules/es.typed-array.filter"),i("core-js/modules/es.typed-array.find"),i("core-js/modules/es.typed-array.find-index"),i("core-js/modules/es.typed-array.for-each"),i("core-js/modules/es.typed-array.includes"),i("core-js/modules/es.typed-array.index-of"),i("core-js/modules/es.typed-array.iterator"),i("core-js/modules/es.typed-array.join"),i("core-js/modules/es.typed-array.last-index-of"),i("core-js/modules/es.typed-array.map"),i("core-js/modules/es.typed-array.reduce"),i("core-js/modules/es.typed-array.reduce-right"),i("core-js/modules/es.typed-array.reverse"),i("core-js/modules/es.typed-array.set"),i("core-js/modules/es.typed-array.slice"),i("core-js/modules/es.typed-array.some"),i("core-js/modules/es.typed-array.sort"),i("core-js/modules/es.typed-array.subarray"),i("core-js/modules/es.typed-array.to-locale-string"),i("core-js/modules/es.typed-array.to-string"),Object.defineProperty(g,"__esModule",{value:!0}),g.checkWebGLCapabilities=p,g.default=void 0;var d=(f=i("../core/main"))&&f.__esModule?f:{default:f},v=function(u){if(u&&u.__esModule)return u;if(u===null||l(u)!=="object"&&typeof u!="function")return{default:u};var c=function(){var M;return typeof WeakMap!="function"?null:(M=new WeakMap,M)}();if(c&&c.has(u))return c.get(u);var m,b={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(m in u){var w;Object.prototype.hasOwnProperty.call(u,m)&&((w=S?Object.getOwnPropertyDescriptor(u,m):null)&&(w.get||w.set)?Object.defineProperty(b,m,w):b[m]=u[m])}return b.default=u,c&&c.set(u,b),b}(i("../core/constants"));function x(u,c){for(var m=0;m<c.length;m++){var b=c[m];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}}function p(u){var c=u.GL,m=(u=u.webglVersion)===v.WEBGL2?c.getExtension("EXT_color_buffer_float")&&c.getExtension("EXT_float_blend"):c.getExtension("OES_texture_float");return{float:m,floatLinear:m&&c.getExtension("OES_texture_float_linear"),halfFloat:u=u===v.WEBGL2?c.getExtension("EXT_color_buffer_float"):c.getExtension("OES_texture_half_float"),halfFloatLinear:u&&c.getExtension("OES_texture_half_float_linear")}}d.default.Texture=function(){function u(b,S,w){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");this._renderer=b;var M=this._renderer.GL;return w=w||{},this.src=S,this.glTex=void 0,this.glTarget=M.TEXTURE_2D,this.glFormat=w.format||M.RGBA,this.mipmaps=!1,this.glMinFilter=w.minFilter||M.LINEAR,this.glMagFilter=w.magFilter||M.LINEAR,this.glWrapS=w.wrapS||M.CLAMP_TO_EDGE,this.glWrapT=w.wrapT||M.CLAMP_TO_EDGE,this.glDataType=w.dataType||M.UNSIGNED_BYTE,w=p(b),this.glFormat!==M.HALF_FLOAT||w.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=M.FLOAT),this.glFormat!==M.HALF_FLOAT||this.glMinFilter!==M.LINEAR&&this.glMagFilter!==M.LINEAR||w.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===M.LINEAR&&(this.glMinFilter=M.NEAREST),this.glMagFilter===M.LINEAR&&(this.glMagFilter=M.NEAREST)),this.glFormat!==M.FLOAT||w.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=M.UNSIGNED_BYTE),this.glFormat!==M.FLOAT||this.glMinFilter!==M.LINEAR&&this.glMagFilter!==M.LINEAR||w.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===M.LINEAR&&(this.glMinFilter=M.NEAREST),this.glMagFilter===M.LINEAR&&(this.glMagFilter=M.NEAREST)),this.isSrcMediaElement=d.default.MediaElement!==void 0&&S instanceof d.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=d.default.Element!==void 0&&S instanceof d.default.Element&&!(S instanceof d.default.Graphics)&&!(S instanceof d.default.Renderer),this.isSrcP5Image=S instanceof d.default.Image,this.isSrcP5Graphics=S instanceof d.default.Graphics,this.isSrcP5Renderer=S instanceof d.default.Renderer,this.isImageData=typeof ImageData<"u"&&S instanceof ImageData,this.isFramebufferTexture=S instanceof d.default.FramebufferTexture,b=this._getTextureDataFromSource(),this.width=b.width,this.height=b.height,this.init(b),this}var c,m;return c=u,(m=[{key:"_getTextureDataFromSource",value:function(){var b;return this.isFramebufferTexture?b=this.src.rawTexture():this.isSrcP5Image?b=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?b=this.src.elt:this.isImageData&&(b=this.src),b}},{key:"init",value:function(b){var S,w=this._renderer.GL;this.isFramebufferTexture||(this.glTex=w.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,this.glMagFilter),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(S=new Uint8Array([1,1,1,1]),w.texImage2D(this.glTarget,0,w.RGBA,1,1,0,this.glFormat,this.glDataType,S)):w.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,b))}},{key:"update",value:function(){var b,S,w,M=this.src;return M.width!==0&&M.height!==0&&!this.isFramebufferTexture&&(b=this._getTextureDataFromSource(),S=!1,w=this._renderer.GL,b.width!==this.width||b.height!==this.height?(S=!0,this.width=b.width||M.width,this.height=b.height||M.height,this.isSrcP5Image?M.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&M.setModified(!0)):this.isSrcP5Image?M.isModified()&&M.setModified(!(S=!0)):this.isSrcMediaElement?M.isModified()?M.setModified(!(S=!0)):M.loadedmetadata&&this._videoPrevUpdateTime!==M.time()&&(this._videoPrevUpdateTime=M.time(),S=!0):this.isImageData?M._dirty&&(S=!(M._dirty=!1)):S=!0,S&&(this.bindTexture(),w.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,b)),S)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(b,S){var w=this._renderer.GL;b===v.NEAREST?this.glMinFilter=w.NEAREST:this.glMinFilter=w.LINEAR,S===v.NEAREST?this.glMagFilter=w.NEAREST:this.glMagFilter=w.LINEAR,this.bindTexture(),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,this.glMinFilter),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"setWrapMode",value:function(b,S){function w(R){return(R&R-1)==0}var M=this._renderer.GL,A=(A=this._getTextureDataFromSource()).naturalWidth&&A.naturalHeight?(P=A.naturalWidth,A.naturalHeight):(P=this.width,this.height),P=w(P);A=w(A),b===v.REPEAT?this._renderer.webglVersion===v.WEBGL2||P&&A?this.glWrapS=M.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=M.CLAMP_TO_EDGE):b===v.MIRROR?this._renderer.webglVersion===v.WEBGL2||P&&A?this.glWrapS=M.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=M.CLAMP_TO_EDGE):this.glWrapS=M.CLAMP_TO_EDGE,S===v.REPEAT?this._renderer.webglVersion===v.WEBGL2||P&&A?this.glWrapT=M.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=M.CLAMP_TO_EDGE):S===v.MIRROR?this._renderer.webglVersion===v.WEBGL2||P&&A?this.glWrapT=M.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=M.CLAMP_TO_EDGE):this.glWrapT=M.CLAMP_TO_EDGE,this.bindTexture(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,this.glWrapS),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}])&&x(c.prototype,m),u}();var f=d.default.Texture;g.default=f},{"../core/constants":262,"../core/main":273,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.string.iterator":190,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.typed-array.copy-within":203,"core-js/modules/es.typed-array.every":204,"core-js/modules/es.typed-array.fill":205,"core-js/modules/es.typed-array.filter":206,"core-js/modules/es.typed-array.find":208,"core-js/modules/es.typed-array.find-index":207,"core-js/modules/es.typed-array.for-each":211,"core-js/modules/es.typed-array.includes":212,"core-js/modules/es.typed-array.index-of":213,"core-js/modules/es.typed-array.iterator":216,"core-js/modules/es.typed-array.join":217,"core-js/modules/es.typed-array.last-index-of":218,"core-js/modules/es.typed-array.map":219,"core-js/modules/es.typed-array.reduce":221,"core-js/modules/es.typed-array.reduce-right":220,"core-js/modules/es.typed-array.reverse":222,"core-js/modules/es.typed-array.set":223,"core-js/modules/es.typed-array.slice":224,"core-js/modules/es.typed-array.some":225,"core-js/modules/es.typed-array.sort":226,"core-js/modules/es.typed-array.subarray":227,"core-js/modules/es.typed-array.to-locale-string":228,"core-js/modules/es.typed-array.to-string":229,"core-js/modules/es.typed-array.uint8-array":232,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}],331:[function(i,_,g){function h(w){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(w)}function l(w){return(l=typeof Symbol=="function"&&h(Symbol.iterator)==="symbol"?function(M){return h(M)}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":h(M)})(w)}i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.get-own-property-descriptor"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.sub"),i("core-js/modules/es.weak-map"),i("core-js/modules/web.dom-collections.iterator"),i("core-js/modules/es.symbol"),i("core-js/modules/es.symbol.description"),i("core-js/modules/es.symbol.iterator"),i("core-js/modules/es.array.iterator"),i("core-js/modules/es.object.to-string"),i("core-js/modules/es.regexp.exec"),i("core-js/modules/es.string.iterator"),i("core-js/modules/es.string.split"),i("core-js/modules/es.string.sub"),i("core-js/modules/web.dom-collections.iterator");var d,v=(d=i("../core/main"))&&d.__esModule?d:{default:d},x=function(w){if(w&&w.__esModule)return w;if(w===null||l(w)!=="object"&&typeof w!="function")return{default:w};var M=function(){var L;return typeof WeakMap!="function"?null:(L=new WeakMap,L)}();if(M&&M.has(w))return M.get(w);var A,P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(A in w){var k;Object.prototype.hasOwnProperty.call(w,A)&&((k=R?Object.getOwnPropertyDescriptor(w,A):null)&&(k.get||k.set)?Object.defineProperty(P,A,k):P[A]=w[A])}return P.default=w,M&&M.set(w,P),P}(i("../core/constants"));function p(w,M){if(!(w instanceof M))throw new TypeError("Cannot call a class as a function")}function f(w,M){for(var A=0;A<M.length;A++){var P=M[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(w,P.key,P)}}function u(w,M,A){M&&f(w.prototype,M)}i("./p5.Shader"),i("./p5.RendererGL.Retained"),v.default.RendererGL.prototype._applyTextProperties=function(){},v.default.RendererGL.prototype.textWidth=function(w){return this._isOpenType()?this._textFont._textWidth(w,this._textSize):0};var c=function(){function w(M,A){p(this,w),this.width=M,this.height=A,this.infos=[]}return u(w,[{key:"findImage",value:function(M){var A,P,R=this.width*this.height;if(R<M)throw new Error("font is too complex to render in 3D");for(var k=this.infos.length-1;0<=k;--k){var L=this.infos[k];if(L.index+M<R){P=(A=L).imageData;break}}if(!A){try{P=new ImageData(this.width,this.height)}catch{var B=document.getElementsByTagName("canvas")[0],I=!B,F=(B||((B=document.createElement("canvas")).style.display="none",document.body.appendChild(B)),B.getContext("2d"));F&&(P=F.createImageData(this.width,this.height)),I&&document.body.removeChild(B)}this.infos.push(A={index:0,imageData:P})}return F=A.index,A.index+=M,P._dirty=!0,{imageData:P,index:F}}}]),w}();function m(w,M,A,P,R){var k=w.imageData.data;w=4*w.index++,k[w++]=M,k[w++]=A,k[w++]=P,k[+w]=R}var b=Math.sqrt(3),S=function(){function w(M){p(this,w),this.font=M,this.strokeImageInfos=new c(64,64),this.colDimImageInfos=new c(64,64),this.rowDimImageInfos=new c(64,64),this.colCellImageInfos=new c(64,64),this.rowCellImageInfos=new c(64,64),this.glyphInfos={}}return u(w,[{key:"getGlyphInfo",value:function(M){var A=this.glyphInfos[M.index];if(!A){var P=M.getBoundingBox(),R=P.x1,k=P.y1,L=P.x2-R,B=P.y2-k,I=M.path.commands;if(L==0||B==0||!I.length)return this.glyphInfos[M.index]={};for(var F=[],z=[],G=[],N=8;0<=N;--N)G.push([]);for(N=8;0<=N;--N)z.push([]);var O,H,q,K,ne=function(){function _e(Ue,Fe,Ne,ft){p(this,_e),this.p0=Ue,this.c0=Fe,this.c1=Ne,this.p1=ft}return u(_e,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return v.default.Vector.sub(v.default.Vector.sub(this.p1,this.p0),v.default.Vector.mult(v.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Ue){var Fe=v.default.Vector.lerp(this.p0,this.c0,Ue),Ne=v.default.Vector.lerp(this.c0,this.c1,Ue),ft=v.default.Vector.lerp(Fe,Ne,Ue);return this.c1=v.default.Vector.lerp(this.c1,this.p1,Ue),this.c0=v.default.Vector.lerp(Ne,this.c1,Ue),Ne=v.default.Vector.lerp(ft,this.c0,Ue),Ue=new _e(this.p0,Fe,ft,Ne),this.p0=Ne,Ue}},{key:"splitInflections",value:function(){var Ue=v.default.Vector.sub(this.c0,this.p0),Fe=v.default.Vector.sub(v.default.Vector.sub(this.c1,this.c0),Ue),Ne=v.default.Vector.sub(v.default.Vector.sub(v.default.Vector.sub(this.p1,this.c1),Ue),v.default.Vector.mult(Fe,2)),ft=[],vt=Fe.x*Ne.y-Fe.y*Ne.x;return vt!==0&&0<=(Ue=(Ne=Ue.x*Ne.y-Ue.y*Ne.x)*Ne-4*vt*(Ue.x*Fe.y-Ue.y*Fe.x))&&(vt<0&&(vt=-vt,Ne=-Ne),Ue=(-Ne+(Fe=Math.sqrt(Ue)))/(2*vt),0<(Ne=(-Ne-Fe)/(2*vt))&&Ne<1&&(ft.push(this.split(Ne)),Ue=1-(1-Ue)/(1-Ne)),0<Ue&&Ue<1&&ft.push(this.split(Ue))),ft.push(this),ft}}]),_e}(),ee=!0,se=!1,me=void 0;try{for(var X,Z=I[Symbol.iterator]();!(ee=(X=Z.next()).done);ee=!0){var ie=X.value,ye=(ie.x-R)/L,fe=(ie.y-k)/B;if(!dt(O,H,ye,fe)){switch(ie.type){case"M":q=ye,K=fe;break;case"L":Be(O,H,ye,fe);break;case"Q":var $=(ie.x1-R)/L,re=(ie.y1-k)/B;Oe([O,ye,$],[H,fe,re],{x:O,y:H,cx:$,cy:re});break;case"Z":dt(O,H,q,K)?F.push({x:O,y:H}):(Be(O,H,q,K),F.push({x:q,y:K}));break;case"C":for(var de=function(_e,Ue,Fe,Ne,ft,vt,ht,lt){_e=new ne(new v.default.Vector(_e,Ue),new v.default.Vector(Fe,Ne),new v.default.Vector(ft,vt),new v.default.Vector(ht,lt)).splitInflections();var ce=[],ue=30/b,he=!0;Ue=!1,Fe=void 0;try{for(var be,je=_e[Symbol.iterator]();!(he=(be=je.next()).done);he=!0){for(var We=be.value,xe=[],Ve=void 0;!(.125<=(Ve=ue/We.quadError()));){var Ce=Math.pow(Ve,.3333333333333333),Qe=We.split(Ce),ut=We.split(1-Ce/(1-Ce));ce.push(Qe),xe.push(We),We=ut}Ve<1&&ce.push(We.split(.5)),ce.push(We),Array.prototype.push.apply(ce,xe.reverse())}}catch(Rt){Ue=!0,Fe=Rt}finally{try{he||je.return==null||je.return()}finally{if(Ue)throw Fe}}return ce}(O,H,(ie.x1-R)/L,(ie.y1-k)/B,(ie.x2-R)/L,(ie.y2-k)/B,ye,fe),ge=0;ge<de.length;ge++){var ve=de[ge].toQuadratic();Oe([ve.x,ve.x1,ve.cx],[ve.y,ve.y1,ve.cy],ve)}break;default:throw new Error("unknown command type: ".concat(ie.type))}O=ye,H=fe}}}catch(_e){se=!0,me=_e}finally{try{ee||Z.return==null||Z.return()}finally{if(se)throw me}}for(var we=F.length,Se=this.strokeImageInfos.findImage(we),ae=Se.index,oe=0;oe<we;++oe){var Ee=F[oe];m(Se,ze(Ee.x),ze(Ee.y),ze(Ee.cx),ze(Ee.cy))}(A=this.glyphInfos[M.index]={glyph:M,uGlyphRect:[P.x1,-P.y1,P.x2,-P.y2],strokeImageInfo:Se,strokes:F,colInfo:Je(G,this.colDimImageInfos,this.colCellImageInfos),rowInfo:Je(z,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[A.colInfo.dimOffset,A.rowInfo.dimOffset]}return A;function Oe(_e,Ue,Fe){var Ne=F.length;function ft(ue,he,be){for(var je=ue.length;0<je--;){var We=ue[je];We<he&&(he=We),be<We&&(be=We)}return{min:he,max:be}}F.push(Fe),Fe=ft(_e,1,0),_e=Math.max(Math.floor(9*Fe.min-.5),0);for(var vt=Math.min(Math.ceil(9*Fe.max+.5),9),ht=_e;ht<vt;++ht)G[ht].push(Ne);Fe=ft(Ue,1,0),_e=Math.max(Math.floor(9*Fe.min-.5),0);for(var lt=Math.min(Math.ceil(9*Fe.max+.5),9),ce=_e;ce<lt;++ce)z[ce].push(Ne)}function ze(_e){return(_e=255*_e)<0?0:255<_e?255:_e}function Be(_e,Ue,Fe,Ne){Oe([_e,Fe],[Ue,Ne],{x:_e,y:Ue,cx:(_e+Fe)/2,cy:(Ue+Ne)/2})}function dt(_e,Ue,Fe,Ne){return Math.abs(Fe-_e)<1e-5&&Math.abs(Ne-Ue)<1e-5}function Je(_e,Ue,Fe){for(var Ne=_e.length,ft=Ue.findImage(Ne),vt=(Ue=ft.index,0),ht=0;ht<Ne;++ht)vt+=_e[ht].length;for(var lt=Fe.findImage(vt),ce=0;ce<Ne;++ce){var ue=_e[ce],he=ue.length,be=lt.index;m(ft,be>>7,127&be,he>>7,127&he);for(var je=0;je<he;++je){var We=ue[je]+ae;m(lt,We>>7,127&We,0,0)}}return{cellImageInfo:lt,dimOffset:Ue,dimImageInfo:ft}}}}]),w}();v.default.RendererGL.prototype._renderText=function(w,M,A,P,R){if(this._textFont&&typeof this._textFont!="string"){if(!(R<=P)&&this._doFill){if(this._isOpenType()){w.push(),R=this._doStroke;var k=this.drawMode,L=(this._doStroke=!1,this.drawMode=x.TEXTURE,this._textFont.font),B=(B=this._textFont._fontInfo)||(this._textFont._fontInfo=new S(L)),I=(A=this._textFont._handleAlignment(this,M,A,P),P=this._textSize/L.unitsPerEm,this.translate(A.x,A.y,0),this.scale(P,P,1),this.GL),F=(A=!this._defaultFontShader,this._getFontShader()),z=(F.init(),F.bindShader(),A&&(F.setUniform("uGridImageSize",[64,64]),F.setUniform("uCellsImageSize",[64,64]),F.setUniform("uStrokeImageSize",[64,64]),F.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),G=(z||((P=this._textGeom=new v.default.Geometry(1,1,function(){for(var $=0;$<=1;$++)for(var re=0;re<=1;re++)this.vertices.push(new v.default.Vector(re,$,0)),this.uvs.push(re,$)})).computeFaces().computeNormals(),z=this.createBuffers("glyph",P)),!0);A=!1,P=void 0;try{for(var N,O=this.retainedMode.buffers.text[Symbol.iterator]();!(G=(N=O.next()).done);G=!0)N.value._prepareBuffer(z,F)}catch($){A=!0,P=$}finally{try{G||O.return==null||O.return()}finally{if(A)throw P}}this._bindBuffer(z.indexBuffer,I.ELEMENT_ARRAY_BUFFER),F.setUniform("uMaterialColor",this.curFillColor),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var H=0,q=null,K=L.stringToGlyphs(M),ne=!0,ee=!1,se=void 0;try{for(var me,X=K[Symbol.iterator]();!(ne=(me=X.next()).done);ne=!0){var Z,ie,ye=me.value,fe=(q&&(H+=L.getKerningValue(q,ye)),B.getGlyphInfo(ye));fe.uGlyphRect&&(Z=fe.rowInfo,ie=fe.colInfo,F.setUniform("uSamplerStrokes",fe.strokeImageInfo.imageData),F.setUniform("uSamplerRowStrokes",Z.cellImageInfo.imageData),F.setUniform("uSamplerRows",Z.dimImageInfo.imageData),F.setUniform("uSamplerColStrokes",ie.cellImageInfo.imageData),F.setUniform("uSamplerCols",ie.dimImageInfo.imageData),F.setUniform("uGridOffset",fe.uGridOffset),F.setUniform("uGlyphRect",fe.uGlyphRect),F.setUniform("uGlyphOffset",H),F.bindTextures(),I.drawElements(I.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),H+=ye.advanceWidth,q=ye}}catch($){ee=!0,se=$}finally{try{ne||X.return==null||X.return()}finally{if(ee)throw se}}}finally{F.unbindShader(),this._doStroke=R,this.drawMode=k,I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),w.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return w}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":262,"../core/main":273,"./p5.RendererGL.Retained":327,"./p5.Shader":329,"core-js/modules/es.array.iterator":160,"core-js/modules/es.object.get-own-property-descriptor":176,"core-js/modules/es.object.to-string":180,"core-js/modules/es.regexp.exec":185,"core-js/modules/es.string.iterator":190,"core-js/modules/es.string.split":196,"core-js/modules/es.string.sub":198,"core-js/modules/es.symbol":202,"core-js/modules/es.symbol.description":200,"core-js/modules/es.symbol.iterator":201,"core-js/modules/es.weak-map":234,"core-js/modules/web.dom-collections.iterator":236}]},{},[257])(257)})}).call(this,a(3))},function(s,o,a){a.r(o),a.d(o,"p5Events",function(){return f}),a.d(o,"default",function(){return u});var y=a(0),i=a.n(y),_=a(1),g=a.n(_);function h(c){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(c)}function l(c,m){for(var b=0;b<m.length;b++){var S=m[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(c,(w=S.key,M=void 0,M=function(A,P){if(h(A)!=="object"||A===null)return A;var R=A[Symbol.toPrimitive];if(R!==void 0){var k=R.call(A,P||"default");if(h(k)!=="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(A)}(w,"string"),h(M)==="symbol"?M:String(M)),S)}var w,M}function d(c,m){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,S){return b.__proto__=S,b})(c,m)}function v(c){var m=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var b,S=p(c);if(m){var w=p(this).constructor;b=Reflect.construct(S,arguments,w)}else b=S.apply(this,arguments);return x(this,b)}}function x(c,m){if(m&&(h(m)==="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(c)}function p(c){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)})(c)}typeof window<"u"&&(window.p5=g.a);var f=["draw","windowResized","preload","mouseClicked","doubleClicked","mouseMoved","mousePressed","mouseWheel","mouseDragged","mouseReleased","keyPressed","keyReleased","keyTyped","touchStarted","touchMoved","touchEnded","deviceMoved","deviceTurned","deviceShaken"],u=function(c){(function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),A&&d(M,A)})(w,c);var m,b,S=v(w);function w(M){var A;return function(P,R){if(!(P instanceof R))throw new TypeError("Cannot call a class as a function")}(this,w),(A=S.call(this,M)).canvasParentRef=i.a.createRef(),A}return m=w,(b=[{key:"componentDidMount",value:function(){var M=this;this.sketch=new g.a(function(A){A.setup=function(){M.props.setup(A,M.canvasParentRef.current)},f.forEach(function(P){M.props[P]&&(A[P]=function(){for(var R,k=arguments.length,L=new Array(k),B=0;B<k;B++)L[B]=arguments[B];(R=M.props)[P].apply(R,[A].concat(L))})})})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.sketch.remove()}},{key:"render",value:function(){return i.a.createElement("div",{ref:this.canvasParentRef,className:this.props.className||"react-p5","data-testid":"react-p5",style:this.props.style||{}})}}])&&l(m.prototype,b),Object.defineProperty(m,"prototype",{writable:!1}),w}(i.a.Component)},function(s,o){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}s.exports=a}]).default})})(PR);var X5=PR.exports;const q5=zT(X5);function Y5(){const r=[],n=(a,y)=>{a.createCanvas(window.innerWidth,window.innerHeight).parent(y);for(let i=0;i<100;i++)r.push({x:a.random(a.width),y:a.random(a.height),speed:a.random(.5,2),size:a.random(1,3),alpha:a.random(50,200)})},s=a=>{a.background(0,10),r.forEach((y,i)=>{a.random(1)<.01&&(y.x+=a.random(-10,10),y.y+=a.random(-10,10)),y.y-=y.speed,y.y<0&&(y.y=a.height),a.noStroke(),a.fill(255,y.alpha),a.circle(y.x,y.y,y.size)})},o=a=>{a.resizeCanvas(window.innerWidth,window.innerHeight)};return gt.jsx("div",{className:"fixed inset-0 -z-10",children:gt.jsx(q5,{setup:n,draw:s,windowResized:o})})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Qy="161",Z5={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},K5={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},RR=0,$1=1,jR=2,J5=3,LR=0,$y=1,hh=2,Ns=3,Vo=0,xi=1,eo=2,Do=0,zl=1,e_=2,t_=3,n_=4,kR=5,xa=100,IR=101,OR=102,r_=103,i_=104,DR=200,NR=201,UR=202,FR=203,Sy=204,My=205,BR=206,zR=207,VR=208,GR=209,HR=210,WR=211,XR=212,qR=213,YR=214,ZR=0,KR=1,JR=2,Fh=3,QR=4,$R=5,e3=6,t3=7,gf=0,n3=1,r3=2,ao=0,i3=1,s3=2,o3=3,_b=4,a3=5,l3=6,s_="attached",u3="detached",eg=300,Go=301,Ua=302,Bh=303,zh=304,Kc=306,Vh=1e3,oi=1001,Gh=1002,vr=1003,Ey=1004,Q5=1004,Cl=1005,$5=1005,rr=1006,fh=1007,eU=1007,to=1008,tU=1008,lo=1009,c3=1010,d3=1011,tg=1012,xb=1013,jo=1014,ys=1015,Bc=1016,bb=1017,wb=1018,ja=1020,h3=1021,gi=1023,f3=1024,p3=1025,La=1026,Ql=1027,m3=1028,Sb=1029,y3=1030,Mb=1031,Eb=1033,Um=33776,Fm=33777,Bm=33778,zm=33779,o_=35840,a_=35841,l_=35842,u_=35843,Tb=36196,c_=37492,d_=37496,h_=37808,f_=37809,p_=37810,m_=37811,y_=37812,g_=37813,v_=37814,__=37815,x_=37816,b_=37817,w_=37818,S_=37819,M_=37820,E_=37821,Vm=36492,T_=36494,A_=36495,g3=36283,C_=36284,P_=36285,R_=36286,v3=2200,_3=2201,x3=2202,Hh=2300,Wh=2301,Gm=2302,Il=2400,Ol=2401,Xh=2402,ng=2500,Ab=2501,nU=0,rU=1,iU=2,Cb=3e3,ka=3001,b3=3200,w3=3201,Ha=0,S3=1,qi="",Lr="srgb",co="srgb-linear",rg="display-p3",vf="display-p3-linear",qh="linear",Hn="srgb",Yh="rec709",Zh="p3",sU=0,Tl=7680,oU=7681,aU=7682,lU=7683,uU=34055,cU=34056,dU=5386,hU=512,fU=513,pU=514,mU=515,yU=516,gU=517,vU=518,j_=519,M3=512,E3=513,T3=514,Pb=515,A3=516,C3=517,P3=518,R3=519,Kh=35044,_U=35048,xU=35040,bU=35045,wU=35049,SU=35041,MU=35046,EU=35050,TU=35042,AU="100",L_="300 es",Ty=1035,no=2e3,Jh=2001;class Xo{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[t]===void 0&&(s[t]=[]),s[t].indexOf(n)===-1&&s[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const s=this._listeners;return s[t]!==void 0&&s[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const o=this._listeners[t];if(o!==void 0){const a=o.indexOf(n);a!==-1&&o.splice(a,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const s=this._listeners[t.type];if(s!==void 0){t.target=this;const o=s.slice(0);for(let a=0,y=o.length;a<y;a++)o[a].call(this,t);t.target=null}}}const ti=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XM=1234567;const Vl=Math.PI/180,zc=180/Math.PI;function Qi(){const r=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(ti[r&255]+ti[r>>8&255]+ti[r>>16&255]+ti[r>>24&255]+"-"+ti[t&255]+ti[t>>8&255]+"-"+ti[t>>16&15|64]+ti[t>>24&255]+"-"+ti[n&63|128]+ti[n>>8&255]+"-"+ti[n>>16&255]+ti[n>>24&255]+ti[s&255]+ti[s>>8&255]+ti[s>>16&255]+ti[s>>24&255]).toLowerCase()}function hr(r,t,n){return Math.max(t,Math.min(n,r))}function Rb(r,t){return(r%t+t)%t}function CU(r,t,n,s,o){return s+(r-t)*(o-s)/(n-t)}function PU(r,t,n){return r!==t?(n-r)/(t-r):0}function ph(r,t,n){return(1-n)*r+n*t}function RU(r,t,n,s){return ph(r,t,1-Math.exp(-n*s))}function jU(r,t=1){return t-Math.abs(Rb(r,t*2)-t)}function LU(r,t,n){return r<=t?0:r>=n?1:(r=(r-t)/(n-t),r*r*(3-2*r))}function kU(r,t,n){return r<=t?0:r>=n?1:(r=(r-t)/(n-t),r*r*r*(r*(r*6-15)+10))}function IU(r,t){return r+Math.floor(Math.random()*(t-r+1))}function OU(r,t){return r+Math.random()*(t-r)}function DU(r){return r*(.5-Math.random())}function NU(r){r!==void 0&&(XM=r);let t=XM+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function UU(r){return r*Vl}function FU(r){return r*zc}function k_(r){return(r&r-1)===0&&r!==0}function BU(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Ay(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function zU(r,t,n,s,o){const a=Math.cos,y=Math.sin,i=a(n/2),_=y(n/2),g=a((t+s)/2),h=y((t+s)/2),l=a((t-s)/2),d=y((t-s)/2),v=a((s-t)/2),x=y((s-t)/2);switch(o){case"XYX":r.set(i*h,_*l,_*d,i*g);break;case"YZY":r.set(_*d,i*h,_*l,i*g);break;case"ZXZ":r.set(_*l,_*d,i*h,i*g);break;case"XZX":r.set(i*h,_*x,_*v,i*g);break;case"YXY":r.set(_*v,i*h,_*x,i*g);break;case"ZYZ":r.set(_*x,_*v,i*h,i*g);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function vi(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function sn(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const VU={DEG2RAD:Vl,RAD2DEG:zc,generateUUID:Qi,clamp:hr,euclideanModulo:Rb,mapLinear:CU,inverseLerp:PU,lerp:ph,damp:RU,pingpong:jU,smoothstep:LU,smootherstep:kU,randInt:IU,randFloat:OU,randFloatSpread:DU,seededRandom:NU,degToRad:UU,radToDeg:FU,isPowerOfTwo:k_,ceilPowerOfTwo:BU,floorPowerOfTwo:Ay,setQuaternionFromProperEuler:zU,normalize:sn,denormalize:vi};class mt{constructor(t=0,n=0){mt.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,s=this.y,o=t.elements;return this.x=o[0]*n+o[3]*s+o[6],this.y=o[1]*n+o[4]*s+o[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const s=this.dot(t)/n;return Math.acos(hr(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,s=this.y-t.y;return n*n+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,s){return this.x=t.x+(n.x-t.x)*s,this.y=t.y+(n.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const s=Math.cos(n),o=Math.sin(n),a=this.x-t.x,y=this.y-t.y;return this.x=a*s-y*o+t.x,this.y=a*o+y*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class hn{constructor(t,n,s,o,a,y,i,_,g){hn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,s,o,a,y,i,_,g)}set(t,n,s,o,a,y,i,_,g){const h=this.elements;return h[0]=t,h[1]=o,h[2]=i,h[3]=n,h[4]=a,h[5]=_,h[6]=s,h[7]=y,h[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,s=t.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],this}extractBasis(t,n,s){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const s=t.elements,o=n.elements,a=this.elements,y=s[0],i=s[3],_=s[6],g=s[1],h=s[4],l=s[7],d=s[2],v=s[5],x=s[8],p=o[0],f=o[3],u=o[6],c=o[1],m=o[4],b=o[7],S=o[2],w=o[5],M=o[8];return a[0]=y*p+i*c+_*S,a[3]=y*f+i*m+_*w,a[6]=y*u+i*b+_*M,a[1]=g*p+h*c+l*S,a[4]=g*f+h*m+l*w,a[7]=g*u+h*b+l*M,a[2]=d*p+v*c+x*S,a[5]=d*f+v*m+x*w,a[8]=d*u+v*b+x*M,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],s=t[1],o=t[2],a=t[3],y=t[4],i=t[5],_=t[6],g=t[7],h=t[8];return n*y*h-n*i*g-s*a*h+s*i*_+o*a*g-o*y*_}invert(){const t=this.elements,n=t[0],s=t[1],o=t[2],a=t[3],y=t[4],i=t[5],_=t[6],g=t[7],h=t[8],l=h*y-i*g,d=i*_-h*a,v=g*a-y*_,x=n*l+s*d+o*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/x;return t[0]=l*p,t[1]=(o*g-h*s)*p,t[2]=(i*s-o*y)*p,t[3]=d*p,t[4]=(h*n-o*_)*p,t[5]=(o*a-i*n)*p,t[6]=v*p,t[7]=(s*_-g*n)*p,t[8]=(y*n-s*a)*p,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,s,o,a,y,i){const _=Math.cos(a),g=Math.sin(a);return this.set(s*_,s*g,-s*(_*y+g*i)+y+t,-o*g,o*_,-o*(-g*y+_*i)+i+n,0,0,1),this}scale(t,n){return this.premultiply(J0.makeScale(t,n)),this}rotate(t){return this.premultiply(J0.makeRotation(-t)),this}translate(t,n){return this.premultiply(J0.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),s=Math.sin(t);return this.set(n,-s,0,s,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,s=t.elements;for(let o=0;o<9;o++)if(n[o]!==s[o])return!1;return!0}fromArray(t,n=0){for(let s=0;s<9;s++)this.elements[s]=t[s+n];return this}toArray(t=[],n=0){const s=this.elements;return t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3],t[n+4]=s[4],t[n+5]=s[5],t[n+6]=s[6],t[n+7]=s[7],t[n+8]=s[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const J0=new hn;function j3(r){for(let t=r.length-1;t>=0;--t)if(r[t]>=65535)return!0;return!1}const GU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function gc(r,t){return new GU[r](t)}function Qh(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function L3(){const r=Qh("canvas");return r.style.display="block",r}const qM={};function Gl(r){r in qM||(qM[r]=!0,console.warn(r))}const YM=new hn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ZM=new hn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Rp={[co]:{transfer:qh,primaries:Yh,toReference:r=>r,fromReference:r=>r},[Lr]:{transfer:Hn,primaries:Yh,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[vf]:{transfer:qh,primaries:Zh,toReference:r=>r.applyMatrix3(ZM),fromReference:r=>r.applyMatrix3(YM)},[rg]:{transfer:Hn,primaries:Zh,toReference:r=>r.convertSRGBToLinear().applyMatrix3(ZM),fromReference:r=>r.applyMatrix3(YM).convertLinearToSRGB()}},HU=new Set([co,vf]),Nn={enabled:!0,_workingColorSpace:co,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!HU.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,t,n){if(this.enabled===!1||t===n||!t||!n)return r;const s=Rp[t].toReference,o=Rp[n].fromReference;return o(s(r))},fromWorkingColorSpace:function(r,t){return this.convert(r,this._workingColorSpace,t)},toWorkingColorSpace:function(r,t){return this.convert(r,t,this._workingColorSpace)},getPrimaries:function(r){return Rp[r].primaries},getTransfer:function(r){return r===qi?qh:Rp[r].transfer}};function Pc(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Q0(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Pu;class jb{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Pu===void 0&&(Pu=Qh("canvas")),Pu.width=t.width,Pu.height=t.height;const s=Pu.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),n=Pu}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=Qh("canvas");n.width=t.width,n.height=t.height;const s=n.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const o=s.getImageData(0,0,t.width,t.height),a=o.data;for(let y=0;y<a.length;y++)a[y]=Pc(a[y]/255)*255;return s.putImageData(o,0,0),n}else if(t.data){const n=t.data.slice(0);for(let s=0;s<n.length;s++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[s]=Math.floor(Pc(n[s]/255)*255):n[s]=Pc(n[s]);return{data:n,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let WU=0;class Dl{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:WU++}),this.uuid=Qi(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const s={uuid:this.uuid,url:""},o=this.data;if(o!==null){let a;if(Array.isArray(o)){a=[];for(let y=0,i=o.length;y<i;y++)o[y].isDataTexture?a.push($0(o[y].image)):a.push($0(o[y]))}else a=$0(o);s.url=a}return n||(t.images[this.uuid]=s),s}}function $0(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?jb.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let XU=0;class fr extends Xo{constructor(t=fr.DEFAULT_IMAGE,n=fr.DEFAULT_MAPPING,s=oi,o=oi,a=rr,y=to,i=gi,_=lo,g=fr.DEFAULT_ANISOTROPY,h=qi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:XU++}),this.uuid=Qi(),this.name="",this.source=new Dl(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=s,this.wrapT=o,this.magFilter=a,this.minFilter=y,this.anisotropy=g,this.format=i,this.internalFormat=null,this.type=_,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Gl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===ka?Lr:qi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const s={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),n||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==eg)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Vh:t.x=t.x-Math.floor(t.x);break;case oi:t.x=t.x<0?0:1;break;case Gh:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Vh:t.y=t.y-Math.floor(t.y);break;case oi:t.y=t.y<0?0:1;break;case Gh:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Gl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Lr?ka:Cb}set encoding(t){Gl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===ka?Lr:qi}}fr.DEFAULT_IMAGE=null;fr.DEFAULT_MAPPING=eg;fr.DEFAULT_ANISOTROPY=1;class Un{constructor(t=0,n=0,s=0,o=1){Un.prototype.isVector4=!0,this.x=t,this.y=n,this.z=s,this.w=o}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,s,o){return this.x=t,this.y=n,this.z=s,this.w=o,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,s=this.y,o=this.z,a=this.w,y=t.elements;return this.x=y[0]*n+y[4]*s+y[8]*o+y[12]*a,this.y=y[1]*n+y[5]*s+y[9]*o+y[13]*a,this.z=y[2]*n+y[6]*s+y[10]*o+y[14]*a,this.w=y[3]*n+y[7]*s+y[11]*o+y[15]*a,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,s,o,a;const _=t.elements,g=_[0],h=_[4],l=_[8],d=_[1],v=_[5],x=_[9],p=_[2],f=_[6],u=_[10];if(Math.abs(h-d)<.01&&Math.abs(l-p)<.01&&Math.abs(x-f)<.01){if(Math.abs(h+d)<.1&&Math.abs(l+p)<.1&&Math.abs(x+f)<.1&&Math.abs(g+v+u-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const m=(g+1)/2,b=(v+1)/2,S=(u+1)/2,w=(h+d)/4,M=(l+p)/4,A=(x+f)/4;return m>b&&m>S?m<.01?(s=0,o=.707106781,a=.707106781):(s=Math.sqrt(m),o=w/s,a=M/s):b>S?b<.01?(s=.707106781,o=0,a=.707106781):(o=Math.sqrt(b),s=w/o,a=A/o):S<.01?(s=.707106781,o=.707106781,a=0):(a=Math.sqrt(S),s=M/a,o=A/a),this.set(s,o,a,n),this}let c=Math.sqrt((f-x)*(f-x)+(l-p)*(l-p)+(d-h)*(d-h));return Math.abs(c)<.001&&(c=1),this.x=(f-x)/c,this.y=(l-p)/c,this.z=(d-h)/c,this.w=Math.acos((g+v+u-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,s){return this.x=t.x+(n.x-t.x)*s,this.y=t.y+(n.y-t.y)*s,this.z=t.z+(n.z-t.z)*s,this.w=t.w+(n.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class k3 extends Xo{constructor(t=1,n=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new Un(0,0,t,n),this.scissorTest=!1,this.viewport=new Un(0,0,t,n);const o={width:t,height:n,depth:1};s.encoding!==void 0&&(Gl("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),s.colorSpace=s.encoding===ka?Lr:qi),s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},s),this.texture=new fr(o,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=s.generateMipmaps,this.texture.internalFormat=s.internalFormat,this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.depthTexture=s.depthTexture,this.samples=s.samples}setSize(t,n,s=1){(this.width!==t||this.height!==n||this.depth!==s)&&(this.width=t,this.height=n,this.depth=s,this.texture.image.width=t,this.texture.image.height=n,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new Dl(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hs extends k3{constructor(t=1,n=1,s={}){super(t,n,s),this.isWebGLRenderTarget=!0}}class ig extends fr{constructor(t=null,n=1,s=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:s,depth:o},this.magFilter=vr,this.minFilter=vr,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qU extends Hs{constructor(t=1,n=1,s=1,o={}){super(t,n,o),this.isWebGLArrayRenderTarget=!0,this.depth=s,this.texture=new ig(null,t,n,s),this.texture.isRenderTargetTexture=!0}}class Lb extends fr{constructor(t=null,n=1,s=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:s,depth:o},this.magFilter=vr,this.minFilter=vr,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class YU extends Hs{constructor(t=1,n=1,s=1,o={}){super(t,n,o),this.isWebGL3DRenderTarget=!0,this.depth=s,this.texture=new Lb(null,t,n,s),this.texture.isRenderTargetTexture=!0}}class ZU extends Hs{constructor(t=1,n=1,s=1,o={}){super(t,n,o),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let y=0;y<s;y++)this.texture[y]=a.clone(),this.texture[y].isRenderTargetTexture=!0}setSize(t,n,s=1){if(this.width!==t||this.height!==n||this.depth!==s){this.width=t,this.height=n,this.depth=s;for(let o=0,a=this.texture.length;o<a;o++)this.texture[o].image.width=t,this.texture[o].image.height=n,this.texture[o].image.depth=s;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let n=0,s=t.texture.length;n<s;n++)this.texture[n]=t.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Di{constructor(t=0,n=0,s=0,o=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=s,this._w=o}static slerpFlat(t,n,s,o,a,y,i){let _=s[o+0],g=s[o+1],h=s[o+2],l=s[o+3];const d=a[y+0],v=a[y+1],x=a[y+2],p=a[y+3];if(i===0){t[n+0]=_,t[n+1]=g,t[n+2]=h,t[n+3]=l;return}if(i===1){t[n+0]=d,t[n+1]=v,t[n+2]=x,t[n+3]=p;return}if(l!==p||_!==d||g!==v||h!==x){let f=1-i;const u=_*d+g*v+h*x+l*p,c=u>=0?1:-1,m=1-u*u;if(m>Number.EPSILON){const S=Math.sqrt(m),w=Math.atan2(S,u*c);f=Math.sin(f*w)/S,i=Math.sin(i*w)/S}const b=i*c;if(_=_*f+d*b,g=g*f+v*b,h=h*f+x*b,l=l*f+p*b,f===1-i){const S=1/Math.sqrt(_*_+g*g+h*h+l*l);_*=S,g*=S,h*=S,l*=S}}t[n]=_,t[n+1]=g,t[n+2]=h,t[n+3]=l}static multiplyQuaternionsFlat(t,n,s,o,a,y){const i=s[o],_=s[o+1],g=s[o+2],h=s[o+3],l=a[y],d=a[y+1],v=a[y+2],x=a[y+3];return t[n]=i*x+h*l+_*v-g*d,t[n+1]=_*x+h*d+g*l-i*v,t[n+2]=g*x+h*v+i*d-_*l,t[n+3]=h*x-i*l-_*d-g*v,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,s,o){return this._x=t,this._y=n,this._z=s,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const s=t._x,o=t._y,a=t._z,y=t._order,i=Math.cos,_=Math.sin,g=i(s/2),h=i(o/2),l=i(a/2),d=_(s/2),v=_(o/2),x=_(a/2);switch(y){case"XYZ":this._x=d*h*l+g*v*x,this._y=g*v*l-d*h*x,this._z=g*h*x+d*v*l,this._w=g*h*l-d*v*x;break;case"YXZ":this._x=d*h*l+g*v*x,this._y=g*v*l-d*h*x,this._z=g*h*x-d*v*l,this._w=g*h*l+d*v*x;break;case"ZXY":this._x=d*h*l-g*v*x,this._y=g*v*l+d*h*x,this._z=g*h*x+d*v*l,this._w=g*h*l-d*v*x;break;case"ZYX":this._x=d*h*l-g*v*x,this._y=g*v*l+d*h*x,this._z=g*h*x-d*v*l,this._w=g*h*l+d*v*x;break;case"YZX":this._x=d*h*l+g*v*x,this._y=g*v*l+d*h*x,this._z=g*h*x-d*v*l,this._w=g*h*l-d*v*x;break;case"XZY":this._x=d*h*l-g*v*x,this._y=g*v*l-d*h*x,this._z=g*h*x+d*v*l,this._w=g*h*l+d*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+y)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const s=n/2,o=Math.sin(s);return this._x=t.x*o,this._y=t.y*o,this._z=t.z*o,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,s=n[0],o=n[4],a=n[8],y=n[1],i=n[5],_=n[9],g=n[2],h=n[6],l=n[10],d=s+i+l;if(d>0){const v=.5/Math.sqrt(d+1);this._w=.25/v,this._x=(h-_)*v,this._y=(a-g)*v,this._z=(y-o)*v}else if(s>i&&s>l){const v=2*Math.sqrt(1+s-i-l);this._w=(h-_)/v,this._x=.25*v,this._y=(o+y)/v,this._z=(a+g)/v}else if(i>l){const v=2*Math.sqrt(1+i-s-l);this._w=(a-g)/v,this._x=(o+y)/v,this._y=.25*v,this._z=(_+h)/v}else{const v=2*Math.sqrt(1+l-s-i);this._w=(y-o)/v,this._x=(a+g)/v,this._y=(_+h)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let s=t.dot(n)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(hr(this.dot(t),-1,1)))}rotateTowards(t,n){const s=this.angleTo(t);if(s===0)return this;const o=Math.min(1,n/s);return this.slerp(t,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const s=t._x,o=t._y,a=t._z,y=t._w,i=n._x,_=n._y,g=n._z,h=n._w;return this._x=s*h+y*i+o*g-a*_,this._y=o*h+y*_+a*i-s*g,this._z=a*h+y*g+s*_-o*i,this._w=y*h-s*i-o*_-a*g,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const s=this._x,o=this._y,a=this._z,y=this._w;let i=y*t._w+s*t._x+o*t._y+a*t._z;if(i<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,i=-i):this.copy(t),i>=1)return this._w=y,this._x=s,this._y=o,this._z=a,this;const _=1-i*i;if(_<=Number.EPSILON){const v=1-n;return this._w=v*y+n*this._w,this._x=v*s+n*this._x,this._y=v*o+n*this._y,this._z=v*a+n*this._z,this.normalize(),this}const g=Math.sqrt(_),h=Math.atan2(g,i),l=Math.sin((1-n)*h)/g,d=Math.sin(n*h)/g;return this._w=y*l+this._w*d,this._x=s*l+this._x*d,this._y=o*l+this._y*d,this._z=a*l+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,n,s){return this.copy(t).slerp(n,s)}random(){const t=Math.random(),n=Math.sqrt(1-t),s=Math.sqrt(t),o=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(n*Math.cos(o),s*Math.sin(a),s*Math.cos(a),n*Math.sin(o))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Re{constructor(t=0,n=0,s=0){Re.prototype.isVector3=!0,this.x=t,this.y=n,this.z=s}set(t,n,s){return s===void 0&&(s=this.z),this.x=t,this.y=n,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(KM.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(KM.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,s=this.y,o=this.z,a=t.elements;return this.x=a[0]*n+a[3]*s+a[6]*o,this.y=a[1]*n+a[4]*s+a[7]*o,this.z=a[2]*n+a[5]*s+a[8]*o,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,s=this.y,o=this.z,a=t.elements,y=1/(a[3]*n+a[7]*s+a[11]*o+a[15]);return this.x=(a[0]*n+a[4]*s+a[8]*o+a[12])*y,this.y=(a[1]*n+a[5]*s+a[9]*o+a[13])*y,this.z=(a[2]*n+a[6]*s+a[10]*o+a[14])*y,this}applyQuaternion(t){const n=this.x,s=this.y,o=this.z,a=t.x,y=t.y,i=t.z,_=t.w,g=2*(y*o-i*s),h=2*(i*n-a*o),l=2*(a*s-y*n);return this.x=n+_*g+y*l-i*h,this.y=s+_*h+i*g-a*l,this.z=o+_*l+a*h-y*g,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,s=this.y,o=this.z,a=t.elements;return this.x=a[0]*n+a[4]*s+a[8]*o,this.y=a[1]*n+a[5]*s+a[9]*o,this.z=a[2]*n+a[6]*s+a[10]*o,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(n,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,s){return this.x=t.x+(n.x-t.x)*s,this.y=t.y+(n.y-t.y)*s,this.z=t.z+(n.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const s=t.x,o=t.y,a=t.z,y=n.x,i=n.y,_=n.z;return this.x=o*_-a*i,this.y=a*y-s*_,this.z=s*i-o*y,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const s=t.dot(this)/n;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return ev.copy(this).projectOnVector(t),this.sub(ev)}reflect(t){return this.sub(ev.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const s=this.dot(t)/n;return Math.acos(hr(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,s=this.y-t.y,o=this.z-t.z;return n*n+s*s+o*o}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,s){const o=Math.sin(n)*t;return this.x=o*Math.sin(s),this.y=Math.cos(n)*t,this.z=o*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,s){return this.x=t*Math.sin(n),this.y=s,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),o=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=s,this.z=o,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,s=Math.sqrt(1-t**2);return this.x=s*Math.cos(n),this.y=s*Math.sin(n),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ev=new Re,KM=new Di;class bi{constructor(t=new Re(1/0,1/0,1/0),n=new Re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,s=t.length;n<s;n+=3)this.expandByPoint(Ls.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,s=t.count;n<s;n++)this.expandByPoint(Ls.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,s=t.length;n<s;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const s=Ls.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(s!==void 0){const a=s.getAttribute("position");if(n===!0&&a!==void 0&&t.isInstancedMesh!==!0)for(let y=0,i=a.count;y<i;y++)t.isMesh===!0?t.getVertexPosition(y,Ls):Ls.fromBufferAttribute(a,y),Ls.applyMatrix4(t.matrixWorld),this.expandByPoint(Ls);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),jp.copy(t.boundingBox)):(s.boundingBox===null&&s.computeBoundingBox(),jp.copy(s.boundingBox)),jp.applyMatrix4(t.matrixWorld),this.union(jp)}const o=t.children;for(let a=0,y=o.length;a<y;a++)this.expandByObject(o[a],n);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ls),Ls.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,s;return t.normal.x>0?(n=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),n<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Ld),Lp.subVectors(this.max,Ld),Ru.subVectors(t.a,Ld),ju.subVectors(t.b,Ld),Lu.subVectors(t.c,Ld),sa.subVectors(ju,Ru),oa.subVectors(Lu,ju),hl.subVectors(Ru,Lu);let n=[0,-sa.z,sa.y,0,-oa.z,oa.y,0,-hl.z,hl.y,sa.z,0,-sa.x,oa.z,0,-oa.x,hl.z,0,-hl.x,-sa.y,sa.x,0,-oa.y,oa.x,0,-hl.y,hl.x,0];return!tv(n,Ru,ju,Lu,Lp)||(n=[1,0,0,0,1,0,0,0,1],!tv(n,Ru,ju,Lu,Lp))?!1:(kp.crossVectors(sa,oa),n=[kp.x,kp.y,kp.z],tv(n,Ru,ju,Lu,Lp))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ls).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ls).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(xo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),xo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),xo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),xo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),xo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),xo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),xo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),xo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(xo),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const xo=[new Re,new Re,new Re,new Re,new Re,new Re,new Re,new Re],Ls=new Re,jp=new bi,Ru=new Re,ju=new Re,Lu=new Re,sa=new Re,oa=new Re,hl=new Re,Ld=new Re,Lp=new Re,kp=new Re,fl=new Re;function tv(r,t,n,s,o){for(let a=0,y=r.length-3;a<=y;a+=3){fl.fromArray(r,a);const i=o.x*Math.abs(fl.x)+o.y*Math.abs(fl.y)+o.z*Math.abs(fl.z),_=t.dot(fl),g=n.dot(fl),h=s.dot(fl);if(Math.max(-Math.max(_,g,h),Math.min(_,g,h))>i)return!1}return!0}const KU=new bi,kd=new Re,nv=new Re;let li=class{constructor(t=new Re,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const s=this.center;n!==void 0?s.copy(n):KU.setFromPoints(t).getCenter(s);let o=0;for(let a=0,y=t.length;a<y;a++)o=Math.max(o,s.distanceToSquared(t[a]));return this.radius=Math.sqrt(o),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const s=this.center.distanceToSquared(t);return n.copy(t),s>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;kd.subVectors(t,this.center);const n=kd.lengthSq();if(n>this.radius*this.radius){const s=Math.sqrt(n),o=(s-this.radius)*.5;this.center.addScaledVector(kd,o/s),this.radius+=o}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(nv.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(kd.copy(t.center).add(nv)),this.expandByPoint(kd.copy(t.center).sub(nv))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}};const bo=new Re,rv=new Re,Ip=new Re,aa=new Re,iv=new Re,Op=new Re,sv=new Re;class Jc{constructor(t=new Re,n=new Re(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,bo)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const s=n.dot(this.direction);return s<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=bo.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(bo.copy(this.origin).addScaledVector(this.direction,n),bo.distanceToSquared(t))}distanceSqToSegment(t,n,s,o){rv.copy(t).add(n).multiplyScalar(.5),Ip.copy(n).sub(t).normalize(),aa.copy(this.origin).sub(rv);const a=t.distanceTo(n)*.5,y=-this.direction.dot(Ip),i=aa.dot(this.direction),_=-aa.dot(Ip),g=aa.lengthSq(),h=Math.abs(1-y*y);let l,d,v,x;if(h>0)if(l=y*_-i,d=y*i-_,x=a*h,l>=0)if(d>=-x)if(d<=x){const p=1/h;l*=p,d*=p,v=l*(l+y*d+2*i)+d*(y*l+d+2*_)+g}else d=a,l=Math.max(0,-(y*d+i)),v=-l*l+d*(d+2*_)+g;else d=-a,l=Math.max(0,-(y*d+i)),v=-l*l+d*(d+2*_)+g;else d<=-x?(l=Math.max(0,-(-y*a+i)),d=l>0?-a:Math.min(Math.max(-a,-_),a),v=-l*l+d*(d+2*_)+g):d<=x?(l=0,d=Math.min(Math.max(-a,-_),a),v=d*(d+2*_)+g):(l=Math.max(0,-(y*a+i)),d=l>0?a:Math.min(Math.max(-a,-_),a),v=-l*l+d*(d+2*_)+g);else d=y>0?-a:a,l=Math.max(0,-(y*d+i)),v=-l*l+d*(d+2*_)+g;return s&&s.copy(this.origin).addScaledVector(this.direction,l),o&&o.copy(rv).addScaledVector(Ip,d),v}intersectSphere(t,n){bo.subVectors(t.center,this.origin);const s=bo.dot(this.direction),o=bo.dot(bo)-s*s,a=t.radius*t.radius;if(o>a)return null;const y=Math.sqrt(a-o),i=s-y,_=s+y;return _<0?null:i<0?this.at(_,n):this.at(i,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/n;return s>=0?s:null}intersectPlane(t,n){const s=this.distanceToPlane(t);return s===null?null:this.at(s,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let s,o,a,y,i,_;const g=1/this.direction.x,h=1/this.direction.y,l=1/this.direction.z,d=this.origin;return g>=0?(s=(t.min.x-d.x)*g,o=(t.max.x-d.x)*g):(s=(t.max.x-d.x)*g,o=(t.min.x-d.x)*g),h>=0?(a=(t.min.y-d.y)*h,y=(t.max.y-d.y)*h):(a=(t.max.y-d.y)*h,y=(t.min.y-d.y)*h),s>y||a>o||((a>s||isNaN(s))&&(s=a),(y<o||isNaN(o))&&(o=y),l>=0?(i=(t.min.z-d.z)*l,_=(t.max.z-d.z)*l):(i=(t.max.z-d.z)*l,_=(t.min.z-d.z)*l),s>_||i>o)||((i>s||s!==s)&&(s=i),(_<o||o!==o)&&(o=_),o<0)?null:this.at(s>=0?s:o,n)}intersectsBox(t){return this.intersectBox(t,bo)!==null}intersectTriangle(t,n,s,o,a){iv.subVectors(n,t),Op.subVectors(s,t),sv.crossVectors(iv,Op);let y=this.direction.dot(sv),i;if(y>0){if(o)return null;i=1}else if(y<0)i=-1,y=-y;else return null;aa.subVectors(this.origin,t);const _=i*this.direction.dot(Op.crossVectors(aa,Op));if(_<0)return null;const g=i*this.direction.dot(iv.cross(aa));if(g<0||_+g>y)return null;const h=-i*aa.dot(sv);return h<0?null:this.at(h/y,a)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jt{constructor(t,n,s,o,a,y,i,_,g,h,l,d,v,x,p,f){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,s,o,a,y,i,_,g,h,l,d,v,x,p,f)}set(t,n,s,o,a,y,i,_,g,h,l,d,v,x,p,f){const u=this.elements;return u[0]=t,u[4]=n,u[8]=s,u[12]=o,u[1]=a,u[5]=y,u[9]=i,u[13]=_,u[2]=g,u[6]=h,u[10]=l,u[14]=d,u[3]=v,u[7]=x,u[11]=p,u[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jt().fromArray(this.elements)}copy(t){const n=this.elements,s=t.elements;return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],this}copyPosition(t){const n=this.elements,s=t.elements;return n[12]=s[12],n[13]=s[13],n[14]=s[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,s){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,n,s){return this.set(t.x,n.x,s.x,0,t.y,n.y,s.y,0,t.z,n.z,s.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,s=t.elements,o=1/ku.setFromMatrixColumn(t,0).length(),a=1/ku.setFromMatrixColumn(t,1).length(),y=1/ku.setFromMatrixColumn(t,2).length();return n[0]=s[0]*o,n[1]=s[1]*o,n[2]=s[2]*o,n[3]=0,n[4]=s[4]*a,n[5]=s[5]*a,n[6]=s[6]*a,n[7]=0,n[8]=s[8]*y,n[9]=s[9]*y,n[10]=s[10]*y,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,s=t.x,o=t.y,a=t.z,y=Math.cos(s),i=Math.sin(s),_=Math.cos(o),g=Math.sin(o),h=Math.cos(a),l=Math.sin(a);if(t.order==="XYZ"){const d=y*h,v=y*l,x=i*h,p=i*l;n[0]=_*h,n[4]=-_*l,n[8]=g,n[1]=v+x*g,n[5]=d-p*g,n[9]=-i*_,n[2]=p-d*g,n[6]=x+v*g,n[10]=y*_}else if(t.order==="YXZ"){const d=_*h,v=_*l,x=g*h,p=g*l;n[0]=d+p*i,n[4]=x*i-v,n[8]=y*g,n[1]=y*l,n[5]=y*h,n[9]=-i,n[2]=v*i-x,n[6]=p+d*i,n[10]=y*_}else if(t.order==="ZXY"){const d=_*h,v=_*l,x=g*h,p=g*l;n[0]=d-p*i,n[4]=-y*l,n[8]=x+v*i,n[1]=v+x*i,n[5]=y*h,n[9]=p-d*i,n[2]=-y*g,n[6]=i,n[10]=y*_}else if(t.order==="ZYX"){const d=y*h,v=y*l,x=i*h,p=i*l;n[0]=_*h,n[4]=x*g-v,n[8]=d*g+p,n[1]=_*l,n[5]=p*g+d,n[9]=v*g-x,n[2]=-g,n[6]=i*_,n[10]=y*_}else if(t.order==="YZX"){const d=y*_,v=y*g,x=i*_,p=i*g;n[0]=_*h,n[4]=p-d*l,n[8]=x*l+v,n[1]=l,n[5]=y*h,n[9]=-i*h,n[2]=-g*h,n[6]=v*l+x,n[10]=d-p*l}else if(t.order==="XZY"){const d=y*_,v=y*g,x=i*_,p=i*g;n[0]=_*h,n[4]=-l,n[8]=g*h,n[1]=d*l+p,n[5]=y*h,n[9]=v*l-x,n[2]=x*l-v,n[6]=i*h,n[10]=p*l+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(JU,t,QU)}lookAt(t,n,s){const o=this.elements;return Hi.subVectors(t,n),Hi.lengthSq()===0&&(Hi.z=1),Hi.normalize(),la.crossVectors(s,Hi),la.lengthSq()===0&&(Math.abs(s.z)===1?Hi.x+=1e-4:Hi.z+=1e-4,Hi.normalize(),la.crossVectors(s,Hi)),la.normalize(),Dp.crossVectors(Hi,la),o[0]=la.x,o[4]=Dp.x,o[8]=Hi.x,o[1]=la.y,o[5]=Dp.y,o[9]=Hi.y,o[2]=la.z,o[6]=Dp.z,o[10]=Hi.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const s=t.elements,o=n.elements,a=this.elements,y=s[0],i=s[4],_=s[8],g=s[12],h=s[1],l=s[5],d=s[9],v=s[13],x=s[2],p=s[6],f=s[10],u=s[14],c=s[3],m=s[7],b=s[11],S=s[15],w=o[0],M=o[4],A=o[8],P=o[12],R=o[1],k=o[5],L=o[9],B=o[13],I=o[2],F=o[6],z=o[10],G=o[14],N=o[3],O=o[7],H=o[11],q=o[15];return a[0]=y*w+i*R+_*I+g*N,a[4]=y*M+i*k+_*F+g*O,a[8]=y*A+i*L+_*z+g*H,a[12]=y*P+i*B+_*G+g*q,a[1]=h*w+l*R+d*I+v*N,a[5]=h*M+l*k+d*F+v*O,a[9]=h*A+l*L+d*z+v*H,a[13]=h*P+l*B+d*G+v*q,a[2]=x*w+p*R+f*I+u*N,a[6]=x*M+p*k+f*F+u*O,a[10]=x*A+p*L+f*z+u*H,a[14]=x*P+p*B+f*G+u*q,a[3]=c*w+m*R+b*I+S*N,a[7]=c*M+m*k+b*F+S*O,a[11]=c*A+m*L+b*z+S*H,a[15]=c*P+m*B+b*G+S*q,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],s=t[4],o=t[8],a=t[12],y=t[1],i=t[5],_=t[9],g=t[13],h=t[2],l=t[6],d=t[10],v=t[14],x=t[3],p=t[7],f=t[11],u=t[15];return x*(+a*_*l-o*g*l-a*i*d+s*g*d+o*i*v-s*_*v)+p*(+n*_*v-n*g*d+a*y*d-o*y*v+o*g*h-a*_*h)+f*(+n*g*l-n*i*v-a*y*l+s*y*v+a*i*h-s*g*h)+u*(-o*i*h-n*_*l+n*i*d+o*y*l-s*y*d+s*_*h)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,s){const o=this.elements;return t.isVector3?(o[12]=t.x,o[13]=t.y,o[14]=t.z):(o[12]=t,o[13]=n,o[14]=s),this}invert(){const t=this.elements,n=t[0],s=t[1],o=t[2],a=t[3],y=t[4],i=t[5],_=t[6],g=t[7],h=t[8],l=t[9],d=t[10],v=t[11],x=t[12],p=t[13],f=t[14],u=t[15],c=l*f*g-p*d*g+p*_*v-i*f*v-l*_*u+i*d*u,m=x*d*g-h*f*g-x*_*v+y*f*v+h*_*u-y*d*u,b=h*p*g-x*l*g+x*i*v-y*p*v-h*i*u+y*l*u,S=x*l*_-h*p*_-x*i*d+y*p*d+h*i*f-y*l*f,w=n*c+s*m+o*b+a*S;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return t[0]=c*M,t[1]=(p*d*a-l*f*a-p*o*v+s*f*v+l*o*u-s*d*u)*M,t[2]=(i*f*a-p*_*a+p*o*g-s*f*g-i*o*u+s*_*u)*M,t[3]=(l*_*a-i*d*a-l*o*g+s*d*g+i*o*v-s*_*v)*M,t[4]=m*M,t[5]=(h*f*a-x*d*a+x*o*v-n*f*v-h*o*u+n*d*u)*M,t[6]=(x*_*a-y*f*a-x*o*g+n*f*g+y*o*u-n*_*u)*M,t[7]=(y*d*a-h*_*a+h*o*g-n*d*g-y*o*v+n*_*v)*M,t[8]=b*M,t[9]=(x*l*a-h*p*a-x*s*v+n*p*v+h*s*u-n*l*u)*M,t[10]=(y*p*a-x*i*a+x*s*g-n*p*g-y*s*u+n*i*u)*M,t[11]=(h*i*a-y*l*a-h*s*g+n*l*g+y*s*v-n*i*v)*M,t[12]=S*M,t[13]=(h*p*o-x*l*o+x*s*d-n*p*d-h*s*f+n*l*f)*M,t[14]=(x*i*o-y*p*o-x*s*_+n*p*_+y*s*f-n*i*f)*M,t[15]=(y*l*o-h*i*o+h*s*_-n*l*_-y*s*d+n*i*d)*M,this}scale(t){const n=this.elements,s=t.x,o=t.y,a=t.z;return n[0]*=s,n[4]*=o,n[8]*=a,n[1]*=s,n[5]*=o,n[9]*=a,n[2]*=s,n[6]*=o,n[10]*=a,n[3]*=s,n[7]*=o,n[11]*=a,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,s,o))}makeTranslation(t,n,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,s,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,n,-s,0,0,s,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),s=Math.sin(t);return this.set(n,0,s,0,0,1,0,0,-s,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),s=Math.sin(t);return this.set(n,-s,0,0,s,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const s=Math.cos(n),o=Math.sin(n),a=1-s,y=t.x,i=t.y,_=t.z,g=a*y,h=a*i;return this.set(g*y+s,g*i-o*_,g*_+o*i,0,g*i+o*_,h*i+s,h*_-o*y,0,g*_-o*i,h*_+o*y,a*_*_+s,0,0,0,0,1),this}makeScale(t,n,s){return this.set(t,0,0,0,0,n,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,n,s,o,a,y){return this.set(1,s,a,0,t,1,y,0,n,o,1,0,0,0,0,1),this}compose(t,n,s){const o=this.elements,a=n._x,y=n._y,i=n._z,_=n._w,g=a+a,h=y+y,l=i+i,d=a*g,v=a*h,x=a*l,p=y*h,f=y*l,u=i*l,c=_*g,m=_*h,b=_*l,S=s.x,w=s.y,M=s.z;return o[0]=(1-(p+u))*S,o[1]=(v+b)*S,o[2]=(x-m)*S,o[3]=0,o[4]=(v-b)*w,o[5]=(1-(d+u))*w,o[6]=(f+c)*w,o[7]=0,o[8]=(x+m)*M,o[9]=(f-c)*M,o[10]=(1-(d+p))*M,o[11]=0,o[12]=t.x,o[13]=t.y,o[14]=t.z,o[15]=1,this}decompose(t,n,s){const o=this.elements;let a=ku.set(o[0],o[1],o[2]).length();const y=ku.set(o[4],o[5],o[6]).length(),i=ku.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),t.x=o[12],t.y=o[13],t.z=o[14],ks.copy(this);const g=1/a,h=1/y,l=1/i;return ks.elements[0]*=g,ks.elements[1]*=g,ks.elements[2]*=g,ks.elements[4]*=h,ks.elements[5]*=h,ks.elements[6]*=h,ks.elements[8]*=l,ks.elements[9]*=l,ks.elements[10]*=l,n.setFromRotationMatrix(ks),s.x=a,s.y=y,s.z=i,this}makePerspective(t,n,s,o,a,y,i=no){const _=this.elements,g=2*a/(n-t),h=2*a/(s-o),l=(n+t)/(n-t),d=(s+o)/(s-o);let v,x;if(i===no)v=-(y+a)/(y-a),x=-2*y*a/(y-a);else if(i===Jh)v=-y/(y-a),x=-y*a/(y-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+i);return _[0]=g,_[4]=0,_[8]=l,_[12]=0,_[1]=0,_[5]=h,_[9]=d,_[13]=0,_[2]=0,_[6]=0,_[10]=v,_[14]=x,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(t,n,s,o,a,y,i=no){const _=this.elements,g=1/(n-t),h=1/(s-o),l=1/(y-a),d=(n+t)*g,v=(s+o)*h;let x,p;if(i===no)x=(y+a)*l,p=-2*l;else if(i===Jh)x=a*l,p=-1*l;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+i);return _[0]=2*g,_[4]=0,_[8]=0,_[12]=-d,_[1]=0,_[5]=2*h,_[9]=0,_[13]=-v,_[2]=0,_[6]=0,_[10]=p,_[14]=-x,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(t){const n=this.elements,s=t.elements;for(let o=0;o<16;o++)if(n[o]!==s[o])return!1;return!0}fromArray(t,n=0){for(let s=0;s<16;s++)this.elements[s]=t[s+n];return this}toArray(t=[],n=0){const s=this.elements;return t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3],t[n+4]=s[4],t[n+5]=s[5],t[n+6]=s[6],t[n+7]=s[7],t[n+8]=s[8],t[n+9]=s[9],t[n+10]=s[10],t[n+11]=s[11],t[n+12]=s[12],t[n+13]=s[13],t[n+14]=s[14],t[n+15]=s[15],t}}const ku=new Re,ks=new Jt,JU=new Re(0,0,0),QU=new Re(1,1,1),la=new Re,Dp=new Re,Hi=new Re,JM=new Jt,QM=new Di;class _f{constructor(t=0,n=0,s=0,o=_f.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=s,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,s,o=this._order){return this._x=t,this._y=n,this._z=s,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,s=!0){const o=t.elements,a=o[0],y=o[4],i=o[8],_=o[1],g=o[5],h=o[9],l=o[2],d=o[6],v=o[10];switch(n){case"XYZ":this._y=Math.asin(hr(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(-h,v),this._z=Math.atan2(-y,a)):(this._x=Math.atan2(d,g),this._z=0);break;case"YXZ":this._x=Math.asin(-hr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(i,v),this._z=Math.atan2(_,g)):(this._y=Math.atan2(-l,a),this._z=0);break;case"ZXY":this._x=Math.asin(hr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-l,v),this._z=Math.atan2(-y,g)):(this._y=0,this._z=Math.atan2(_,a));break;case"ZYX":this._y=Math.asin(-hr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(d,v),this._z=Math.atan2(_,a)):(this._x=0,this._z=Math.atan2(-y,g));break;case"YZX":this._z=Math.asin(hr(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-h,g),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(i,v));break;case"XZY":this._z=Math.asin(-hr(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(d,g),this._y=Math.atan2(i,a)):(this._x=Math.atan2(-h,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,s===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,s){return JM.makeRotationFromQuaternion(t),this.setFromRotationMatrix(JM,n,s)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return QM.setFromEuler(this),this.setFromQuaternion(QM,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_f.DEFAULT_ORDER="XYZ";class Hl{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let $U=0;const $M=new Re,Iu=new Di,wo=new Jt,Np=new Re,Id=new Re,eF=new Re,tF=new Di,eE=new Re(1,0,0),tE=new Re(0,1,0),nE=new Re(0,0,1),nF={type:"added"},rF={type:"removed"};class jn extends Xo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$U++}),this.uuid=Qi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jn.DEFAULT_UP.clone();const t=new Re,n=new _f,s=new Di,o=new Re(1,1,1);function a(){s.setFromEuler(n,!1)}function y(){n.setFromQuaternion(s,void 0,!1)}n._onChange(a),s._onChange(y),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Jt},normalMatrix:{value:new hn}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=jn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Hl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Iu.setFromAxisAngle(t,n),this.quaternion.multiply(Iu),this}rotateOnWorldAxis(t,n){return Iu.setFromAxisAngle(t,n),this.quaternion.premultiply(Iu),this}rotateX(t){return this.rotateOnAxis(eE,t)}rotateY(t){return this.rotateOnAxis(tE,t)}rotateZ(t){return this.rotateOnAxis(nE,t)}translateOnAxis(t,n){return $M.copy(t).applyQuaternion(this.quaternion),this.position.add($M.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(eE,t)}translateY(t){return this.translateOnAxis(tE,t)}translateZ(t){return this.translateOnAxis(nE,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(wo.copy(this.matrixWorld).invert())}lookAt(t,n,s){t.isVector3?Np.copy(t):Np.set(t,n,s);const o=this.parent;this.updateWorldMatrix(!0,!1),Id.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wo.lookAt(Id,Np,this.up):wo.lookAt(Np,Id,this.up),this.quaternion.setFromRotationMatrix(wo),o&&(wo.extractRotation(o.matrixWorld),Iu.setFromRotationMatrix(wo),this.quaternion.premultiply(Iu.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(nF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(rF)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),wo.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),wo.multiply(t.parent.matrixWorld)),t.applyMatrix4(wo),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let s=0,o=this.children.length;s<o;s++){const y=this.children[s].getObjectByProperty(t,n);if(y!==void 0)return y}}getObjectsByProperty(t,n,s=[]){this[t]===n&&s.push(this);const o=this.children;for(let a=0,y=o.length;a<y;a++)o[a].getObjectsByProperty(t,n,s);return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Id,t,eF),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Id,tF,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let s=0,o=n.length;s<o;s++)n[s].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let s=0,o=n.length;s<o;s++)n[s].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let s=0,o=n.length;s<o;s++){const a=n[s];(a.matrixWorldAutoUpdate===!0||t===!0)&&a.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const s=this.parent;if(t===!0&&s!==null&&s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const o=this.children;for(let a=0,y=o.length;a<y;a++){const i=o[a];i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=t===void 0||typeof t=="string",s={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(i=>({boxInitialized:i.boxInitialized,boxMin:i.box.min.toArray(),boxMax:i.box.max.toArray(),sphereInitialized:i.sphereInitialized,sphereRadius:i.sphere.radius,sphereCenter:i.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function a(i,_){return i[_.uuid]===void 0&&(i[_.uuid]=_.toJSON(t)),_.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=a(t.geometries,this.geometry);const i=this.geometry.parameters;if(i!==void 0&&i.shapes!==void 0){const _=i.shapes;if(Array.isArray(_))for(let g=0,h=_.length;g<h;g++){const l=_[g];a(t.shapes,l)}else a(t.shapes,_)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const i=[];for(let _=0,g=this.material.length;_<g;_++)i.push(a(t.materials,this.material[_]));o.material=i}else o.material=a(t.materials,this.material);if(this.children.length>0){o.children=[];for(let i=0;i<this.children.length;i++)o.children.push(this.children[i].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let i=0;i<this.animations.length;i++){const _=this.animations[i];o.animations.push(a(t.animations,_))}}if(n){const i=y(t.geometries),_=y(t.materials),g=y(t.textures),h=y(t.images),l=y(t.shapes),d=y(t.skeletons),v=y(t.animations),x=y(t.nodes);i.length>0&&(s.geometries=i),_.length>0&&(s.materials=_),g.length>0&&(s.textures=g),h.length>0&&(s.images=h),l.length>0&&(s.shapes=l),d.length>0&&(s.skeletons=d),v.length>0&&(s.animations=v),x.length>0&&(s.nodes=x)}return s.object=o,s;function y(i){const _=[];for(const g in i){const h=i[g];delete h.metadata,_.push(h)}return _}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let s=0;s<t.children.length;s++){const o=t.children[s];this.add(o.clone())}return this}}jn.DEFAULT_UP=new Re(0,1,0);jn.DEFAULT_MATRIX_AUTO_UPDATE=!0;jn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Is=new Re,So=new Re,ov=new Re,Mo=new Re,Ou=new Re,Du=new Re,rE=new Re,av=new Re,lv=new Re,uv=new Re;class Yi{constructor(t=new Re,n=new Re,s=new Re){this.a=t,this.b=n,this.c=s}static getNormal(t,n,s,o){o.subVectors(s,n),Is.subVectors(t,n),o.cross(Is);const a=o.lengthSq();return a>0?o.multiplyScalar(1/Math.sqrt(a)):o.set(0,0,0)}static getBarycoord(t,n,s,o,a){Is.subVectors(o,n),So.subVectors(s,n),ov.subVectors(t,n);const y=Is.dot(Is),i=Is.dot(So),_=Is.dot(ov),g=So.dot(So),h=So.dot(ov),l=y*g-i*i;if(l===0)return a.set(0,0,0),null;const d=1/l,v=(g*_-i*h)*d,x=(y*h-i*_)*d;return a.set(1-v-x,x,v)}static containsPoint(t,n,s,o){return this.getBarycoord(t,n,s,o,Mo)===null?!1:Mo.x>=0&&Mo.y>=0&&Mo.x+Mo.y<=1}static getInterpolation(t,n,s,o,a,y,i,_){return this.getBarycoord(t,n,s,o,Mo)===null?(_.x=0,_.y=0,"z"in _&&(_.z=0),"w"in _&&(_.w=0),null):(_.setScalar(0),_.addScaledVector(a,Mo.x),_.addScaledVector(y,Mo.y),_.addScaledVector(i,Mo.z),_)}static isFrontFacing(t,n,s,o){return Is.subVectors(s,n),So.subVectors(t,n),Is.cross(So).dot(o)<0}set(t,n,s){return this.a.copy(t),this.b.copy(n),this.c.copy(s),this}setFromPointsAndIndices(t,n,s,o){return this.a.copy(t[n]),this.b.copy(t[s]),this.c.copy(t[o]),this}setFromAttributeAndIndices(t,n,s,o){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,o),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Is.subVectors(this.c,this.b),So.subVectors(this.a,this.b),Is.cross(So).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Yi.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return Yi.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,s,o,a){return Yi.getInterpolation(t,this.a,this.b,this.c,n,s,o,a)}containsPoint(t){return Yi.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Yi.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const s=this.a,o=this.b,a=this.c;let y,i;Ou.subVectors(o,s),Du.subVectors(a,s),av.subVectors(t,s);const _=Ou.dot(av),g=Du.dot(av);if(_<=0&&g<=0)return n.copy(s);lv.subVectors(t,o);const h=Ou.dot(lv),l=Du.dot(lv);if(h>=0&&l<=h)return n.copy(o);const d=_*l-h*g;if(d<=0&&_>=0&&h<=0)return y=_/(_-h),n.copy(s).addScaledVector(Ou,y);uv.subVectors(t,a);const v=Ou.dot(uv),x=Du.dot(uv);if(x>=0&&v<=x)return n.copy(a);const p=v*g-_*x;if(p<=0&&g>=0&&x<=0)return i=g/(g-x),n.copy(s).addScaledVector(Du,i);const f=h*x-v*l;if(f<=0&&l-h>=0&&v-x>=0)return rE.subVectors(a,o),i=(l-h)/(l-h+(v-x)),n.copy(o).addScaledVector(rE,i);const u=1/(f+p+d);return y=p*u,i=d*u,n.copy(s).addScaledVector(Ou,y).addScaledVector(Du,i)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const I3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ua={h:0,s:0,l:0},Up={h:0,s:0,l:0};function cv(r,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(t-r)*6*n:n<1/2?t:n<2/3?r+(t-r)*6*(2/3-n):r}class Ot{constructor(t,n,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,s)}set(t,n,s){if(n===void 0&&s===void 0){const o=t;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(t,n,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=Lr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Nn.toWorkingColorSpace(this,n),this}setRGB(t,n,s,o=Nn.workingColorSpace){return this.r=t,this.g=n,this.b=s,Nn.toWorkingColorSpace(this,o),this}setHSL(t,n,s,o=Nn.workingColorSpace){if(t=Rb(t,1),n=hr(n,0,1),s=hr(s,0,1),n===0)this.r=this.g=this.b=s;else{const a=s<=.5?s*(1+n):s+n-s*n,y=2*s-a;this.r=cv(y,a,t+1/3),this.g=cv(y,a,t),this.b=cv(y,a,t-1/3)}return Nn.toWorkingColorSpace(this,o),this}setStyle(t,n=Lr){function s(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(t)){let a;const y=o[1],i=o[2];switch(y){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return s(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return s(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return s(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const a=o[1],y=a.length;if(y===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(y===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=Lr){const s=I3[t.toLowerCase()];return s!==void 0?this.setHex(s,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Pc(t.r),this.g=Pc(t.g),this.b=Pc(t.b),this}copyLinearToSRGB(t){return this.r=Q0(t.r),this.g=Q0(t.g),this.b=Q0(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Lr){return Nn.fromWorkingColorSpace(ni.copy(this),t),Math.round(hr(ni.r*255,0,255))*65536+Math.round(hr(ni.g*255,0,255))*256+Math.round(hr(ni.b*255,0,255))}getHexString(t=Lr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=Nn.workingColorSpace){Nn.fromWorkingColorSpace(ni.copy(this),n);const s=ni.r,o=ni.g,a=ni.b,y=Math.max(s,o,a),i=Math.min(s,o,a);let _,g;const h=(i+y)/2;if(i===y)_=0,g=0;else{const l=y-i;switch(g=h<=.5?l/(y+i):l/(2-y-i),y){case s:_=(o-a)/l+(o<a?6:0);break;case o:_=(a-s)/l+2;break;case a:_=(s-o)/l+4;break}_/=6}return t.h=_,t.s=g,t.l=h,t}getRGB(t,n=Nn.workingColorSpace){return Nn.fromWorkingColorSpace(ni.copy(this),n),t.r=ni.r,t.g=ni.g,t.b=ni.b,t}getStyle(t=Lr){Nn.fromWorkingColorSpace(ni.copy(this),t);const n=ni.r,s=ni.g,o=ni.b;return t!==Lr?`color(${t} ${n.toFixed(3)} ${s.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(s*255)},${Math.round(o*255)})`}offsetHSL(t,n,s){return this.getHSL(ua),this.setHSL(ua.h+t,ua.s+n,ua.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,s){return this.r=t.r+(n.r-t.r)*s,this.g=t.g+(n.g-t.g)*s,this.b=t.b+(n.b-t.b)*s,this}lerpHSL(t,n){this.getHSL(ua),t.getHSL(Up);const s=ph(ua.h,Up.h,n),o=ph(ua.s,Up.s,n),a=ph(ua.l,Up.l,n);return this.setHSL(s,o,a),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,s=this.g,o=this.b,a=t.elements;return this.r=a[0]*n+a[3]*s+a[6]*o,this.g=a[1]*n+a[4]*s+a[7]*o,this.b=a[2]*n+a[5]*s+a[8]*o,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ni=new Ot;Ot.NAMES=I3;let iF=0;class ci extends Xo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iF++}),this.uuid=Qi(),this.name="",this.type="Material",this.blending=zl,this.side=Vo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Sy,this.blendDst=My,this.blendEquation=xa,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ot(0,0,0),this.blendAlpha=0,this.depthFunc=Fh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=j_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Tl,this.stencilZFail=Tl,this.stencilZPass=Tl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const n in t){const s=t[n];if(s===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(s):o&&o.isVector3&&s&&s.isVector3?o.copy(s):this[n]=s}}toJSON(t){const n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(s.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==zl&&(s.blending=this.blending),this.side!==Vo&&(s.side=this.side),this.vertexColors===!0&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=!0),this.blendSrc!==Sy&&(s.blendSrc=this.blendSrc),this.blendDst!==My&&(s.blendDst=this.blendDst),this.blendEquation!==xa&&(s.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(s.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(s.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(s.blendAlpha=this.blendAlpha),this.depthFunc!==Fh&&(s.depthFunc=this.depthFunc),this.depthTest===!1&&(s.depthTest=this.depthTest),this.depthWrite===!1&&(s.depthWrite=this.depthWrite),this.colorWrite===!1&&(s.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(s.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==j_&&(s.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(s.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Tl&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Tl&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Tl&&(s.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(s.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaHash===!0&&(s.alphaHash=!0),this.alphaToCoverage===!0&&(s.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=!0),this.forceSinglePass===!0&&(s.forceSinglePass=!0),this.wireframe===!0&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=!0),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function o(a){const y=[];for(const i in a){const _=a[i];delete _.metadata,y.push(_)}return y}if(n){const a=o(t.textures),y=o(t.images);a.length>0&&(s.textures=a),y.length>0&&(s.images=y)}return s}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let s=null;if(n!==null){const o=n.length;s=new Array(o);for(let a=0;a!==o;++a)s[a]=n[a].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Wa extends ci{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Co=sF();function sF(){const r=new ArrayBuffer(4),t=new Float32Array(r),n=new Uint32Array(r),s=new Uint32Array(512),o=new Uint32Array(512);for(let _=0;_<256;++_){const g=_-127;g<-27?(s[_]=0,s[_|256]=32768,o[_]=24,o[_|256]=24):g<-14?(s[_]=1024>>-g-14,s[_|256]=1024>>-g-14|32768,o[_]=-g-1,o[_|256]=-g-1):g<=15?(s[_]=g+15<<10,s[_|256]=g+15<<10|32768,o[_]=13,o[_|256]=13):g<128?(s[_]=31744,s[_|256]=64512,o[_]=24,o[_|256]=24):(s[_]=31744,s[_|256]=64512,o[_]=13,o[_|256]=13)}const a=new Uint32Array(2048),y=new Uint32Array(64),i=new Uint32Array(64);for(let _=1;_<1024;++_){let g=_<<13,h=0;for(;!(g&8388608);)g<<=1,h-=8388608;g&=-8388609,h+=947912704,a[_]=g|h}for(let _=1024;_<2048;++_)a[_]=939524096+(_-1024<<13);for(let _=1;_<31;++_)y[_]=_<<23;y[31]=1199570944,y[32]=2147483648;for(let _=33;_<63;++_)y[_]=2147483648+(_-32<<23);y[63]=3347054592;for(let _=1;_<64;++_)_!==32&&(i[_]=1024);return{floatView:t,uint32View:n,baseTable:s,shiftTable:o,mantissaTable:a,exponentTable:y,offsetTable:i}}function Ri(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=hr(r,-65504,65504),Co.floatView[0]=r;const t=Co.uint32View[0],n=t>>23&511;return Co.baseTable[n]+((t&8388607)>>Co.shiftTable[n])}function Qd(r){const t=r>>10;return Co.uint32View[0]=Co.mantissaTable[Co.offsetTable[t]+(r&1023)]+Co.exponentTable[t],Co.floatView[0]}const oF={toHalfFloat:Ri,fromHalfFloat:Qd},Er=new Re,Fp=new mt;class In{constructor(t,n,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=s,this.usage=Kh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Gl("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,s){t*=this.itemSize,s*=n.itemSize;for(let o=0,a=this.itemSize;o<a;o++)this.array[t+o]=n.array[s+o];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,s=this.count;n<s;n++)Fp.fromBufferAttribute(this,n),Fp.applyMatrix3(t),this.setXY(n,Fp.x,Fp.y);else if(this.itemSize===3)for(let n=0,s=this.count;n<s;n++)Er.fromBufferAttribute(this,n),Er.applyMatrix3(t),this.setXYZ(n,Er.x,Er.y,Er.z);return this}applyMatrix4(t){for(let n=0,s=this.count;n<s;n++)Er.fromBufferAttribute(this,n),Er.applyMatrix4(t),this.setXYZ(n,Er.x,Er.y,Er.z);return this}applyNormalMatrix(t){for(let n=0,s=this.count;n<s;n++)Er.fromBufferAttribute(this,n),Er.applyNormalMatrix(t),this.setXYZ(n,Er.x,Er.y,Er.z);return this}transformDirection(t){for(let n=0,s=this.count;n<s;n++)Er.fromBufferAttribute(this,n),Er.transformDirection(t),this.setXYZ(n,Er.x,Er.y,Er.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let s=this.array[t*this.itemSize+n];return this.normalized&&(s=vi(s,this.array)),s}setComponent(t,n,s){return this.normalized&&(s=sn(s,this.array)),this.array[t*this.itemSize+n]=s,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=vi(n,this.array)),n}setX(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=vi(n,this.array)),n}setY(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=vi(n,this.array)),n}setZ(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=vi(n,this.array)),n}setW(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,s){return t*=this.itemSize,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array)),this.array[t+0]=n,this.array[t+1]=s,this}setXYZ(t,n,s,o){return t*=this.itemSize,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array),o=sn(o,this.array)),this.array[t+0]=n,this.array[t+1]=s,this.array[t+2]=o,this}setXYZW(t,n,s,o,a){return t*=this.itemSize,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array),o=sn(o,this.array),a=sn(a,this.array)),this.array[t+0]=n,this.array[t+1]=s,this.array[t+2]=o,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Kh&&(t.usage=this.usage),t}}class aF extends In{constructor(t,n,s){super(new Int8Array(t),n,s)}}class lF extends In{constructor(t,n,s){super(new Uint8Array(t),n,s)}}class uF extends In{constructor(t,n,s){super(new Uint8ClampedArray(t),n,s)}}class cF extends In{constructor(t,n,s){super(new Int16Array(t),n,s)}}class kb extends In{constructor(t,n,s){super(new Uint16Array(t),n,s)}}class dF extends In{constructor(t,n,s){super(new Int32Array(t),n,s)}}class Ib extends In{constructor(t,n,s){super(new Uint32Array(t),n,s)}}class hF extends In{constructor(t,n,s){super(new Uint16Array(t),n,s),this.isFloat16BufferAttribute=!0}getX(t){let n=Qd(this.array[t*this.itemSize]);return this.normalized&&(n=vi(n,this.array)),n}setX(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize]=Ri(n),this}getY(t){let n=Qd(this.array[t*this.itemSize+1]);return this.normalized&&(n=vi(n,this.array)),n}setY(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize+1]=Ri(n),this}getZ(t){let n=Qd(this.array[t*this.itemSize+2]);return this.normalized&&(n=vi(n,this.array)),n}setZ(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize+2]=Ri(n),this}getW(t){let n=Qd(this.array[t*this.itemSize+3]);return this.normalized&&(n=vi(n,this.array)),n}setW(t,n){return this.normalized&&(n=sn(n,this.array)),this.array[t*this.itemSize+3]=Ri(n),this}setXY(t,n,s){return t*=this.itemSize,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array)),this.array[t+0]=Ri(n),this.array[t+1]=Ri(s),this}setXYZ(t,n,s,o){return t*=this.itemSize,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array),o=sn(o,this.array)),this.array[t+0]=Ri(n),this.array[t+1]=Ri(s),this.array[t+2]=Ri(o),this}setXYZW(t,n,s,o,a){return t*=this.itemSize,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array),o=sn(o,this.array),a=sn(a,this.array)),this.array[t+0]=Ri(n),this.array[t+1]=Ri(s),this.array[t+2]=Ri(o),this.array[t+3]=Ri(a),this}}class zt extends In{constructor(t,n,s){super(new Float32Array(t),n,s)}}class fF extends In{constructor(t,n,s){super(new Float64Array(t),n,s)}}let pF=0;const hs=new Jt,dv=new jn,Nu=new Re,Wi=new bi,Od=new bi,Ur=new Re;class ln extends Xo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:pF++}),this.uuid=Qi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(j3(t)?Ib:kb)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,s=0){this.groups.push({start:t,count:n,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const a=new hn().getNormalMatrix(t);s.applyNormalMatrix(a),s.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(t),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return hs.makeRotationFromQuaternion(t),this.applyMatrix4(hs),this}rotateX(t){return hs.makeRotationX(t),this.applyMatrix4(hs),this}rotateY(t){return hs.makeRotationY(t),this.applyMatrix4(hs),this}rotateZ(t){return hs.makeRotationZ(t),this.applyMatrix4(hs),this}translate(t,n,s){return hs.makeTranslation(t,n,s),this.applyMatrix4(hs),this}scale(t,n,s){return hs.makeScale(t,n,s),this.applyMatrix4(hs),this}lookAt(t){return dv.lookAt(t),dv.updateMatrix(),this.applyMatrix4(dv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nu).negate(),this.translate(Nu.x,Nu.y,Nu.z),this}setFromPoints(t){const n=[];for(let s=0,o=t.length;s<o;s++){const a=t[s];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new zt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bi);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Re(-1/0,-1/0,-1/0),new Re(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Wi.setFromBufferAttribute(a),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,Wi.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,Wi.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(Wi.min),this.boundingBox.expandByPoint(Wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new li);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Re,1/0);return}if(t){const s=this.boundingSphere.center;if(Wi.setFromBufferAttribute(t),n)for(let a=0,y=n.length;a<y;a++){const i=n[a];Od.setFromBufferAttribute(i),this.morphTargetsRelative?(Ur.addVectors(Wi.min,Od.min),Wi.expandByPoint(Ur),Ur.addVectors(Wi.max,Od.max),Wi.expandByPoint(Ur)):(Wi.expandByPoint(Od.min),Wi.expandByPoint(Od.max))}Wi.getCenter(s);let o=0;for(let a=0,y=t.count;a<y;a++)Ur.fromBufferAttribute(t,a),o=Math.max(o,s.distanceToSquared(Ur));if(n)for(let a=0,y=n.length;a<y;a++){const i=n[a],_=this.morphTargetsRelative;for(let g=0,h=i.count;g<h;g++)Ur.fromBufferAttribute(i,g),_&&(Nu.fromBufferAttribute(t,g),Ur.add(Nu)),o=Math.max(o,s.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=t.array,o=n.position.array,a=n.normal.array,y=n.uv.array,i=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new In(new Float32Array(4*i),4));const _=this.getAttribute("tangent").array,g=[],h=[];for(let R=0;R<i;R++)g[R]=new Re,h[R]=new Re;const l=new Re,d=new Re,v=new Re,x=new mt,p=new mt,f=new mt,u=new Re,c=new Re;function m(R,k,L){l.fromArray(o,R*3),d.fromArray(o,k*3),v.fromArray(o,L*3),x.fromArray(y,R*2),p.fromArray(y,k*2),f.fromArray(y,L*2),d.sub(l),v.sub(l),p.sub(x),f.sub(x);const B=1/(p.x*f.y-f.x*p.y);isFinite(B)&&(u.copy(d).multiplyScalar(f.y).addScaledVector(v,-p.y).multiplyScalar(B),c.copy(v).multiplyScalar(p.x).addScaledVector(d,-f.x).multiplyScalar(B),g[R].add(u),g[k].add(u),g[L].add(u),h[R].add(c),h[k].add(c),h[L].add(c))}let b=this.groups;b.length===0&&(b=[{start:0,count:s.length}]);for(let R=0,k=b.length;R<k;++R){const L=b[R],B=L.start,I=L.count;for(let F=B,z=B+I;F<z;F+=3)m(s[F+0],s[F+1],s[F+2])}const S=new Re,w=new Re,M=new Re,A=new Re;function P(R){M.fromArray(a,R*3),A.copy(M);const k=g[R];S.copy(k),S.sub(M.multiplyScalar(M.dot(k))).normalize(),w.crossVectors(A,k);const B=w.dot(h[R])<0?-1:1;_[R*4]=S.x,_[R*4+1]=S.y,_[R*4+2]=S.z,_[R*4+3]=B}for(let R=0,k=b.length;R<k;++R){const L=b[R],B=L.start,I=L.count;for(let F=B,z=B+I;F<z;F+=3)P(s[F+0]),P(s[F+1]),P(s[F+2])}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new In(new Float32Array(n.count*3),3),this.setAttribute("normal",s);else for(let d=0,v=s.count;d<v;d++)s.setXYZ(d,0,0,0);const o=new Re,a=new Re,y=new Re,i=new Re,_=new Re,g=new Re,h=new Re,l=new Re;if(t)for(let d=0,v=t.count;d<v;d+=3){const x=t.getX(d+0),p=t.getX(d+1),f=t.getX(d+2);o.fromBufferAttribute(n,x),a.fromBufferAttribute(n,p),y.fromBufferAttribute(n,f),h.subVectors(y,a),l.subVectors(o,a),h.cross(l),i.fromBufferAttribute(s,x),_.fromBufferAttribute(s,p),g.fromBufferAttribute(s,f),i.add(h),_.add(h),g.add(h),s.setXYZ(x,i.x,i.y,i.z),s.setXYZ(p,_.x,_.y,_.z),s.setXYZ(f,g.x,g.y,g.z)}else for(let d=0,v=n.count;d<v;d+=3)o.fromBufferAttribute(n,d+0),a.fromBufferAttribute(n,d+1),y.fromBufferAttribute(n,d+2),h.subVectors(y,a),l.subVectors(o,a),h.cross(l),s.setXYZ(d+0,h.x,h.y,h.z),s.setXYZ(d+1,h.x,h.y,h.z),s.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,s=t.count;n<s;n++)Ur.fromBufferAttribute(t,n),Ur.normalize(),t.setXYZ(n,Ur.x,Ur.y,Ur.z)}toNonIndexed(){function t(i,_){const g=i.array,h=i.itemSize,l=i.normalized,d=new g.constructor(_.length*h);let v=0,x=0;for(let p=0,f=_.length;p<f;p++){i.isInterleavedBufferAttribute?v=_[p]*i.data.stride+i.offset:v=_[p]*h;for(let u=0;u<h;u++)d[x++]=g[v++]}return new In(d,h,l)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ln,s=this.index.array,o=this.attributes;for(const i in o){const _=o[i],g=t(_,s);n.setAttribute(i,g)}const a=this.morphAttributes;for(const i in a){const _=[],g=a[i];for(let h=0,l=g.length;h<l;h++){const d=g[h],v=t(d,s);_.push(v)}n.morphAttributes[i]=_}n.morphTargetsRelative=this.morphTargetsRelative;const y=this.groups;for(let i=0,_=y.length;i<_;i++){const g=y[i];n.addGroup(g.start,g.count,g.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const _=this.parameters;for(const g in _)_[g]!==void 0&&(t[g]=_[g]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const s=this.attributes;for(const _ in s){const g=s[_];t.data.attributes[_]=g.toJSON(t.data)}const o={};let a=!1;for(const _ in this.morphAttributes){const g=this.morphAttributes[_],h=[];for(let l=0,d=g.length;l<d;l++){const v=g[l];h.push(v.toJSON(t.data))}h.length>0&&(o[_]=h,a=!0)}a&&(t.data.morphAttributes=o,t.data.morphTargetsRelative=this.morphTargetsRelative);const y=this.groups;y.length>0&&(t.data.groups=JSON.parse(JSON.stringify(y)));const i=this.boundingSphere;return i!==null&&(t.data.boundingSphere={center:i.center.toArray(),radius:i.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const s=t.index;s!==null&&this.setIndex(s.clone(n));const o=t.attributes;for(const g in o){const h=o[g];this.setAttribute(g,h.clone(n))}const a=t.morphAttributes;for(const g in a){const h=[],l=a[g];for(let d=0,v=l.length;d<v;d++)h.push(l[d].clone(n));this.morphAttributes[g]=h}this.morphTargetsRelative=t.morphTargetsRelative;const y=t.groups;for(let g=0,h=y.length;g<h;g++){const l=y[g];this.addGroup(l.start,l.count,l.materialIndex)}const i=t.boundingBox;i!==null&&(this.boundingBox=i.clone());const _=t.boundingSphere;return _!==null&&(this.boundingSphere=_.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iE=new Jt,pl=new Jc,Bp=new li,sE=new Re,Uu=new Re,Fu=new Re,Bu=new Re,hv=new Re,zp=new Re,Vp=new mt,Gp=new mt,Hp=new mt,oE=new Re,aE=new Re,lE=new Re,Wp=new Re,Xp=new Re;class Ar extends jn{constructor(t=new ln,n=new Wa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const o=n[s[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,y=o.length;a<y;a++){const i=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=a}}}}getVertexPosition(t,n){const s=this.geometry,o=s.attributes.position,a=s.morphAttributes.position,y=s.morphTargetsRelative;n.fromBufferAttribute(o,t);const i=this.morphTargetInfluences;if(a&&i){zp.set(0,0,0);for(let _=0,g=a.length;_<g;_++){const h=i[_],l=a[_];h!==0&&(hv.fromBufferAttribute(l,t),y?zp.addScaledVector(hv,h):zp.addScaledVector(hv.sub(n),h))}n.add(zp)}return n}raycast(t,n){const s=this.geometry,o=this.material,a=this.matrixWorld;o!==void 0&&(s.boundingSphere===null&&s.computeBoundingSphere(),Bp.copy(s.boundingSphere),Bp.applyMatrix4(a),pl.copy(t.ray).recast(t.near),!(Bp.containsPoint(pl.origin)===!1&&(pl.intersectSphere(Bp,sE)===null||pl.origin.distanceToSquared(sE)>(t.far-t.near)**2))&&(iE.copy(a).invert(),pl.copy(t.ray).applyMatrix4(iE),!(s.boundingBox!==null&&pl.intersectsBox(s.boundingBox)===!1)&&this._computeIntersections(t,n,pl)))}_computeIntersections(t,n,s){let o;const a=this.geometry,y=this.material,i=a.index,_=a.attributes.position,g=a.attributes.uv,h=a.attributes.uv1,l=a.attributes.normal,d=a.groups,v=a.drawRange;if(i!==null)if(Array.isArray(y))for(let x=0,p=d.length;x<p;x++){const f=d[x],u=y[f.materialIndex],c=Math.max(f.start,v.start),m=Math.min(i.count,Math.min(f.start+f.count,v.start+v.count));for(let b=c,S=m;b<S;b+=3){const w=i.getX(b),M=i.getX(b+1),A=i.getX(b+2);o=qp(this,u,t,s,g,h,l,w,M,A),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=f.materialIndex,n.push(o))}}else{const x=Math.max(0,v.start),p=Math.min(i.count,v.start+v.count);for(let f=x,u=p;f<u;f+=3){const c=i.getX(f),m=i.getX(f+1),b=i.getX(f+2);o=qp(this,y,t,s,g,h,l,c,m,b),o&&(o.faceIndex=Math.floor(f/3),n.push(o))}}else if(_!==void 0)if(Array.isArray(y))for(let x=0,p=d.length;x<p;x++){const f=d[x],u=y[f.materialIndex],c=Math.max(f.start,v.start),m=Math.min(_.count,Math.min(f.start+f.count,v.start+v.count));for(let b=c,S=m;b<S;b+=3){const w=b,M=b+1,A=b+2;o=qp(this,u,t,s,g,h,l,w,M,A),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=f.materialIndex,n.push(o))}}else{const x=Math.max(0,v.start),p=Math.min(_.count,v.start+v.count);for(let f=x,u=p;f<u;f+=3){const c=f,m=f+1,b=f+2;o=qp(this,y,t,s,g,h,l,c,m,b),o&&(o.faceIndex=Math.floor(f/3),n.push(o))}}}}function mF(r,t,n,s,o,a,y,i){let _;if(t.side===xi?_=s.intersectTriangle(y,a,o,!0,i):_=s.intersectTriangle(o,a,y,t.side===Vo,i),_===null)return null;Xp.copy(i),Xp.applyMatrix4(r.matrixWorld);const g=n.ray.origin.distanceTo(Xp);return g<n.near||g>n.far?null:{distance:g,point:Xp.clone(),object:r}}function qp(r,t,n,s,o,a,y,i,_,g){r.getVertexPosition(i,Uu),r.getVertexPosition(_,Fu),r.getVertexPosition(g,Bu);const h=mF(r,t,n,s,Uu,Fu,Bu,Wp);if(h){o&&(Vp.fromBufferAttribute(o,i),Gp.fromBufferAttribute(o,_),Hp.fromBufferAttribute(o,g),h.uv=Yi.getInterpolation(Wp,Uu,Fu,Bu,Vp,Gp,Hp,new mt)),a&&(Vp.fromBufferAttribute(a,i),Gp.fromBufferAttribute(a,_),Hp.fromBufferAttribute(a,g),h.uv1=Yi.getInterpolation(Wp,Uu,Fu,Bu,Vp,Gp,Hp,new mt),h.uv2=h.uv1),y&&(oE.fromBufferAttribute(y,i),aE.fromBufferAttribute(y,_),lE.fromBufferAttribute(y,g),h.normal=Yi.getInterpolation(Wp,Uu,Fu,Bu,oE,aE,lE,new Re),h.normal.dot(s.direction)>0&&h.normal.multiplyScalar(-1));const l={a:i,b:_,c:g,normal:new Re,materialIndex:0};Yi.getNormal(Uu,Fu,Bu,l.normal),h.face=l}return h}class su extends ln{constructor(t=1,n=1,s=1,o=1,a=1,y=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:s,widthSegments:o,heightSegments:a,depthSegments:y};const i=this;o=Math.floor(o),a=Math.floor(a),y=Math.floor(y);const _=[],g=[],h=[],l=[];let d=0,v=0;x("z","y","x",-1,-1,s,n,t,y,a,0),x("z","y","x",1,-1,s,n,-t,y,a,1),x("x","z","y",1,1,t,s,n,o,y,2),x("x","z","y",1,-1,t,s,-n,o,y,3),x("x","y","z",1,-1,t,n,s,o,a,4),x("x","y","z",-1,-1,t,n,-s,o,a,5),this.setIndex(_),this.setAttribute("position",new zt(g,3)),this.setAttribute("normal",new zt(h,3)),this.setAttribute("uv",new zt(l,2));function x(p,f,u,c,m,b,S,w,M,A,P){const R=b/M,k=S/A,L=b/2,B=S/2,I=w/2,F=M+1,z=A+1;let G=0,N=0;const O=new Re;for(let H=0;H<z;H++){const q=H*k-B;for(let K=0;K<F;K++){const ne=K*R-L;O[p]=ne*c,O[f]=q*m,O[u]=I,g.push(O.x,O.y,O.z),O[p]=0,O[f]=0,O[u]=w>0?1:-1,h.push(O.x,O.y,O.z),l.push(K/M),l.push(1-H/A),G+=1}}for(let H=0;H<A;H++)for(let q=0;q<M;q++){const K=d+q+F*H,ne=d+q+F*(H+1),ee=d+(q+1)+F*(H+1),se=d+(q+1)+F*H;_.push(K,ne,se),_.push(ne,ee,se),N+=6}i.addGroup(v,N,P),v+=N,d+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new su(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Vc(r){const t={};for(const n in r){t[n]={};for(const s in r[n]){const o=r[n][s];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][s]=null):t[n][s]=o.clone():Array.isArray(o)?t[n][s]=o.slice():t[n][s]=o}}return t}function mi(r){const t={};for(let n=0;n<r.length;n++){const s=Vc(r[n]);for(const o in s)t[o]=s[o]}return t}function yF(r){const t=[];for(let n=0;n<r.length;n++)t.push(r[n].clone());return t}function O3(r){return r.getRenderTarget()===null?r.outputColorSpace:Nn.workingColorSpace}const D3={clone:Vc,merge:mi};var gF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ws extends ci{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=gF,this.fragmentShader=vF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Vc(t.uniforms),this.uniformsGroups=yF(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const o in this.uniforms){const y=this.uniforms[o].value;y&&y.isTexture?n.uniforms[o]={type:"t",value:y.toJSON(t).uuid}:y&&y.isColor?n.uniforms[o]={type:"c",value:y.getHex()}:y&&y.isVector2?n.uniforms[o]={type:"v2",value:y.toArray()}:y&&y.isVector3?n.uniforms[o]={type:"v3",value:y.toArray()}:y&&y.isVector4?n.uniforms[o]={type:"v4",value:y.toArray()}:y&&y.isMatrix3?n.uniforms[o]={type:"m3",value:y.toArray()}:y&&y.isMatrix4?n.uniforms[o]={type:"m4",value:y.toArray()}:n.uniforms[o]={value:y}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const s={};for(const o in this.extensions)this.extensions[o]===!0&&(s[o]=!0);return Object.keys(s).length>0&&(n.extensions=s),n}}class xf extends jn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt,this.coordinateSystem=no}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ca=new Re,uE=new mt,cE=new mt;class Br extends xf{constructor(t=50,n=1,s=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=o,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=zc*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(Vl*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return zc*2*Math.atan(Math.tan(Vl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,n,s){ca.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ca.x,ca.y).multiplyScalar(-t/ca.z),ca.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(ca.x,ca.y).multiplyScalar(-t/ca.z)}getViewSize(t,n){return this.getViewBounds(t,uE,cE),n.subVectors(cE,uE)}setViewOffset(t,n,s,o,a,y){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=o,this.view.width=a,this.view.height=y,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(Vl*.5*this.fov)/this.zoom,s=2*n,o=this.aspect*s,a=-.5*o;const y=this.view;if(this.view!==null&&this.view.enabled){const _=y.fullWidth,g=y.fullHeight;a+=y.offsetX*o/_,n-=y.offsetY*s/g,o*=y.width/_,s*=y.height/g}const i=this.filmOffset;i!==0&&(a+=t*i/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+o,n,n-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const zu=-90,Vu=1;class N3 extends jn{constructor(t,n,s){super(),this.type="CubeCamera",this.renderTarget=s,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Br(zu,Vu,t,n);o.layers=this.layers,this.add(o);const a=new Br(zu,Vu,t,n);a.layers=this.layers,this.add(a);const y=new Br(zu,Vu,t,n);y.layers=this.layers,this.add(y);const i=new Br(zu,Vu,t,n);i.layers=this.layers,this.add(i);const _=new Br(zu,Vu,t,n);_.layers=this.layers,this.add(_);const g=new Br(zu,Vu,t,n);g.layers=this.layers,this.add(g)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[s,o,a,y,i,_]=n;for(const g of n)this.remove(g);if(t===no)s.up.set(0,1,0),s.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),y.up.set(0,0,1),y.lookAt(0,-1,0),i.up.set(0,1,0),i.lookAt(0,0,1),_.up.set(0,1,0),_.lookAt(0,0,-1);else if(t===Jh)s.up.set(0,-1,0),s.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),y.up.set(0,0,-1),y.lookAt(0,-1,0),i.up.set(0,-1,0),i.lookAt(0,0,1),_.up.set(0,-1,0),_.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const g of n)this.add(g),g.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:s,activeMipmapLevel:o}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[a,y,i,_,g,h]=this.children,l=t.getRenderTarget(),d=t.getActiveCubeFace(),v=t.getActiveMipmapLevel(),x=t.xr.enabled;t.xr.enabled=!1;const p=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,t.setRenderTarget(s,0,o),t.render(n,a),t.setRenderTarget(s,1,o),t.render(n,y),t.setRenderTarget(s,2,o),t.render(n,i),t.setRenderTarget(s,3,o),t.render(n,_),t.setRenderTarget(s,4,o),t.render(n,g),s.texture.generateMipmaps=p,t.setRenderTarget(s,5,o),t.render(n,h),t.setRenderTarget(l,d,v),t.xr.enabled=x,s.texture.needsPMREMUpdate=!0}}class bf extends fr{constructor(t,n,s,o,a,y,i,_,g,h){t=t!==void 0?t:[],n=n!==void 0?n:Go,super(t,n,s,o,a,y,i,_,g,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class U3 extends Hs{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const s={width:t,height:t,depth:1},o=[s,s,s,s,s,s];n.encoding!==void 0&&(Gl("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ka?Lr:qi),this.texture=new bf(o,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:rr}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new su(5,5,5),a=new Ws({name:"CubemapFromEquirect",uniforms:Vc(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:xi,blending:Do});a.uniforms.tEquirect.value=n;const y=new Ar(o,a),i=n.minFilter;return n.minFilter===to&&(n.minFilter=rr),new N3(1,10,this).update(t,y),n.minFilter=i,y.geometry.dispose(),y.material.dispose(),this}clear(t,n,s,o){const a=t.getRenderTarget();for(let y=0;y<6;y++)t.setRenderTarget(this,y),t.clear(n,s,o);t.setRenderTarget(a)}}const fv=new Re,_F=new Re,xF=new hn;class ya{constructor(t=new Re(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,s,o){return this.normal.set(t,n,s),this.constant=o,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,s){const o=fv.subVectors(s,n).cross(_F.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const s=t.delta(fv),o=this.normal.dot(s);if(o===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const a=-(t.start.dot(this.normal)+this.constant)/o;return a<0||a>1?null:n.copy(t.start).addScaledVector(s,a)}intersectsLine(t){const n=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return n<0&&s>0||s<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const s=n||xF.getNormalMatrix(t),o=this.coplanarPoint(fv).applyMatrix4(t),a=this.normal.applyMatrix3(s).normalize();return this.constant=-o.dot(a),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ml=new li,Yp=new Re;class wf{constructor(t=new ya,n=new ya,s=new ya,o=new ya,a=new ya,y=new ya){this.planes=[t,n,s,o,a,y]}set(t,n,s,o,a,y){const i=this.planes;return i[0].copy(t),i[1].copy(n),i[2].copy(s),i[3].copy(o),i[4].copy(a),i[5].copy(y),this}copy(t){const n=this.planes;for(let s=0;s<6;s++)n[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,n=no){const s=this.planes,o=t.elements,a=o[0],y=o[1],i=o[2],_=o[3],g=o[4],h=o[5],l=o[6],d=o[7],v=o[8],x=o[9],p=o[10],f=o[11],u=o[12],c=o[13],m=o[14],b=o[15];if(s[0].setComponents(_-a,d-g,f-v,b-u).normalize(),s[1].setComponents(_+a,d+g,f+v,b+u).normalize(),s[2].setComponents(_+y,d+h,f+x,b+c).normalize(),s[3].setComponents(_-y,d-h,f-x,b-c).normalize(),s[4].setComponents(_-i,d-l,f-p,b-m).normalize(),n===no)s[5].setComponents(_+i,d+l,f+p,b+m).normalize();else if(n===Jh)s[5].setComponents(i,l,p,m).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),ml.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),ml.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(ml)}intersectsSprite(t){return ml.center.set(0,0,0),ml.radius=.7071067811865476,ml.applyMatrix4(t.matrixWorld),this.intersectsSphere(ml)}intersectsSphere(t){const n=this.planes,s=t.center,o=-t.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(s)<o)return!1;return!0}intersectsBox(t){const n=this.planes;for(let s=0;s<6;s++){const o=n[s];if(Yp.x=o.normal.x>0?t.max.x:t.min.x,Yp.y=o.normal.y>0?t.max.y:t.min.y,Yp.z=o.normal.z>0?t.max.z:t.min.z,o.distanceToPoint(Yp)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let s=0;s<6;s++)if(n[s].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function F3(){let r=null,t=!1,n=null,s=null;function o(a,y){n(a,y),s=r.requestAnimationFrame(o)}return{start:function(){t!==!0&&n!==null&&(s=r.requestAnimationFrame(o),t=!0)},stop:function(){r.cancelAnimationFrame(s),t=!1},setAnimationLoop:function(a){n=a},setContext:function(a){r=a}}}function bF(r,t){const n=t.isWebGL2,s=new WeakMap;function o(g,h){const l=g.array,d=g.usage,v=l.byteLength,x=r.createBuffer();r.bindBuffer(h,x),r.bufferData(h,l,d),g.onUploadCallback();let p;if(l instanceof Float32Array)p=r.FLOAT;else if(l instanceof Uint16Array)if(g.isFloat16BufferAttribute)if(n)p=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=r.UNSIGNED_SHORT;else if(l instanceof Int16Array)p=r.SHORT;else if(l instanceof Uint32Array)p=r.UNSIGNED_INT;else if(l instanceof Int32Array)p=r.INT;else if(l instanceof Int8Array)p=r.BYTE;else if(l instanceof Uint8Array)p=r.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)p=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:x,type:p,bytesPerElement:l.BYTES_PER_ELEMENT,version:g.version,size:v}}function a(g,h,l){const d=h.array,v=h._updateRange,x=h.updateRanges;if(r.bindBuffer(l,g),v.count===-1&&x.length===0&&r.bufferSubData(l,0,d),x.length!==0){for(let p=0,f=x.length;p<f;p++){const u=x[p];n?r.bufferSubData(l,u.start*d.BYTES_PER_ELEMENT,d,u.start,u.count):r.bufferSubData(l,u.start*d.BYTES_PER_ELEMENT,d.subarray(u.start,u.start+u.count))}h.clearUpdateRanges()}v.count!==-1&&(n?r.bufferSubData(l,v.offset*d.BYTES_PER_ELEMENT,d,v.offset,v.count):r.bufferSubData(l,v.offset*d.BYTES_PER_ELEMENT,d.subarray(v.offset,v.offset+v.count)),v.count=-1),h.onUploadCallback()}function y(g){return g.isInterleavedBufferAttribute&&(g=g.data),s.get(g)}function i(g){g.isInterleavedBufferAttribute&&(g=g.data);const h=s.get(g);h&&(r.deleteBuffer(h.buffer),s.delete(g))}function _(g,h){if(g.isGLBufferAttribute){const d=s.get(g);(!d||d.version<g.version)&&s.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version});return}g.isInterleavedBufferAttribute&&(g=g.data);const l=s.get(g);if(l===void 0)s.set(g,o(g,h));else if(l.version<g.version){if(l.size!==g.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(l.buffer,g,h),l.version=g.version}}return{get:y,remove:i,update:_}}class Qc extends ln{constructor(t=1,n=1,s=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:s,heightSegments:o};const a=t/2,y=n/2,i=Math.floor(s),_=Math.floor(o),g=i+1,h=_+1,l=t/i,d=n/_,v=[],x=[],p=[],f=[];for(let u=0;u<h;u++){const c=u*d-y;for(let m=0;m<g;m++){const b=m*l-a;x.push(b,-c,0),p.push(0,0,1),f.push(m/i),f.push(1-u/_)}}for(let u=0;u<_;u++)for(let c=0;c<i;c++){const m=c+g*u,b=c+g*(u+1),S=c+1+g*(u+1),w=c+1+g*u;v.push(m,b,w),v.push(b,S,w)}this.setIndex(v),this.setAttribute("position",new zt(x,3)),this.setAttribute("normal",new zt(p,3)),this.setAttribute("uv",new zt(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Qc(t.width,t.height,t.widthSegments,t.heightSegments)}}var wF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,SF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,MF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,EF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TF=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,AF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,CF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,PF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,RF=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,jF=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,LF=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,kF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,IF=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,OF=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,DF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,UF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,FF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,BF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zF=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,VF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,HF=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,WF=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,XF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qF=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,YF=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ZF=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,KF=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,JF=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,QF="gl_FragColor = linearToOutputTexel( gl_FragColor );",$F=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,eB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,tB=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nB=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rB=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,sB=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,oB=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,aB=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lB=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uB=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cB=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,dB=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hB=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,fB=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pB=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mB=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,yB=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gB=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,vB=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_B=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xB=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bB=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,wB=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SB=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,MB=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,EB=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TB=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AB=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,CB=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,PB=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RB=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jB=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,LB=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kB=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,IB=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,OB=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,DB=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,NB=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,UB=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,FB=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,BB=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GB=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,HB=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,WB=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,XB=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qB=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,YB=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ZB=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,KB=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,JB=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,QB=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$B=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,e6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,t6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,n6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,r6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,i6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,s6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,o6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,a6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,l6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,u6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,c6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,d6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,h6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,f6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,p6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,m6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,y6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,g6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,v6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,x6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const b6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,w6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,M6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,E6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,T6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,C6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,P6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,R6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,j6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,L6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,k6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,I6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,O6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,D6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,N6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,U6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,B6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,z6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,V6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,G6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,H6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W6=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,X6=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q6=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Y6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z6=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,K6=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,J6=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Q6=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$6=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ez=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,an={alphahash_fragment:wF,alphahash_pars_fragment:SF,alphamap_fragment:MF,alphamap_pars_fragment:EF,alphatest_fragment:TF,alphatest_pars_fragment:AF,aomap_fragment:CF,aomap_pars_fragment:PF,batching_pars_vertex:RF,batching_vertex:jF,begin_vertex:LF,beginnormal_vertex:kF,bsdfs:IF,iridescence_fragment:OF,bumpmap_pars_fragment:DF,clipping_planes_fragment:NF,clipping_planes_pars_fragment:UF,clipping_planes_pars_vertex:FF,clipping_planes_vertex:BF,color_fragment:zF,color_pars_fragment:VF,color_pars_vertex:GF,color_vertex:HF,common:WF,cube_uv_reflection_fragment:XF,defaultnormal_vertex:qF,displacementmap_pars_vertex:YF,displacementmap_vertex:ZF,emissivemap_fragment:KF,emissivemap_pars_fragment:JF,colorspace_fragment:QF,colorspace_pars_fragment:$F,envmap_fragment:eB,envmap_common_pars_fragment:tB,envmap_pars_fragment:nB,envmap_pars_vertex:rB,envmap_physical_pars_fragment:mB,envmap_vertex:iB,fog_vertex:sB,fog_pars_vertex:oB,fog_fragment:aB,fog_pars_fragment:lB,gradientmap_pars_fragment:uB,lightmap_fragment:cB,lightmap_pars_fragment:dB,lights_lambert_fragment:hB,lights_lambert_pars_fragment:fB,lights_pars_begin:pB,lights_toon_fragment:yB,lights_toon_pars_fragment:gB,lights_phong_fragment:vB,lights_phong_pars_fragment:_B,lights_physical_fragment:xB,lights_physical_pars_fragment:bB,lights_fragment_begin:wB,lights_fragment_maps:SB,lights_fragment_end:MB,logdepthbuf_fragment:EB,logdepthbuf_pars_fragment:TB,logdepthbuf_pars_vertex:AB,logdepthbuf_vertex:CB,map_fragment:PB,map_pars_fragment:RB,map_particle_fragment:jB,map_particle_pars_fragment:LB,metalnessmap_fragment:kB,metalnessmap_pars_fragment:IB,morphcolor_vertex:OB,morphnormal_vertex:DB,morphtarget_pars_vertex:NB,morphtarget_vertex:UB,normal_fragment_begin:FB,normal_fragment_maps:BB,normal_pars_fragment:zB,normal_pars_vertex:VB,normal_vertex:GB,normalmap_pars_fragment:HB,clearcoat_normal_fragment_begin:WB,clearcoat_normal_fragment_maps:XB,clearcoat_pars_fragment:qB,iridescence_pars_fragment:YB,opaque_fragment:ZB,packing:KB,premultiplied_alpha_fragment:JB,project_vertex:QB,dithering_fragment:$B,dithering_pars_fragment:e6,roughnessmap_fragment:t6,roughnessmap_pars_fragment:n6,shadowmap_pars_fragment:r6,shadowmap_pars_vertex:i6,shadowmap_vertex:s6,shadowmask_pars_fragment:o6,skinbase_vertex:a6,skinning_pars_vertex:l6,skinning_vertex:u6,skinnormal_vertex:c6,specularmap_fragment:d6,specularmap_pars_fragment:h6,tonemapping_fragment:f6,tonemapping_pars_fragment:p6,transmission_fragment:m6,transmission_pars_fragment:y6,uv_pars_fragment:g6,uv_pars_vertex:v6,uv_vertex:_6,worldpos_vertex:x6,background_vert:b6,background_frag:w6,backgroundCube_vert:S6,backgroundCube_frag:M6,cube_vert:E6,cube_frag:T6,depth_vert:A6,depth_frag:C6,distanceRGBA_vert:P6,distanceRGBA_frag:R6,equirect_vert:j6,equirect_frag:L6,linedashed_vert:k6,linedashed_frag:I6,meshbasic_vert:O6,meshbasic_frag:D6,meshlambert_vert:N6,meshlambert_frag:U6,meshmatcap_vert:F6,meshmatcap_frag:B6,meshnormal_vert:z6,meshnormal_frag:V6,meshphong_vert:G6,meshphong_frag:H6,meshphysical_vert:W6,meshphysical_frag:X6,meshtoon_vert:q6,meshtoon_frag:Y6,points_vert:Z6,points_frag:K6,shadow_vert:J6,shadow_frag:Q6,sprite_vert:$6,sprite_frag:ez},Ct={common:{diffuse:{value:new Ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new hn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new hn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new hn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new hn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new hn},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new hn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new hn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new hn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new hn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0},uvTransform:{value:new hn}},sprite:{diffuse:{value:new Ot(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}}},Bs={basic:{uniforms:mi([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:mi([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Ot(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:mi([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new Ot(0)},specular:{value:new Ot(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:mi([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new Ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:mi([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new Ot(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:mi([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:mi([Ct.points,Ct.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:mi([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:mi([Ct.common,Ct.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:mi([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:mi([Ct.sprite,Ct.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new hn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:an.background_vert,fragmentShader:an.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:an.backgroundCube_vert,fragmentShader:an.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:mi([Ct.common,Ct.displacementmap,{referencePosition:{value:new Re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:mi([Ct.lights,Ct.fog,{color:{value:new Ot(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};Bs.physical={uniforms:mi([Bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new hn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new hn},clearcoatNormalScale:{value:new mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new hn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new hn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new hn},sheen:{value:0},sheenColor:{value:new Ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new hn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new hn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new hn},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new hn},attenuationDistance:{value:0},attenuationColor:{value:new Ot(0)},specularColor:{value:new Ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new hn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new hn},anisotropyVector:{value:new mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new hn}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};const Zp={r:0,b:0,g:0};function tz(r,t,n,s,o,a,y){const i=new Ot(0);let _=a===!0?0:1,g,h,l=null,d=0,v=null;function x(f,u){let c=!1,m=u.isScene===!0?u.background:null;m&&m.isTexture&&(m=(u.backgroundBlurriness>0?n:t).get(m)),m===null?p(i,_):m&&m.isColor&&(p(m,1),c=!0);const b=r.xr.getEnvironmentBlendMode();b==="additive"?s.buffers.color.setClear(0,0,0,1,y):b==="alpha-blend"&&s.buffers.color.setClear(0,0,0,0,y),(r.autoClear||c)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),m&&(m.isCubeTexture||m.mapping===Kc)?(h===void 0&&(h=new Ar(new su(1,1,1),new Ws({name:"BackgroundCubeMaterial",uniforms:Vc(Bs.backgroundCube.uniforms),vertexShader:Bs.backgroundCube.vertexShader,fragmentShader:Bs.backgroundCube.fragmentShader,side:xi,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(S,w,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(h)),h.material.uniforms.envMap.value=m,h.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=u.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,h.material.toneMapped=Nn.getTransfer(m.colorSpace)!==Hn,(l!==m||d!==m.version||v!==r.toneMapping)&&(h.material.needsUpdate=!0,l=m,d=m.version,v=r.toneMapping),h.layers.enableAll(),f.unshift(h,h.geometry,h.material,0,0,null)):m&&m.isTexture&&(g===void 0&&(g=new Ar(new Qc(2,2),new Ws({name:"BackgroundMaterial",uniforms:Vc(Bs.background.uniforms),vertexShader:Bs.background.vertexShader,fragmentShader:Bs.background.fragmentShader,side:Vo,depthTest:!1,depthWrite:!1,fog:!1})),g.geometry.deleteAttribute("normal"),Object.defineProperty(g.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(g)),g.material.uniforms.t2D.value=m,g.material.uniforms.backgroundIntensity.value=u.backgroundIntensity,g.material.toneMapped=Nn.getTransfer(m.colorSpace)!==Hn,m.matrixAutoUpdate===!0&&m.updateMatrix(),g.material.uniforms.uvTransform.value.copy(m.matrix),(l!==m||d!==m.version||v!==r.toneMapping)&&(g.material.needsUpdate=!0,l=m,d=m.version,v=r.toneMapping),g.layers.enableAll(),f.unshift(g,g.geometry,g.material,0,0,null))}function p(f,u){f.getRGB(Zp,O3(r)),s.buffers.color.setClear(Zp.r,Zp.g,Zp.b,u,y)}return{getClearColor:function(){return i},setClearColor:function(f,u=1){i.set(f),_=u,p(i,_)},getClearAlpha:function(){return _},setClearAlpha:function(f){_=f,p(i,_)},render:x}}function nz(r,t,n,s){const o=r.getParameter(r.MAX_VERTEX_ATTRIBS),a=s.isWebGL2?null:t.get("OES_vertex_array_object"),y=s.isWebGL2||a!==null,i={},_=f(null);let g=_,h=!1;function l(I,F,z,G,N){let O=!1;if(y){const H=p(G,z,F);g!==H&&(g=H,v(g.object)),O=u(I,G,z,N),O&&c(I,G,z,N)}else{const H=F.wireframe===!0;(g.geometry!==G.id||g.program!==z.id||g.wireframe!==H)&&(g.geometry=G.id,g.program=z.id,g.wireframe=H,O=!0)}N!==null&&n.update(N,r.ELEMENT_ARRAY_BUFFER),(O||h)&&(h=!1,A(I,F,z,G),N!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.get(N).buffer))}function d(){return s.isWebGL2?r.createVertexArray():a.createVertexArrayOES()}function v(I){return s.isWebGL2?r.bindVertexArray(I):a.bindVertexArrayOES(I)}function x(I){return s.isWebGL2?r.deleteVertexArray(I):a.deleteVertexArrayOES(I)}function p(I,F,z){const G=z.wireframe===!0;let N=i[I.id];N===void 0&&(N={},i[I.id]=N);let O=N[F.id];O===void 0&&(O={},N[F.id]=O);let H=O[G];return H===void 0&&(H=f(d()),O[G]=H),H}function f(I){const F=[],z=[],G=[];for(let N=0;N<o;N++)F[N]=0,z[N]=0,G[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:z,attributeDivisors:G,object:I,attributes:{},index:null}}function u(I,F,z,G){const N=g.attributes,O=F.attributes;let H=0;const q=z.getAttributes();for(const K in q)if(q[K].location>=0){const ee=N[K];let se=O[K];if(se===void 0&&(K==="instanceMatrix"&&I.instanceMatrix&&(se=I.instanceMatrix),K==="instanceColor"&&I.instanceColor&&(se=I.instanceColor)),ee===void 0||ee.attribute!==se||se&&ee.data!==se.data)return!0;H++}return g.attributesNum!==H||g.index!==G}function c(I,F,z,G){const N={},O=F.attributes;let H=0;const q=z.getAttributes();for(const K in q)if(q[K].location>=0){let ee=O[K];ee===void 0&&(K==="instanceMatrix"&&I.instanceMatrix&&(ee=I.instanceMatrix),K==="instanceColor"&&I.instanceColor&&(ee=I.instanceColor));const se={};se.attribute=ee,ee&&ee.data&&(se.data=ee.data),N[K]=se,H++}g.attributes=N,g.attributesNum=H,g.index=G}function m(){const I=g.newAttributes;for(let F=0,z=I.length;F<z;F++)I[F]=0}function b(I){S(I,0)}function S(I,F){const z=g.newAttributes,G=g.enabledAttributes,N=g.attributeDivisors;z[I]=1,G[I]===0&&(r.enableVertexAttribArray(I),G[I]=1),N[I]!==F&&((s.isWebGL2?r:t.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,F),N[I]=F)}function w(){const I=g.newAttributes,F=g.enabledAttributes;for(let z=0,G=F.length;z<G;z++)F[z]!==I[z]&&(r.disableVertexAttribArray(z),F[z]=0)}function M(I,F,z,G,N,O,H){H===!0?r.vertexAttribIPointer(I,F,z,N,O):r.vertexAttribPointer(I,F,z,G,N,O)}function A(I,F,z,G){if(s.isWebGL2===!1&&(I.isInstancedMesh||G.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;m();const N=G.attributes,O=z.getAttributes(),H=F.defaultAttributeValues;for(const q in O){const K=O[q];if(K.location>=0){let ne=N[q];if(ne===void 0&&(q==="instanceMatrix"&&I.instanceMatrix&&(ne=I.instanceMatrix),q==="instanceColor"&&I.instanceColor&&(ne=I.instanceColor)),ne!==void 0){const ee=ne.normalized,se=ne.itemSize,me=n.get(ne);if(me===void 0)continue;const X=me.buffer,Z=me.type,ie=me.bytesPerElement,ye=s.isWebGL2===!0&&(Z===r.INT||Z===r.UNSIGNED_INT||ne.gpuType===xb);if(ne.isInterleavedBufferAttribute){const fe=ne.data,$=fe.stride,re=ne.offset;if(fe.isInstancedInterleavedBuffer){for(let de=0;de<K.locationSize;de++)S(K.location+de,fe.meshPerAttribute);I.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let de=0;de<K.locationSize;de++)b(K.location+de);r.bindBuffer(r.ARRAY_BUFFER,X);for(let de=0;de<K.locationSize;de++)M(K.location+de,se/K.locationSize,Z,ee,$*ie,(re+se/K.locationSize*de)*ie,ye)}else{if(ne.isInstancedBufferAttribute){for(let fe=0;fe<K.locationSize;fe++)S(K.location+fe,ne.meshPerAttribute);I.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let fe=0;fe<K.locationSize;fe++)b(K.location+fe);r.bindBuffer(r.ARRAY_BUFFER,X);for(let fe=0;fe<K.locationSize;fe++)M(K.location+fe,se/K.locationSize,Z,ee,se*ie,se/K.locationSize*fe*ie,ye)}}else if(H!==void 0){const ee=H[q];if(ee!==void 0)switch(ee.length){case 2:r.vertexAttrib2fv(K.location,ee);break;case 3:r.vertexAttrib3fv(K.location,ee);break;case 4:r.vertexAttrib4fv(K.location,ee);break;default:r.vertexAttrib1fv(K.location,ee)}}}}w()}function P(){L();for(const I in i){const F=i[I];for(const z in F){const G=F[z];for(const N in G)x(G[N].object),delete G[N];delete F[z]}delete i[I]}}function R(I){if(i[I.id]===void 0)return;const F=i[I.id];for(const z in F){const G=F[z];for(const N in G)x(G[N].object),delete G[N];delete F[z]}delete i[I.id]}function k(I){for(const F in i){const z=i[F];if(z[I.id]===void 0)continue;const G=z[I.id];for(const N in G)x(G[N].object),delete G[N];delete z[I.id]}}function L(){B(),h=!0,g!==_&&(g=_,v(g.object))}function B(){_.geometry=null,_.program=null,_.wireframe=!1}return{setup:l,reset:L,resetDefaultState:B,dispose:P,releaseStatesOfGeometry:R,releaseStatesOfProgram:k,initAttributes:m,enableAttribute:b,disableUnusedAttributes:w}}function rz(r,t,n,s){const o=s.isWebGL2;let a;function y(h){a=h}function i(h,l){r.drawArrays(a,h,l),n.update(l,a,1)}function _(h,l,d){if(d===0)return;let v,x;if(o)v=r,x="drawArraysInstanced";else if(v=t.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[x](a,h,l,d),n.update(l,a,d)}function g(h,l,d){if(d===0)return;const v=t.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<d;x++)this.render(h[x],l[x]);else{v.multiDrawArraysWEBGL(a,h,0,l,0,d);let x=0;for(let p=0;p<d;p++)x+=l[p];n.update(x,a,1)}}this.setMode=y,this.render=i,this.renderInstances=_,this.renderMultiDraw=g}function iz(r,t,n){let s;function o(){if(s!==void 0)return s;if(t.has("EXT_texture_filter_anisotropic")===!0){const M=t.get("EXT_texture_filter_anisotropic");s=r.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function a(M){if(M==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const y=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let i=n.precision!==void 0?n.precision:"highp";const _=a(i);_!==i&&(console.warn("THREE.WebGLRenderer:",i,"not supported, using",_,"instead."),i=_);const g=y||t.has("WEBGL_draw_buffers"),h=n.logarithmicDepthBuffer===!0,l=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),d=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=r.getParameter(r.MAX_TEXTURE_SIZE),x=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),p=r.getParameter(r.MAX_VERTEX_ATTRIBS),f=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),u=r.getParameter(r.MAX_VARYING_VECTORS),c=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),m=d>0,b=y||t.has("OES_texture_float"),S=m&&b,w=y?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:y,drawBuffers:g,getMaxAnisotropy:o,getMaxPrecision:a,precision:i,logarithmicDepthBuffer:h,maxTextures:l,maxVertexTextures:d,maxTextureSize:v,maxCubemapSize:x,maxAttributes:p,maxVertexUniforms:f,maxVaryings:u,maxFragmentUniforms:c,vertexTextures:m,floatFragmentTextures:b,floatVertexTextures:S,maxSamples:w}}function sz(r){const t=this;let n=null,s=0,o=!1,a=!1;const y=new ya,i=new hn,_={value:null,needsUpdate:!1};this.uniform=_,this.numPlanes=0,this.numIntersection=0,this.init=function(l,d){const v=l.length!==0||d||s!==0||o;return o=d,s=l.length,v},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(l,d){n=h(l,d,0)},this.setState=function(l,d,v){const x=l.clippingPlanes,p=l.clipIntersection,f=l.clipShadows,u=r.get(l);if(!o||x===null||x.length===0||a&&!f)a?h(null):g();else{const c=a?0:s,m=c*4;let b=u.clippingState||null;_.value=b,b=h(x,d,m,v);for(let S=0;S!==m;++S)b[S]=n[S];u.clippingState=b,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=c}};function g(){_.value!==n&&(_.value=n,_.needsUpdate=s>0),t.numPlanes=s,t.numIntersection=0}function h(l,d,v,x){const p=l!==null?l.length:0;let f=null;if(p!==0){if(f=_.value,x!==!0||f===null){const u=v+p*4,c=d.matrixWorldInverse;i.getNormalMatrix(c),(f===null||f.length<u)&&(f=new Float32Array(u));for(let m=0,b=v;m!==p;++m,b+=4)y.copy(l[m]).applyMatrix4(c,i),y.normal.toArray(f,b),f[b+3]=y.constant}_.value=f,_.needsUpdate=!0}return t.numPlanes=p,t.numIntersection=0,f}}function oz(r){let t=new WeakMap;function n(y,i){return i===Bh?y.mapping=Go:i===zh&&(y.mapping=Ua),y}function s(y){if(y&&y.isTexture){const i=y.mapping;if(i===Bh||i===zh)if(t.has(y)){const _=t.get(y).texture;return n(_,y.mapping)}else{const _=y.image;if(_&&_.height>0){const g=new U3(_.height);return g.fromEquirectangularTexture(r,y),t.set(y,g),y.addEventListener("dispose",o),n(g.texture,y.mapping)}else return null}}return y}function o(y){const i=y.target;i.removeEventListener("dispose",o);const _=t.get(i);_!==void 0&&(t.delete(i),_.dispose())}function a(){t=new WeakMap}return{get:s,dispose:a}}class Sf extends xf{constructor(t=-1,n=1,s=1,o=-1,a=.1,y=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=s,this.bottom=o,this.near=a,this.far=y,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,s,o,a,y){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=s,this.view.offsetY=o,this.view.width=a,this.view.height=y,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let a=s-t,y=s+t,i=o+n,_=o-n;if(this.view!==null&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=g*this.view.offsetX,y=a+g*this.view.width,i-=h*this.view.offsetY,_=i-h*this.view.height}this.projectionMatrix.makeOrthographic(a,y,i,_,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const vc=4,dE=[.125,.215,.35,.446,.526,.582],Pl=20,pv=new Sf,hE=new Ot;let mv=null,yv=0,gv=0;const Al=(1+Math.sqrt(5))/2,Gu=1/Al,fE=[new Re(1,1,1),new Re(-1,1,1),new Re(1,1,-1),new Re(-1,1,-1),new Re(0,Al,Gu),new Re(0,Al,-Gu),new Re(Gu,0,Al),new Re(-Gu,0,Al),new Re(Al,Gu,0),new Re(-Al,Gu,0)];class I_{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,s=.1,o=100){mv=this._renderer.getRenderTarget(),yv=this._renderer.getActiveCubeFace(),gv=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(t,s,o,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=yE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=mE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(mv,yv,gv),t.scissorTest=!1,Kp(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===Go||t.mapping===Ua?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),mv=this._renderer.getRenderTarget(),yv=this._renderer.getActiveCubeFace(),gv=this._renderer.getActiveMipmapLevel();const s=n||this._allocateTargets();return this._textureToCubeUV(t,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,s={magFilter:rr,minFilter:rr,generateMipmaps:!1,type:Bc,format:gi,colorSpace:co,depthBuffer:!1},o=pE(t,n,s);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=pE(t,n,s);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=az(a)),this._blurMaterial=lz(a,t,n)}return o}_compileMaterial(t){const n=new Ar(this._lodPlanes[0],t);this._renderer.compile(n,pv)}_sceneToCubeUV(t,n,s,o){const i=new Br(90,1,n,s),_=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],h=this._renderer,l=h.autoClear,d=h.toneMapping;h.getClearColor(hE),h.toneMapping=ao,h.autoClear=!1;const v=new Wa({name:"PMREM.Background",side:xi,depthWrite:!1,depthTest:!1}),x=new Ar(new su,v);let p=!1;const f=t.background;f?f.isColor&&(v.color.copy(f),t.background=null,p=!0):(v.color.copy(hE),p=!0);for(let u=0;u<6;u++){const c=u%3;c===0?(i.up.set(0,_[u],0),i.lookAt(g[u],0,0)):c===1?(i.up.set(0,0,_[u]),i.lookAt(0,g[u],0)):(i.up.set(0,_[u],0),i.lookAt(0,0,g[u]));const m=this._cubeSize;Kp(o,c*m,u>2?m:0,m,m),h.setRenderTarget(o),p&&h.render(x,i),h.render(t,i)}x.geometry.dispose(),x.material.dispose(),h.toneMapping=d,h.autoClear=l,t.background=f}_textureToCubeUV(t,n){const s=this._renderer,o=t.mapping===Go||t.mapping===Ua;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=yE()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=mE());const a=o?this._cubemapMaterial:this._equirectMaterial,y=new Ar(this._lodPlanes[0],a),i=a.uniforms;i.envMap.value=t;const _=this._cubeSize;Kp(n,0,0,3*_,2*_),s.setRenderTarget(n),s.render(y,pv)}_applyPMREM(t){const n=this._renderer,s=n.autoClear;n.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const a=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),y=fE[(o-1)%fE.length];this._blur(t,o-1,o,a,y)}n.autoClear=s}_blur(t,n,s,o,a){const y=this._pingPongRenderTarget;this._halfBlur(t,y,n,s,o,"latitudinal",a),this._halfBlur(y,t,s,s,o,"longitudinal",a)}_halfBlur(t,n,s,o,a,y,i){const _=this._renderer,g=this._blurMaterial;y!=="latitudinal"&&y!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,l=new Ar(this._lodPlanes[o],g),d=g.uniforms,v=this._sizeLods[s]-1,x=isFinite(a)?Math.PI/(2*v):2*Math.PI/(2*Pl-1),p=a/x,f=isFinite(a)?1+Math.floor(h*p):Pl;f>Pl&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${Pl}`);const u=[];let c=0;for(let M=0;M<Pl;++M){const A=M/p,P=Math.exp(-A*A/2);u.push(P),M===0?c+=P:M<f&&(c+=2*P)}for(let M=0;M<u.length;M++)u[M]=u[M]/c;d.envMap.value=t.texture,d.samples.value=f,d.weights.value=u,d.latitudinal.value=y==="latitudinal",i&&(d.poleAxis.value=i);const{_lodMax:m}=this;d.dTheta.value=x,d.mipInt.value=m-s;const b=this._sizeLods[o],S=3*b*(o>m-vc?o-m+vc:0),w=4*(this._cubeSize-b);Kp(n,S,w,3*b,2*b),_.setRenderTarget(n),_.render(l,pv)}}function az(r){const t=[],n=[],s=[];let o=r;const a=r-vc+1+dE.length;for(let y=0;y<a;y++){const i=Math.pow(2,o);n.push(i);let _=1/i;y>r-vc?_=dE[y-r+vc-1]:y===0&&(_=0),s.push(_);const g=1/(i-2),h=-g,l=1+g,d=[h,h,l,h,l,l,h,h,l,l,h,l],v=6,x=6,p=3,f=2,u=1,c=new Float32Array(p*x*v),m=new Float32Array(f*x*v),b=new Float32Array(u*x*v);for(let w=0;w<v;w++){const M=w%3*2/3-1,A=w>2?0:-1,P=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0];c.set(P,p*x*w),m.set(d,f*x*w);const R=[w,w,w,w,w,w];b.set(R,u*x*w)}const S=new ln;S.setAttribute("position",new In(c,p)),S.setAttribute("uv",new In(m,f)),S.setAttribute("faceIndex",new In(b,u)),t.push(S),o>vc&&o--}return{lodPlanes:t,sizeLods:n,sigmas:s}}function pE(r,t,n){const s=new Hs(r,t,n);return s.texture.mapping=Kc,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function Kp(r,t,n,s,o){r.viewport.set(t,n,s,o),r.scissor.set(t,n,s,o)}function lz(r,t,n){const s=new Float32Array(Pl),o=new Re(0,1,0);return new Ws({name:"SphericalGaussianBlur",defines:{n:Pl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:Ob(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function mE(){return new Ws({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ob(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function yE(){return new Ws({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ob(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function Ob(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uz(r){let t=new WeakMap,n=null;function s(i){if(i&&i.isTexture){const _=i.mapping,g=_===Bh||_===zh,h=_===Go||_===Ua;if(g||h)if(i.isRenderTargetTexture&&i.needsPMREMUpdate===!0){i.needsPMREMUpdate=!1;let l=t.get(i);return n===null&&(n=new I_(r)),l=g?n.fromEquirectangular(i,l):n.fromCubemap(i,l),t.set(i,l),l.texture}else{if(t.has(i))return t.get(i).texture;{const l=i.image;if(g&&l&&l.height>0||h&&l&&o(l)){n===null&&(n=new I_(r));const d=g?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,d),i.addEventListener("dispose",a),d.texture}else return null}}}return i}function o(i){let _=0;const g=6;for(let h=0;h<g;h++)i[h]!==void 0&&_++;return _===g}function a(i){const _=i.target;_.removeEventListener("dispose",a);const g=t.get(_);g!==void 0&&(t.delete(_),g.dispose())}function y(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:s,dispose:y}}function cz(r){const t={};function n(s){if(t[s]!==void 0)return t[s];let o;switch(s){case"WEBGL_depth_texture":o=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=r.getExtension(s)}return t[s]=o,o}return{has:function(s){return n(s)!==null},init:function(s){s.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(s){const o=n(s);return o===null&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),o}}}function dz(r,t,n,s){const o={},a=new WeakMap;function y(l){const d=l.target;d.index!==null&&t.remove(d.index);for(const x in d.attributes)t.remove(d.attributes[x]);for(const x in d.morphAttributes){const p=d.morphAttributes[x];for(let f=0,u=p.length;f<u;f++)t.remove(p[f])}d.removeEventListener("dispose",y),delete o[d.id];const v=a.get(d);v&&(t.remove(v),a.delete(d)),s.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function i(l,d){return o[d.id]===!0||(d.addEventListener("dispose",y),o[d.id]=!0,n.memory.geometries++),d}function _(l){const d=l.attributes;for(const x in d)t.update(d[x],r.ARRAY_BUFFER);const v=l.morphAttributes;for(const x in v){const p=v[x];for(let f=0,u=p.length;f<u;f++)t.update(p[f],r.ARRAY_BUFFER)}}function g(l){const d=[],v=l.index,x=l.attributes.position;let p=0;if(v!==null){const c=v.array;p=v.version;for(let m=0,b=c.length;m<b;m+=3){const S=c[m+0],w=c[m+1],M=c[m+2];d.push(S,w,w,M,M,S)}}else if(x!==void 0){const c=x.array;p=x.version;for(let m=0,b=c.length/3-1;m<b;m+=3){const S=m+0,w=m+1,M=m+2;d.push(S,w,w,M,M,S)}}else return;const f=new(j3(d)?Ib:kb)(d,1);f.version=p;const u=a.get(l);u&&t.remove(u),a.set(l,f)}function h(l){const d=a.get(l);if(d){const v=l.index;v!==null&&d.version<v.version&&g(l)}else g(l);return a.get(l)}return{get:i,update:_,getWireframeAttribute:h}}function hz(r,t,n,s){const o=s.isWebGL2;let a;function y(v){a=v}let i,_;function g(v){i=v.type,_=v.bytesPerElement}function h(v,x){r.drawElements(a,x,i,v*_),n.update(x,a,1)}function l(v,x,p){if(p===0)return;let f,u;if(o)f=r,u="drawElementsInstanced";else if(f=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",f===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[u](a,x,i,v*_,p),n.update(x,a,p)}function d(v,x,p){if(p===0)return;const f=t.get("WEBGL_multi_draw");if(f===null)for(let u=0;u<p;u++)this.render(v[u]/_,x[u]);else{f.multiDrawElementsWEBGL(a,x,0,i,v,0,p);let u=0;for(let c=0;c<p;c++)u+=x[c];n.update(u,a,1)}}this.setMode=y,this.setIndex=g,this.render=h,this.renderInstances=l,this.renderMultiDraw=d}function fz(r){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function s(a,y,i){switch(n.calls++,y){case r.TRIANGLES:n.triangles+=i*(a/3);break;case r.LINES:n.lines+=i*(a/2);break;case r.LINE_STRIP:n.lines+=i*(a-1);break;case r.LINE_LOOP:n.lines+=i*a;break;case r.POINTS:n.points+=i*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",y);break}}function o(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:o,update:s}}function pz(r,t){return r[0]-t[0]}function mz(r,t){return Math.abs(t[1])-Math.abs(r[1])}function yz(r,t,n){const s={},o=new Float32Array(8),a=new WeakMap,y=new Un,i=[];for(let g=0;g<8;g++)i[g]=[g,0];function _(g,h,l){const d=g.morphTargetInfluences;if(t.isWebGL2===!0){const x=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,p=x!==void 0?x.length:0;let f=a.get(h);if(f===void 0||f.count!==p){let F=function(){B.dispose(),a.delete(h),h.removeEventListener("dispose",F)};var v=F;f!==void 0&&f.texture.dispose();const m=h.morphAttributes.position!==void 0,b=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,w=h.morphAttributes.position||[],M=h.morphAttributes.normal||[],A=h.morphAttributes.color||[];let P=0;m===!0&&(P=1),b===!0&&(P=2),S===!0&&(P=3);let R=h.attributes.position.count*P,k=1;R>t.maxTextureSize&&(k=Math.ceil(R/t.maxTextureSize),R=t.maxTextureSize);const L=new Float32Array(R*k*4*p),B=new ig(L,R,k,p);B.type=ys,B.needsUpdate=!0;const I=P*4;for(let z=0;z<p;z++){const G=w[z],N=M[z],O=A[z],H=R*k*4*z;for(let q=0;q<G.count;q++){const K=q*I;m===!0&&(y.fromBufferAttribute(G,q),L[H+K+0]=y.x,L[H+K+1]=y.y,L[H+K+2]=y.z,L[H+K+3]=0),b===!0&&(y.fromBufferAttribute(N,q),L[H+K+4]=y.x,L[H+K+5]=y.y,L[H+K+6]=y.z,L[H+K+7]=0),S===!0&&(y.fromBufferAttribute(O,q),L[H+K+8]=y.x,L[H+K+9]=y.y,L[H+K+10]=y.z,L[H+K+11]=O.itemSize===4?y.w:1)}}f={count:p,texture:B,size:new mt(R,k)},a.set(h,f),h.addEventListener("dispose",F)}let u=0;for(let m=0;m<d.length;m++)u+=d[m];const c=h.morphTargetsRelative?1:1-u;l.getUniforms().setValue(r,"morphTargetBaseInfluence",c),l.getUniforms().setValue(r,"morphTargetInfluences",d),l.getUniforms().setValue(r,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(r,"morphTargetsTextureSize",f.size)}else{const x=d===void 0?0:d.length;let p=s[h.id];if(p===void 0||p.length!==x){p=[];for(let b=0;b<x;b++)p[b]=[b,0];s[h.id]=p}for(let b=0;b<x;b++){const S=p[b];S[0]=b,S[1]=d[b]}p.sort(mz);for(let b=0;b<8;b++)b<x&&p[b][1]?(i[b][0]=p[b][0],i[b][1]=p[b][1]):(i[b][0]=Number.MAX_SAFE_INTEGER,i[b][1]=0);i.sort(pz);const f=h.morphAttributes.position,u=h.morphAttributes.normal;let c=0;for(let b=0;b<8;b++){const S=i[b],w=S[0],M=S[1];w!==Number.MAX_SAFE_INTEGER&&M?(f&&h.getAttribute("morphTarget"+b)!==f[w]&&h.setAttribute("morphTarget"+b,f[w]),u&&h.getAttribute("morphNormal"+b)!==u[w]&&h.setAttribute("morphNormal"+b,u[w]),o[b]=M,c+=M):(f&&h.hasAttribute("morphTarget"+b)===!0&&h.deleteAttribute("morphTarget"+b),u&&h.hasAttribute("morphNormal"+b)===!0&&h.deleteAttribute("morphNormal"+b),o[b]=0)}const m=h.morphTargetsRelative?1:1-c;l.getUniforms().setValue(r,"morphTargetBaseInfluence",m),l.getUniforms().setValue(r,"morphTargetInfluences",o)}}return{update:_}}function gz(r,t,n,s){let o=new WeakMap;function a(_){const g=s.render.frame,h=_.geometry,l=t.get(_,h);if(o.get(l)!==g&&(t.update(l),o.set(l,g)),_.isInstancedMesh&&(_.hasEventListener("dispose",i)===!1&&_.addEventListener("dispose",i),o.get(_)!==g&&(n.update(_.instanceMatrix,r.ARRAY_BUFFER),_.instanceColor!==null&&n.update(_.instanceColor,r.ARRAY_BUFFER),o.set(_,g))),_.isSkinnedMesh){const d=_.skeleton;o.get(d)!==g&&(d.update(),o.set(d,g))}return l}function y(){o=new WeakMap}function i(_){const g=_.target;g.removeEventListener("dispose",i),n.remove(g.instanceMatrix),g.instanceColor!==null&&n.remove(g.instanceColor)}return{update:a,dispose:y}}class Db extends fr{constructor(t,n,s,o,a,y,i,_,g,h){if(h=h!==void 0?h:La,h!==La&&h!==Ql)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");s===void 0&&h===La&&(s=jo),s===void 0&&h===Ql&&(s=ja),super(null,o,a,y,i,_,h,s,g),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=i!==void 0?i:vr,this.minFilter=_!==void 0?_:vr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const B3=new fr,z3=new Db(1,1);z3.compareFunction=Pb;const V3=new ig,G3=new Lb,H3=new bf,gE=[],vE=[],_E=new Float32Array(16),xE=new Float32Array(9),bE=new Float32Array(4);function $c(r,t,n){const s=r[0];if(s<=0||s>0)return r;const o=t*n;let a=gE[o];if(a===void 0&&(a=new Float32Array(o),gE[o]=a),t!==0){s.toArray(a,0);for(let y=1,i=0;y!==t;++y)i+=n,r[y].toArray(a,i)}return a}function Ir(r,t){if(r.length!==t.length)return!1;for(let n=0,s=r.length;n<s;n++)if(r[n]!==t[n])return!1;return!0}function Or(r,t){for(let n=0,s=t.length;n<s;n++)r[n]=t[n]}function sg(r,t){let n=vE[t];n===void 0&&(n=new Int32Array(t),vE[t]=n);for(let s=0;s!==t;++s)n[s]=r.allocateTextureUnit();return n}function vz(r,t){const n=this.cache;n[0]!==t&&(r.uniform1f(this.addr,t),n[0]=t)}function _z(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ir(n,t))return;r.uniform2fv(this.addr,t),Or(n,t)}}function xz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ir(n,t))return;r.uniform3fv(this.addr,t),Or(n,t)}}function bz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ir(n,t))return;r.uniform4fv(this.addr,t),Or(n,t)}}function wz(r,t){const n=this.cache,s=t.elements;if(s===void 0){if(Ir(n,t))return;r.uniformMatrix2fv(this.addr,!1,t),Or(n,t)}else{if(Ir(n,s))return;bE.set(s),r.uniformMatrix2fv(this.addr,!1,bE),Or(n,s)}}function Sz(r,t){const n=this.cache,s=t.elements;if(s===void 0){if(Ir(n,t))return;r.uniformMatrix3fv(this.addr,!1,t),Or(n,t)}else{if(Ir(n,s))return;xE.set(s),r.uniformMatrix3fv(this.addr,!1,xE),Or(n,s)}}function Mz(r,t){const n=this.cache,s=t.elements;if(s===void 0){if(Ir(n,t))return;r.uniformMatrix4fv(this.addr,!1,t),Or(n,t)}else{if(Ir(n,s))return;_E.set(s),r.uniformMatrix4fv(this.addr,!1,_E),Or(n,s)}}function Ez(r,t){const n=this.cache;n[0]!==t&&(r.uniform1i(this.addr,t),n[0]=t)}function Tz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ir(n,t))return;r.uniform2iv(this.addr,t),Or(n,t)}}function Az(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ir(n,t))return;r.uniform3iv(this.addr,t),Or(n,t)}}function Cz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ir(n,t))return;r.uniform4iv(this.addr,t),Or(n,t)}}function Pz(r,t){const n=this.cache;n[0]!==t&&(r.uniform1ui(this.addr,t),n[0]=t)}function Rz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(r.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ir(n,t))return;r.uniform2uiv(this.addr,t),Or(n,t)}}function jz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(r.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Ir(n,t))return;r.uniform3uiv(this.addr,t),Or(n,t)}}function Lz(r,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(r.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ir(n,t))return;r.uniform4uiv(this.addr,t),Or(n,t)}}function kz(r,t,n){const s=this.cache,o=n.allocateTextureUnit();s[0]!==o&&(r.uniform1i(this.addr,o),s[0]=o);const a=this.type===r.SAMPLER_2D_SHADOW?z3:B3;n.setTexture2D(t||a,o)}function Iz(r,t,n){const s=this.cache,o=n.allocateTextureUnit();s[0]!==o&&(r.uniform1i(this.addr,o),s[0]=o),n.setTexture3D(t||G3,o)}function Oz(r,t,n){const s=this.cache,o=n.allocateTextureUnit();s[0]!==o&&(r.uniform1i(this.addr,o),s[0]=o),n.setTextureCube(t||H3,o)}function Dz(r,t,n){const s=this.cache,o=n.allocateTextureUnit();s[0]!==o&&(r.uniform1i(this.addr,o),s[0]=o),n.setTexture2DArray(t||V3,o)}function Nz(r){switch(r){case 5126:return vz;case 35664:return _z;case 35665:return xz;case 35666:return bz;case 35674:return wz;case 35675:return Sz;case 35676:return Mz;case 5124:case 35670:return Ez;case 35667:case 35671:return Tz;case 35668:case 35672:return Az;case 35669:case 35673:return Cz;case 5125:return Pz;case 36294:return Rz;case 36295:return jz;case 36296:return Lz;case 35678:case 36198:case 36298:case 36306:case 35682:return kz;case 35679:case 36299:case 36307:return Iz;case 35680:case 36300:case 36308:case 36293:return Oz;case 36289:case 36303:case 36311:case 36292:return Dz}}function Uz(r,t){r.uniform1fv(this.addr,t)}function Fz(r,t){const n=$c(t,this.size,2);r.uniform2fv(this.addr,n)}function Bz(r,t){const n=$c(t,this.size,3);r.uniform3fv(this.addr,n)}function zz(r,t){const n=$c(t,this.size,4);r.uniform4fv(this.addr,n)}function Vz(r,t){const n=$c(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,n)}function Gz(r,t){const n=$c(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,n)}function Hz(r,t){const n=$c(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,n)}function Wz(r,t){r.uniform1iv(this.addr,t)}function Xz(r,t){r.uniform2iv(this.addr,t)}function qz(r,t){r.uniform3iv(this.addr,t)}function Yz(r,t){r.uniform4iv(this.addr,t)}function Zz(r,t){r.uniform1uiv(this.addr,t)}function Kz(r,t){r.uniform2uiv(this.addr,t)}function Jz(r,t){r.uniform3uiv(this.addr,t)}function Qz(r,t){r.uniform4uiv(this.addr,t)}function $z(r,t,n){const s=this.cache,o=t.length,a=sg(n,o);Ir(s,a)||(r.uniform1iv(this.addr,a),Or(s,a));for(let y=0;y!==o;++y)n.setTexture2D(t[y]||B3,a[y])}function e8(r,t,n){const s=this.cache,o=t.length,a=sg(n,o);Ir(s,a)||(r.uniform1iv(this.addr,a),Or(s,a));for(let y=0;y!==o;++y)n.setTexture3D(t[y]||G3,a[y])}function t8(r,t,n){const s=this.cache,o=t.length,a=sg(n,o);Ir(s,a)||(r.uniform1iv(this.addr,a),Or(s,a));for(let y=0;y!==o;++y)n.setTextureCube(t[y]||H3,a[y])}function n8(r,t,n){const s=this.cache,o=t.length,a=sg(n,o);Ir(s,a)||(r.uniform1iv(this.addr,a),Or(s,a));for(let y=0;y!==o;++y)n.setTexture2DArray(t[y]||V3,a[y])}function r8(r){switch(r){case 5126:return Uz;case 35664:return Fz;case 35665:return Bz;case 35666:return zz;case 35674:return Vz;case 35675:return Gz;case 35676:return Hz;case 5124:case 35670:return Wz;case 35667:case 35671:return Xz;case 35668:case 35672:return qz;case 35669:case 35673:return Yz;case 5125:return Zz;case 36294:return Kz;case 36295:return Jz;case 36296:return Qz;case 35678:case 36198:case 36298:case 36306:case 35682:return $z;case 35679:case 36299:case 36307:return e8;case 35680:case 36300:case 36308:case 36293:return t8;case 36289:case 36303:case 36311:case 36292:return n8}}class i8{constructor(t,n,s){this.id=t,this.addr=s,this.cache=[],this.type=n.type,this.setValue=Nz(n.type)}}class s8{constructor(t,n,s){this.id=t,this.addr=s,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=r8(n.type)}}class o8{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,s){const o=this.seq;for(let a=0,y=o.length;a!==y;++a){const i=o[a];i.setValue(t,n[i.id],s)}}}const vv=/(\w+)(\])?(\[|\.)?/g;function wE(r,t){r.seq.push(t),r.map[t.id]=t}function a8(r,t,n){const s=r.name,o=s.length;for(vv.lastIndex=0;;){const a=vv.exec(s),y=vv.lastIndex;let i=a[1];const _=a[2]==="]",g=a[3];if(_&&(i=i|0),g===void 0||g==="["&&y+2===o){wE(n,g===void 0?new i8(i,r,t):new s8(i,r,t));break}else{let l=n.map[i];l===void 0&&(l=new o8(i),wE(n,l)),n=l}}}class Hm{constructor(t,n){this.seq=[],this.map={};const s=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let o=0;o<s;++o){const a=t.getActiveUniform(n,o),y=t.getUniformLocation(n,a.name);a8(a,y,this)}}setValue(t,n,s,o){const a=this.map[n];a!==void 0&&a.setValue(t,s,o)}setOptional(t,n,s){const o=n[s];o!==void 0&&this.setValue(t,s,o)}static upload(t,n,s,o){for(let a=0,y=n.length;a!==y;++a){const i=n[a],_=s[i.id];_.needsUpdate!==!1&&i.setValue(t,_.value,o)}}static seqWithValue(t,n){const s=[];for(let o=0,a=t.length;o!==a;++o){const y=t[o];y.id in n&&s.push(y)}return s}}function SE(r,t,n){const s=r.createShader(t);return r.shaderSource(s,n),r.compileShader(s),s}const l8=37297;let u8=0;function c8(r,t){const n=r.split(`
`),s=[],o=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let y=o;y<a;y++){const i=y+1;s.push(`${i===t?">":" "} ${i}: ${n[y]}`)}return s.join(`
`)}function d8(r){const t=Nn.getPrimaries(Nn.workingColorSpace),n=Nn.getPrimaries(r);let s;switch(t===n?s="":t===Zh&&n===Yh?s="LinearDisplayP3ToLinearSRGB":t===Yh&&n===Zh&&(s="LinearSRGBToLinearDisplayP3"),r){case co:case vf:return[s,"LinearTransferOETF"];case Lr:case rg:return[s,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[s,"LinearTransferOETF"]}}function ME(r,t,n){const s=r.getShaderParameter(t,r.COMPILE_STATUS),o=r.getShaderInfoLog(t).trim();if(s&&o==="")return"";const a=/ERROR: 0:(\d+)/.exec(o);if(a){const y=parseInt(a[1]);return n.toUpperCase()+`

`+o+`

`+c8(r.getShaderSource(t),y)}else return o}function h8(r,t){const n=d8(t);return`vec4 ${r}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function f8(r,t){let n;switch(t){case i3:n="Linear";break;case s3:n="Reinhard";break;case o3:n="OptimizedCineon";break;case _b:n="ACESFilmic";break;case l3:n="AgX";break;case a3:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+r+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function p8(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.alphaToCoverage||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_c).join(`
`)}function m8(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_c).join(`
`)}function y8(r){const t=[];for(const n in r){const s=r[n];s!==!1&&t.push("#define "+n+" "+s)}return t.join(`
`)}function g8(r,t){const n={},s=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const a=r.getActiveAttrib(t,o),y=a.name;let i=1;a.type===r.FLOAT_MAT2&&(i=2),a.type===r.FLOAT_MAT3&&(i=3),a.type===r.FLOAT_MAT4&&(i=4),n[y]={type:a.type,location:r.getAttribLocation(t,y),locationSize:i}}return n}function _c(r){return r!==""}function EE(r,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function TE(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const v8=/^[ \t]*#include +<([\w\d./]+)>/gm;function O_(r){return r.replace(v8,x8)}const _8=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function x8(r,t){let n=an[t];if(n===void 0){const s=_8.get(t);if(s!==void 0)n=an[s],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,s);else throw new Error("Can not resolve #include <"+t+">")}return O_(n)}const b8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AE(r){return r.replace(b8,w8)}function w8(r,t,n,s){let o="";for(let a=parseInt(t);a<parseInt(n);a++)o+=s.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return o}function CE(r){let t=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	`;return r.isWebGL2&&(t+=`precision ${r.precision} sampler3D;
		precision ${r.precision} sampler2DArray;
		precision ${r.precision} sampler2DShadow;
		precision ${r.precision} samplerCubeShadow;
		precision ${r.precision} sampler2DArrayShadow;
		precision ${r.precision} isampler2D;
		precision ${r.precision} isampler3D;
		precision ${r.precision} isamplerCube;
		precision ${r.precision} isampler2DArray;
		precision ${r.precision} usampler2D;
		precision ${r.precision} usampler3D;
		precision ${r.precision} usamplerCube;
		precision ${r.precision} usampler2DArray;
		`),r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function S8(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===$y?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===hh?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ns&&(t="SHADOWMAP_TYPE_VSM"),t}function M8(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Go:case Ua:t="ENVMAP_TYPE_CUBE";break;case Kc:t="ENVMAP_TYPE_CUBE_UV";break}return t}function E8(r){let t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Ua:t="ENVMAP_MODE_REFRACTION";break}return t}function T8(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case gf:t="ENVMAP_BLENDING_MULTIPLY";break;case n3:t="ENVMAP_BLENDING_MIX";break;case r3:t="ENVMAP_BLENDING_ADD";break}return t}function A8(r){const t=r.envMapCubeUVHeight;if(t===null)return null;const n=Math.log2(t)-2,s=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:s,maxMip:n}}function C8(r,t,n,s){const o=r.getContext(),a=n.defines;let y=n.vertexShader,i=n.fragmentShader;const _=S8(n),g=M8(n),h=E8(n),l=T8(n),d=A8(n),v=n.isWebGL2?"":p8(n),x=m8(n),p=y8(a),f=o.createProgram();let u,c,m=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(u=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(_c).join(`
`),u.length>0&&(u+=`
`),c=[v,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(_c).join(`
`),c.length>0&&(c+=`
`)):(u=[CE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_c).join(`
`),c=[v,CE(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+g:"",n.envMap?"#define "+h:"",n.envMap?"#define "+l:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ao?"#define TONE_MAPPING":"",n.toneMapping!==ao?an.tonemapping_pars_fragment:"",n.toneMapping!==ao?f8("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",an.colorspace_pars_fragment,h8("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(_c).join(`
`)),y=O_(y),y=EE(y,n),y=TE(y,n),i=O_(i),i=EE(i,n),i=TE(i,n),y=AE(y),i=AE(i),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(m=`#version 300 es
`,u=[x,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+u,c=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===L_?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===L_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+c);const b=m+u+y,S=m+c+i,w=SE(o,o.VERTEX_SHADER,b),M=SE(o,o.FRAGMENT_SHADER,S);o.attachShader(f,w),o.attachShader(f,M),n.index0AttributeName!==void 0?o.bindAttribLocation(f,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(f,0,"position"),o.linkProgram(f);function A(L){if(r.debug.checkShaderErrors){const B=o.getProgramInfoLog(f).trim(),I=o.getShaderInfoLog(w).trim(),F=o.getShaderInfoLog(M).trim();let z=!0,G=!0;if(o.getProgramParameter(f,o.LINK_STATUS)===!1)if(z=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(o,f,w,M);else{const N=ME(o,w,"vertex"),O=ME(o,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(f,o.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+B+`
`+N+`
`+O)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(I===""||F==="")&&(G=!1);G&&(L.diagnostics={runnable:z,programLog:B,vertexShader:{log:I,prefix:u},fragmentShader:{log:F,prefix:c}})}o.deleteShader(w),o.deleteShader(M),P=new Hm(o,f),R=g8(o,f)}let P;this.getUniforms=function(){return P===void 0&&A(this),P};let R;this.getAttributes=function(){return R===void 0&&A(this),R};let k=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return k===!1&&(k=o.getProgramParameter(f,l8)),k},this.destroy=function(){s.releaseStatesOfProgram(this),o.deleteProgram(f),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=u8++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=w,this.fragmentShader=M,this}let P8=0;class R8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,s=t.fragmentShader,o=this._getShaderStage(n),a=this._getShaderStage(s),y=this._getShaderCacheForMaterial(t);return y.has(o)===!1&&(y.add(o),o.usedTimes++),y.has(a)===!1&&(y.add(a),a.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const s of n)s.usedTimes--,s.usedTimes===0&&this.shaderCache.delete(s.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let s=n.get(t);return s===void 0&&(s=new Set,n.set(t,s)),s}_getShaderStage(t){const n=this.shaderCache;let s=n.get(t);return s===void 0&&(s=new j8(t),n.set(t,s)),s}}class j8{constructor(t){this.id=P8++,this.code=t,this.usedTimes=0}}function L8(r,t,n,s,o,a,y){const i=new Hl,_=new R8,g=new Set,h=[],l=o.isWebGL2,d=o.logarithmicDepthBuffer,v=o.vertexTextures;let x=o.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(R){return g.add(R),R===0?"uv":`uv${R}`}function u(R,k,L,B,I){const F=B.fog,z=I.geometry,G=R.isMeshStandardMaterial?B.environment:null,N=(R.isMeshStandardMaterial?n:t).get(R.envMap||G),O=N&&N.mapping===Kc?N.image.height:null,H=p[R.type];R.precision!==null&&(x=o.getMaxPrecision(R.precision),x!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",x,"instead."));const q=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,K=q!==void 0?q.length:0;let ne=0;z.morphAttributes.position!==void 0&&(ne=1),z.morphAttributes.normal!==void 0&&(ne=2),z.morphAttributes.color!==void 0&&(ne=3);let ee,se,me,X;if(H){const Nt=Bs[H];ee=Nt.vertexShader,se=Nt.fragmentShader}else ee=R.vertexShader,se=R.fragmentShader,_.update(R),me=_.getVertexShaderID(R),X=_.getFragmentShaderID(R);const Z=r.getRenderTarget(),ie=I.isInstancedMesh===!0,ye=I.isBatchedMesh===!0,fe=!!R.map,$=!!R.matcap,re=!!N,de=!!R.aoMap,ge=!!R.lightMap,ve=!!R.bumpMap,we=!!R.normalMap,Se=!!R.displacementMap,ae=!!R.emissiveMap,oe=!!R.metalnessMap,Ee=!!R.roughnessMap,Oe=R.anisotropy>0,ze=R.clearcoat>0,Be=R.iridescence>0,dt=R.sheen>0,Je=R.transmission>0,_e=Oe&&!!R.anisotropyMap,Ue=ze&&!!R.clearcoatMap,Fe=ze&&!!R.clearcoatNormalMap,Ne=ze&&!!R.clearcoatRoughnessMap,ft=Be&&!!R.iridescenceMap,vt=Be&&!!R.iridescenceThicknessMap,ht=dt&&!!R.sheenColorMap,lt=dt&&!!R.sheenRoughnessMap,ce=!!R.specularMap,ue=!!R.specularColorMap,he=!!R.specularIntensityMap,be=Je&&!!R.transmissionMap,je=Je&&!!R.thicknessMap,We=!!R.gradientMap,xe=!!R.alphaMap,Ve=R.alphaTest>0,Ce=!!R.alphaHash,Qe=!!R.extensions;let ut=ao;R.toneMapped&&(Z===null||Z.isXRRenderTarget===!0)&&(ut=r.toneMapping);const Rt={isWebGL2:l,shaderID:H,shaderType:R.type,shaderName:R.name,vertexShader:ee,fragmentShader:se,defines:R.defines,customVertexShaderID:me,customFragmentShaderID:X,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:x,batching:ye,instancing:ie,instancingColor:ie&&I.instanceColor!==null,supportsVertexTextures:v,outputColorSpace:Z===null?r.outputColorSpace:Z.isXRRenderTarget===!0?Z.texture.colorSpace:co,alphaToCoverage:!!R.alphaToCoverage,map:fe,matcap:$,envMap:re,envMapMode:re&&N.mapping,envMapCubeUVHeight:O,aoMap:de,lightMap:ge,bumpMap:ve,normalMap:we,displacementMap:v&&Se,emissiveMap:ae,normalMapObjectSpace:we&&R.normalMapType===S3,normalMapTangentSpace:we&&R.normalMapType===Ha,metalnessMap:oe,roughnessMap:Ee,anisotropy:Oe,anisotropyMap:_e,clearcoat:ze,clearcoatMap:Ue,clearcoatNormalMap:Fe,clearcoatRoughnessMap:Ne,iridescence:Be,iridescenceMap:ft,iridescenceThicknessMap:vt,sheen:dt,sheenColorMap:ht,sheenRoughnessMap:lt,specularMap:ce,specularColorMap:ue,specularIntensityMap:he,transmission:Je,transmissionMap:be,thicknessMap:je,gradientMap:We,opaque:R.transparent===!1&&R.blending===zl&&R.alphaToCoverage===!1,alphaMap:xe,alphaTest:Ve,alphaHash:Ce,combine:R.combine,mapUv:fe&&f(R.map.channel),aoMapUv:de&&f(R.aoMap.channel),lightMapUv:ge&&f(R.lightMap.channel),bumpMapUv:ve&&f(R.bumpMap.channel),normalMapUv:we&&f(R.normalMap.channel),displacementMapUv:Se&&f(R.displacementMap.channel),emissiveMapUv:ae&&f(R.emissiveMap.channel),metalnessMapUv:oe&&f(R.metalnessMap.channel),roughnessMapUv:Ee&&f(R.roughnessMap.channel),anisotropyMapUv:_e&&f(R.anisotropyMap.channel),clearcoatMapUv:Ue&&f(R.clearcoatMap.channel),clearcoatNormalMapUv:Fe&&f(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ne&&f(R.clearcoatRoughnessMap.channel),iridescenceMapUv:ft&&f(R.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&f(R.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&f(R.sheenColorMap.channel),sheenRoughnessMapUv:lt&&f(R.sheenRoughnessMap.channel),specularMapUv:ce&&f(R.specularMap.channel),specularColorMapUv:ue&&f(R.specularColorMap.channel),specularIntensityMapUv:he&&f(R.specularIntensityMap.channel),transmissionMapUv:be&&f(R.transmissionMap.channel),thicknessMapUv:je&&f(R.thicknessMap.channel),alphaMapUv:xe&&f(R.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(we||Oe),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,pointsUvs:I.isPoints===!0&&!!z.attributes.uv&&(fe||xe),fog:!!F,useFog:R.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:I.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:K,morphTextureStride:ne,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:y.numPlanes,numClipIntersection:y.numIntersection,dithering:R.dithering,shadowMapEnabled:r.shadowMap.enabled&&L.length>0,shadowMapType:r.shadowMap.type,toneMapping:ut,useLegacyLights:r._useLegacyLights,decodeVideoTexture:fe&&R.map.isVideoTexture===!0&&Nn.getTransfer(R.map.colorSpace)===Hn,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===eo,flipSided:R.side===xi,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:Qe&&R.extensions.derivatives===!0,extensionFragDepth:Qe&&R.extensions.fragDepth===!0,extensionDrawBuffers:Qe&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:Qe&&R.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Qe&&R.extensions.clipCullDistance===!0&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Qe&&R.extensions.multiDraw===!0&&s.has("WEBGL_multi_draw"),rendererExtensionFragDepth:l||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||s.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return Rt.vertexUv1s=g.has(1),Rt.vertexUv2s=g.has(2),Rt.vertexUv3s=g.has(3),g.clear(),Rt}function c(R){const k=[];if(R.shaderID?k.push(R.shaderID):(k.push(R.customVertexShaderID),k.push(R.customFragmentShaderID)),R.defines!==void 0)for(const L in R.defines)k.push(L),k.push(R.defines[L]);return R.isRawShaderMaterial===!1&&(m(k,R),b(k,R),k.push(r.outputColorSpace)),k.push(R.customProgramCacheKey),k.join()}function m(R,k){R.push(k.precision),R.push(k.outputColorSpace),R.push(k.envMapMode),R.push(k.envMapCubeUVHeight),R.push(k.mapUv),R.push(k.alphaMapUv),R.push(k.lightMapUv),R.push(k.aoMapUv),R.push(k.bumpMapUv),R.push(k.normalMapUv),R.push(k.displacementMapUv),R.push(k.emissiveMapUv),R.push(k.metalnessMapUv),R.push(k.roughnessMapUv),R.push(k.anisotropyMapUv),R.push(k.clearcoatMapUv),R.push(k.clearcoatNormalMapUv),R.push(k.clearcoatRoughnessMapUv),R.push(k.iridescenceMapUv),R.push(k.iridescenceThicknessMapUv),R.push(k.sheenColorMapUv),R.push(k.sheenRoughnessMapUv),R.push(k.specularMapUv),R.push(k.specularColorMapUv),R.push(k.specularIntensityMapUv),R.push(k.transmissionMapUv),R.push(k.thicknessMapUv),R.push(k.combine),R.push(k.fogExp2),R.push(k.sizeAttenuation),R.push(k.morphTargetsCount),R.push(k.morphAttributeCount),R.push(k.numDirLights),R.push(k.numPointLights),R.push(k.numSpotLights),R.push(k.numSpotLightMaps),R.push(k.numHemiLights),R.push(k.numRectAreaLights),R.push(k.numDirLightShadows),R.push(k.numPointLightShadows),R.push(k.numSpotLightShadows),R.push(k.numSpotLightShadowsWithMaps),R.push(k.numLightProbes),R.push(k.shadowMapType),R.push(k.toneMapping),R.push(k.numClippingPlanes),R.push(k.numClipIntersection),R.push(k.depthPacking)}function b(R,k){i.disableAll(),k.isWebGL2&&i.enable(0),k.supportsVertexTextures&&i.enable(1),k.instancing&&i.enable(2),k.instancingColor&&i.enable(3),k.matcap&&i.enable(4),k.envMap&&i.enable(5),k.normalMapObjectSpace&&i.enable(6),k.normalMapTangentSpace&&i.enable(7),k.clearcoat&&i.enable(8),k.iridescence&&i.enable(9),k.alphaTest&&i.enable(10),k.vertexColors&&i.enable(11),k.vertexAlphas&&i.enable(12),k.vertexUv1s&&i.enable(13),k.vertexUv2s&&i.enable(14),k.vertexUv3s&&i.enable(15),k.vertexTangents&&i.enable(16),k.anisotropy&&i.enable(17),k.alphaHash&&i.enable(18),k.batching&&i.enable(19),R.push(i.mask),i.disableAll(),k.fog&&i.enable(0),k.useFog&&i.enable(1),k.flatShading&&i.enable(2),k.logarithmicDepthBuffer&&i.enable(3),k.skinning&&i.enable(4),k.morphTargets&&i.enable(5),k.morphNormals&&i.enable(6),k.morphColors&&i.enable(7),k.premultipliedAlpha&&i.enable(8),k.shadowMapEnabled&&i.enable(9),k.useLegacyLights&&i.enable(10),k.doubleSided&&i.enable(11),k.flipSided&&i.enable(12),k.useDepthPacking&&i.enable(13),k.dithering&&i.enable(14),k.transmission&&i.enable(15),k.sheen&&i.enable(16),k.opaque&&i.enable(17),k.pointsUvs&&i.enable(18),k.decodeVideoTexture&&i.enable(19),k.alphaToCoverage&&i.enable(20),R.push(i.mask)}function S(R){const k=p[R.type];let L;if(k){const B=Bs[k];L=D3.clone(B.uniforms)}else L=R.uniforms;return L}function w(R,k){let L;for(let B=0,I=h.length;B<I;B++){const F=h[B];if(F.cacheKey===k){L=F,++L.usedTimes;break}}return L===void 0&&(L=new C8(r,k,R,a),h.push(L)),L}function M(R){if(--R.usedTimes===0){const k=h.indexOf(R);h[k]=h[h.length-1],h.pop(),R.destroy()}}function A(R){_.remove(R)}function P(){_.dispose()}return{getParameters:u,getProgramCacheKey:c,getUniforms:S,acquireProgram:w,releaseProgram:M,releaseShaderCache:A,programs:h,dispose:P}}function k8(){let r=new WeakMap;function t(a){let y=r.get(a);return y===void 0&&(y={},r.set(a,y)),y}function n(a){r.delete(a)}function s(a,y,i){r.get(a)[y]=i}function o(){r=new WeakMap}return{get:t,remove:n,update:s,dispose:o}}function I8(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function PE(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function RE(){const r=[];let t=0;const n=[],s=[],o=[];function a(){t=0,n.length=0,s.length=0,o.length=0}function y(l,d,v,x,p,f){let u=r[t];return u===void 0?(u={id:l.id,object:l,geometry:d,material:v,groupOrder:x,renderOrder:l.renderOrder,z:p,group:f},r[t]=u):(u.id=l.id,u.object=l,u.geometry=d,u.material=v,u.groupOrder=x,u.renderOrder=l.renderOrder,u.z=p,u.group=f),t++,u}function i(l,d,v,x,p,f){const u=y(l,d,v,x,p,f);v.transmission>0?s.push(u):v.transparent===!0?o.push(u):n.push(u)}function _(l,d,v,x,p,f){const u=y(l,d,v,x,p,f);v.transmission>0?s.unshift(u):v.transparent===!0?o.unshift(u):n.unshift(u)}function g(l,d){n.length>1&&n.sort(l||I8),s.length>1&&s.sort(d||PE),o.length>1&&o.sort(d||PE)}function h(){for(let l=t,d=r.length;l<d;l++){const v=r[l];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:s,transparent:o,init:a,push:i,unshift:_,finish:h,sort:g}}function O8(){let r=new WeakMap;function t(s,o){const a=r.get(s);let y;return a===void 0?(y=new RE,r.set(s,[y])):o>=a.length?(y=new RE,a.push(y)):y=a[o],y}function n(){r=new WeakMap}return{get:t,dispose:n}}function D8(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Re,color:new Ot};break;case"SpotLight":n={position:new Re,direction:new Re,color:new Ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Re,color:new Ot,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Re,skyColor:new Ot,groundColor:new Ot};break;case"RectAreaLight":n={color:new Ot,position:new Re,halfWidth:new Re,halfHeight:new Re};break}return r[t.id]=n,n}}}function N8(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[t.id]=n,n}}}let U8=0;function F8(r,t){return(t.castShadow?2:0)-(r.castShadow?2:0)+(t.map?1:0)-(r.map?1:0)}function B8(r,t){const n=new D8,s=N8(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)o.probe.push(new Re);const a=new Re,y=new Jt,i=new Jt;function _(h,l){let d=0,v=0,x=0;for(let L=0;L<9;L++)o.probe[L].set(0,0,0);let p=0,f=0,u=0,c=0,m=0,b=0,S=0,w=0,M=0,A=0,P=0;h.sort(F8);const R=l===!0?Math.PI:1;for(let L=0,B=h.length;L<B;L++){const I=h[L],F=I.color,z=I.intensity,G=I.distance,N=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)d+=F.r*z*R,v+=F.g*z*R,x+=F.b*z*R;else if(I.isLightProbe){for(let O=0;O<9;O++)o.probe[O].addScaledVector(I.sh.coefficients[O],z);P++}else if(I.isDirectionalLight){const O=n.get(I);if(O.color.copy(I.color).multiplyScalar(I.intensity*R),I.castShadow){const H=I.shadow,q=s.get(I);q.shadowBias=H.bias,q.shadowNormalBias=H.normalBias,q.shadowRadius=H.radius,q.shadowMapSize=H.mapSize,o.directionalShadow[p]=q,o.directionalShadowMap[p]=N,o.directionalShadowMatrix[p]=I.shadow.matrix,b++}o.directional[p]=O,p++}else if(I.isSpotLight){const O=n.get(I);O.position.setFromMatrixPosition(I.matrixWorld),O.color.copy(F).multiplyScalar(z*R),O.distance=G,O.coneCos=Math.cos(I.angle),O.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),O.decay=I.decay,o.spot[u]=O;const H=I.shadow;if(I.map&&(o.spotLightMap[M]=I.map,M++,H.updateMatrices(I),I.castShadow&&A++),o.spotLightMatrix[u]=H.matrix,I.castShadow){const q=s.get(I);q.shadowBias=H.bias,q.shadowNormalBias=H.normalBias,q.shadowRadius=H.radius,q.shadowMapSize=H.mapSize,o.spotShadow[u]=q,o.spotShadowMap[u]=N,w++}u++}else if(I.isRectAreaLight){const O=n.get(I);O.color.copy(F).multiplyScalar(z),O.halfWidth.set(I.width*.5,0,0),O.halfHeight.set(0,I.height*.5,0),o.rectArea[c]=O,c++}else if(I.isPointLight){const O=n.get(I);if(O.color.copy(I.color).multiplyScalar(I.intensity*R),O.distance=I.distance,O.decay=I.decay,I.castShadow){const H=I.shadow,q=s.get(I);q.shadowBias=H.bias,q.shadowNormalBias=H.normalBias,q.shadowRadius=H.radius,q.shadowMapSize=H.mapSize,q.shadowCameraNear=H.camera.near,q.shadowCameraFar=H.camera.far,o.pointShadow[f]=q,o.pointShadowMap[f]=N,o.pointShadowMatrix[f]=I.shadow.matrix,S++}o.point[f]=O,f++}else if(I.isHemisphereLight){const O=n.get(I);O.skyColor.copy(I.color).multiplyScalar(z*R),O.groundColor.copy(I.groundColor).multiplyScalar(z*R),o.hemi[m]=O,m++}}c>0&&(t.isWebGL2?r.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Ct.LTC_FLOAT_1,o.rectAreaLTC2=Ct.LTC_FLOAT_2):(o.rectAreaLTC1=Ct.LTC_HALF_1,o.rectAreaLTC2=Ct.LTC_HALF_2):r.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Ct.LTC_FLOAT_1,o.rectAreaLTC2=Ct.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Ct.LTC_HALF_1,o.rectAreaLTC2=Ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=d,o.ambient[1]=v,o.ambient[2]=x;const k=o.hash;(k.directionalLength!==p||k.pointLength!==f||k.spotLength!==u||k.rectAreaLength!==c||k.hemiLength!==m||k.numDirectionalShadows!==b||k.numPointShadows!==S||k.numSpotShadows!==w||k.numSpotMaps!==M||k.numLightProbes!==P)&&(o.directional.length=p,o.spot.length=u,o.rectArea.length=c,o.point.length=f,o.hemi.length=m,o.directionalShadow.length=b,o.directionalShadowMap.length=b,o.pointShadow.length=S,o.pointShadowMap.length=S,o.spotShadow.length=w,o.spotShadowMap.length=w,o.directionalShadowMatrix.length=b,o.pointShadowMatrix.length=S,o.spotLightMatrix.length=w+M-A,o.spotLightMap.length=M,o.numSpotLightShadowsWithMaps=A,o.numLightProbes=P,k.directionalLength=p,k.pointLength=f,k.spotLength=u,k.rectAreaLength=c,k.hemiLength=m,k.numDirectionalShadows=b,k.numPointShadows=S,k.numSpotShadows=w,k.numSpotMaps=M,k.numLightProbes=P,o.version=U8++)}function g(h,l){let d=0,v=0,x=0,p=0,f=0;const u=l.matrixWorldInverse;for(let c=0,m=h.length;c<m;c++){const b=h[c];if(b.isDirectionalLight){const S=o.directional[d];S.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(u),d++}else if(b.isSpotLight){const S=o.spot[x];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(u),S.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(a),S.direction.transformDirection(u),x++}else if(b.isRectAreaLight){const S=o.rectArea[p];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(u),i.identity(),y.copy(b.matrixWorld),y.premultiply(u),i.extractRotation(y),S.halfWidth.set(b.width*.5,0,0),S.halfHeight.set(0,b.height*.5,0),S.halfWidth.applyMatrix4(i),S.halfHeight.applyMatrix4(i),p++}else if(b.isPointLight){const S=o.point[v];S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(u),v++}else if(b.isHemisphereLight){const S=o.hemi[f];S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(u),f++}}}return{setup:_,setupView:g,state:o}}function jE(r,t){const n=new B8(r,t),s=[],o=[];function a(){s.length=0,o.length=0}function y(l){s.push(l)}function i(l){o.push(l)}function _(l){n.setup(s,l)}function g(l){n.setupView(s,l)}return{init:a,state:{lightsArray:s,shadowsArray:o,lights:n},setupLights:_,setupLightsView:g,pushLight:y,pushShadow:i}}function z8(r,t){let n=new WeakMap;function s(a,y=0){const i=n.get(a);let _;return i===void 0?(_=new jE(r,t),n.set(a,[_])):y>=i.length?(_=new jE(r,t),i.push(_)):_=i[y],_}function o(){n=new WeakMap}return{get:s,dispose:o}}class Nb extends ci{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=b3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Ub extends ci{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const V8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,G8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function H8(r,t,n){let s=new wf;const o=new mt,a=new mt,y=new Un,i=new Nb({depthPacking:w3}),_=new Ub,g={},h=n.maxTextureSize,l={[Vo]:xi,[xi]:Vo,[eo]:eo},d=new Ws({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:V8,fragmentShader:G8}),v=d.clone();v.defines.HORIZONTAL_PASS=1;const x=new ln;x.setAttribute("position",new In(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Ar(x,d),f=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$y;let u=this.type;this.render=function(w,M,A){if(f.enabled===!1||f.autoUpdate===!1&&f.needsUpdate===!1||w.length===0)return;const P=r.getRenderTarget(),R=r.getActiveCubeFace(),k=r.getActiveMipmapLevel(),L=r.state;L.setBlending(Do),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const B=u!==Ns&&this.type===Ns,I=u===Ns&&this.type!==Ns;for(let F=0,z=w.length;F<z;F++){const G=w[F],N=G.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;o.copy(N.mapSize);const O=N.getFrameExtents();if(o.multiply(O),a.copy(N.mapSize),(o.x>h||o.y>h)&&(o.x>h&&(a.x=Math.floor(h/O.x),o.x=a.x*O.x,N.mapSize.x=a.x),o.y>h&&(a.y=Math.floor(h/O.y),o.y=a.y*O.y,N.mapSize.y=a.y)),N.map===null||B===!0||I===!0){const q=this.type!==Ns?{minFilter:vr,magFilter:vr}:{};N.map!==null&&N.map.dispose(),N.map=new Hs(o.x,o.y,q),N.map.texture.name=G.name+".shadowMap",N.camera.updateProjectionMatrix()}r.setRenderTarget(N.map),r.clear();const H=N.getViewportCount();for(let q=0;q<H;q++){const K=N.getViewport(q);y.set(a.x*K.x,a.y*K.y,a.x*K.z,a.y*K.w),L.viewport(y),N.updateMatrices(G,q),s=N.getFrustum(),b(M,A,N.camera,G,this.type)}N.isPointLightShadow!==!0&&this.type===Ns&&c(N,A),N.needsUpdate=!1}u=this.type,f.needsUpdate=!1,r.setRenderTarget(P,R,k)};function c(w,M){const A=t.update(p);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,v.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,v.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new Hs(o.x,o.y)),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,r.setRenderTarget(w.mapPass),r.clear(),r.renderBufferDirect(M,null,A,d,p,null),v.uniforms.shadow_pass.value=w.mapPass.texture,v.uniforms.resolution.value=w.mapSize,v.uniforms.radius.value=w.radius,r.setRenderTarget(w.map),r.clear(),r.renderBufferDirect(M,null,A,v,p,null)}function m(w,M,A,P){let R=null;const k=A.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(k!==void 0)R=k;else if(R=A.isPointLight===!0?_:i,r.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const L=R.uuid,B=M.uuid;let I=g[L];I===void 0&&(I={},g[L]=I);let F=I[B];F===void 0&&(F=R.clone(),I[B]=F,M.addEventListener("dispose",S)),R=F}if(R.visible=M.visible,R.wireframe=M.wireframe,P===Ns?R.side=M.shadowSide!==null?M.shadowSide:M.side:R.side=M.shadowSide!==null?M.shadowSide:l[M.side],R.alphaMap=M.alphaMap,R.alphaTest=M.alphaTest,R.map=M.map,R.clipShadows=M.clipShadows,R.clippingPlanes=M.clippingPlanes,R.clipIntersection=M.clipIntersection,R.displacementMap=M.displacementMap,R.displacementScale=M.displacementScale,R.displacementBias=M.displacementBias,R.wireframeLinewidth=M.wireframeLinewidth,R.linewidth=M.linewidth,A.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const L=r.properties.get(R);L.light=A}return R}function b(w,M,A,P,R){if(w.visible===!1)return;if(w.layers.test(M.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&R===Ns)&&(!w.frustumCulled||s.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,w.matrixWorld);const B=t.update(w),I=w.material;if(Array.isArray(I)){const F=B.groups;for(let z=0,G=F.length;z<G;z++){const N=F[z],O=I[N.materialIndex];if(O&&O.visible){const H=m(w,O,P,R);w.onBeforeShadow(r,w,M,A,B,H,N),r.renderBufferDirect(A,null,B,H,w,N),w.onAfterShadow(r,w,M,A,B,H,N)}}}else if(I.visible){const F=m(w,I,P,R);w.onBeforeShadow(r,w,M,A,B,F,null),r.renderBufferDirect(A,null,B,F,w,null),w.onAfterShadow(r,w,M,A,B,F,null)}}const L=w.children;for(let B=0,I=L.length;B<I;B++)b(L[B],M,A,P,R)}function S(w){w.target.removeEventListener("dispose",S);for(const A in g){const P=g[A],R=w.target.uuid;R in P&&(P[R].dispose(),delete P[R])}}}function W8(r,t,n){const s=n.isWebGL2;function o(){let xe=!1;const Ve=new Un;let Ce=null;const Qe=new Un(0,0,0,0);return{setMask:function(ut){Ce!==ut&&!xe&&(r.colorMask(ut,ut,ut,ut),Ce=ut)},setLocked:function(ut){xe=ut},setClear:function(ut,Rt,Nt,Bt,Vt){Vt===!0&&(ut*=Bt,Rt*=Bt,Nt*=Bt),Ve.set(ut,Rt,Nt,Bt),Qe.equals(Ve)===!1&&(r.clearColor(ut,Rt,Nt,Bt),Qe.copy(Ve))},reset:function(){xe=!1,Ce=null,Qe.set(-1,0,0,0)}}}function a(){let xe=!1,Ve=null,Ce=null,Qe=null;return{setTest:function(ut){ut?ie(r.DEPTH_TEST):ye(r.DEPTH_TEST)},setMask:function(ut){Ve!==ut&&!xe&&(r.depthMask(ut),Ve=ut)},setFunc:function(ut){if(Ce!==ut){switch(ut){case ZR:r.depthFunc(r.NEVER);break;case KR:r.depthFunc(r.ALWAYS);break;case JR:r.depthFunc(r.LESS);break;case Fh:r.depthFunc(r.LEQUAL);break;case QR:r.depthFunc(r.EQUAL);break;case $R:r.depthFunc(r.GEQUAL);break;case e3:r.depthFunc(r.GREATER);break;case t3:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ce=ut}},setLocked:function(ut){xe=ut},setClear:function(ut){Qe!==ut&&(r.clearDepth(ut),Qe=ut)},reset:function(){xe=!1,Ve=null,Ce=null,Qe=null}}}function y(){let xe=!1,Ve=null,Ce=null,Qe=null,ut=null,Rt=null,Nt=null,Bt=null,Vt=null;return{setTest:function(jt){xe||(jt?ie(r.STENCIL_TEST):ye(r.STENCIL_TEST))},setMask:function(jt){Ve!==jt&&!xe&&(r.stencilMask(jt),Ve=jt)},setFunc:function(jt,Yt,on){(Ce!==jt||Qe!==Yt||ut!==on)&&(r.stencilFunc(jt,Yt,on),Ce=jt,Qe=Yt,ut=on)},setOp:function(jt,Yt,on){(Rt!==jt||Nt!==Yt||Bt!==on)&&(r.stencilOp(jt,Yt,on),Rt=jt,Nt=Yt,Bt=on)},setLocked:function(jt){xe=jt},setClear:function(jt){Vt!==jt&&(r.clearStencil(jt),Vt=jt)},reset:function(){xe=!1,Ve=null,Ce=null,Qe=null,ut=null,Rt=null,Nt=null,Bt=null,Vt=null}}}const i=new o,_=new a,g=new y,h=new WeakMap,l=new WeakMap;let d={},v={},x=new WeakMap,p=[],f=null,u=!1,c=null,m=null,b=null,S=null,w=null,M=null,A=null,P=new Ot(0,0,0),R=0,k=!1,L=null,B=null,I=null,F=null,z=null;const G=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,O=0;const H=r.getParameter(r.VERSION);H.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL (\d)/.exec(H)[1]),N=O>=1):H.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),N=O>=2);let q=null,K={};const ne=r.getParameter(r.SCISSOR_BOX),ee=r.getParameter(r.VIEWPORT),se=new Un().fromArray(ne),me=new Un().fromArray(ee);function X(xe,Ve,Ce,Qe){const ut=new Uint8Array(4),Rt=r.createTexture();r.bindTexture(xe,Rt),r.texParameteri(xe,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(xe,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let Nt=0;Nt<Ce;Nt++)s&&(xe===r.TEXTURE_3D||xe===r.TEXTURE_2D_ARRAY)?r.texImage3D(Ve,0,r.RGBA,1,1,Qe,0,r.RGBA,r.UNSIGNED_BYTE,ut):r.texImage2D(Ve+Nt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,ut);return Rt}const Z={};Z[r.TEXTURE_2D]=X(r.TEXTURE_2D,r.TEXTURE_2D,1),Z[r.TEXTURE_CUBE_MAP]=X(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),s&&(Z[r.TEXTURE_2D_ARRAY]=X(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Z[r.TEXTURE_3D]=X(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),_.setClear(1),g.setClear(0),ie(r.DEPTH_TEST),_.setFunc(Fh),Se(!1),ae($1),ie(r.CULL_FACE),ve(Do);function ie(xe){d[xe]!==!0&&(r.enable(xe),d[xe]=!0)}function ye(xe){d[xe]!==!1&&(r.disable(xe),d[xe]=!1)}function fe(xe,Ve){return v[xe]!==Ve?(r.bindFramebuffer(xe,Ve),v[xe]=Ve,s&&(xe===r.DRAW_FRAMEBUFFER&&(v[r.FRAMEBUFFER]=Ve),xe===r.FRAMEBUFFER&&(v[r.DRAW_FRAMEBUFFER]=Ve)),!0):!1}function $(xe,Ve){let Ce=p,Qe=!1;if(xe)if(Ce=x.get(Ve),Ce===void 0&&(Ce=[],x.set(Ve,Ce)),xe.isWebGLMultipleRenderTargets){const ut=xe.texture;if(Ce.length!==ut.length||Ce[0]!==r.COLOR_ATTACHMENT0){for(let Rt=0,Nt=ut.length;Rt<Nt;Rt++)Ce[Rt]=r.COLOR_ATTACHMENT0+Rt;Ce.length=ut.length,Qe=!0}}else Ce[0]!==r.COLOR_ATTACHMENT0&&(Ce[0]=r.COLOR_ATTACHMENT0,Qe=!0);else Ce[0]!==r.BACK&&(Ce[0]=r.BACK,Qe=!0);Qe&&(n.isWebGL2?r.drawBuffers(Ce):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))}function re(xe){return f!==xe?(r.useProgram(xe),f=xe,!0):!1}const de={[xa]:r.FUNC_ADD,[IR]:r.FUNC_SUBTRACT,[OR]:r.FUNC_REVERSE_SUBTRACT};if(s)de[r_]=r.MIN,de[i_]=r.MAX;else{const xe=t.get("EXT_blend_minmax");xe!==null&&(de[r_]=xe.MIN_EXT,de[i_]=xe.MAX_EXT)}const ge={[DR]:r.ZERO,[NR]:r.ONE,[UR]:r.SRC_COLOR,[Sy]:r.SRC_ALPHA,[HR]:r.SRC_ALPHA_SATURATE,[VR]:r.DST_COLOR,[BR]:r.DST_ALPHA,[FR]:r.ONE_MINUS_SRC_COLOR,[My]:r.ONE_MINUS_SRC_ALPHA,[GR]:r.ONE_MINUS_DST_COLOR,[zR]:r.ONE_MINUS_DST_ALPHA,[WR]:r.CONSTANT_COLOR,[XR]:r.ONE_MINUS_CONSTANT_COLOR,[qR]:r.CONSTANT_ALPHA,[YR]:r.ONE_MINUS_CONSTANT_ALPHA};function ve(xe,Ve,Ce,Qe,ut,Rt,Nt,Bt,Vt,jt){if(xe===Do){u===!0&&(ye(r.BLEND),u=!1);return}if(u===!1&&(ie(r.BLEND),u=!0),xe!==kR){if(xe!==c||jt!==k){if((m!==xa||w!==xa)&&(r.blendEquation(r.FUNC_ADD),m=xa,w=xa),jt)switch(xe){case zl:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case e_:r.blendFunc(r.ONE,r.ONE);break;case t_:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case n_:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}else switch(xe){case zl:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case e_:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case t_:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case n_:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}b=null,S=null,M=null,A=null,P.set(0,0,0),R=0,c=xe,k=jt}return}ut=ut||Ve,Rt=Rt||Ce,Nt=Nt||Qe,(Ve!==m||ut!==w)&&(r.blendEquationSeparate(de[Ve],de[ut]),m=Ve,w=ut),(Ce!==b||Qe!==S||Rt!==M||Nt!==A)&&(r.blendFuncSeparate(ge[Ce],ge[Qe],ge[Rt],ge[Nt]),b=Ce,S=Qe,M=Rt,A=Nt),(Bt.equals(P)===!1||Vt!==R)&&(r.blendColor(Bt.r,Bt.g,Bt.b,Vt),P.copy(Bt),R=Vt),c=xe,k=!1}function we(xe,Ve){xe.side===eo?ye(r.CULL_FACE):ie(r.CULL_FACE);let Ce=xe.side===xi;Ve&&(Ce=!Ce),Se(Ce),xe.blending===zl&&xe.transparent===!1?ve(Do):ve(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.blendColor,xe.blendAlpha,xe.premultipliedAlpha),_.setFunc(xe.depthFunc),_.setTest(xe.depthTest),_.setMask(xe.depthWrite),i.setMask(xe.colorWrite);const Qe=xe.stencilWrite;g.setTest(Qe),Qe&&(g.setMask(xe.stencilWriteMask),g.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),g.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),Ee(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?ie(r.SAMPLE_ALPHA_TO_COVERAGE):ye(r.SAMPLE_ALPHA_TO_COVERAGE)}function Se(xe){L!==xe&&(xe?r.frontFace(r.CW):r.frontFace(r.CCW),L=xe)}function ae(xe){xe!==RR?(ie(r.CULL_FACE),xe!==B&&(xe===$1?r.cullFace(r.BACK):xe===jR?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):ye(r.CULL_FACE),B=xe}function oe(xe){xe!==I&&(N&&r.lineWidth(xe),I=xe)}function Ee(xe,Ve,Ce){xe?(ie(r.POLYGON_OFFSET_FILL),(F!==Ve||z!==Ce)&&(r.polygonOffset(Ve,Ce),F=Ve,z=Ce)):ye(r.POLYGON_OFFSET_FILL)}function Oe(xe){xe?ie(r.SCISSOR_TEST):ye(r.SCISSOR_TEST)}function ze(xe){xe===void 0&&(xe=r.TEXTURE0+G-1),q!==xe&&(r.activeTexture(xe),q=xe)}function Be(xe,Ve,Ce){Ce===void 0&&(q===null?Ce=r.TEXTURE0+G-1:Ce=q);let Qe=K[Ce];Qe===void 0&&(Qe={type:void 0,texture:void 0},K[Ce]=Qe),(Qe.type!==xe||Qe.texture!==Ve)&&(q!==Ce&&(r.activeTexture(Ce),q=Ce),r.bindTexture(xe,Ve||Z[xe]),Qe.type=xe,Qe.texture=Ve)}function dt(){const xe=K[q];xe!==void 0&&xe.type!==void 0&&(r.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)}function Je(){try{r.compressedTexImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function _e(){try{r.compressedTexImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ue(){try{r.texSubImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Fe(){try{r.texSubImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ne(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ft(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function vt(){try{r.texStorage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ht(){try{r.texStorage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function lt(){try{r.texImage2D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ce(){try{r.texImage3D.apply(r,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function ue(xe){se.equals(xe)===!1&&(r.scissor(xe.x,xe.y,xe.z,xe.w),se.copy(xe))}function he(xe){me.equals(xe)===!1&&(r.viewport(xe.x,xe.y,xe.z,xe.w),me.copy(xe))}function be(xe,Ve){let Ce=l.get(Ve);Ce===void 0&&(Ce=new WeakMap,l.set(Ve,Ce));let Qe=Ce.get(xe);Qe===void 0&&(Qe=r.getUniformBlockIndex(Ve,xe.name),Ce.set(xe,Qe))}function je(xe,Ve){const Qe=l.get(Ve).get(xe);h.get(Ve)!==Qe&&(r.uniformBlockBinding(Ve,Qe,xe.__bindingPointIndex),h.set(Ve,Qe))}function We(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),s===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),d={},q=null,K={},v={},x=new WeakMap,p=[],f=null,u=!1,c=null,m=null,b=null,S=null,w=null,M=null,A=null,P=new Ot(0,0,0),R=0,k=!1,L=null,B=null,I=null,F=null,z=null,se.set(0,0,r.canvas.width,r.canvas.height),me.set(0,0,r.canvas.width,r.canvas.height),i.reset(),_.reset(),g.reset()}return{buffers:{color:i,depth:_,stencil:g},enable:ie,disable:ye,bindFramebuffer:fe,drawBuffers:$,useProgram:re,setBlending:ve,setMaterial:we,setFlipSided:Se,setCullFace:ae,setLineWidth:oe,setPolygonOffset:Ee,setScissorTest:Oe,activeTexture:ze,bindTexture:Be,unbindTexture:dt,compressedTexImage2D:Je,compressedTexImage3D:_e,texImage2D:lt,texImage3D:ce,updateUBOMapping:be,uniformBlockBinding:je,texStorage2D:vt,texStorage3D:ht,texSubImage2D:Ue,texSubImage3D:Fe,compressedTexSubImage2D:Ne,compressedTexSubImage3D:ft,scissor:ue,viewport:he,reset:We}}function X8(r,t,n,s,o,a,y){const i=o.isWebGL2,_=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap;let l;const d=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(ae,oe){return v?new OffscreenCanvas(ae,oe):Qh("canvas")}function p(ae,oe,Ee,Oe){let ze=1;if((ae.width>Oe||ae.height>Oe)&&(ze=Oe/Math.max(ae.width,ae.height)),ze<1||oe===!0)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap){const Be=oe?Ay:Math.floor,dt=Be(ze*ae.width),Je=Be(ze*ae.height);l===void 0&&(l=x(dt,Je));const _e=Ee?x(dt,Je):l;return _e.width=dt,_e.height=Je,_e.getContext("2d").drawImage(ae,0,0,dt,Je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+dt+"x"+Je+")."),_e}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),ae;return ae}function f(ae){return k_(ae.width)&&k_(ae.height)}function u(ae){return i?!1:ae.wrapS!==oi||ae.wrapT!==oi||ae.minFilter!==vr&&ae.minFilter!==rr}function c(ae,oe){return ae.generateMipmaps&&oe&&ae.minFilter!==vr&&ae.minFilter!==rr}function m(ae){r.generateMipmap(ae)}function b(ae,oe,Ee,Oe,ze=!1){if(i===!1)return oe;if(ae!==null){if(r[ae]!==void 0)return r[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let Be=oe;if(oe===r.RED&&(Ee===r.FLOAT&&(Be=r.R32F),Ee===r.HALF_FLOAT&&(Be=r.R16F),Ee===r.UNSIGNED_BYTE&&(Be=r.R8)),oe===r.RED_INTEGER&&(Ee===r.UNSIGNED_BYTE&&(Be=r.R8UI),Ee===r.UNSIGNED_SHORT&&(Be=r.R16UI),Ee===r.UNSIGNED_INT&&(Be=r.R32UI),Ee===r.BYTE&&(Be=r.R8I),Ee===r.SHORT&&(Be=r.R16I),Ee===r.INT&&(Be=r.R32I)),oe===r.RG&&(Ee===r.FLOAT&&(Be=r.RG32F),Ee===r.HALF_FLOAT&&(Be=r.RG16F),Ee===r.UNSIGNED_BYTE&&(Be=r.RG8)),oe===r.RGBA){const dt=ze?qh:Nn.getTransfer(Oe);Ee===r.FLOAT&&(Be=r.RGBA32F),Ee===r.HALF_FLOAT&&(Be=r.RGBA16F),Ee===r.UNSIGNED_BYTE&&(Be=dt===Hn?r.SRGB8_ALPHA8:r.RGBA8),Ee===r.UNSIGNED_SHORT_4_4_4_4&&(Be=r.RGBA4),Ee===r.UNSIGNED_SHORT_5_5_5_1&&(Be=r.RGB5_A1)}return(Be===r.R16F||Be===r.R32F||Be===r.RG16F||Be===r.RG32F||Be===r.RGBA16F||Be===r.RGBA32F)&&t.get("EXT_color_buffer_float"),Be}function S(ae,oe,Ee){return c(ae,Ee)===!0||ae.isFramebufferTexture&&ae.minFilter!==vr&&ae.minFilter!==rr?Math.log2(Math.max(oe.width,oe.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?oe.mipmaps.length:1}function w(ae){return ae===vr||ae===Ey||ae===Cl?r.NEAREST:r.LINEAR}function M(ae){const oe=ae.target;oe.removeEventListener("dispose",M),P(oe),oe.isVideoTexture&&h.delete(oe)}function A(ae){const oe=ae.target;oe.removeEventListener("dispose",A),k(oe)}function P(ae){const oe=s.get(ae);if(oe.__webglInit===void 0)return;const Ee=ae.source,Oe=d.get(Ee);if(Oe){const ze=Oe[oe.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&R(ae),Object.keys(Oe).length===0&&d.delete(Ee)}s.remove(ae)}function R(ae){const oe=s.get(ae);r.deleteTexture(oe.__webglTexture);const Ee=ae.source,Oe=d.get(Ee);delete Oe[oe.__cacheKey],y.memory.textures--}function k(ae){const oe=ae.texture,Ee=s.get(ae),Oe=s.get(oe);if(Oe.__webglTexture!==void 0&&(r.deleteTexture(Oe.__webglTexture),y.memory.textures--),ae.depthTexture&&ae.depthTexture.dispose(),ae.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++){if(Array.isArray(Ee.__webglFramebuffer[ze]))for(let Be=0;Be<Ee.__webglFramebuffer[ze].length;Be++)r.deleteFramebuffer(Ee.__webglFramebuffer[ze][Be]);else r.deleteFramebuffer(Ee.__webglFramebuffer[ze]);Ee.__webglDepthbuffer&&r.deleteRenderbuffer(Ee.__webglDepthbuffer[ze])}else{if(Array.isArray(Ee.__webglFramebuffer))for(let ze=0;ze<Ee.__webglFramebuffer.length;ze++)r.deleteFramebuffer(Ee.__webglFramebuffer[ze]);else r.deleteFramebuffer(Ee.__webglFramebuffer);if(Ee.__webglDepthbuffer&&r.deleteRenderbuffer(Ee.__webglDepthbuffer),Ee.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Ee.__webglMultisampledFramebuffer),Ee.__webglColorRenderbuffer)for(let ze=0;ze<Ee.__webglColorRenderbuffer.length;ze++)Ee.__webglColorRenderbuffer[ze]&&r.deleteRenderbuffer(Ee.__webglColorRenderbuffer[ze]);Ee.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Ee.__webglDepthRenderbuffer)}if(ae.isWebGLMultipleRenderTargets)for(let ze=0,Be=oe.length;ze<Be;ze++){const dt=s.get(oe[ze]);dt.__webglTexture&&(r.deleteTexture(dt.__webglTexture),y.memory.textures--),s.remove(oe[ze])}s.remove(oe),s.remove(ae)}let L=0;function B(){L=0}function I(){const ae=L;return ae>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+o.maxTextures),L+=1,ae}function F(ae){const oe=[];return oe.push(ae.wrapS),oe.push(ae.wrapT),oe.push(ae.wrapR||0),oe.push(ae.magFilter),oe.push(ae.minFilter),oe.push(ae.anisotropy),oe.push(ae.internalFormat),oe.push(ae.format),oe.push(ae.type),oe.push(ae.generateMipmaps),oe.push(ae.premultiplyAlpha),oe.push(ae.flipY),oe.push(ae.unpackAlignment),oe.push(ae.colorSpace),oe.join()}function z(ae,oe){const Ee=s.get(ae);if(ae.isVideoTexture&&we(ae),ae.isRenderTargetTexture===!1&&ae.version>0&&Ee.__version!==ae.version){const Oe=ae.image;if(Oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(Ee,ae,oe);return}}n.bindTexture(r.TEXTURE_2D,Ee.__webglTexture,r.TEXTURE0+oe)}function G(ae,oe){const Ee=s.get(ae);if(ae.version>0&&Ee.__version!==ae.version){se(Ee,ae,oe);return}n.bindTexture(r.TEXTURE_2D_ARRAY,Ee.__webglTexture,r.TEXTURE0+oe)}function N(ae,oe){const Ee=s.get(ae);if(ae.version>0&&Ee.__version!==ae.version){se(Ee,ae,oe);return}n.bindTexture(r.TEXTURE_3D,Ee.__webglTexture,r.TEXTURE0+oe)}function O(ae,oe){const Ee=s.get(ae);if(ae.version>0&&Ee.__version!==ae.version){me(Ee,ae,oe);return}n.bindTexture(r.TEXTURE_CUBE_MAP,Ee.__webglTexture,r.TEXTURE0+oe)}const H={[Vh]:r.REPEAT,[oi]:r.CLAMP_TO_EDGE,[Gh]:r.MIRRORED_REPEAT},q={[vr]:r.NEAREST,[Ey]:r.NEAREST_MIPMAP_NEAREST,[Cl]:r.NEAREST_MIPMAP_LINEAR,[rr]:r.LINEAR,[fh]:r.LINEAR_MIPMAP_NEAREST,[to]:r.LINEAR_MIPMAP_LINEAR},K={[M3]:r.NEVER,[R3]:r.ALWAYS,[E3]:r.LESS,[Pb]:r.LEQUAL,[T3]:r.EQUAL,[P3]:r.GEQUAL,[A3]:r.GREATER,[C3]:r.NOTEQUAL};function ne(ae,oe,Ee){if(oe.type===ys&&t.has("OES_texture_float_linear")===!1&&(oe.magFilter===rr||oe.magFilter===fh||oe.magFilter===Cl||oe.magFilter===to||oe.minFilter===rr||oe.minFilter===fh||oe.minFilter===Cl||oe.minFilter===to)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),Ee?(r.texParameteri(ae,r.TEXTURE_WRAP_S,H[oe.wrapS]),r.texParameteri(ae,r.TEXTURE_WRAP_T,H[oe.wrapT]),(ae===r.TEXTURE_3D||ae===r.TEXTURE_2D_ARRAY)&&r.texParameteri(ae,r.TEXTURE_WRAP_R,H[oe.wrapR]),r.texParameteri(ae,r.TEXTURE_MAG_FILTER,q[oe.magFilter]),r.texParameteri(ae,r.TEXTURE_MIN_FILTER,q[oe.minFilter])):(r.texParameteri(ae,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(ae,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(ae===r.TEXTURE_3D||ae===r.TEXTURE_2D_ARRAY)&&r.texParameteri(ae,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(oe.wrapS!==oi||oe.wrapT!==oi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(ae,r.TEXTURE_MAG_FILTER,w(oe.magFilter)),r.texParameteri(ae,r.TEXTURE_MIN_FILTER,w(oe.minFilter)),oe.minFilter!==vr&&oe.minFilter!==rr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),oe.compareFunction&&(r.texParameteri(ae,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(ae,r.TEXTURE_COMPARE_FUNC,K[oe.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){const Oe=t.get("EXT_texture_filter_anisotropic");if(oe.magFilter===vr||oe.minFilter!==Cl&&oe.minFilter!==to||oe.type===ys&&t.has("OES_texture_float_linear")===!1||i===!1&&oe.type===Bc&&t.has("OES_texture_half_float_linear")===!1)return;(oe.anisotropy>1||s.get(oe).__currentAnisotropy)&&(r.texParameterf(ae,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,o.getMaxAnisotropy())),s.get(oe).__currentAnisotropy=oe.anisotropy)}}function ee(ae,oe){let Ee=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,oe.addEventListener("dispose",M));const Oe=oe.source;let ze=d.get(Oe);ze===void 0&&(ze={},d.set(Oe,ze));const Be=F(oe);if(Be!==ae.__cacheKey){ze[Be]===void 0&&(ze[Be]={texture:r.createTexture(),usedTimes:0},y.memory.textures++,Ee=!0),ze[Be].usedTimes++;const dt=ze[ae.__cacheKey];dt!==void 0&&(ze[ae.__cacheKey].usedTimes--,dt.usedTimes===0&&R(oe)),ae.__cacheKey=Be,ae.__webglTexture=ze[Be].texture}return Ee}function se(ae,oe,Ee){let Oe=r.TEXTURE_2D;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(Oe=r.TEXTURE_2D_ARRAY),oe.isData3DTexture&&(Oe=r.TEXTURE_3D);const ze=ee(ae,oe),Be=oe.source;n.bindTexture(Oe,ae.__webglTexture,r.TEXTURE0+Ee);const dt=s.get(Be);if(Be.version!==dt.__version||ze===!0){n.activeTexture(r.TEXTURE0+Ee);const Je=Nn.getPrimaries(Nn.workingColorSpace),_e=oe.colorSpace===qi?null:Nn.getPrimaries(oe.colorSpace),Ue=oe.colorSpace===qi||Je===_e?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,oe.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,oe.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ue);const Fe=u(oe)&&f(oe.image)===!1;let Ne=p(oe.image,Fe,!1,o.maxTextureSize);Ne=Se(oe,Ne);const ft=f(Ne)||i,vt=a.convert(oe.format,oe.colorSpace);let ht=a.convert(oe.type),lt=b(oe.internalFormat,vt,ht,oe.colorSpace,oe.isVideoTexture);ne(Oe,oe,ft);let ce;const ue=oe.mipmaps,he=i&&oe.isVideoTexture!==!0&&lt!==Tb,be=dt.__version===void 0||ze===!0,je=Be.dataReady,We=S(oe,Ne,ft);if(oe.isDepthTexture)lt=r.DEPTH_COMPONENT,i?oe.type===ys?lt=r.DEPTH_COMPONENT32F:oe.type===jo?lt=r.DEPTH_COMPONENT24:oe.type===ja?lt=r.DEPTH24_STENCIL8:lt=r.DEPTH_COMPONENT16:oe.type===ys&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),oe.format===La&&lt===r.DEPTH_COMPONENT&&oe.type!==tg&&oe.type!==jo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),oe.type=jo,ht=a.convert(oe.type)),oe.format===Ql&&lt===r.DEPTH_COMPONENT&&(lt=r.DEPTH_STENCIL,oe.type!==ja&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),oe.type=ja,ht=a.convert(oe.type))),be&&(he?n.texStorage2D(r.TEXTURE_2D,1,lt,Ne.width,Ne.height):n.texImage2D(r.TEXTURE_2D,0,lt,Ne.width,Ne.height,0,vt,ht,null));else if(oe.isDataTexture)if(ue.length>0&&ft){he&&be&&n.texStorage2D(r.TEXTURE_2D,We,lt,ue[0].width,ue[0].height);for(let xe=0,Ve=ue.length;xe<Ve;xe++)ce=ue[xe],he?je&&n.texSubImage2D(r.TEXTURE_2D,xe,0,0,ce.width,ce.height,vt,ht,ce.data):n.texImage2D(r.TEXTURE_2D,xe,lt,ce.width,ce.height,0,vt,ht,ce.data);oe.generateMipmaps=!1}else he?(be&&n.texStorage2D(r.TEXTURE_2D,We,lt,Ne.width,Ne.height),je&&n.texSubImage2D(r.TEXTURE_2D,0,0,0,Ne.width,Ne.height,vt,ht,Ne.data)):n.texImage2D(r.TEXTURE_2D,0,lt,Ne.width,Ne.height,0,vt,ht,Ne.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){he&&be&&n.texStorage3D(r.TEXTURE_2D_ARRAY,We,lt,ue[0].width,ue[0].height,Ne.depth);for(let xe=0,Ve=ue.length;xe<Ve;xe++)ce=ue[xe],oe.format!==gi?vt!==null?he?je&&n.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,xe,0,0,0,ce.width,ce.height,Ne.depth,vt,ce.data,0,0):n.compressedTexImage3D(r.TEXTURE_2D_ARRAY,xe,lt,ce.width,ce.height,Ne.depth,0,ce.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?je&&n.texSubImage3D(r.TEXTURE_2D_ARRAY,xe,0,0,0,ce.width,ce.height,Ne.depth,vt,ht,ce.data):n.texImage3D(r.TEXTURE_2D_ARRAY,xe,lt,ce.width,ce.height,Ne.depth,0,vt,ht,ce.data)}else{he&&be&&n.texStorage2D(r.TEXTURE_2D,We,lt,ue[0].width,ue[0].height);for(let xe=0,Ve=ue.length;xe<Ve;xe++)ce=ue[xe],oe.format!==gi?vt!==null?he?je&&n.compressedTexSubImage2D(r.TEXTURE_2D,xe,0,0,ce.width,ce.height,vt,ce.data):n.compressedTexImage2D(r.TEXTURE_2D,xe,lt,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?je&&n.texSubImage2D(r.TEXTURE_2D,xe,0,0,ce.width,ce.height,vt,ht,ce.data):n.texImage2D(r.TEXTURE_2D,xe,lt,ce.width,ce.height,0,vt,ht,ce.data)}else if(oe.isDataArrayTexture)he?(be&&n.texStorage3D(r.TEXTURE_2D_ARRAY,We,lt,Ne.width,Ne.height,Ne.depth),je&&n.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ne.width,Ne.height,Ne.depth,vt,ht,Ne.data)):n.texImage3D(r.TEXTURE_2D_ARRAY,0,lt,Ne.width,Ne.height,Ne.depth,0,vt,ht,Ne.data);else if(oe.isData3DTexture)he?(be&&n.texStorage3D(r.TEXTURE_3D,We,lt,Ne.width,Ne.height,Ne.depth),je&&n.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ne.width,Ne.height,Ne.depth,vt,ht,Ne.data)):n.texImage3D(r.TEXTURE_3D,0,lt,Ne.width,Ne.height,Ne.depth,0,vt,ht,Ne.data);else if(oe.isFramebufferTexture){if(be)if(he)n.texStorage2D(r.TEXTURE_2D,We,lt,Ne.width,Ne.height);else{let xe=Ne.width,Ve=Ne.height;for(let Ce=0;Ce<We;Ce++)n.texImage2D(r.TEXTURE_2D,Ce,lt,xe,Ve,0,vt,ht,null),xe>>=1,Ve>>=1}}else if(ue.length>0&&ft){he&&be&&n.texStorage2D(r.TEXTURE_2D,We,lt,ue[0].width,ue[0].height);for(let xe=0,Ve=ue.length;xe<Ve;xe++)ce=ue[xe],he?je&&n.texSubImage2D(r.TEXTURE_2D,xe,0,0,vt,ht,ce):n.texImage2D(r.TEXTURE_2D,xe,lt,vt,ht,ce);oe.generateMipmaps=!1}else he?(be&&n.texStorage2D(r.TEXTURE_2D,We,lt,Ne.width,Ne.height),je&&n.texSubImage2D(r.TEXTURE_2D,0,0,0,vt,ht,Ne)):n.texImage2D(r.TEXTURE_2D,0,lt,vt,ht,Ne);c(oe,ft)&&m(Oe),dt.__version=Be.version,oe.onUpdate&&oe.onUpdate(oe)}ae.__version=oe.version}function me(ae,oe,Ee){if(oe.image.length!==6)return;const Oe=ee(ae,oe),ze=oe.source;n.bindTexture(r.TEXTURE_CUBE_MAP,ae.__webglTexture,r.TEXTURE0+Ee);const Be=s.get(ze);if(ze.version!==Be.__version||Oe===!0){n.activeTexture(r.TEXTURE0+Ee);const dt=Nn.getPrimaries(Nn.workingColorSpace),Je=oe.colorSpace===qi?null:Nn.getPrimaries(oe.colorSpace),_e=oe.colorSpace===qi||dt===Je?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,oe.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,oe.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e);const Ue=oe.isCompressedTexture||oe.image[0].isCompressedTexture,Fe=oe.image[0]&&oe.image[0].isDataTexture,Ne=[];for(let xe=0;xe<6;xe++)!Ue&&!Fe?Ne[xe]=p(oe.image[xe],!1,!0,o.maxCubemapSize):Ne[xe]=Fe?oe.image[xe].image:oe.image[xe],Ne[xe]=Se(oe,Ne[xe]);const ft=Ne[0],vt=f(ft)||i,ht=a.convert(oe.format,oe.colorSpace),lt=a.convert(oe.type),ce=b(oe.internalFormat,ht,lt,oe.colorSpace),ue=i&&oe.isVideoTexture!==!0,he=Be.__version===void 0||Oe===!0,be=ze.dataReady;let je=S(oe,ft,vt);ne(r.TEXTURE_CUBE_MAP,oe,vt);let We;if(Ue){ue&&he&&n.texStorage2D(r.TEXTURE_CUBE_MAP,je,ce,ft.width,ft.height);for(let xe=0;xe<6;xe++){We=Ne[xe].mipmaps;for(let Ve=0;Ve<We.length;Ve++){const Ce=We[Ve];oe.format!==gi?ht!==null?ue?be&&n.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve,0,0,Ce.width,Ce.height,ht,Ce.data):n.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve,ce,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ue?be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve,0,0,Ce.width,Ce.height,ht,lt,Ce.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve,ce,Ce.width,Ce.height,0,ht,lt,Ce.data)}}}else{We=oe.mipmaps,ue&&he&&(We.length>0&&je++,n.texStorage2D(r.TEXTURE_CUBE_MAP,je,ce,Ne[0].width,Ne[0].height));for(let xe=0;xe<6;xe++)if(Fe){ue?be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,Ne[xe].width,Ne[xe].height,ht,lt,Ne[xe].data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,ce,Ne[xe].width,Ne[xe].height,0,ht,lt,Ne[xe].data);for(let Ve=0;Ve<We.length;Ve++){const Qe=We[Ve].image[xe].image;ue?be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve+1,0,0,Qe.width,Qe.height,ht,lt,Qe.data):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve+1,ce,Qe.width,Qe.height,0,ht,lt,Qe.data)}}else{ue?be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,ht,lt,Ne[xe]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,ce,ht,lt,Ne[xe]);for(let Ve=0;Ve<We.length;Ve++){const Ce=We[Ve];ue?be&&n.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve+1,0,0,ht,lt,Ce.image[xe]):n.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ve+1,ce,ht,lt,Ce.image[xe])}}}c(oe,vt)&&m(r.TEXTURE_CUBE_MAP),Be.__version=ze.version,oe.onUpdate&&oe.onUpdate(oe)}ae.__version=oe.version}function X(ae,oe,Ee,Oe,ze,Be){const dt=a.convert(Ee.format,Ee.colorSpace),Je=a.convert(Ee.type),_e=b(Ee.internalFormat,dt,Je,Ee.colorSpace);if(!s.get(oe).__hasExternalTextures){const Fe=Math.max(1,oe.width>>Be),Ne=Math.max(1,oe.height>>Be);ze===r.TEXTURE_3D||ze===r.TEXTURE_2D_ARRAY?n.texImage3D(ze,Be,_e,Fe,Ne,oe.depth,0,dt,Je,null):n.texImage2D(ze,Be,_e,Fe,Ne,0,dt,Je,null)}n.bindFramebuffer(r.FRAMEBUFFER,ae),ve(oe)?_.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Oe,ze,s.get(Ee).__webglTexture,0,ge(oe)):(ze===r.TEXTURE_2D||ze>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&ze<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Oe,ze,s.get(Ee).__webglTexture,Be),n.bindFramebuffer(r.FRAMEBUFFER,null)}function Z(ae,oe,Ee){if(r.bindRenderbuffer(r.RENDERBUFFER,ae),oe.depthBuffer&&!oe.stencilBuffer){let Oe=i===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(Ee||ve(oe)){const ze=oe.depthTexture;ze&&ze.isDepthTexture&&(ze.type===ys?Oe=r.DEPTH_COMPONENT32F:ze.type===jo&&(Oe=r.DEPTH_COMPONENT24));const Be=ge(oe);ve(oe)?_.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Be,Oe,oe.width,oe.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Be,Oe,oe.width,oe.height)}else r.renderbufferStorage(r.RENDERBUFFER,Oe,oe.width,oe.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,ae)}else if(oe.depthBuffer&&oe.stencilBuffer){const Oe=ge(oe);Ee&&ve(oe)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Oe,r.DEPTH24_STENCIL8,oe.width,oe.height):ve(oe)?_.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Oe,r.DEPTH24_STENCIL8,oe.width,oe.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,oe.width,oe.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,ae)}else{const Oe=oe.isWebGLMultipleRenderTargets===!0?oe.texture:[oe.texture];for(let ze=0;ze<Oe.length;ze++){const Be=Oe[ze],dt=a.convert(Be.format,Be.colorSpace),Je=a.convert(Be.type),_e=b(Be.internalFormat,dt,Je,Be.colorSpace),Ue=ge(oe);Ee&&ve(oe)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ue,_e,oe.width,oe.height):ve(oe)?_.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ue,_e,oe.width,oe.height):r.renderbufferStorage(r.RENDERBUFFER,_e,oe.width,oe.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function ie(ae,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(r.FRAMEBUFFER,ae),!(oe.depthTexture&&oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),z(oe.depthTexture,0);const Oe=s.get(oe.depthTexture).__webglTexture,ze=ge(oe);if(oe.depthTexture.format===La)ve(oe)?_.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Oe,0,ze):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Oe,0);else if(oe.depthTexture.format===Ql)ve(oe)?_.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Oe,0,ze):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Oe,0);else throw new Error("Unknown depthTexture format")}function ye(ae){const oe=s.get(ae),Ee=ae.isWebGLCubeRenderTarget===!0;if(ae.depthTexture&&!oe.__autoAllocateDepthBuffer){if(Ee)throw new Error("target.depthTexture not supported in Cube render targets");ie(oe.__webglFramebuffer,ae)}else if(Ee){oe.__webglDepthbuffer=[];for(let Oe=0;Oe<6;Oe++)n.bindFramebuffer(r.FRAMEBUFFER,oe.__webglFramebuffer[Oe]),oe.__webglDepthbuffer[Oe]=r.createRenderbuffer(),Z(oe.__webglDepthbuffer[Oe],ae,!1)}else n.bindFramebuffer(r.FRAMEBUFFER,oe.__webglFramebuffer),oe.__webglDepthbuffer=r.createRenderbuffer(),Z(oe.__webglDepthbuffer,ae,!1);n.bindFramebuffer(r.FRAMEBUFFER,null)}function fe(ae,oe,Ee){const Oe=s.get(ae);oe!==void 0&&X(Oe.__webglFramebuffer,ae,ae.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Ee!==void 0&&ye(ae)}function $(ae){const oe=ae.texture,Ee=s.get(ae),Oe=s.get(oe);ae.addEventListener("dispose",A),ae.isWebGLMultipleRenderTargets!==!0&&(Oe.__webglTexture===void 0&&(Oe.__webglTexture=r.createTexture()),Oe.__version=oe.version,y.memory.textures++);const ze=ae.isWebGLCubeRenderTarget===!0,Be=ae.isWebGLMultipleRenderTargets===!0,dt=f(ae)||i;if(ze){Ee.__webglFramebuffer=[];for(let Je=0;Je<6;Je++)if(i&&oe.mipmaps&&oe.mipmaps.length>0){Ee.__webglFramebuffer[Je]=[];for(let _e=0;_e<oe.mipmaps.length;_e++)Ee.__webglFramebuffer[Je][_e]=r.createFramebuffer()}else Ee.__webglFramebuffer[Je]=r.createFramebuffer()}else{if(i&&oe.mipmaps&&oe.mipmaps.length>0){Ee.__webglFramebuffer=[];for(let Je=0;Je<oe.mipmaps.length;Je++)Ee.__webglFramebuffer[Je]=r.createFramebuffer()}else Ee.__webglFramebuffer=r.createFramebuffer();if(Be)if(o.drawBuffers){const Je=ae.texture;for(let _e=0,Ue=Je.length;_e<Ue;_e++){const Fe=s.get(Je[_e]);Fe.__webglTexture===void 0&&(Fe.__webglTexture=r.createTexture(),y.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(i&&ae.samples>0&&ve(ae)===!1){const Je=Be?oe:[oe];Ee.__webglMultisampledFramebuffer=r.createFramebuffer(),Ee.__webglColorRenderbuffer=[],n.bindFramebuffer(r.FRAMEBUFFER,Ee.__webglMultisampledFramebuffer);for(let _e=0;_e<Je.length;_e++){const Ue=Je[_e];Ee.__webglColorRenderbuffer[_e]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Ee.__webglColorRenderbuffer[_e]);const Fe=a.convert(Ue.format,Ue.colorSpace),Ne=a.convert(Ue.type),ft=b(Ue.internalFormat,Fe,Ne,Ue.colorSpace,ae.isXRRenderTarget===!0),vt=ge(ae);r.renderbufferStorageMultisample(r.RENDERBUFFER,vt,ft,ae.width,ae.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+_e,r.RENDERBUFFER,Ee.__webglColorRenderbuffer[_e])}r.bindRenderbuffer(r.RENDERBUFFER,null),ae.depthBuffer&&(Ee.__webglDepthRenderbuffer=r.createRenderbuffer(),Z(Ee.__webglDepthRenderbuffer,ae,!0)),n.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ze){n.bindTexture(r.TEXTURE_CUBE_MAP,Oe.__webglTexture),ne(r.TEXTURE_CUBE_MAP,oe,dt);for(let Je=0;Je<6;Je++)if(i&&oe.mipmaps&&oe.mipmaps.length>0)for(let _e=0;_e<oe.mipmaps.length;_e++)X(Ee.__webglFramebuffer[Je][_e],ae,oe,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Je,_e);else X(Ee.__webglFramebuffer[Je],ae,oe,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Je,0);c(oe,dt)&&m(r.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Be){const Je=ae.texture;for(let _e=0,Ue=Je.length;_e<Ue;_e++){const Fe=Je[_e],Ne=s.get(Fe);n.bindTexture(r.TEXTURE_2D,Ne.__webglTexture),ne(r.TEXTURE_2D,Fe,dt),X(Ee.__webglFramebuffer,ae,Fe,r.COLOR_ATTACHMENT0+_e,r.TEXTURE_2D,0),c(Fe,dt)&&m(r.TEXTURE_2D)}n.unbindTexture()}else{let Je=r.TEXTURE_2D;if((ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(i?Je=ae.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Je,Oe.__webglTexture),ne(Je,oe,dt),i&&oe.mipmaps&&oe.mipmaps.length>0)for(let _e=0;_e<oe.mipmaps.length;_e++)X(Ee.__webglFramebuffer[_e],ae,oe,r.COLOR_ATTACHMENT0,Je,_e);else X(Ee.__webglFramebuffer,ae,oe,r.COLOR_ATTACHMENT0,Je,0);c(oe,dt)&&m(Je),n.unbindTexture()}ae.depthBuffer&&ye(ae)}function re(ae){const oe=f(ae)||i,Ee=ae.isWebGLMultipleRenderTargets===!0?ae.texture:[ae.texture];for(let Oe=0,ze=Ee.length;Oe<ze;Oe++){const Be=Ee[Oe];if(c(Be,oe)){const dt=ae.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Je=s.get(Be).__webglTexture;n.bindTexture(dt,Je),m(dt),n.unbindTexture()}}}function de(ae){if(i&&ae.samples>0&&ve(ae)===!1){const oe=ae.isWebGLMultipleRenderTargets?ae.texture:[ae.texture],Ee=ae.width,Oe=ae.height;let ze=r.COLOR_BUFFER_BIT;const Be=[],dt=ae.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Je=s.get(ae),_e=ae.isWebGLMultipleRenderTargets===!0;if(_e)for(let Ue=0;Ue<oe.length;Ue++)n.bindFramebuffer(r.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ue,r.RENDERBUFFER,null),n.bindFramebuffer(r.FRAMEBUFFER,Je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ue,r.TEXTURE_2D,null,0);n.bindFramebuffer(r.READ_FRAMEBUFFER,Je.__webglMultisampledFramebuffer),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Je.__webglFramebuffer);for(let Ue=0;Ue<oe.length;Ue++){Be.push(r.COLOR_ATTACHMENT0+Ue),ae.depthBuffer&&Be.push(dt);const Fe=Je.__ignoreDepthValues!==void 0?Je.__ignoreDepthValues:!1;if(Fe===!1&&(ae.depthBuffer&&(ze|=r.DEPTH_BUFFER_BIT),ae.stencilBuffer&&(ze|=r.STENCIL_BUFFER_BIT)),_e&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Je.__webglColorRenderbuffer[Ue]),Fe===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[dt]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[dt])),_e){const Ne=s.get(oe[Ue]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Ne,0)}r.blitFramebuffer(0,0,Ee,Oe,0,0,Ee,Oe,ze,r.NEAREST),g&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Be)}if(n.bindFramebuffer(r.READ_FRAMEBUFFER,null),n.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),_e)for(let Ue=0;Ue<oe.length;Ue++){n.bindFramebuffer(r.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ue,r.RENDERBUFFER,Je.__webglColorRenderbuffer[Ue]);const Fe=s.get(oe[Ue]).__webglTexture;n.bindFramebuffer(r.FRAMEBUFFER,Je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ue,r.TEXTURE_2D,Fe,0)}n.bindFramebuffer(r.DRAW_FRAMEBUFFER,Je.__webglMultisampledFramebuffer)}}function ge(ae){return Math.min(o.maxSamples,ae.samples)}function ve(ae){const oe=s.get(ae);return i&&ae.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&oe.__useRenderToTexture!==!1}function we(ae){const oe=y.render.frame;h.get(ae)!==oe&&(h.set(ae,oe),ae.update())}function Se(ae,oe){const Ee=ae.colorSpace,Oe=ae.format,ze=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||ae.format===Ty||Ee!==co&&Ee!==qi&&(Nn.getTransfer(Ee)===Hn?i===!1?t.has("EXT_sRGB")===!0&&Oe===gi?(ae.format=Ty,ae.minFilter=rr,ae.generateMipmaps=!1):oe=jb.sRGBToLinear(oe):(Oe!==gi||ze!==lo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ee)),oe}this.allocateTextureUnit=I,this.resetTextureUnits=B,this.setTexture2D=z,this.setTexture2DArray=G,this.setTexture3D=N,this.setTextureCube=O,this.rebindTextures=fe,this.setupRenderTarget=$,this.updateRenderTargetMipmap=re,this.updateMultisampleRenderTarget=de,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=X,this.useMultisampledRTT=ve}function W3(r,t,n){const s=n.isWebGL2;function o(a,y=qi){let i;const _=Nn.getTransfer(y);if(a===lo)return r.UNSIGNED_BYTE;if(a===bb)return r.UNSIGNED_SHORT_4_4_4_4;if(a===wb)return r.UNSIGNED_SHORT_5_5_5_1;if(a===c3)return r.BYTE;if(a===d3)return r.SHORT;if(a===tg)return r.UNSIGNED_SHORT;if(a===xb)return r.INT;if(a===jo)return r.UNSIGNED_INT;if(a===ys)return r.FLOAT;if(a===Bc)return s?r.HALF_FLOAT:(i=t.get("OES_texture_half_float"),i!==null?i.HALF_FLOAT_OES:null);if(a===h3)return r.ALPHA;if(a===gi)return r.RGBA;if(a===f3)return r.LUMINANCE;if(a===p3)return r.LUMINANCE_ALPHA;if(a===La)return r.DEPTH_COMPONENT;if(a===Ql)return r.DEPTH_STENCIL;if(a===Ty)return i=t.get("EXT_sRGB"),i!==null?i.SRGB_ALPHA_EXT:null;if(a===m3)return r.RED;if(a===Sb)return r.RED_INTEGER;if(a===y3)return r.RG;if(a===Mb)return r.RG_INTEGER;if(a===Eb)return r.RGBA_INTEGER;if(a===Um||a===Fm||a===Bm||a===zm)if(_===Hn)if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),i!==null){if(a===Um)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Fm)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===Bm)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===zm)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(i=t.get("WEBGL_compressed_texture_s3tc"),i!==null){if(a===Um)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Fm)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Bm)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===zm)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===o_||a===a_||a===l_||a===u_)if(i=t.get("WEBGL_compressed_texture_pvrtc"),i!==null){if(a===o_)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===a_)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===l_)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===u_)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===Tb)return i=t.get("WEBGL_compressed_texture_etc1"),i!==null?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===c_||a===d_)if(i=t.get("WEBGL_compressed_texture_etc"),i!==null){if(a===c_)return _===Hn?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(a===d_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===h_||a===f_||a===p_||a===m_||a===y_||a===g_||a===v_||a===__||a===x_||a===b_||a===w_||a===S_||a===M_||a===E_)if(i=t.get("WEBGL_compressed_texture_astc"),i!==null){if(a===h_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===f_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===p_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===m_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===y_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===g_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===v_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===__)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===x_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===b_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===w_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===S_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===M_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===E_)return _===Hn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===Vm||a===T_||a===A_)if(i=t.get("EXT_texture_compression_bptc"),i!==null){if(a===Vm)return _===Hn?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===T_)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===A_)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===g3||a===C_||a===P_||a===R_)if(i=t.get("EXT_texture_compression_rgtc"),i!==null){if(a===Vm)return i.COMPRESSED_RED_RGTC1_EXT;if(a===C_)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===P_)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===R_)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===ja?s?r.UNSIGNED_INT_24_8:(i=t.get("WEBGL_depth_texture"),i!==null?i.UNSIGNED_INT_24_8_WEBGL:null):r[a]!==void 0?r[a]:null}return{convert:o}}class X3 extends Br{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class xc extends jn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const q8={type:"move"};class _v{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Re),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const s of t.hand.values())this._getHandJoint(n,s)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,s){let o=null,a=null,y=null;const i=this._targetRay,_=this._grip,g=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(g&&t.hand){y=!0;for(const p of t.hand.values()){const f=n.getJointPose(p,s),u=this._getHandJoint(g,p);f!==null&&(u.matrix.fromArray(f.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,u.jointRadius=f.radius),u.visible=f!==null}const h=g.joints["index-finger-tip"],l=g.joints["thumb-tip"],d=h.position.distanceTo(l.position),v=.02,x=.005;g.inputState.pinching&&d>v+x?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!g.inputState.pinching&&d<=v-x&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else _!==null&&t.gripSpace&&(a=n.getPose(t.gripSpace,s),a!==null&&(_.matrix.fromArray(a.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,a.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(a.linearVelocity)):_.hasLinearVelocity=!1,a.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(a.angularVelocity)):_.hasAngularVelocity=!1));i!==null&&(o=n.getPose(t.targetRaySpace,s),o===null&&a!==null&&(o=a),o!==null&&(i.matrix.fromArray(o.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,o.linearVelocity?(i.hasLinearVelocity=!0,i.linearVelocity.copy(o.linearVelocity)):i.hasLinearVelocity=!1,o.angularVelocity?(i.hasAngularVelocity=!0,i.angularVelocity.copy(o.angularVelocity)):i.hasAngularVelocity=!1,this.dispatchEvent(q8)))}return i!==null&&(i.visible=o!==null),_!==null&&(_.visible=a!==null),g!==null&&(g.visible=y!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const s=new xc;s.matrixAutoUpdate=!1,s.visible=!1,t.joints[n.jointName]=s,t.add(s)}return t.joints[n.jointName]}}const Y8=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Z8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class K8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,n,s){if(this.texture===null){const o=new fr,a=t.properties.get(o);a.__webglTexture=n.texture,(n.depthNear!=s.depthNear||n.depthFar!=s.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=o}}render(t,n){if(this.texture!==null){if(this.mesh===null){const s=n.cameras[0].viewport,o=new Ws({extensions:{fragDepth:!0},vertexShader:Y8,fragmentShader:Z8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:s.z},depthHeight:{value:s.w}}});this.mesh=new Ar(new Qc(20,20),o)}t.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class J8 extends Xo{constructor(t,n){super();const s=this;let o=null,a=1,y=null,i="local-floor",_=1,g=null,h=null,l=null,d=null,v=null,x=null;const p=new K8,f=n.getContextAttributes();let u=null,c=null;const m=[],b=[],S=new mt;let w=null;const M=new Br;M.layers.enable(1),M.viewport=new Un;const A=new Br;A.layers.enable(2),A.viewport=new Un;const P=[M,A],R=new X3;R.layers.enable(1),R.layers.enable(2);let k=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let se=m[ee];return se===void 0&&(se=new _v,m[ee]=se),se.getTargetRaySpace()},this.getControllerGrip=function(ee){let se=m[ee];return se===void 0&&(se=new _v,m[ee]=se),se.getGripSpace()},this.getHand=function(ee){let se=m[ee];return se===void 0&&(se=new _v,m[ee]=se),se.getHandSpace()};function B(ee){const se=b.indexOf(ee.inputSource);if(se===-1)return;const me=m[se];me!==void 0&&(me.update(ee.inputSource,ee.frame,g||y),me.dispatchEvent({type:ee.type,data:ee.inputSource}))}function I(){o.removeEventListener("select",B),o.removeEventListener("selectstart",B),o.removeEventListener("selectend",B),o.removeEventListener("squeeze",B),o.removeEventListener("squeezestart",B),o.removeEventListener("squeezeend",B),o.removeEventListener("end",I),o.removeEventListener("inputsourceschange",F);for(let ee=0;ee<m.length;ee++){const se=b[ee];se!==null&&(b[ee]=null,m[ee].disconnect(se))}k=null,L=null,p.reset(),t.setRenderTarget(u),v=null,d=null,l=null,o=null,c=null,ne.stop(),s.isPresenting=!1,t.setPixelRatio(w),t.setSize(S.width,S.height,!1),s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){a=ee,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){i=ee,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return g||y},this.setReferenceSpace=function(ee){g=ee},this.getBaseLayer=function(){return d!==null?d:v},this.getBinding=function(){return l},this.getFrame=function(){return x},this.getSession=function(){return o},this.setSession=async function(ee){if(o=ee,o!==null){if(u=t.getRenderTarget(),o.addEventListener("select",B),o.addEventListener("selectstart",B),o.addEventListener("selectend",B),o.addEventListener("squeeze",B),o.addEventListener("squeezestart",B),o.addEventListener("squeezeend",B),o.addEventListener("end",I),o.addEventListener("inputsourceschange",F),f.xrCompatible!==!0&&await n.makeXRCompatible(),w=t.getPixelRatio(),t.getSize(S),o.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const se={antialias:o.renderState.layers===void 0?f.antialias:!0,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:a};v=new XRWebGLLayer(o,n,se),o.updateRenderState({baseLayer:v}),t.setPixelRatio(1),t.setSize(v.framebufferWidth,v.framebufferHeight,!1),c=new Hs(v.framebufferWidth,v.framebufferHeight,{format:gi,type:lo,colorSpace:t.outputColorSpace,stencilBuffer:f.stencil})}else{let se=null,me=null,X=null;f.depth&&(X=f.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,se=f.stencil?Ql:La,me=f.stencil?ja:jo);const Z={colorFormat:n.RGBA8,depthFormat:X,scaleFactor:a};l=new XRWebGLBinding(o,n),d=l.createProjectionLayer(Z),o.updateRenderState({layers:[d]}),t.setPixelRatio(1),t.setSize(d.textureWidth,d.textureHeight,!1),c=new Hs(d.textureWidth,d.textureHeight,{format:gi,type:lo,depthTexture:new Db(d.textureWidth,d.textureHeight,me,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:f.stencil,colorSpace:t.outputColorSpace,samples:f.antialias?4:0});const ie=t.properties.get(c);ie.__ignoreDepthValues=d.ignoreDepthValues}c.isXRRenderTarget=!0,this.setFoveation(_),g=null,y=await o.requestReferenceSpace(i),ne.setContext(o),ne.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function F(ee){for(let se=0;se<ee.removed.length;se++){const me=ee.removed[se],X=b.indexOf(me);X>=0&&(b[X]=null,m[X].disconnect(me))}for(let se=0;se<ee.added.length;se++){const me=ee.added[se];let X=b.indexOf(me);if(X===-1){for(let ie=0;ie<m.length;ie++)if(ie>=b.length){b.push(me),X=ie;break}else if(b[ie]===null){b[ie]=me,X=ie;break}if(X===-1)break}const Z=m[X];Z&&Z.connect(me)}}const z=new Re,G=new Re;function N(ee,se,me){z.setFromMatrixPosition(se.matrixWorld),G.setFromMatrixPosition(me.matrixWorld);const X=z.distanceTo(G),Z=se.projectionMatrix.elements,ie=me.projectionMatrix.elements,ye=Z[14]/(Z[10]-1),fe=Z[14]/(Z[10]+1),$=(Z[9]+1)/Z[5],re=(Z[9]-1)/Z[5],de=(Z[8]-1)/Z[0],ge=(ie[8]+1)/ie[0],ve=ye*de,we=ye*ge,Se=X/(-de+ge),ae=Se*-de;se.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(ae),ee.translateZ(Se),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const oe=ye+Se,Ee=fe+Se,Oe=ve-ae,ze=we+(X-ae),Be=$*fe/Ee*oe,dt=re*fe/Ee*oe;ee.projectionMatrix.makePerspective(Oe,ze,Be,dt,oe,Ee),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}function O(ee,se){se===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(se.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(o===null)return;p.texture!==null&&(ee.near=p.depthNear,ee.far=p.depthFar),R.near=A.near=M.near=ee.near,R.far=A.far=M.far=ee.far,(k!==R.near||L!==R.far)&&(o.updateRenderState({depthNear:R.near,depthFar:R.far}),k=R.near,L=R.far,M.near=k,M.far=L,A.near=k,A.far=L,M.updateProjectionMatrix(),A.updateProjectionMatrix(),ee.updateProjectionMatrix());const se=ee.parent,me=R.cameras;O(R,se);for(let X=0;X<me.length;X++)O(me[X],se);me.length===2?N(R,M,A):R.projectionMatrix.copy(M.projectionMatrix),H(ee,R,se)};function H(ee,se,me){me===null?ee.matrix.copy(se.matrixWorld):(ee.matrix.copy(me.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(se.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(se.projectionMatrix),ee.projectionMatrixInverse.copy(se.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=zc*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(d===null&&v===null))return _},this.setFoveation=function(ee){_=ee,d!==null&&(d.fixedFoveation=ee),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=ee)},this.hasDepthSensing=function(){return p.texture!==null};let q=null;function K(ee,se){if(h=se.getViewerPose(g||y),x=se,h!==null){const me=h.views;v!==null&&(t.setRenderTargetFramebuffer(c,v.framebuffer),t.setRenderTarget(c));let X=!1;me.length!==R.cameras.length&&(R.cameras.length=0,X=!0);for(let ie=0;ie<me.length;ie++){const ye=me[ie];let fe=null;if(v!==null)fe=v.getViewport(ye);else{const re=l.getViewSubImage(d,ye);fe=re.viewport,ie===0&&(t.setRenderTargetTextures(c,re.colorTexture,d.ignoreDepthValues?void 0:re.depthStencilTexture),t.setRenderTarget(c))}let $=P[ie];$===void 0&&($=new Br,$.layers.enable(ie),$.viewport=new Un,P[ie]=$),$.matrix.fromArray(ye.transform.matrix),$.matrix.decompose($.position,$.quaternion,$.scale),$.projectionMatrix.fromArray(ye.projectionMatrix),$.projectionMatrixInverse.copy($.projectionMatrix).invert(),$.viewport.set(fe.x,fe.y,fe.width,fe.height),ie===0&&(R.matrix.copy($.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),X===!0&&R.cameras.push($)}const Z=o.enabledFeatures;if(Z&&Z.includes("depth-sensing")){const ie=l.getDepthInformation(me[0]);ie&&ie.isValid&&ie.texture&&p.init(t,ie,o.renderState)}}for(let me=0;me<m.length;me++){const X=b[me],Z=m[me];X!==null&&Z!==void 0&&Z.update(X,se,g||y)}p.render(t,R),q&&q(ee,se),se.detectedPlanes&&s.dispatchEvent({type:"planesdetected",data:se}),x=null}const ne=new F3;ne.setAnimationLoop(K),this.setAnimationLoop=function(ee){q=ee},this.dispose=function(){}}}function Q8(r,t){function n(f,u){f.matrixAutoUpdate===!0&&f.updateMatrix(),u.value.copy(f.matrix)}function s(f,u){u.color.getRGB(f.fogColor.value,O3(r)),u.isFog?(f.fogNear.value=u.near,f.fogFar.value=u.far):u.isFogExp2&&(f.fogDensity.value=u.density)}function o(f,u,c,m,b){u.isMeshBasicMaterial||u.isMeshLambertMaterial?a(f,u):u.isMeshToonMaterial?(a(f,u),l(f,u)):u.isMeshPhongMaterial?(a(f,u),h(f,u)):u.isMeshStandardMaterial?(a(f,u),d(f,u),u.isMeshPhysicalMaterial&&v(f,u,b)):u.isMeshMatcapMaterial?(a(f,u),x(f,u)):u.isMeshDepthMaterial?a(f,u):u.isMeshDistanceMaterial?(a(f,u),p(f,u)):u.isMeshNormalMaterial?a(f,u):u.isLineBasicMaterial?(y(f,u),u.isLineDashedMaterial&&i(f,u)):u.isPointsMaterial?_(f,u,c,m):u.isSpriteMaterial?g(f,u):u.isShadowMaterial?(f.color.value.copy(u.color),f.opacity.value=u.opacity):u.isShaderMaterial&&(u.uniformsNeedUpdate=!1)}function a(f,u){f.opacity.value=u.opacity,u.color&&f.diffuse.value.copy(u.color),u.emissive&&f.emissive.value.copy(u.emissive).multiplyScalar(u.emissiveIntensity),u.map&&(f.map.value=u.map,n(u.map,f.mapTransform)),u.alphaMap&&(f.alphaMap.value=u.alphaMap,n(u.alphaMap,f.alphaMapTransform)),u.bumpMap&&(f.bumpMap.value=u.bumpMap,n(u.bumpMap,f.bumpMapTransform),f.bumpScale.value=u.bumpScale,u.side===xi&&(f.bumpScale.value*=-1)),u.normalMap&&(f.normalMap.value=u.normalMap,n(u.normalMap,f.normalMapTransform),f.normalScale.value.copy(u.normalScale),u.side===xi&&f.normalScale.value.negate()),u.displacementMap&&(f.displacementMap.value=u.displacementMap,n(u.displacementMap,f.displacementMapTransform),f.displacementScale.value=u.displacementScale,f.displacementBias.value=u.displacementBias),u.emissiveMap&&(f.emissiveMap.value=u.emissiveMap,n(u.emissiveMap,f.emissiveMapTransform)),u.specularMap&&(f.specularMap.value=u.specularMap,n(u.specularMap,f.specularMapTransform)),u.alphaTest>0&&(f.alphaTest.value=u.alphaTest);const c=t.get(u).envMap;if(c&&(f.envMap.value=c,f.flipEnvMap.value=c.isCubeTexture&&c.isRenderTargetTexture===!1?-1:1,f.reflectivity.value=u.reflectivity,f.ior.value=u.ior,f.refractionRatio.value=u.refractionRatio),u.lightMap){f.lightMap.value=u.lightMap;const m=r._useLegacyLights===!0?Math.PI:1;f.lightMapIntensity.value=u.lightMapIntensity*m,n(u.lightMap,f.lightMapTransform)}u.aoMap&&(f.aoMap.value=u.aoMap,f.aoMapIntensity.value=u.aoMapIntensity,n(u.aoMap,f.aoMapTransform))}function y(f,u){f.diffuse.value.copy(u.color),f.opacity.value=u.opacity,u.map&&(f.map.value=u.map,n(u.map,f.mapTransform))}function i(f,u){f.dashSize.value=u.dashSize,f.totalSize.value=u.dashSize+u.gapSize,f.scale.value=u.scale}function _(f,u,c,m){f.diffuse.value.copy(u.color),f.opacity.value=u.opacity,f.size.value=u.size*c,f.scale.value=m*.5,u.map&&(f.map.value=u.map,n(u.map,f.uvTransform)),u.alphaMap&&(f.alphaMap.value=u.alphaMap,n(u.alphaMap,f.alphaMapTransform)),u.alphaTest>0&&(f.alphaTest.value=u.alphaTest)}function g(f,u){f.diffuse.value.copy(u.color),f.opacity.value=u.opacity,f.rotation.value=u.rotation,u.map&&(f.map.value=u.map,n(u.map,f.mapTransform)),u.alphaMap&&(f.alphaMap.value=u.alphaMap,n(u.alphaMap,f.alphaMapTransform)),u.alphaTest>0&&(f.alphaTest.value=u.alphaTest)}function h(f,u){f.specular.value.copy(u.specular),f.shininess.value=Math.max(u.shininess,1e-4)}function l(f,u){u.gradientMap&&(f.gradientMap.value=u.gradientMap)}function d(f,u){f.metalness.value=u.metalness,u.metalnessMap&&(f.metalnessMap.value=u.metalnessMap,n(u.metalnessMap,f.metalnessMapTransform)),f.roughness.value=u.roughness,u.roughnessMap&&(f.roughnessMap.value=u.roughnessMap,n(u.roughnessMap,f.roughnessMapTransform)),t.get(u).envMap&&(f.envMapIntensity.value=u.envMapIntensity)}function v(f,u,c){f.ior.value=u.ior,u.sheen>0&&(f.sheenColor.value.copy(u.sheenColor).multiplyScalar(u.sheen),f.sheenRoughness.value=u.sheenRoughness,u.sheenColorMap&&(f.sheenColorMap.value=u.sheenColorMap,n(u.sheenColorMap,f.sheenColorMapTransform)),u.sheenRoughnessMap&&(f.sheenRoughnessMap.value=u.sheenRoughnessMap,n(u.sheenRoughnessMap,f.sheenRoughnessMapTransform))),u.clearcoat>0&&(f.clearcoat.value=u.clearcoat,f.clearcoatRoughness.value=u.clearcoatRoughness,u.clearcoatMap&&(f.clearcoatMap.value=u.clearcoatMap,n(u.clearcoatMap,f.clearcoatMapTransform)),u.clearcoatRoughnessMap&&(f.clearcoatRoughnessMap.value=u.clearcoatRoughnessMap,n(u.clearcoatRoughnessMap,f.clearcoatRoughnessMapTransform)),u.clearcoatNormalMap&&(f.clearcoatNormalMap.value=u.clearcoatNormalMap,n(u.clearcoatNormalMap,f.clearcoatNormalMapTransform),f.clearcoatNormalScale.value.copy(u.clearcoatNormalScale),u.side===xi&&f.clearcoatNormalScale.value.negate())),u.iridescence>0&&(f.iridescence.value=u.iridescence,f.iridescenceIOR.value=u.iridescenceIOR,f.iridescenceThicknessMinimum.value=u.iridescenceThicknessRange[0],f.iridescenceThicknessMaximum.value=u.iridescenceThicknessRange[1],u.iridescenceMap&&(f.iridescenceMap.value=u.iridescenceMap,n(u.iridescenceMap,f.iridescenceMapTransform)),u.iridescenceThicknessMap&&(f.iridescenceThicknessMap.value=u.iridescenceThicknessMap,n(u.iridescenceThicknessMap,f.iridescenceThicknessMapTransform))),u.transmission>0&&(f.transmission.value=u.transmission,f.transmissionSamplerMap.value=c.texture,f.transmissionSamplerSize.value.set(c.width,c.height),u.transmissionMap&&(f.transmissionMap.value=u.transmissionMap,n(u.transmissionMap,f.transmissionMapTransform)),f.thickness.value=u.thickness,u.thicknessMap&&(f.thicknessMap.value=u.thicknessMap,n(u.thicknessMap,f.thicknessMapTransform)),f.attenuationDistance.value=u.attenuationDistance,f.attenuationColor.value.copy(u.attenuationColor)),u.anisotropy>0&&(f.anisotropyVector.value.set(u.anisotropy*Math.cos(u.anisotropyRotation),u.anisotropy*Math.sin(u.anisotropyRotation)),u.anisotropyMap&&(f.anisotropyMap.value=u.anisotropyMap,n(u.anisotropyMap,f.anisotropyMapTransform))),f.specularIntensity.value=u.specularIntensity,f.specularColor.value.copy(u.specularColor),u.specularColorMap&&(f.specularColorMap.value=u.specularColorMap,n(u.specularColorMap,f.specularColorMapTransform)),u.specularIntensityMap&&(f.specularIntensityMap.value=u.specularIntensityMap,n(u.specularIntensityMap,f.specularIntensityMapTransform))}function x(f,u){u.matcap&&(f.matcap.value=u.matcap)}function p(f,u){const c=t.get(u).light;f.referencePosition.value.setFromMatrixPosition(c.matrixWorld),f.nearDistance.value=c.shadow.camera.near,f.farDistance.value=c.shadow.camera.far}return{refreshFogUniforms:s,refreshMaterialUniforms:o}}function $8(r,t,n,s){let o={},a={},y=[];const i=n.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function _(c,m){const b=m.program;s.uniformBlockBinding(c,b)}function g(c,m){let b=o[c.id];b===void 0&&(x(c),b=h(c),o[c.id]=b,c.addEventListener("dispose",f));const S=m.program;s.updateUBOMapping(c,S);const w=t.render.frame;a[c.id]!==w&&(d(c),a[c.id]=w)}function h(c){const m=l();c.__bindingPointIndex=m;const b=r.createBuffer(),S=c.__size,w=c.usage;return r.bindBuffer(r.UNIFORM_BUFFER,b),r.bufferData(r.UNIFORM_BUFFER,S,w),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,m,b),b}function l(){for(let c=0;c<i;c++)if(y.indexOf(c)===-1)return y.push(c),c;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(c){const m=o[c.id],b=c.uniforms,S=c.__cache;r.bindBuffer(r.UNIFORM_BUFFER,m);for(let w=0,M=b.length;w<M;w++){const A=Array.isArray(b[w])?b[w]:[b[w]];for(let P=0,R=A.length;P<R;P++){const k=A[P];if(v(k,w,P,S)===!0){const L=k.__offset,B=Array.isArray(k.value)?k.value:[k.value];let I=0;for(let F=0;F<B.length;F++){const z=B[F],G=p(z);typeof z=="number"||typeof z=="boolean"?(k.__data[0]=z,r.bufferSubData(r.UNIFORM_BUFFER,L+I,k.__data)):z.isMatrix3?(k.__data[0]=z.elements[0],k.__data[1]=z.elements[1],k.__data[2]=z.elements[2],k.__data[3]=0,k.__data[4]=z.elements[3],k.__data[5]=z.elements[4],k.__data[6]=z.elements[5],k.__data[7]=0,k.__data[8]=z.elements[6],k.__data[9]=z.elements[7],k.__data[10]=z.elements[8],k.__data[11]=0):(z.toArray(k.__data,I),I+=G.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,L,k.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function v(c,m,b,S){const w=c.value,M=m+"_"+b;if(S[M]===void 0)return typeof w=="number"||typeof w=="boolean"?S[M]=w:S[M]=w.clone(),!0;{const A=S[M];if(typeof w=="number"||typeof w=="boolean"){if(A!==w)return S[M]=w,!0}else if(A.equals(w)===!1)return A.copy(w),!0}return!1}function x(c){const m=c.uniforms;let b=0;const S=16;for(let M=0,A=m.length;M<A;M++){const P=Array.isArray(m[M])?m[M]:[m[M]];for(let R=0,k=P.length;R<k;R++){const L=P[R],B=Array.isArray(L.value)?L.value:[L.value];for(let I=0,F=B.length;I<F;I++){const z=B[I],G=p(z),N=b%S;N!==0&&S-N<G.boundary&&(b+=S-N),L.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=b,b+=G.storage}}}const w=b%S;return w>0&&(b+=S-w),c.__size=b,c.__cache={},this}function p(c){const m={boundary:0,storage:0};return typeof c=="number"||typeof c=="boolean"?(m.boundary=4,m.storage=4):c.isVector2?(m.boundary=8,m.storage=8):c.isVector3||c.isColor?(m.boundary=16,m.storage=12):c.isVector4?(m.boundary=16,m.storage=16):c.isMatrix3?(m.boundary=48,m.storage=48):c.isMatrix4?(m.boundary=64,m.storage=64):c.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",c),m}function f(c){const m=c.target;m.removeEventListener("dispose",f);const b=y.indexOf(m.__bindingPointIndex);y.splice(b,1),r.deleteBuffer(o[m.id]),delete o[m.id],delete a[m.id]}function u(){for(const c in o)r.deleteBuffer(o[c]);y=[],o={},a={}}return{bind:_,update:g,dispose:u}}class Fb{constructor(t={}){const{canvas:n=L3(),context:s=null,depth:o=!0,stencil:a=!0,alpha:y=!1,antialias:i=!1,premultipliedAlpha:_=!0,preserveDrawingBuffer:g=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:l=!1}=t;this.isWebGLRenderer=!0;let d;s!==null?d=s.getContextAttributes().alpha:d=y;const v=new Uint32Array(4),x=new Int32Array(4);let p=null,f=null;const u=[],c=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Lr,this._useLegacyLights=!1,this.toneMapping=ao,this.toneMappingExposure=1;const m=this;let b=!1,S=0,w=0,M=null,A=-1,P=null;const R=new Un,k=new Un;let L=null;const B=new Ot(0);let I=0,F=n.width,z=n.height,G=1,N=null,O=null;const H=new Un(0,0,F,z),q=new Un(0,0,F,z);let K=!1;const ne=new wf;let ee=!1,se=!1,me=null;const X=new Jt,Z=new mt,ie=new Re,ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function fe(){return M===null?G:1}let $=s;function re(Ae,Ye){for(let nt=0;nt<Ae.length;nt++){const pe=Ae[nt],Ie=n.getContext(pe,Ye);if(Ie!==null)return Ie}return null}try{const Ae={alpha:!0,depth:o,stencil:a,antialias:i,premultipliedAlpha:_,preserveDrawingBuffer:g,powerPreference:h,failIfMajorPerformanceCaveat:l};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Qy}`),n.addEventListener("webglcontextlost",We,!1),n.addEventListener("webglcontextrestored",xe,!1),n.addEventListener("webglcontextcreationerror",Ve,!1),$===null){const Ye=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Ye.shift(),$=re(Ye,Ae),$===null)throw re(Ye)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&$ instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),$.getShaderPrecisionFormat===void 0&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}let de,ge,ve,we,Se,ae,oe,Ee,Oe,ze,Be,dt,Je,_e,Ue,Fe,Ne,ft,vt,ht,lt,ce,ue,he;function be(){de=new cz($),ge=new iz($,de,t),de.init(ge),ce=new W3($,de,ge),ve=new W8($,de,ge),we=new fz($),Se=new k8,ae=new X8($,de,ve,Se,ge,ce,we),oe=new oz(m),Ee=new uz(m),Oe=new bF($,ge),ue=new nz($,de,Oe,ge),ze=new dz($,Oe,we,ue),Be=new gz($,ze,Oe,we),vt=new yz($,ge,ae),Fe=new sz(Se),dt=new L8(m,oe,Ee,de,ge,ue,Fe),Je=new Q8(m,Se),_e=new O8,Ue=new z8(de,ge),ft=new tz(m,oe,Ee,ve,Be,d,_),Ne=new H8(m,Be,ge),he=new $8($,we,ge,ve),ht=new rz($,de,we,ge),lt=new hz($,de,we,ge),we.programs=dt.programs,m.capabilities=ge,m.extensions=de,m.properties=Se,m.renderLists=_e,m.shadowMap=Ne,m.state=ve,m.info=we}be();const je=new J8(m,$);this.xr=je,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const Ae=de.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){const Ae=de.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(Ae){Ae!==void 0&&(G=Ae,this.setSize(F,z,!1))},this.getSize=function(Ae){return Ae.set(F,z)},this.setSize=function(Ae,Ye,nt=!0){if(je.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=Ae,z=Ye,n.width=Math.floor(Ae*G),n.height=Math.floor(Ye*G),nt===!0&&(n.style.width=Ae+"px",n.style.height=Ye+"px"),this.setViewport(0,0,Ae,Ye)},this.getDrawingBufferSize=function(Ae){return Ae.set(F*G,z*G).floor()},this.setDrawingBufferSize=function(Ae,Ye,nt){F=Ae,z=Ye,G=nt,n.width=Math.floor(Ae*nt),n.height=Math.floor(Ye*nt),this.setViewport(0,0,Ae,Ye)},this.getCurrentViewport=function(Ae){return Ae.copy(R)},this.getViewport=function(Ae){return Ae.copy(H)},this.setViewport=function(Ae,Ye,nt,pe){Ae.isVector4?H.set(Ae.x,Ae.y,Ae.z,Ae.w):H.set(Ae,Ye,nt,pe),ve.viewport(R.copy(H).multiplyScalar(G).floor())},this.getScissor=function(Ae){return Ae.copy(q)},this.setScissor=function(Ae,Ye,nt,pe){Ae.isVector4?q.set(Ae.x,Ae.y,Ae.z,Ae.w):q.set(Ae,Ye,nt,pe),ve.scissor(k.copy(q).multiplyScalar(G).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(Ae){ve.setScissorTest(K=Ae)},this.setOpaqueSort=function(Ae){N=Ae},this.setTransparentSort=function(Ae){O=Ae},this.getClearColor=function(Ae){return Ae.copy(ft.getClearColor())},this.setClearColor=function(){ft.setClearColor.apply(ft,arguments)},this.getClearAlpha=function(){return ft.getClearAlpha()},this.setClearAlpha=function(){ft.setClearAlpha.apply(ft,arguments)},this.clear=function(Ae=!0,Ye=!0,nt=!0){let pe=0;if(Ae){let Ie=!1;if(M!==null){const st=M.texture.format;Ie=st===Eb||st===Mb||st===Sb}if(Ie){const st=M.texture.type,Ke=st===lo||st===jo||st===tg||st===ja||st===bb||st===wb,Mt=ft.getClearColor(),Ze=ft.getClearAlpha(),Lt=Mt.r,pt=Mt.g,Tt=Mt.b;Ke?(v[0]=Lt,v[1]=pt,v[2]=Tt,v[3]=Ze,$.clearBufferuiv($.COLOR,0,v)):(x[0]=Lt,x[1]=pt,x[2]=Tt,x[3]=Ze,$.clearBufferiv($.COLOR,0,x))}else pe|=$.COLOR_BUFFER_BIT}Ye&&(pe|=$.DEPTH_BUFFER_BIT),nt&&(pe|=$.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),$.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",We,!1),n.removeEventListener("webglcontextrestored",xe,!1),n.removeEventListener("webglcontextcreationerror",Ve,!1),_e.dispose(),Ue.dispose(),Se.dispose(),oe.dispose(),Ee.dispose(),Be.dispose(),ue.dispose(),he.dispose(),dt.dispose(),je.dispose(),je.removeEventListener("sessionstart",Vt),je.removeEventListener("sessionend",jt),me&&(me.dispose(),me=null),Yt.stop()};function We(Ae){Ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const Ae=we.autoReset,Ye=Ne.enabled,nt=Ne.autoUpdate,pe=Ne.needsUpdate,Ie=Ne.type;be(),we.autoReset=Ae,Ne.enabled=Ye,Ne.autoUpdate=nt,Ne.needsUpdate=pe,Ne.type=Ie}function Ve(Ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function Ce(Ae){const Ye=Ae.target;Ye.removeEventListener("dispose",Ce),Qe(Ye)}function Qe(Ae){ut(Ae),Se.remove(Ae)}function ut(Ae){const Ye=Se.get(Ae).programs;Ye!==void 0&&(Ye.forEach(function(nt){dt.releaseProgram(nt)}),Ae.isShaderMaterial&&dt.releaseShaderCache(Ae))}this.renderBufferDirect=function(Ae,Ye,nt,pe,Ie,st){Ye===null&&(Ye=ye);const Ke=Ie.isMesh&&Ie.matrixWorld.determinant()<0,Mt=An(Ae,Ye,nt,pe,Ie);ve.setMaterial(pe,Ke);let Ze=nt.index,Lt=1;if(pe.wireframe===!0){if(Ze=ze.getWireframeAttribute(nt),Ze===void 0)return;Lt=2}const pt=nt.drawRange,Tt=nt.attributes.position;let _t=pt.start*Lt,vn=(pt.start+pt.count)*Lt;st!==null&&(_t=Math.max(_t,st.start*Lt),vn=Math.min(vn,(st.start+st.count)*Lt)),Ze!==null?(_t=Math.max(_t,0),vn=Math.min(vn,Ze.count)):Tt!=null&&(_t=Math.max(_t,0),vn=Math.min(vn,Tt.count));const $t=vn-_t;if($t<0||$t===1/0)return;ue.setup(Ie,pe,Mt,nt,Ze);let Ln,It=ht;if(Ze!==null&&(Ln=Oe.get(Ze),It=lt,It.setIndex(Ln)),Ie.isMesh)pe.wireframe===!0?(ve.setLineWidth(pe.wireframeLinewidth*fe()),It.setMode($.LINES)):It.setMode($.TRIANGLES);else if(Ie.isLine){let bt=pe.linewidth;bt===void 0&&(bt=1),ve.setLineWidth(bt*fe()),Ie.isLineSegments?It.setMode($.LINES):Ie.isLineLoop?It.setMode($.LINE_LOOP):It.setMode($.LINE_STRIP)}else Ie.isPoints?It.setMode($.POINTS):Ie.isSprite&&It.setMode($.TRIANGLES);if(Ie.isBatchedMesh)It.renderMultiDraw(Ie._multiDrawStarts,Ie._multiDrawCounts,Ie._multiDrawCount);else if(Ie.isInstancedMesh)It.renderInstances(_t,$t,Ie.count);else if(nt.isInstancedBufferGeometry){const bt=nt._maxInstanceCount!==void 0?nt._maxInstanceCount:1/0,Dn=Math.min(nt.instanceCount,bt);It.renderInstances(_t,$t,Dn)}else It.render(_t,$t)};function Rt(Ae,Ye,nt){Ae.transparent===!0&&Ae.side===eo&&Ae.forceSinglePass===!1?(Ae.side=xi,Ae.needsUpdate=!0,un(Ae,Ye,nt),Ae.side=Vo,Ae.needsUpdate=!0,un(Ae,Ye,nt),Ae.side=eo):un(Ae,Ye,nt)}this.compile=function(Ae,Ye,nt=null){nt===null&&(nt=Ae),f=Ue.get(nt),f.init(),c.push(f),nt.traverseVisible(function(Ie){Ie.isLight&&Ie.layers.test(Ye.layers)&&(f.pushLight(Ie),Ie.castShadow&&f.pushShadow(Ie))}),Ae!==nt&&Ae.traverseVisible(function(Ie){Ie.isLight&&Ie.layers.test(Ye.layers)&&(f.pushLight(Ie),Ie.castShadow&&f.pushShadow(Ie))}),f.setupLights(m._useLegacyLights);const pe=new Set;return Ae.traverse(function(Ie){const st=Ie.material;if(st)if(Array.isArray(st))for(let Ke=0;Ke<st.length;Ke++){const Mt=st[Ke];Rt(Mt,nt,Ie),pe.add(Mt)}else Rt(st,nt,Ie),pe.add(st)}),c.pop(),f=null,pe},this.compileAsync=function(Ae,Ye,nt=null){const pe=this.compile(Ae,Ye,nt);return new Promise(Ie=>{function st(){if(pe.forEach(function(Ke){Se.get(Ke).currentProgram.isReady()&&pe.delete(Ke)}),pe.size===0){Ie(Ae);return}setTimeout(st,10)}de.get("KHR_parallel_shader_compile")!==null?st():setTimeout(st,10)})};let Nt=null;function Bt(Ae){Nt&&Nt(Ae)}function Vt(){Yt.stop()}function jt(){Yt.start()}const Yt=new F3;Yt.setAnimationLoop(Bt),typeof self<"u"&&Yt.setContext(self),this.setAnimationLoop=function(Ae){Nt=Ae,je.setAnimationLoop(Ae),Ae===null?Yt.stop():Yt.start()},je.addEventListener("sessionstart",Vt),je.addEventListener("sessionend",jt),this.render=function(Ae,Ye){if(Ye!==void 0&&Ye.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Ye.parent===null&&Ye.matrixWorldAutoUpdate===!0&&Ye.updateMatrixWorld(),je.enabled===!0&&je.isPresenting===!0&&(je.cameraAutoUpdate===!0&&je.updateCamera(Ye),Ye=je.getCamera()),Ae.isScene===!0&&Ae.onBeforeRender(m,Ae,Ye,M),f=Ue.get(Ae,c.length),f.init(),c.push(f),X.multiplyMatrices(Ye.projectionMatrix,Ye.matrixWorldInverse),ne.setFromProjectionMatrix(X),se=this.localClippingEnabled,ee=Fe.init(this.clippingPlanes,se),p=_e.get(Ae,u.length),p.init(),u.push(p),on(Ae,Ye,0,m.sortObjects),p.finish(),m.sortObjects===!0&&p.sort(N,O),this.info.render.frame++,ee===!0&&Fe.beginShadows();const nt=f.state.shadowsArray;if(Ne.render(nt,Ae,Ye),ee===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(je.enabled===!1||je.isPresenting===!1||je.hasDepthSensing()===!1)&&ft.render(p,Ae),f.setupLights(m._useLegacyLights),Ye.isArrayCamera){const pe=Ye.cameras;for(let Ie=0,st=pe.length;Ie<st;Ie++){const Ke=pe[Ie];$n(p,Ae,Ke,Ke.viewport)}}else $n(p,Ae,Ye);M!==null&&(ae.updateMultisampleRenderTarget(M),ae.updateRenderTargetMipmap(M)),Ae.isScene===!0&&Ae.onAfterRender(m,Ae,Ye),ue.resetDefaultState(),A=-1,P=null,c.pop(),c.length>0?f=c[c.length-1]:f=null,u.pop(),u.length>0?p=u[u.length-1]:p=null};function on(Ae,Ye,nt,pe){if(Ae.visible===!1)return;if(Ae.layers.test(Ye.layers)){if(Ae.isGroup)nt=Ae.renderOrder;else if(Ae.isLOD)Ae.autoUpdate===!0&&Ae.update(Ye);else if(Ae.isLight)f.pushLight(Ae),Ae.castShadow&&f.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||ne.intersectsSprite(Ae)){pe&&ie.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(X);const Ke=Be.update(Ae),Mt=Ae.material;Mt.visible&&p.push(Ae,Ke,Mt,nt,ie.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(!Ae.frustumCulled||ne.intersectsObject(Ae))){const Ke=Be.update(Ae),Mt=Ae.material;if(pe&&(Ae.boundingSphere!==void 0?(Ae.boundingSphere===null&&Ae.computeBoundingSphere(),ie.copy(Ae.boundingSphere.center)):(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),ie.copy(Ke.boundingSphere.center)),ie.applyMatrix4(Ae.matrixWorld).applyMatrix4(X)),Array.isArray(Mt)){const Ze=Ke.groups;for(let Lt=0,pt=Ze.length;Lt<pt;Lt++){const Tt=Ze[Lt],_t=Mt[Tt.materialIndex];_t&&_t.visible&&p.push(Ae,Ke,_t,nt,ie.z,Tt)}}else Mt.visible&&p.push(Ae,Ke,Mt,nt,ie.z,null)}}const st=Ae.children;for(let Ke=0,Mt=st.length;Ke<Mt;Ke++)on(st[Ke],Ye,nt,pe)}function $n(Ae,Ye,nt,pe){const Ie=Ae.opaque,st=Ae.transmissive,Ke=Ae.transparent;f.setupLightsView(nt),ee===!0&&Fe.setGlobalState(m.clippingPlanes,nt),st.length>0&&xn(Ie,st,Ye,nt),pe&&ve.viewport(R.copy(pe)),Ie.length>0&&On(Ie,Ye,nt),st.length>0&&On(st,Ye,nt),Ke.length>0&&On(Ke,Ye,nt),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1)}function xn(Ae,Ye,nt,pe){if((nt.isScene===!0?nt.overrideMaterial:null)!==null)return;const st=ge.isWebGL2;me===null&&(me=new Hs(1,1,{generateMipmaps:!0,type:de.has("EXT_color_buffer_half_float")?Bc:lo,minFilter:to,samples:st?4:0})),m.getDrawingBufferSize(Z),st?me.setSize(Z.x,Z.y):me.setSize(Ay(Z.x),Ay(Z.y));const Ke=m.getRenderTarget();m.setRenderTarget(me),m.getClearColor(B),I=m.getClearAlpha(),I<1&&m.setClearColor(16777215,.5),m.clear();const Mt=m.toneMapping;m.toneMapping=ao,On(Ae,nt,pe),ae.updateMultisampleRenderTarget(me),ae.updateRenderTargetMipmap(me);let Ze=!1;for(let Lt=0,pt=Ye.length;Lt<pt;Lt++){const Tt=Ye[Lt],_t=Tt.object,vn=Tt.geometry,$t=Tt.material,Ln=Tt.group;if($t.side===eo&&_t.layers.test(pe.layers)){const It=$t.side;$t.side=xi,$t.needsUpdate=!0,Gn(_t,nt,pe,vn,$t,Ln),$t.side=It,$t.needsUpdate=!0,Ze=!0}}Ze===!0&&(ae.updateMultisampleRenderTarget(me),ae.updateRenderTargetMipmap(me)),m.setRenderTarget(Ke),m.setClearColor(B,I),m.toneMapping=Mt}function On(Ae,Ye,nt){const pe=Ye.isScene===!0?Ye.overrideMaterial:null;for(let Ie=0,st=Ae.length;Ie<st;Ie++){const Ke=Ae[Ie],Mt=Ke.object,Ze=Ke.geometry,Lt=pe===null?Ke.material:pe,pt=Ke.group;Mt.layers.test(nt.layers)&&Gn(Mt,Ye,nt,Ze,Lt,pt)}}function Gn(Ae,Ye,nt,pe,Ie,st){Ae.onBeforeRender(m,Ye,nt,pe,Ie,st),Ae.modelViewMatrix.multiplyMatrices(nt.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),Ie.onBeforeRender(m,Ye,nt,pe,Ae,st),Ie.transparent===!0&&Ie.side===eo&&Ie.forceSinglePass===!1?(Ie.side=xi,Ie.needsUpdate=!0,m.renderBufferDirect(nt,Ye,pe,Ie,Ae,st),Ie.side=Vo,Ie.needsUpdate=!0,m.renderBufferDirect(nt,Ye,pe,Ie,Ae,st),Ie.side=eo):m.renderBufferDirect(nt,Ye,pe,Ie,Ae,st),Ae.onAfterRender(m,Ye,nt,pe,Ie,st)}function un(Ae,Ye,nt){Ye.isScene!==!0&&(Ye=ye);const pe=Se.get(Ae),Ie=f.state.lights,st=f.state.shadowsArray,Ke=Ie.state.version,Mt=dt.getParameters(Ae,Ie.state,st,Ye,nt),Ze=dt.getProgramCacheKey(Mt);let Lt=pe.programs;pe.environment=Ae.isMeshStandardMaterial?Ye.environment:null,pe.fog=Ye.fog,pe.envMap=(Ae.isMeshStandardMaterial?Ee:oe).get(Ae.envMap||pe.environment),Lt===void 0&&(Ae.addEventListener("dispose",Ce),Lt=new Map,pe.programs=Lt);let pt=Lt.get(Ze);if(pt!==void 0){if(pe.currentProgram===pt&&pe.lightsStateVersion===Ke)return er(Ae,Mt),pt}else Mt.uniforms=dt.getUniforms(Ae),Ae.onBuild(nt,Mt,m),Ae.onBeforeCompile(Mt,m),pt=dt.acquireProgram(Mt,Ze),Lt.set(Ze,pt),pe.uniforms=Mt.uniforms;const Tt=pe.uniforms;return(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||Ae.clipping===!0)&&(Tt.clippingPlanes=Fe.uniform),er(Ae,Mt),pe.needsLights=Yo(Ae),pe.lightsStateVersion=Ke,pe.needsLights&&(Tt.ambientLightColor.value=Ie.state.ambient,Tt.lightProbe.value=Ie.state.probe,Tt.directionalLights.value=Ie.state.directional,Tt.directionalLightShadows.value=Ie.state.directionalShadow,Tt.spotLights.value=Ie.state.spot,Tt.spotLightShadows.value=Ie.state.spotShadow,Tt.rectAreaLights.value=Ie.state.rectArea,Tt.ltc_1.value=Ie.state.rectAreaLTC1,Tt.ltc_2.value=Ie.state.rectAreaLTC2,Tt.pointLights.value=Ie.state.point,Tt.pointLightShadows.value=Ie.state.pointShadow,Tt.hemisphereLights.value=Ie.state.hemi,Tt.directionalShadowMap.value=Ie.state.directionalShadowMap,Tt.directionalShadowMatrix.value=Ie.state.directionalShadowMatrix,Tt.spotShadowMap.value=Ie.state.spotShadowMap,Tt.spotLightMatrix.value=Ie.state.spotLightMatrix,Tt.spotLightMap.value=Ie.state.spotLightMap,Tt.pointShadowMap.value=Ie.state.pointShadowMap,Tt.pointShadowMatrix.value=Ie.state.pointShadowMatrix),pe.currentProgram=pt,pe.uniformsList=null,pt}function lr(Ae){if(Ae.uniformsList===null){const Ye=Ae.currentProgram.getUniforms();Ae.uniformsList=Hm.seqWithValue(Ye.seq,Ae.uniforms)}return Ae.uniformsList}function er(Ae,Ye){const nt=Se.get(Ae);nt.outputColorSpace=Ye.outputColorSpace,nt.batching=Ye.batching,nt.instancing=Ye.instancing,nt.instancingColor=Ye.instancingColor,nt.skinning=Ye.skinning,nt.morphTargets=Ye.morphTargets,nt.morphNormals=Ye.morphNormals,nt.morphColors=Ye.morphColors,nt.morphTargetsCount=Ye.morphTargetsCount,nt.numClippingPlanes=Ye.numClippingPlanes,nt.numIntersection=Ye.numClipIntersection,nt.vertexAlphas=Ye.vertexAlphas,nt.vertexTangents=Ye.vertexTangents,nt.toneMapping=Ye.toneMapping}function An(Ae,Ye,nt,pe,Ie){Ye.isScene!==!0&&(Ye=ye),ae.resetTextureUnits();const st=Ye.fog,Ke=pe.isMeshStandardMaterial?Ye.environment:null,Mt=M===null?m.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:co,Ze=(pe.isMeshStandardMaterial?Ee:oe).get(pe.envMap||Ke),Lt=pe.vertexColors===!0&&!!nt.attributes.color&&nt.attributes.color.itemSize===4,pt=!!nt.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),Tt=!!nt.morphAttributes.position,_t=!!nt.morphAttributes.normal,vn=!!nt.morphAttributes.color;let $t=ao;pe.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&($t=m.toneMapping);const Ln=nt.morphAttributes.position||nt.morphAttributes.normal||nt.morphAttributes.color,It=Ln!==void 0?Ln.length:0,bt=Se.get(pe),Dn=f.state.lights;if(ee===!0&&(se===!0||Ae!==P)){const Cr=Ae===P&&pe.id===A;Fe.setState(pe,Ae,Cr)}let Wt=!1;pe.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==Dn.state.version||bt.outputColorSpace!==Mt||Ie.isBatchedMesh&&bt.batching===!1||!Ie.isBatchedMesh&&bt.batching===!0||Ie.isInstancedMesh&&bt.instancing===!1||!Ie.isInstancedMesh&&bt.instancing===!0||Ie.isSkinnedMesh&&bt.skinning===!1||!Ie.isSkinnedMesh&&bt.skinning===!0||Ie.isInstancedMesh&&bt.instancingColor===!0&&Ie.instanceColor===null||Ie.isInstancedMesh&&bt.instancingColor===!1&&Ie.instanceColor!==null||bt.envMap!==Ze||pe.fog===!0&&bt.fog!==st||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==Fe.numPlanes||bt.numIntersection!==Fe.numIntersection)||bt.vertexAlphas!==Lt||bt.vertexTangents!==pt||bt.morphTargets!==Tt||bt.morphNormals!==_t||bt.morphColors!==vn||bt.toneMapping!==$t||ge.isWebGL2===!0&&bt.morphTargetsCount!==It)&&(Wt=!0):(Wt=!0,bt.__version=pe.version);let fn=bt.currentProgram;Wt===!0&&(fn=un(pe,Ye,Ie));let rs=!1,di=!1,xr=!1;const tr=fn.getUniforms(),is=bt.uniforms;if(ve.useProgram(fn.program)&&(rs=!0,di=!0,xr=!0),pe.id!==A&&(A=pe.id,di=!0),rs||P!==Ae){tr.setValue($,"projectionMatrix",Ae.projectionMatrix),tr.setValue($,"viewMatrix",Ae.matrixWorldInverse);const Cr=tr.map.cameraPosition;Cr!==void 0&&Cr.setValue($,ie.setFromMatrixPosition(Ae.matrixWorld)),ge.logarithmicDepthBuffer&&tr.setValue($,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&tr.setValue($,"isOrthographic",Ae.isOrthographicCamera===!0),P!==Ae&&(P=Ae,di=!0,xr=!0)}if(Ie.isSkinnedMesh){tr.setOptional($,Ie,"bindMatrix"),tr.setOptional($,Ie,"bindMatrixInverse");const Cr=Ie.skeleton;Cr&&(ge.floatVertexTextures?(Cr.boneTexture===null&&Cr.computeBoneTexture(),tr.setValue($,"boneTexture",Cr.boneTexture,ae)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Ie.isBatchedMesh&&(tr.setOptional($,Ie,"batchingTexture"),tr.setValue($,"batchingTexture",Ie._matricesTexture,ae));const Zo=nt.morphAttributes;if((Zo.position!==void 0||Zo.normal!==void 0||Zo.color!==void 0&&ge.isWebGL2===!0)&&vt.update(Ie,nt,fn),(di||bt.receiveShadow!==Ie.receiveShadow)&&(bt.receiveShadow=Ie.receiveShadow,tr.setValue($,"receiveShadow",Ie.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(is.envMap.value=Ze,is.flipEnvMap.value=Ze.isCubeTexture&&Ze.isRenderTargetTexture===!1?-1:1),di&&(tr.setValue($,"toneMappingExposure",m.toneMappingExposure),bt.needsLights&&qo(is,xr),st&&pe.fog===!0&&Je.refreshFogUniforms(is,st),Je.refreshMaterialUniforms(is,pe,G,z,me),Hm.upload($,lr(bt),is,ae)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Hm.upload($,lr(bt),is,ae),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&tr.setValue($,"center",Ie.center),tr.setValue($,"modelViewMatrix",Ie.modelViewMatrix),tr.setValue($,"normalMatrix",Ie.normalMatrix),tr.setValue($,"modelMatrix",Ie.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Cr=pe.uniformsGroups;for(let Dr=0,br=Cr.length;Dr<br;Dr++)if(ge.isWebGL2){const fo=Cr[Dr];he.update(fo,fn),he.bind(fo,fn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return fn}function qo(Ae,Ye){Ae.ambientLightColor.needsUpdate=Ye,Ae.lightProbe.needsUpdate=Ye,Ae.directionalLights.needsUpdate=Ye,Ae.directionalLightShadows.needsUpdate=Ye,Ae.pointLights.needsUpdate=Ye,Ae.pointLightShadows.needsUpdate=Ye,Ae.spotLights.needsUpdate=Ye,Ae.spotLightShadows.needsUpdate=Ye,Ae.rectAreaLights.needsUpdate=Ye,Ae.hemisphereLights.needsUpdate=Ye}function Yo(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&Ae.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(Ae,Ye,nt){Se.get(Ae.texture).__webglTexture=Ye,Se.get(Ae.depthTexture).__webglTexture=nt;const pe=Se.get(Ae);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=nt===void 0,pe.__autoAllocateDepthBuffer||de.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ae,Ye){const nt=Se.get(Ae);nt.__webglFramebuffer=Ye,nt.__useDefaultFramebuffer=Ye===void 0},this.setRenderTarget=function(Ae,Ye=0,nt=0){M=Ae,S=Ye,w=nt;let pe=!0,Ie=null,st=!1,Ke=!1;if(Ae){const Ze=Se.get(Ae);Ze.__useDefaultFramebuffer!==void 0?(ve.bindFramebuffer($.FRAMEBUFFER,null),pe=!1):Ze.__webglFramebuffer===void 0?ae.setupRenderTarget(Ae):Ze.__hasExternalTextures&&ae.rebindTextures(Ae,Se.get(Ae.texture).__webglTexture,Se.get(Ae.depthTexture).__webglTexture);const Lt=Ae.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(Ke=!0);const pt=Se.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(Array.isArray(pt[Ye])?Ie=pt[Ye][nt]:Ie=pt[Ye],st=!0):ge.isWebGL2&&Ae.samples>0&&ae.useMultisampledRTT(Ae)===!1?Ie=Se.get(Ae).__webglMultisampledFramebuffer:Array.isArray(pt)?Ie=pt[nt]:Ie=pt,R.copy(Ae.viewport),k.copy(Ae.scissor),L=Ae.scissorTest}else R.copy(H).multiplyScalar(G).floor(),k.copy(q).multiplyScalar(G).floor(),L=K;if(ve.bindFramebuffer($.FRAMEBUFFER,Ie)&&ge.drawBuffers&&pe&&ve.drawBuffers(Ae,Ie),ve.viewport(R),ve.scissor(k),ve.setScissorTest(L),st){const Ze=Se.get(Ae.texture);$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Ze.__webglTexture,nt)}else if(Ke){const Ze=Se.get(Ae.texture),Lt=Ye||0;$.framebufferTextureLayer($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,Ze.__webglTexture,nt||0,Lt)}A=-1},this.readRenderTargetPixels=function(Ae,Ye,nt,pe,Ie,st,Ke){if(!(Ae&&Ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mt=Se.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&Ke!==void 0&&(Mt=Mt[Ke]),Mt){ve.bindFramebuffer($.FRAMEBUFFER,Mt);try{const Ze=Ae.texture,Lt=Ze.format,pt=Ze.type;if(Lt!==gi&&ce.convert(Lt)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Tt=pt===Bc&&(de.has("EXT_color_buffer_half_float")||ge.isWebGL2&&de.has("EXT_color_buffer_float"));if(pt!==lo&&ce.convert(pt)!==$.getParameter($.IMPLEMENTATION_COLOR_READ_TYPE)&&!(pt===ys&&(ge.isWebGL2||de.has("OES_texture_float")||de.has("WEBGL_color_buffer_float")))&&!Tt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ye>=0&&Ye<=Ae.width-pe&&nt>=0&&nt<=Ae.height-Ie&&$.readPixels(Ye,nt,pe,Ie,ce.convert(Lt),ce.convert(pt),st)}finally{const Ze=M!==null?Se.get(M).__webglFramebuffer:null;ve.bindFramebuffer($.FRAMEBUFFER,Ze)}}},this.copyFramebufferToTexture=function(Ae,Ye,nt=0){const pe=Math.pow(2,-nt),Ie=Math.floor(Ye.image.width*pe),st=Math.floor(Ye.image.height*pe);ae.setTexture2D(Ye,0),$.copyTexSubImage2D($.TEXTURE_2D,nt,0,0,Ae.x,Ae.y,Ie,st),ve.unbindTexture()},this.copyTextureToTexture=function(Ae,Ye,nt,pe=0){const Ie=Ye.image.width,st=Ye.image.height,Ke=ce.convert(nt.format),Mt=ce.convert(nt.type);ae.setTexture2D(nt,0),$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,nt.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,nt.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,nt.unpackAlignment),Ye.isDataTexture?$.texSubImage2D($.TEXTURE_2D,pe,Ae.x,Ae.y,Ie,st,Ke,Mt,Ye.image.data):Ye.isCompressedTexture?$.compressedTexSubImage2D($.TEXTURE_2D,pe,Ae.x,Ae.y,Ye.mipmaps[0].width,Ye.mipmaps[0].height,Ke,Ye.mipmaps[0].data):$.texSubImage2D($.TEXTURE_2D,pe,Ae.x,Ae.y,Ke,Mt,Ye.image),pe===0&&nt.generateMipmaps&&$.generateMipmap($.TEXTURE_2D),ve.unbindTexture()},this.copyTextureToTexture3D=function(Ae,Ye,nt,pe,Ie=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const st=Ae.max.x-Ae.min.x+1,Ke=Ae.max.y-Ae.min.y+1,Mt=Ae.max.z-Ae.min.z+1,Ze=ce.convert(pe.format),Lt=ce.convert(pe.type);let pt;if(pe.isData3DTexture)ae.setTexture3D(pe,0),pt=$.TEXTURE_3D;else if(pe.isDataArrayTexture||pe.isCompressedArrayTexture)ae.setTexture2DArray(pe,0),pt=$.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,pe.flipY),$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),$.pixelStorei($.UNPACK_ALIGNMENT,pe.unpackAlignment);const Tt=$.getParameter($.UNPACK_ROW_LENGTH),_t=$.getParameter($.UNPACK_IMAGE_HEIGHT),vn=$.getParameter($.UNPACK_SKIP_PIXELS),$t=$.getParameter($.UNPACK_SKIP_ROWS),Ln=$.getParameter($.UNPACK_SKIP_IMAGES),It=nt.isCompressedTexture?nt.mipmaps[Ie]:nt.image;$.pixelStorei($.UNPACK_ROW_LENGTH,It.width),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,It.height),$.pixelStorei($.UNPACK_SKIP_PIXELS,Ae.min.x),$.pixelStorei($.UNPACK_SKIP_ROWS,Ae.min.y),$.pixelStorei($.UNPACK_SKIP_IMAGES,Ae.min.z),nt.isDataTexture||nt.isData3DTexture?$.texSubImage3D(pt,Ie,Ye.x,Ye.y,Ye.z,st,Ke,Mt,Ze,Lt,It.data):nt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(pt,Ie,Ye.x,Ye.y,Ye.z,st,Ke,Mt,Ze,It.data)):$.texSubImage3D(pt,Ie,Ye.x,Ye.y,Ye.z,st,Ke,Mt,Ze,Lt,It),$.pixelStorei($.UNPACK_ROW_LENGTH,Tt),$.pixelStorei($.UNPACK_IMAGE_HEIGHT,_t),$.pixelStorei($.UNPACK_SKIP_PIXELS,vn),$.pixelStorei($.UNPACK_SKIP_ROWS,$t),$.pixelStorei($.UNPACK_SKIP_IMAGES,Ln),Ie===0&&pe.generateMipmaps&&$.generateMipmap(pt),ve.unbindTexture()},this.initTexture=function(Ae){Ae.isCubeTexture?ae.setTextureCube(Ae,0):Ae.isData3DTexture?ae.setTexture3D(Ae,0):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?ae.setTexture2DArray(Ae,0):ae.setTexture2D(Ae,0),ve.unbindTexture()},this.resetState=function(){S=0,w=0,M=null,ve.reset(),ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return no}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===rg?"display-p3":"srgb",n.unpackColorSpace=Nn.workingColorSpace===vf?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Lr?ka:Cb}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===ka?Lr:co}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class q3 extends Fb{}q3.prototype.isWebGL1Renderer=!0;class og{constructor(t,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ot(t),this.density=n}clone(){return new og(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ag{constructor(t,n=1,s=1e3){this.isFog=!0,this.name="",this.color=new Ot(t),this.near=n,this.far=s}clone(){return new ag(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Bb extends jn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class lg{constructor(t,n){this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.usage=Kh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Qi()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Gl("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,n,s){t*=this.stride,s*=n.stride;for(let o=0,a=this.stride;o<a;o++)this.array[t+o]=n.array[s+o];return this}set(t,n=0){return this.array.set(t,n),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qi()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(n,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qi()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pi=new Re;class $l{constructor(t,n,s,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=s,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let n=0,s=this.data.count;n<s;n++)pi.fromBufferAttribute(this,n),pi.applyMatrix4(t),this.setXYZ(n,pi.x,pi.y,pi.z);return this}applyNormalMatrix(t){for(let n=0,s=this.count;n<s;n++)pi.fromBufferAttribute(this,n),pi.applyNormalMatrix(t),this.setXYZ(n,pi.x,pi.y,pi.z);return this}transformDirection(t){for(let n=0,s=this.count;n<s;n++)pi.fromBufferAttribute(this,n),pi.transformDirection(t),this.setXYZ(n,pi.x,pi.y,pi.z);return this}getComponent(t,n){let s=this.array[t*this.data.stride+this.offset+n];return this.normalized&&(s=vi(s,this.array)),s}setComponent(t,n,s){return this.normalized&&(s=sn(s,this.array)),this.data.array[t*this.data.stride+this.offset+n]=s,this}setX(t,n){return this.normalized&&(n=sn(n,this.array)),this.data.array[t*this.data.stride+this.offset]=n,this}setY(t,n){return this.normalized&&(n=sn(n,this.array)),this.data.array[t*this.data.stride+this.offset+1]=n,this}setZ(t,n){return this.normalized&&(n=sn(n,this.array)),this.data.array[t*this.data.stride+this.offset+2]=n,this}setW(t,n){return this.normalized&&(n=sn(n,this.array)),this.data.array[t*this.data.stride+this.offset+3]=n,this}getX(t){let n=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(n=vi(n,this.array)),n}getY(t){let n=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(n=vi(n,this.array)),n}getZ(t){let n=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(n=vi(n,this.array)),n}getW(t){let n=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(n=vi(n,this.array)),n}setXY(t,n,s){return t=t*this.data.stride+this.offset,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=s,this}setXYZ(t,n,s,o){return t=t*this.data.stride+this.offset,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array),o=sn(o,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=s,this.data.array[t+2]=o,this}setXYZW(t,n,s,o,a){return t=t*this.data.stride+this.offset,this.normalized&&(n=sn(n,this.array),s=sn(s,this.array),o=sn(o,this.array),a=sn(a,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=s,this.data.array[t+2]=o,this.data.array[t+3]=a,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const o=s*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[o+a])}return new In(new this.array.constructor(n),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new $l(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let s=0;s<this.count;s++){const o=s*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[o+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zb extends ci{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Hu;const Dd=new Re,Wu=new Re,Xu=new Re,qu=new mt,Nd=new mt,Y3=new Jt,Jp=new Re,Ud=new Re,Qp=new Re,LE=new mt,xv=new mt,kE=new mt;class Z3 extends jn{constructor(t=new zb){if(super(),this.isSprite=!0,this.type="Sprite",Hu===void 0){Hu=new ln;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),s=new lg(n,5);Hu.setIndex([0,1,2,0,2,3]),Hu.setAttribute("position",new $l(s,3,0,!1)),Hu.setAttribute("uv",new $l(s,2,3,!1))}this.geometry=Hu,this.material=t,this.center=new mt(.5,.5)}raycast(t,n){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wu.setFromMatrixScale(this.matrixWorld),Y3.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Xu.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Wu.multiplyScalar(-Xu.z);const s=this.material.rotation;let o,a;s!==0&&(a=Math.cos(s),o=Math.sin(s));const y=this.center;$p(Jp.set(-.5,-.5,0),Xu,y,Wu,o,a),$p(Ud.set(.5,-.5,0),Xu,y,Wu,o,a),$p(Qp.set(.5,.5,0),Xu,y,Wu,o,a),LE.set(0,0),xv.set(1,0),kE.set(1,1);let i=t.ray.intersectTriangle(Jp,Ud,Qp,!1,Dd);if(i===null&&($p(Ud.set(-.5,.5,0),Xu,y,Wu,o,a),xv.set(0,1),i=t.ray.intersectTriangle(Jp,Qp,Ud,!1,Dd),i===null))return;const _=t.ray.origin.distanceTo(Dd);_<t.near||_>t.far||n.push({distance:_,point:Dd.clone(),uv:Yi.getInterpolation(Dd,Jp,Ud,Qp,LE,xv,kE,new mt),face:null,object:this})}copy(t,n){return super.copy(t,n),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function $p(r,t,n,s,o,a){qu.subVectors(r,n).addScalar(.5).multiply(s),o!==void 0?(Nd.x=a*qu.x-o*qu.y,Nd.y=o*qu.x+a*qu.y):Nd.copy(qu),r.copy(t),r.x+=Nd.x,r.y+=Nd.y,r.applyMatrix4(Y3)}const em=new Re,IE=new Re;class K3 extends jn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const n=t.levels;for(let s=0,o=n.length;s<o;s++){const a=n[s];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,n=0,s=0){n=Math.abs(n);const o=this.levels;let a;for(a=0;a<o.length&&!(n<o[a].distance);a++);return o.splice(a,0,{distance:n,hysteresis:s,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const n=this.levels;if(n.length>0){let s,o;for(s=1,o=n.length;s<o;s++){let a=n[s].distance;if(n[s].object.visible&&(a-=a*n[s].hysteresis),t<a)break}return n[s-1].object}return null}raycast(t,n){if(this.levels.length>0){em.setFromMatrixPosition(this.matrixWorld);const o=t.ray.origin.distanceTo(em);this.getObjectForDistance(o).raycast(t,n)}}update(t){const n=this.levels;if(n.length>1){em.setFromMatrixPosition(t.matrixWorld),IE.setFromMatrixPosition(this.matrixWorld);const s=em.distanceTo(IE)/t.zoom;n[0].object.visible=!0;let o,a;for(o=1,a=n.length;o<a;o++){let y=n[o].distance;if(n[o].object.visible&&(y-=y*n[o].hysteresis),s>=y)n[o-1].object.visible=!1,n[o].object.visible=!0;else break}for(this._currentLevel=o-1;o<a;o++)n[o].object.visible=!1}}toJSON(t){const n=super.toJSON(t);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const s=this.levels;for(let o=0,a=s.length;o<a;o++){const y=s[o];n.object.levels.push({object:y.object.uuid,distance:y.distance,hysteresis:y.hysteresis})}return n}}const OE=new Re,DE=new Un,NE=new Un,eV=new Re,UE=new Jt,tm=new Re,bv=new li,FE=new Jt,wv=new Jc;class J3 extends Ar{constructor(t,n){super(t,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=s_,this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new bi),this.boundingBox.makeEmpty();const n=t.getAttribute("position");for(let s=0;s<n.count;s++)this.getVertexPosition(s,tm),this.boundingBox.expandByPoint(tm)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new li),this.boundingSphere.makeEmpty();const n=t.getAttribute("position");for(let s=0;s<n.count;s++)this.getVertexPosition(s,tm),this.boundingSphere.expandByPoint(tm)}copy(t,n){return super.copy(t,n),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,n){const s=this.material,o=this.matrixWorld;s!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bv.copy(this.boundingSphere),bv.applyMatrix4(o),t.ray.intersectsSphere(bv)!==!1&&(FE.copy(o).invert(),wv.copy(t.ray).applyMatrix4(FE),!(this.boundingBox!==null&&wv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,n,wv)))}getVertexPosition(t,n){return super.getVertexPosition(t,n),this.applyBoneTransform(t,n),n}bind(t,n){this.skeleton=t,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Un,n=this.geometry.attributes.skinWeight;for(let s=0,o=n.count;s<o;s++){t.fromBufferAttribute(n,s);const a=1/t.manhattanLength();a!==1/0?t.multiplyScalar(a):t.set(1,0,0,0),n.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===s_?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===u3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,n){const s=this.skeleton,o=this.geometry;DE.fromBufferAttribute(o.attributes.skinIndex,t),NE.fromBufferAttribute(o.attributes.skinWeight,t),OE.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const y=NE.getComponent(a);if(y!==0){const i=DE.getComponent(a);UE.multiplyMatrices(s.bones[i].matrixWorld,s.boneInverses[i]),n.addScaledVector(eV.copy(OE).applyMatrix4(UE),y)}}return n.applyMatrix4(this.bindMatrixInverse)}}class Vb extends jn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wl extends fr{constructor(t=null,n=1,s=1,o,a,y,i,_,g=vr,h=vr,l,d){super(null,y,i,_,g,h,o,a,l,d),this.isDataTexture=!0,this.image={data:t,width:n,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BE=new Jt,tV=new Jt;class ug{constructor(t=[],n=[]){this.uuid=Qi(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),n.length===0)this.calculateInverses();else if(t.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,o=this.bones.length;s<o;s++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,n=this.bones.length;t<n;t++){const s=new Jt;this.bones[t]&&s.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];s&&s.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const t=this.bones,n=this.boneInverses,s=this.boneMatrices,o=this.boneTexture;for(let a=0,y=t.length;a<y;a++){const i=t[a]?t[a].matrixWorld:tV;BE.multiplyMatrices(i,n[a]),BE.toArray(s,a*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new ug(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4);n.set(this.boneMatrices);const s=new Wl(n,t,t,gi,ys);return s.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=s,this}getBoneByName(t){for(let n=0,s=this.bones.length;n<s;n++){const o=this.bones[n];if(o.name===t)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,n){this.uuid=t.uuid;for(let s=0,o=t.bones.length;s<o;s++){const a=t.bones[s];let y=n[a];y===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),y=new Vb),this.bones.push(y),this.boneInverses.push(new Jt().fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const n=this.bones,s=this.boneInverses;for(let o=0,a=n.length;o<a;o++){const y=n[o];t.bones.push(y.uuid);const i=s[o];t.boneInverses.push(i.toArray())}return t}}class Gc extends In{constructor(t,n,s,o=1){super(t,n,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Yu=new Jt,zE=new Jt,nm=[],VE=new bi,nV=new Jt,Fd=new Ar,Bd=new li;class Q3 extends Ar{constructor(t,n,s){super(t,n),this.isInstancedMesh=!0,this.instanceMatrix=new Gc(new Float32Array(s*16),16),this.instanceColor=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<s;o++)this.setMatrixAt(o,nV)}computeBoundingBox(){const t=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new bi),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<n;s++)this.getMatrixAt(s,Yu),VE.copy(t.boundingBox).applyMatrix4(Yu),this.boundingBox.union(VE)}computeBoundingSphere(){const t=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new li),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<n;s++)this.getMatrixAt(s,Yu),Bd.copy(t.boundingSphere).applyMatrix4(Yu),this.boundingSphere.union(Bd)}copy(t,n){return super.copy(t,n),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,n){n.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,n){n.fromArray(this.instanceMatrix.array,t*16)}raycast(t,n){const s=this.matrixWorld,o=this.count;if(Fd.geometry=this.geometry,Fd.material=this.material,Fd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bd.copy(this.boundingSphere),Bd.applyMatrix4(s),t.ray.intersectsSphere(Bd)!==!1))for(let a=0;a<o;a++){this.getMatrixAt(a,Yu),zE.multiplyMatrices(s,Yu),Fd.matrixWorld=zE,Fd.raycast(t,nm);for(let y=0,i=nm.length;y<i;y++){const _=nm[y];_.instanceId=a,_.object=this,n.push(_)}nm.length=0}}setColorAt(t,n){this.instanceColor===null&&(this.instanceColor=new Gc(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,n){n.toArray(this.instanceMatrix.array,t*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function rV(r,t){return r.z-t.z}function iV(r,t){return t.z-r.z}class sV{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,n){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1});const a=s[this.index];o.push(a),this.index++,a.start=t.start,a.count=t.count,a.z=n}reset(){this.list.length=0,this.index=0}}const Zu="batchId",da=new Jt,GE=new Jt,oV=new Jt,HE=new Jt,Sv=new wf,rm=new bi,yl=new li,zd=new Re,Mv=new sV,ri=new Ar,im=[];function aV(r,t,n=0){const s=t.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==t.array.constructor){const o=r.count;for(let a=0;a<o;a++)for(let y=0;y<s;y++)t.setComponent(a+n,y,r.getComponent(a,y))}else t.array.set(r.array,n*s);t.needsUpdate=!0}class $3 extends Ar{get maxGeometryCount(){return this._maxGeometryCount}constructor(t,n,s=n*2,o){super(new ln,o),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=t,this._maxVertexCount=n,this._maxIndexCount=s,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let t=Math.sqrt(this._maxGeometryCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4),s=new Wl(n,t,t,gi,ys);this._matricesTexture=s}_initializeGeometry(t){const n=this.geometry,s=this._maxVertexCount,o=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const i in t.attributes){const _=t.getAttribute(i),{array:g,itemSize:h,normalized:l}=_,d=new g.constructor(s*h),v=new _.constructor(d,h,l);v.setUsage(_.usage),n.setAttribute(i,v)}if(t.getIndex()!==null){const i=s>65536?new Uint32Array(a):new Uint16Array(a);n.setIndex(new In(i,1))}const y=o>65536?new Uint32Array(s):new Uint16Array(s);n.setAttribute(Zu,new In(y,1)),this._geometryInitialized=!0}}_validateGeometry(t){if(t.getAttribute(Zu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Zu}"`);const n=this.geometry;if(!!t.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const s in n.attributes){if(s===Zu)continue;if(!t.hasAttribute(s))throw new Error(`BatchedMesh: Added geometry missing "${s}". All geometries must have consistent attributes.`);const o=t.getAttribute(s),a=n.getAttribute(s);if(o.itemSize!==a.itemSize||o.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bi);const t=this._geometryCount,n=this.boundingBox,s=this._active;n.makeEmpty();for(let o=0;o<t;o++)s[o]!==!1&&(this.getMatrixAt(o,da),this.getBoundingBoxAt(o,rm).applyMatrix4(da),n.union(rm))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new li);const t=this._geometryCount,n=this.boundingSphere,s=this._active;n.makeEmpty();for(let o=0;o<t;o++)s[o]!==!1&&(this.getMatrixAt(o,da),this.getBoundingSphereAt(o,yl).applyMatrix4(da),n.union(yl))}addGeometry(t,n=-1,s=-1){if(this._initializeGeometry(t),this._validateGeometry(t),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const o={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const y=this._reservedRanges,i=this._drawRanges,_=this._bounds;this._geometryCount!==0&&(a=y[y.length-1]),n===-1?o.vertexCount=t.getAttribute("position").count:o.vertexCount=n,a===null?o.vertexStart=0:o.vertexStart=a.vertexStart+a.vertexCount;const g=t.getIndex(),h=g!==null;if(h&&(s===-1?o.indexCount=g.count:o.indexCount=s,a===null?o.indexStart=0:o.indexStart=a.indexStart+a.indexCount),o.indexStart!==-1&&o.indexStart+o.indexCount>this._maxIndexCount||o.vertexStart+o.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const l=this._visibility,d=this._active,v=this._matricesTexture,x=this._matricesTexture.image.data;l.push(!0),d.push(!0);const p=this._geometryCount;this._geometryCount++,oV.toArray(x,p*16),v.needsUpdate=!0,y.push(o),i.push({start:h?o.indexStart:o.vertexStart,count:-1}),_.push({boxInitialized:!1,box:new bi,sphereInitialized:!1,sphere:new li});const f=this.geometry.getAttribute(Zu);for(let u=0;u<o.vertexCount;u++)f.setX(o.vertexStart+u,p);return f.needsUpdate=!0,this.setGeometryAt(p,t),p}setGeometryAt(t,n){if(t>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const s=this.geometry,o=s.getIndex()!==null,a=s.getIndex(),y=n.getIndex(),i=this._reservedRanges[t];if(o&&y.count>i.indexCount||n.attributes.position.count>i.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const _=i.vertexStart,g=i.vertexCount;for(const v in s.attributes){if(v===Zu)continue;const x=n.getAttribute(v),p=s.getAttribute(v);aV(x,p,_);const f=x.itemSize;for(let u=x.count,c=g;u<c;u++){const m=_+u;for(let b=0;b<f;b++)p.setComponent(m,b,0)}p.needsUpdate=!0}if(o){const v=i.indexStart;for(let x=0;x<y.count;x++)a.setX(v+x,_+y.getX(x));for(let x=y.count,p=i.indexCount;x<p;x++)a.setX(v+x,_);a.needsUpdate=!0}const h=this._bounds[t];n.boundingBox!==null?(h.box.copy(n.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,n.boundingSphere!==null?(h.sphere.copy(n.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const l=this._drawRanges[t],d=n.getAttribute("position");return l.count=o?y.count:d.count,this._visibilityChanged=!0,t}deleteGeometry(t){const n=this._active;return t>=n.length||n[t]===!1?this:(n[t]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(t,n){if(this._active[t]===!1)return null;const o=this._bounds[t],a=o.box,y=this.geometry;if(o.boxInitialized===!1){a.makeEmpty();const i=y.index,_=y.attributes.position,g=this._drawRanges[t];for(let h=g.start,l=g.start+g.count;h<l;h++){let d=h;i&&(d=i.getX(d)),a.expandByPoint(zd.fromBufferAttribute(_,d))}o.boxInitialized=!0}return n.copy(a),n}getBoundingSphereAt(t,n){if(this._active[t]===!1)return null;const o=this._bounds[t],a=o.sphere,y=this.geometry;if(o.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(t,rm),rm.getCenter(a.center);const i=y.index,_=y.attributes.position,g=this._drawRanges[t];let h=0;for(let l=g.start,d=g.start+g.count;l<d;l++){let v=l;i&&(v=i.getX(v)),zd.fromBufferAttribute(_,v),h=Math.max(h,a.center.distanceToSquared(zd))}a.radius=Math.sqrt(h),o.sphereInitialized=!0}return n.copy(a),n}setMatrixAt(t,n){const s=this._active,o=this._matricesTexture,a=this._matricesTexture.image.data,y=this._geometryCount;return t>=y||s[t]===!1?this:(n.toArray(a,t*16),o.needsUpdate=!0,this)}getMatrixAt(t,n){const s=this._active,o=this._matricesTexture.image.data,a=this._geometryCount;return t>=a||s[t]===!1?null:n.fromArray(o,t*16)}setVisibleAt(t,n){const s=this._visibility,o=this._active,a=this._geometryCount;return t>=a||o[t]===!1||s[t]===n?this:(s[t]=n,this._visibilityChanged=!0,this)}getVisibleAt(t){const n=this._visibility,s=this._active,o=this._geometryCount;return t>=o||s[t]===!1?!1:n[t]}raycast(t,n){const s=this._visibility,o=this._active,a=this._drawRanges,y=this._geometryCount,i=this.matrixWorld,_=this.geometry;ri.material=this.material,ri.geometry.index=_.index,ri.geometry.attributes=_.attributes,ri.geometry.boundingBox===null&&(ri.geometry.boundingBox=new bi),ri.geometry.boundingSphere===null&&(ri.geometry.boundingSphere=new li);for(let g=0;g<y;g++){if(!s[g]||!o[g])continue;const h=a[g];ri.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(g,ri.matrixWorld).premultiply(i),this.getBoundingBoxAt(g,ri.geometry.boundingBox),this.getBoundingSphereAt(g,ri.geometry.boundingSphere),ri.raycast(t,im);for(let l=0,d=im.length;l<d;l++){const v=im[l];v.object=this,v.batchId=g,n.push(v)}im.length=0}ri.material=null,ri.geometry.index=null,ri.geometry.attributes={},ri.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._drawRanges=t._drawRanges.map(n=>({...n})),this._reservedRanges=t._reservedRanges.map(n=>({...n})),this._visibility=t._visibility.slice(),this._active=t._active.slice(),this._bounds=t._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=t._maxGeometryCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(t,n,s,o,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const y=o.getIndex(),i=y===null?1:y.array.BYTES_PER_ELEMENT,_=this._active,g=this._visibility,h=this._multiDrawStarts,l=this._multiDrawCounts,d=this._drawRanges,v=this.perObjectFrustumCulled;v&&(HE.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse).multiply(this.matrixWorld),Sv.setFromProjectionMatrix(HE,t.coordinateSystem));let x=0;if(this.sortObjects){GE.copy(this.matrixWorld).invert(),zd.setFromMatrixPosition(s.matrixWorld).applyMatrix4(GE);for(let u=0,c=g.length;u<c;u++)if(g[u]&&_[u]){this.getMatrixAt(u,da),this.getBoundingSphereAt(u,yl).applyMatrix4(da);let m=!1;if(v&&(m=!Sv.intersectsSphere(yl)),!m){const b=zd.distanceTo(yl.center);Mv.push(d[u],b)}}const p=Mv.list,f=this.customSort;f===null?p.sort(a.transparent?iV:rV):f.call(this,p,s);for(let u=0,c=p.length;u<c;u++){const m=p[u];h[x]=m.start*i,l[x]=m.count,x++}Mv.reset()}else for(let p=0,f=g.length;p<f;p++)if(g[p]&&_[p]){let u=!1;if(v&&(this.getMatrixAt(p,da),this.getBoundingSphereAt(p,yl).applyMatrix4(da),u=!Sv.intersectsSphere(yl)),!u){const c=d[p];h[x]=c.start*i,l[x]=c.count,x++}}this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(t,n,s,o,a,y){this.onBeforeRender(t,null,o,a,y)}}class Mi extends ci{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const WE=new Re,XE=new Re,qE=new Jt,Ev=new Jc,sm=new li;class Fa extends jn{constructor(t=new ln,n=new Mi){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,s=[0];for(let o=1,a=n.count;o<a;o++)WE.fromBufferAttribute(n,o-1),XE.fromBufferAttribute(n,o),s[o]=s[o-1],s[o]+=WE.distanceTo(XE);t.setAttribute("lineDistance",new zt(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,n){const s=this.geometry,o=this.matrixWorld,a=t.params.Line.threshold,y=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),sm.copy(s.boundingSphere),sm.applyMatrix4(o),sm.radius+=a,t.ray.intersectsSphere(sm)===!1)return;qE.copy(o).invert(),Ev.copy(t.ray).applyMatrix4(qE);const i=a/((this.scale.x+this.scale.y+this.scale.z)/3),_=i*i,g=new Re,h=new Re,l=new Re,d=new Re,v=this.isLineSegments?2:1,x=s.index,f=s.attributes.position;if(x!==null){const u=Math.max(0,y.start),c=Math.min(x.count,y.start+y.count);for(let m=u,b=c-1;m<b;m+=v){const S=x.getX(m),w=x.getX(m+1);if(g.fromBufferAttribute(f,S),h.fromBufferAttribute(f,w),Ev.distanceSqToSegment(g,h,d,l)>_)continue;d.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(d);A<t.near||A>t.far||n.push({distance:A,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else{const u=Math.max(0,y.start),c=Math.min(f.count,y.start+y.count);for(let m=u,b=c-1;m<b;m+=v){if(g.fromBufferAttribute(f,m),h.fromBufferAttribute(f,m+1),Ev.distanceSqToSegment(g,h,d,l)>_)continue;d.applyMatrix4(this.matrixWorld);const w=t.ray.origin.distanceTo(d);w<t.near||w>t.far||n.push({distance:w,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const o=n[s[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,y=o.length;a<y;a++){const i=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=a}}}}}const YE=new Re,ZE=new Re;class ho extends Fa{constructor(t,n){super(t,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,s=[];for(let o=0,a=n.count;o<a;o+=2)YE.fromBufferAttribute(n,o),ZE.fromBufferAttribute(n,o+1),s[o]=o===0?0:s[o-1],s[o+1]=s[o]+YE.distanceTo(ZE);t.setAttribute("lineDistance",new zt(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ej extends Fa{constructor(t,n){super(t,n),this.isLineLoop=!0,this.type="LineLoop"}}class Gb extends ci{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const KE=new Jt,D_=new Jc,om=new li,am=new Re;class tj extends jn{constructor(t=new ln,n=new Gb){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,n){const s=this.geometry,o=this.matrixWorld,a=t.params.Points.threshold,y=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),om.copy(s.boundingSphere),om.applyMatrix4(o),om.radius+=a,t.ray.intersectsSphere(om)===!1)return;KE.copy(o).invert(),D_.copy(t.ray).applyMatrix4(KE);const i=a/((this.scale.x+this.scale.y+this.scale.z)/3),_=i*i,g=s.index,l=s.attributes.position;if(g!==null){const d=Math.max(0,y.start),v=Math.min(g.count,y.start+y.count);for(let x=d,p=v;x<p;x++){const f=g.getX(x);am.fromBufferAttribute(l,f),JE(am,f,_,o,t,n,this)}}else{const d=Math.max(0,y.start),v=Math.min(l.count,y.start+y.count);for(let x=d,p=v;x<p;x++)am.fromBufferAttribute(l,x),JE(am,x,_,o,t,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,s=Object.keys(n);if(s.length>0){const o=n[s[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,y=o.length;a<y;a++){const i=o[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=a}}}}}function JE(r,t,n,s,o,a,y){const i=D_.distanceSqToPoint(r);if(i<n){const _=new Re;D_.closestPointToPoint(r,_),_.applyMatrix4(s);const g=o.ray.origin.distanceTo(_);if(g<o.near||g>o.far)return;a.push({distance:g,distanceToRay:Math.sqrt(i),point:_,index:t,face:null,object:y})}}class lV extends fr{constructor(t,n,s,o,a,y,i,_,g){super(t,n,s,o,a,y,i,_,g),this.isVideoTexture=!0,this.minFilter=y!==void 0?y:rr,this.magFilter=a!==void 0?a:rr,this.generateMipmaps=!1;const h=this;function l(){h.needsUpdate=!0,t.requestVideoFrameCallback(l)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(l)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class uV extends fr{constructor(t,n){super({width:t,height:n}),this.isFramebufferTexture=!0,this.magFilter=vr,this.minFilter=vr,this.generateMipmaps=!1,this.needsUpdate=!0}}class cg extends fr{constructor(t,n,s,o,a,y,i,_,g,h,l,d){super(null,y,i,_,g,h,o,a,l,d),this.isCompressedTexture=!0,this.image={width:n,height:s},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class cV extends cg{constructor(t,n,s,o,a,y){super(t,n,s,a,y),this.isCompressedArrayTexture=!0,this.image.depth=o,this.wrapR=oi}}class dV extends cg{constructor(t,n,s){super(void 0,t[0].width,t[0].height,n,s,Go),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class hV extends fr{constructor(t,n,s,o,a,y,i,_,g){super(t,n,s,o,a,y,i,_,g),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,n){const s=this.getUtoTmapping(t);return this.getPoint(s,n)}getPoints(t=5){const n=[];for(let s=0;s<=t;s++)n.push(this.getPoint(s/t));return n}getSpacedPoints(t=5){const n=[];for(let s=0;s<=t;s++)n.push(this.getPointAt(s/t));return n}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let s,o=this.getPoint(0),a=0;n.push(0);for(let y=1;y<=t;y++)s=this.getPoint(y/t),a+=s.distanceTo(o),n.push(a),o=s;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,n){const s=this.getLengths();let o=0;const a=s.length;let y;n?y=n:y=t*s[a-1];let i=0,_=a-1,g;for(;i<=_;)if(o=Math.floor(i+(_-i)/2),g=s[o]-y,g<0)i=o+1;else if(g>0)_=o-1;else{_=o;break}if(o=_,s[o]===y)return o/(a-1);const h=s[o],d=s[o+1]-h,v=(y-h)/d;return(o+v)/(a-1)}getTangent(t,n){let o=t-1e-4,a=t+1e-4;o<0&&(o=0),a>1&&(a=1);const y=this.getPoint(o),i=this.getPoint(a),_=n||(y.isVector2?new mt:new Re);return _.copy(i).sub(y).normalize(),_}getTangentAt(t,n){const s=this.getUtoTmapping(t);return this.getTangent(s,n)}computeFrenetFrames(t,n){const s=new Re,o=[],a=[],y=[],i=new Re,_=new Jt;for(let v=0;v<=t;v++){const x=v/t;o[v]=this.getTangentAt(x,new Re)}a[0]=new Re,y[0]=new Re;let g=Number.MAX_VALUE;const h=Math.abs(o[0].x),l=Math.abs(o[0].y),d=Math.abs(o[0].z);h<=g&&(g=h,s.set(1,0,0)),l<=g&&(g=l,s.set(0,1,0)),d<=g&&s.set(0,0,1),i.crossVectors(o[0],s).normalize(),a[0].crossVectors(o[0],i),y[0].crossVectors(o[0],a[0]);for(let v=1;v<=t;v++){if(a[v]=a[v-1].clone(),y[v]=y[v-1].clone(),i.crossVectors(o[v-1],o[v]),i.length()>Number.EPSILON){i.normalize();const x=Math.acos(hr(o[v-1].dot(o[v]),-1,1));a[v].applyMatrix4(_.makeRotationAxis(i,x))}y[v].crossVectors(o[v],a[v])}if(n===!0){let v=Math.acos(hr(a[0].dot(a[t]),-1,1));v/=t,o[0].dot(i.crossVectors(a[0],a[t]))>0&&(v=-v);for(let x=1;x<=t;x++)a[x].applyMatrix4(_.makeRotationAxis(o[x],v*x)),y[x].crossVectors(o[x],a[x])}return{tangents:o,normals:a,binormals:y}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class dg extends Xs{constructor(t=0,n=0,s=1,o=1,a=0,y=Math.PI*2,i=!1,_=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=n,this.xRadius=s,this.yRadius=o,this.aStartAngle=a,this.aEndAngle=y,this.aClockwise=i,this.aRotation=_}getPoint(t,n){const s=n||new mt,o=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const y=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(y?a=0:a=o),this.aClockwise===!0&&!y&&(a===o?a=-o:a=a-o);const i=this.aStartAngle+t*a;let _=this.aX+this.xRadius*Math.cos(i),g=this.aY+this.yRadius*Math.sin(i);if(this.aRotation!==0){const h=Math.cos(this.aRotation),l=Math.sin(this.aRotation),d=_-this.aX,v=g-this.aY;_=d*h-v*l+this.aX,g=d*l+v*h+this.aY}return s.set(_,g)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class nj extends dg{constructor(t,n,s,o,a,y){super(t,n,s,s,o,a,y),this.isArcCurve=!0,this.type="ArcCurve"}}function Hb(){let r=0,t=0,n=0,s=0;function o(a,y,i,_){r=a,t=i,n=-3*a+3*y-2*i-_,s=2*a-2*y+i+_}return{initCatmullRom:function(a,y,i,_,g){o(y,i,g*(i-a),g*(_-y))},initNonuniformCatmullRom:function(a,y,i,_,g,h,l){let d=(y-a)/g-(i-a)/(g+h)+(i-y)/h,v=(i-y)/h-(_-y)/(h+l)+(_-i)/l;d*=h,v*=h,o(y,i,d,v)},calc:function(a){const y=a*a,i=y*a;return r+t*a+n*y+s*i}}}const lm=new Re,Tv=new Hb,Av=new Hb,Cv=new Hb;class rj extends Xs{constructor(t=[],n=!1,s="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=n,this.curveType=s,this.tension=o}getPoint(t,n=new Re){const s=n,o=this.points,a=o.length,y=(a-(this.closed?0:1))*t;let i=Math.floor(y),_=y-i;this.closed?i+=i>0?0:(Math.floor(Math.abs(i)/a)+1)*a:_===0&&i===a-1&&(i=a-2,_=1);let g,h;this.closed||i>0?g=o[(i-1)%a]:(lm.subVectors(o[0],o[1]).add(o[0]),g=lm);const l=o[i%a],d=o[(i+1)%a];if(this.closed||i+2<a?h=o[(i+2)%a]:(lm.subVectors(o[a-1],o[a-2]).add(o[a-1]),h=lm),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(g.distanceToSquared(l),v),p=Math.pow(l.distanceToSquared(d),v),f=Math.pow(d.distanceToSquared(h),v);p<1e-4&&(p=1),x<1e-4&&(x=p),f<1e-4&&(f=p),Tv.initNonuniformCatmullRom(g.x,l.x,d.x,h.x,x,p,f),Av.initNonuniformCatmullRom(g.y,l.y,d.y,h.y,x,p,f),Cv.initNonuniformCatmullRom(g.z,l.z,d.z,h.z,x,p,f)}else this.curveType==="catmullrom"&&(Tv.initCatmullRom(g.x,l.x,d.x,h.x,this.tension),Av.initCatmullRom(g.y,l.y,d.y,h.y,this.tension),Cv.initCatmullRom(g.z,l.z,d.z,h.z,this.tension));return s.set(Tv.calc(_),Av.calc(_),Cv.calc(_)),s}copy(t){super.copy(t),this.points=[];for(let n=0,s=t.points.length;n<s;n++){const o=t.points[n];this.points.push(o.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,s=this.points.length;n<s;n++){const o=this.points[n];t.points.push(o.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,s=t.points.length;n<s;n++){const o=t.points[n];this.points.push(new Re().fromArray(o))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function QE(r,t,n,s,o){const a=(s-t)*.5,y=(o-n)*.5,i=r*r,_=r*i;return(2*n-2*s+a+y)*_+(-3*n+3*s-2*a-y)*i+a*r+n}function fV(r,t){const n=1-r;return n*n*t}function pV(r,t){return 2*(1-r)*r*t}function mV(r,t){return r*r*t}function mh(r,t,n,s){return fV(r,t)+pV(r,n)+mV(r,s)}function yV(r,t){const n=1-r;return n*n*n*t}function gV(r,t){const n=1-r;return 3*n*n*r*t}function vV(r,t){return 3*(1-r)*r*r*t}function _V(r,t){return r*r*r*t}function yh(r,t,n,s,o){return yV(r,t)+gV(r,n)+vV(r,s)+_V(r,o)}class Wb extends Xs{constructor(t=new mt,n=new mt,s=new mt,o=new mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=n,this.v2=s,this.v3=o}getPoint(t,n=new mt){const s=n,o=this.v0,a=this.v1,y=this.v2,i=this.v3;return s.set(yh(t,o.x,a.x,y.x,i.x),yh(t,o.y,a.y,y.y,i.y)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ij extends Xs{constructor(t=new Re,n=new Re,s=new Re,o=new Re){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=n,this.v2=s,this.v3=o}getPoint(t,n=new Re){const s=n,o=this.v0,a=this.v1,y=this.v2,i=this.v3;return s.set(yh(t,o.x,a.x,y.x,i.x),yh(t,o.y,a.y,y.y,i.y),yh(t,o.z,a.z,y.z,i.z)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Xb extends Xs{constructor(t=new mt,n=new mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=n}getPoint(t,n=new mt){const s=n;return t===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new mt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class sj extends Xs{constructor(t=new Re,n=new Re){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=n}getPoint(t,n=new Re){const s=n;return t===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(t).add(this.v1)),s}getPointAt(t,n){return this.getPoint(t,n)}getTangent(t,n=new Re){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,n){return this.getTangent(t,n)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class qb extends Xs{constructor(t=new mt,n=new mt,s=new mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=n,this.v2=s}getPoint(t,n=new mt){const s=n,o=this.v0,a=this.v1,y=this.v2;return s.set(mh(t,o.x,a.x,y.x),mh(t,o.y,a.y,y.y)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Yb extends Xs{constructor(t=new Re,n=new Re,s=new Re){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=n,this.v2=s}getPoint(t,n=new Re){const s=n,o=this.v0,a=this.v1,y=this.v2;return s.set(mh(t,o.x,a.x,y.x),mh(t,o.y,a.y,y.y),mh(t,o.z,a.z,y.z)),s}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Zb extends Xs{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,n=new mt){const s=n,o=this.points,a=(o.length-1)*t,y=Math.floor(a),i=a-y,_=o[y===0?y:y-1],g=o[y],h=o[y>o.length-2?o.length-1:y+1],l=o[y>o.length-3?o.length-1:y+2];return s.set(QE(i,_.x,g.x,h.x,l.x),QE(i,_.y,g.y,h.y,l.y)),s}copy(t){super.copy(t),this.points=[];for(let n=0,s=t.points.length;n<s;n++){const o=t.points[n];this.points.push(o.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let n=0,s=this.points.length;n<s;n++){const o=this.points[n];t.points.push(o.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let n=0,s=t.points.length;n<s;n++){const o=t.points[n];this.points.push(new mt().fromArray(o))}return this}}var Cy=Object.freeze({__proto__:null,ArcCurve:nj,CatmullRomCurve3:rj,CubicBezierCurve:Wb,CubicBezierCurve3:ij,EllipseCurve:dg,LineCurve:Xb,LineCurve3:sj,QuadraticBezierCurve:qb,QuadraticBezierCurve3:Yb,SplineCurve:Zb});class oj extends Xs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(n)){const s=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Cy[s](n,t))}return this}getPoint(t,n){const s=t*this.getLength(),o=this.getCurveLengths();let a=0;for(;a<o.length;){if(o[a]>=s){const y=o[a]-s,i=this.curves[a],_=i.getLength(),g=_===0?0:1-y/_;return i.getPointAt(g,n)}a++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let n=0;for(let s=0,o=this.curves.length;s<o;s++)n+=this.curves[s].getLength(),t.push(n);return this.cacheLengths=t,t}getSpacedPoints(t=40){const n=[];for(let s=0;s<=t;s++)n.push(this.getPoint(s/t));return this.autoClose&&n.push(n[0]),n}getPoints(t=12){const n=[];let s;for(let o=0,a=this.curves;o<a.length;o++){const y=a[o],i=y.isEllipseCurve?t*2:y.isLineCurve||y.isLineCurve3?1:y.isSplineCurve?t*y.points.length:t,_=y.getPoints(i);for(let g=0;g<_.length;g++){const h=_[g];s&&s.equals(h)||(n.push(h),s=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(t){super.copy(t),this.curves=[];for(let n=0,s=t.curves.length;n<s;n++){const o=t.curves[n];this.curves.push(o.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let n=0,s=this.curves.length;n<s;n++){const o=this.curves[n];t.curves.push(o.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let n=0,s=t.curves.length;n<s;n++){const o=t.curves[n];this.curves.push(new Cy[o.type]().fromJSON(o))}return this}}class $h extends oj{constructor(t){super(),this.type="Path",this.currentPoint=new mt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let n=1,s=t.length;n<s;n++)this.lineTo(t[n].x,t[n].y);return this}moveTo(t,n){return this.currentPoint.set(t,n),this}lineTo(t,n){const s=new Xb(this.currentPoint.clone(),new mt(t,n));return this.curves.push(s),this.currentPoint.set(t,n),this}quadraticCurveTo(t,n,s,o){const a=new qb(this.currentPoint.clone(),new mt(t,n),new mt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}bezierCurveTo(t,n,s,o,a,y){const i=new Wb(this.currentPoint.clone(),new mt(t,n),new mt(s,o),new mt(a,y));return this.curves.push(i),this.currentPoint.set(a,y),this}splineThru(t){const n=[this.currentPoint.clone()].concat(t),s=new Zb(n);return this.curves.push(s),this.currentPoint.copy(t[t.length-1]),this}arc(t,n,s,o,a,y){const i=this.currentPoint.x,_=this.currentPoint.y;return this.absarc(t+i,n+_,s,o,a,y),this}absarc(t,n,s,o,a,y){return this.absellipse(t,n,s,s,o,a,y),this}ellipse(t,n,s,o,a,y,i,_){const g=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+g,n+h,s,o,a,y,i,_),this}absellipse(t,n,s,o,a,y,i,_){const g=new dg(t,n,s,o,a,y,i,_);if(this.curves.length>0){const l=g.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(g);const h=g.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Mf extends ln{constructor(t=[new mt(0,-.5),new mt(.5,0),new mt(0,.5)],n=12,s=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:n,phiStart:s,phiLength:o},n=Math.floor(n),o=hr(o,0,Math.PI*2);const a=[],y=[],i=[],_=[],g=[],h=1/n,l=new Re,d=new mt,v=new Re,x=new Re,p=new Re;let f=0,u=0;for(let c=0;c<=t.length-1;c++)switch(c){case 0:f=t[c+1].x-t[c].x,u=t[c+1].y-t[c].y,v.x=u*1,v.y=-f,v.z=u*0,p.copy(v),v.normalize(),_.push(v.x,v.y,v.z);break;case t.length-1:_.push(p.x,p.y,p.z);break;default:f=t[c+1].x-t[c].x,u=t[c+1].y-t[c].y,v.x=u*1,v.y=-f,v.z=u*0,x.copy(v),v.x+=p.x,v.y+=p.y,v.z+=p.z,v.normalize(),_.push(v.x,v.y,v.z),p.copy(x)}for(let c=0;c<=n;c++){const m=s+c*h*o,b=Math.sin(m),S=Math.cos(m);for(let w=0;w<=t.length-1;w++){l.x=t[w].x*b,l.y=t[w].y,l.z=t[w].x*S,y.push(l.x,l.y,l.z),d.x=c/n,d.y=w/(t.length-1),i.push(d.x,d.y);const M=_[3*w+0]*b,A=_[3*w+1],P=_[3*w+0]*S;g.push(M,A,P)}}for(let c=0;c<n;c++)for(let m=0;m<t.length-1;m++){const b=m+c*t.length,S=b,w=b+t.length,M=b+t.length+1,A=b+1;a.push(S,w,A),a.push(M,A,w)}this.setIndex(a),this.setAttribute("position",new zt(y,3)),this.setAttribute("uv",new zt(i,2)),this.setAttribute("normal",new zt(g,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Mf(t.points,t.segments,t.phiStart,t.phiLength)}}class hg extends Mf{constructor(t=1,n=1,s=4,o=8){const a=new $h;a.absarc(0,-n/2,t,Math.PI*1.5,0),a.absarc(0,n/2,t,0,Math.PI*.5),super(a.getPoints(s),o),this.type="CapsuleGeometry",this.parameters={radius:t,length:n,capSegments:s,radialSegments:o}}static fromJSON(t){return new hg(t.radius,t.length,t.capSegments,t.radialSegments)}}class fg extends ln{constructor(t=1,n=32,s=0,o=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:s,thetaLength:o},n=Math.max(3,n);const a=[],y=[],i=[],_=[],g=new Re,h=new mt;y.push(0,0,0),i.push(0,0,1),_.push(.5,.5);for(let l=0,d=3;l<=n;l++,d+=3){const v=s+l/n*o;g.x=t*Math.cos(v),g.y=t*Math.sin(v),y.push(g.x,g.y,g.z),i.push(0,0,1),h.x=(y[d]/t+1)/2,h.y=(y[d+1]/t+1)/2,_.push(h.x,h.y)}for(let l=1;l<=n;l++)a.push(l,l+1,0);this.setIndex(a),this.setAttribute("position",new zt(y,3)),this.setAttribute("normal",new zt(i,3)),this.setAttribute("uv",new zt(_,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new fg(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class ed extends ln{constructor(t=1,n=1,s=1,o=32,a=1,y=!1,i=0,_=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:n,height:s,radialSegments:o,heightSegments:a,openEnded:y,thetaStart:i,thetaLength:_};const g=this;o=Math.floor(o),a=Math.floor(a);const h=[],l=[],d=[],v=[];let x=0;const p=[],f=s/2;let u=0;c(),y===!1&&(t>0&&m(!0),n>0&&m(!1)),this.setIndex(h),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(d,3)),this.setAttribute("uv",new zt(v,2));function c(){const b=new Re,S=new Re;let w=0;const M=(n-t)/s;for(let A=0;A<=a;A++){const P=[],R=A/a,k=R*(n-t)+t;for(let L=0;L<=o;L++){const B=L/o,I=B*_+i,F=Math.sin(I),z=Math.cos(I);S.x=k*F,S.y=-R*s+f,S.z=k*z,l.push(S.x,S.y,S.z),b.set(F,M,z).normalize(),d.push(b.x,b.y,b.z),v.push(B,1-R),P.push(x++)}p.push(P)}for(let A=0;A<o;A++)for(let P=0;P<a;P++){const R=p[P][A],k=p[P+1][A],L=p[P+1][A+1],B=p[P][A+1];h.push(R,k,B),h.push(k,L,B),w+=6}g.addGroup(u,w,0),u+=w}function m(b){const S=x,w=new mt,M=new Re;let A=0;const P=b===!0?t:n,R=b===!0?1:-1;for(let L=1;L<=o;L++)l.push(0,f*R,0),d.push(0,R,0),v.push(.5,.5),x++;const k=x;for(let L=0;L<=o;L++){const I=L/o*_+i,F=Math.cos(I),z=Math.sin(I);M.x=P*z,M.y=f*R,M.z=P*F,l.push(M.x,M.y,M.z),d.push(0,R,0),w.x=F*.5+.5,w.y=z*.5*R+.5,v.push(w.x,w.y),x++}for(let L=0;L<o;L++){const B=S+L,I=k+L;b===!0?h.push(I,I+1,B):h.push(I+1,I,B),A+=3}g.addGroup(u,A,b===!0?1:2),u+=A}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ed(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class pg extends ed{constructor(t=1,n=1,s=32,o=1,a=!1,y=0,i=Math.PI*2){super(0,t,n,s,o,a,y,i),this.type="ConeGeometry",this.parameters={radius:t,height:n,radialSegments:s,heightSegments:o,openEnded:a,thetaStart:y,thetaLength:i}}static fromJSON(t){return new pg(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Xa extends ln{constructor(t=[],n=[],s=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:n,radius:s,detail:o};const a=[],y=[];i(o),g(s),h(),this.setAttribute("position",new zt(a,3)),this.setAttribute("normal",new zt(a.slice(),3)),this.setAttribute("uv",new zt(y,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function i(c){const m=new Re,b=new Re,S=new Re;for(let w=0;w<n.length;w+=3)v(n[w+0],m),v(n[w+1],b),v(n[w+2],S),_(m,b,S,c)}function _(c,m,b,S){const w=S+1,M=[];for(let A=0;A<=w;A++){M[A]=[];const P=c.clone().lerp(b,A/w),R=m.clone().lerp(b,A/w),k=w-A;for(let L=0;L<=k;L++)L===0&&A===w?M[A][L]=P:M[A][L]=P.clone().lerp(R,L/k)}for(let A=0;A<w;A++)for(let P=0;P<2*(w-A)-1;P++){const R=Math.floor(P/2);P%2===0?(d(M[A][R+1]),d(M[A+1][R]),d(M[A][R])):(d(M[A][R+1]),d(M[A+1][R+1]),d(M[A+1][R]))}}function g(c){const m=new Re;for(let b=0;b<a.length;b+=3)m.x=a[b+0],m.y=a[b+1],m.z=a[b+2],m.normalize().multiplyScalar(c),a[b+0]=m.x,a[b+1]=m.y,a[b+2]=m.z}function h(){const c=new Re;for(let m=0;m<a.length;m+=3){c.x=a[m+0],c.y=a[m+1],c.z=a[m+2];const b=f(c)/2/Math.PI+.5,S=u(c)/Math.PI+.5;y.push(b,1-S)}x(),l()}function l(){for(let c=0;c<y.length;c+=6){const m=y[c+0],b=y[c+2],S=y[c+4],w=Math.max(m,b,S),M=Math.min(m,b,S);w>.9&&M<.1&&(m<.2&&(y[c+0]+=1),b<.2&&(y[c+2]+=1),S<.2&&(y[c+4]+=1))}}function d(c){a.push(c.x,c.y,c.z)}function v(c,m){const b=c*3;m.x=t[b+0],m.y=t[b+1],m.z=t[b+2]}function x(){const c=new Re,m=new Re,b=new Re,S=new Re,w=new mt,M=new mt,A=new mt;for(let P=0,R=0;P<a.length;P+=9,R+=6){c.set(a[P+0],a[P+1],a[P+2]),m.set(a[P+3],a[P+4],a[P+5]),b.set(a[P+6],a[P+7],a[P+8]),w.set(y[R+0],y[R+1]),M.set(y[R+2],y[R+3]),A.set(y[R+4],y[R+5]),S.copy(c).add(m).add(b).divideScalar(3);const k=f(S);p(w,R+0,c,k),p(M,R+2,m,k),p(A,R+4,b,k)}}function p(c,m,b,S){S<0&&c.x===1&&(y[m]=c.x-1),b.x===0&&b.z===0&&(y[m]=S/2/Math.PI+.5)}function f(c){return Math.atan2(c.z,-c.x)}function u(c){return Math.atan2(-c.y,Math.sqrt(c.x*c.x+c.z*c.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Xa(t.vertices,t.indices,t.radius,t.details)}}class mg extends Xa{constructor(t=1,n=0){const s=(1+Math.sqrt(5))/2,o=1/s,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-s,0,-o,s,0,o,-s,0,o,s,-o,-s,0,-o,s,0,o,-s,0,o,s,0,-s,0,-o,s,0,-o,-s,0,o,s,0,o],y=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,y,t,n),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new mg(t.radius,t.detail)}}const um=new Re,cm=new Re,Pv=new Re,dm=new Yi;class aj extends ln{constructor(t=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:n},t!==null){const o=Math.pow(10,4),a=Math.cos(Vl*n),y=t.getIndex(),i=t.getAttribute("position"),_=y?y.count:i.count,g=[0,0,0],h=["a","b","c"],l=new Array(3),d={},v=[];for(let x=0;x<_;x+=3){y?(g[0]=y.getX(x),g[1]=y.getX(x+1),g[2]=y.getX(x+2)):(g[0]=x,g[1]=x+1,g[2]=x+2);const{a:p,b:f,c:u}=dm;if(p.fromBufferAttribute(i,g[0]),f.fromBufferAttribute(i,g[1]),u.fromBufferAttribute(i,g[2]),dm.getNormal(Pv),l[0]=`${Math.round(p.x*o)},${Math.round(p.y*o)},${Math.round(p.z*o)}`,l[1]=`${Math.round(f.x*o)},${Math.round(f.y*o)},${Math.round(f.z*o)}`,l[2]=`${Math.round(u.x*o)},${Math.round(u.y*o)},${Math.round(u.z*o)}`,!(l[0]===l[1]||l[1]===l[2]||l[2]===l[0]))for(let c=0;c<3;c++){const m=(c+1)%3,b=l[c],S=l[m],w=dm[h[c]],M=dm[h[m]],A=`${b}_${S}`,P=`${S}_${b}`;P in d&&d[P]?(Pv.dot(d[P].normal)<=a&&(v.push(w.x,w.y,w.z),v.push(M.x,M.y,M.z)),d[P]=null):A in d||(d[A]={index0:g[c],index1:g[m],normal:Pv.clone()})}}for(const x in d)if(d[x]){const{index0:p,index1:f}=d[x];um.fromBufferAttribute(i,p),cm.fromBufferAttribute(i,f),v.push(um.x,um.y,um.z),v.push(cm.x,cm.y,cm.z)}this.setAttribute("position",new zt(v,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Xl extends $h{constructor(t){super(t),this.uuid=Qi(),this.type="Shape",this.holes=[]}getPointsHoles(t){const n=[];for(let s=0,o=this.holes.length;s<o;s++)n[s]=this.holes[s].getPoints(t);return n}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let n=0,s=t.holes.length;n<s;n++){const o=t.holes[n];this.holes.push(o.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let n=0,s=this.holes.length;n<s;n++){const o=this.holes[n];t.holes.push(o.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let n=0,s=t.holes.length;n<s;n++){const o=t.holes[n];this.holes.push(new $h().fromJSON(o))}return this}}const xV={triangulate:function(r,t,n=2){const s=t&&t.length,o=s?t[0]*n:r.length;let a=lj(r,0,o,n,!0);const y=[];if(!a||a.next===a.prev)return y;let i,_,g,h,l,d,v;if(s&&(a=EV(r,t,a,n)),r.length>80*n){i=g=r[0],_=h=r[1];for(let x=n;x<o;x+=n)l=r[x],d=r[x+1],l<i&&(i=l),d<_&&(_=d),l>g&&(g=l),d>h&&(h=d);v=Math.max(g-i,h-_),v=v!==0?32767/v:0}return ef(a,y,n,i,_,v,0),y}};function lj(r,t,n,s,o){let a,y;if(o===DV(r,t,n,s)>0)for(a=t;a<n;a+=s)y=$E(a,r[a],r[a+1],y);else for(a=n-s;a>=t;a-=s)y=$E(a,r[a],r[a+1],y);return y&&yg(y,y.next)&&(nf(y),y=y.next),y}function eu(r,t){if(!r)return r;t||(t=r);let n=r,s;do if(s=!1,!n.steiner&&(yg(n,n.next)||sr(n.prev,n,n.next)===0)){if(nf(n),n=t=n.prev,n===n.next)break;s=!0}else n=n.next;while(s||n!==t);return t}function ef(r,t,n,s,o,a,y){if(!r)return;!y&&a&&RV(r,s,o,a);let i=r,_,g;for(;r.prev!==r.next;){if(_=r.prev,g=r.next,a?wV(r,s,o,a):bV(r)){t.push(_.i/n|0),t.push(r.i/n|0),t.push(g.i/n|0),nf(r),r=g.next,i=g.next;continue}if(r=g,r===i){y?y===1?(r=SV(eu(r),t,n),ef(r,t,n,s,o,a,2)):y===2&&MV(r,t,n,s,o,a):ef(eu(r),t,n,s,o,a,1);break}}}function bV(r){const t=r.prev,n=r,s=r.next;if(sr(t,n,s)>=0)return!1;const o=t.x,a=n.x,y=s.x,i=t.y,_=n.y,g=s.y,h=o<a?o<y?o:y:a<y?a:y,l=i<_?i<g?i:g:_<g?_:g,d=o>a?o>y?o:y:a>y?a:y,v=i>_?i>g?i:g:_>g?_:g;let x=s.next;for(;x!==t;){if(x.x>=h&&x.x<=d&&x.y>=l&&x.y<=v&&bc(o,i,a,_,y,g,x.x,x.y)&&sr(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function wV(r,t,n,s){const o=r.prev,a=r,y=r.next;if(sr(o,a,y)>=0)return!1;const i=o.x,_=a.x,g=y.x,h=o.y,l=a.y,d=y.y,v=i<_?i<g?i:g:_<g?_:g,x=h<l?h<d?h:d:l<d?l:d,p=i>_?i>g?i:g:_>g?_:g,f=h>l?h>d?h:d:l>d?l:d,u=N_(v,x,t,n,s),c=N_(p,f,t,n,s);let m=r.prevZ,b=r.nextZ;for(;m&&m.z>=u&&b&&b.z<=c;){if(m.x>=v&&m.x<=p&&m.y>=x&&m.y<=f&&m!==o&&m!==y&&bc(i,h,_,l,g,d,m.x,m.y)&&sr(m.prev,m,m.next)>=0||(m=m.prevZ,b.x>=v&&b.x<=p&&b.y>=x&&b.y<=f&&b!==o&&b!==y&&bc(i,h,_,l,g,d,b.x,b.y)&&sr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;m&&m.z>=u;){if(m.x>=v&&m.x<=p&&m.y>=x&&m.y<=f&&m!==o&&m!==y&&bc(i,h,_,l,g,d,m.x,m.y)&&sr(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;b&&b.z<=c;){if(b.x>=v&&b.x<=p&&b.y>=x&&b.y<=f&&b!==o&&b!==y&&bc(i,h,_,l,g,d,b.x,b.y)&&sr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function SV(r,t,n){let s=r;do{const o=s.prev,a=s.next.next;!yg(o,a)&&uj(o,s,s.next,a)&&tf(o,a)&&tf(a,o)&&(t.push(o.i/n|0),t.push(s.i/n|0),t.push(a.i/n|0),nf(s),nf(s.next),s=r=a),s=s.next}while(s!==r);return eu(s)}function MV(r,t,n,s,o,a){let y=r;do{let i=y.next.next;for(;i!==y.prev;){if(y.i!==i.i&&kV(y,i)){let _=cj(y,i);y=eu(y,y.next),_=eu(_,_.next),ef(y,t,n,s,o,a,0),ef(_,t,n,s,o,a,0);return}i=i.next}y=y.next}while(y!==r)}function EV(r,t,n,s){const o=[];let a,y,i,_,g;for(a=0,y=t.length;a<y;a++)i=t[a]*s,_=a<y-1?t[a+1]*s:r.length,g=lj(r,i,_,s,!1),g===g.next&&(g.steiner=!0),o.push(LV(g));for(o.sort(TV),a=0;a<o.length;a++)n=AV(o[a],n);return n}function TV(r,t){return r.x-t.x}function AV(r,t){const n=CV(r,t);if(!n)return t;const s=cj(n,r);return eu(s,s.next),eu(n,n.next)}function CV(r,t){let n=t,s=-1/0,o;const a=r.x,y=r.y;do{if(y<=n.y&&y>=n.next.y&&n.next.y!==n.y){const d=n.x+(y-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=a&&d>s&&(s=d,o=n.x<n.next.x?n:n.next,d===a))return o}n=n.next}while(n!==t);if(!o)return null;const i=o,_=o.x,g=o.y;let h=1/0,l;n=o;do a>=n.x&&n.x>=_&&a!==n.x&&bc(y<g?a:s,y,_,g,y<g?s:a,y,n.x,n.y)&&(l=Math.abs(y-n.y)/(a-n.x),tf(n,r)&&(l<h||l===h&&(n.x>o.x||n.x===o.x&&PV(o,n)))&&(o=n,h=l)),n=n.next;while(n!==i);return o}function PV(r,t){return sr(r.prev,r,t.prev)<0&&sr(t.next,r,r.next)<0}function RV(r,t,n,s){let o=r;do o.z===0&&(o.z=N_(o.x,o.y,t,n,s)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,jV(o)}function jV(r){let t,n,s,o,a,y,i,_,g=1;do{for(n=r,r=null,a=null,y=0;n;){for(y++,s=n,i=0,t=0;t<g&&(i++,s=s.nextZ,!!s);t++);for(_=g;i>0||_>0&&s;)i!==0&&(_===0||!s||n.z<=s.z)?(o=n,n=n.nextZ,i--):(o=s,s=s.nextZ,_--),a?a.nextZ=o:r=o,o.prevZ=a,a=o;n=s}a.nextZ=null,g*=2}while(y>1);return r}function N_(r,t,n,s,o){return r=(r-n)*o|0,t=(t-s)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function LV(r){let t=r,n=r;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==r);return n}function bc(r,t,n,s,o,a,y,i){return(o-y)*(t-i)>=(r-y)*(a-i)&&(r-y)*(s-i)>=(n-y)*(t-i)&&(n-y)*(a-i)>=(o-y)*(s-i)}function kV(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!IV(r,t)&&(tf(r,t)&&tf(t,r)&&OV(r,t)&&(sr(r.prev,r,t.prev)||sr(r,t.prev,t))||yg(r,t)&&sr(r.prev,r,r.next)>0&&sr(t.prev,t,t.next)>0)}function sr(r,t,n){return(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y)}function yg(r,t){return r.x===t.x&&r.y===t.y}function uj(r,t,n,s){const o=fm(sr(r,t,n)),a=fm(sr(r,t,s)),y=fm(sr(n,s,r)),i=fm(sr(n,s,t));return!!(o!==a&&y!==i||o===0&&hm(r,n,t)||a===0&&hm(r,s,t)||y===0&&hm(n,r,s)||i===0&&hm(n,t,s))}function hm(r,t,n){return t.x<=Math.max(r.x,n.x)&&t.x>=Math.min(r.x,n.x)&&t.y<=Math.max(r.y,n.y)&&t.y>=Math.min(r.y,n.y)}function fm(r){return r>0?1:r<0?-1:0}function IV(r,t){let n=r;do{if(n.i!==r.i&&n.next.i!==r.i&&n.i!==t.i&&n.next.i!==t.i&&uj(n,n.next,r,t))return!0;n=n.next}while(n!==r);return!1}function tf(r,t){return sr(r.prev,r,r.next)<0?sr(r,t,r.next)>=0&&sr(r,r.prev,t)>=0:sr(r,t,r.prev)<0||sr(r,r.next,t)<0}function OV(r,t){let n=r,s=!1;const o=(r.x+t.x)/2,a=(r.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&o<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(s=!s),n=n.next;while(n!==r);return s}function cj(r,t){const n=new U_(r.i,r.x,r.y),s=new U_(t.i,t.x,t.y),o=r.next,a=t.prev;return r.next=t,t.prev=r,n.next=o,o.prev=n,s.next=n,n.prev=s,a.next=s,s.prev=a,s}function $E(r,t,n,s){const o=new U_(r,t,n);return s?(o.next=s.next,o.prev=s,s.next.prev=o,s.next=o):(o.prev=o,o.next=o),o}function nf(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function U_(r,t,n){this.i=r,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function DV(r,t,n,s){let o=0;for(let a=t,y=n-s;a<n;a+=s)o+=(r[y]-r[a])*(r[a+1]+r[y+1]),y=a;return o}class uo{static area(t){const n=t.length;let s=0;for(let o=n-1,a=0;a<n;o=a++)s+=t[o].x*t[a].y-t[a].x*t[o].y;return s*.5}static isClockWise(t){return uo.area(t)<0}static triangulateShape(t,n){const s=[],o=[],a=[];eT(t),tT(s,t);let y=t.length;n.forEach(eT);for(let _=0;_<n.length;_++)o.push(y),y+=n[_].length,tT(s,n[_]);const i=xV.triangulate(s,o);for(let _=0;_<i.length;_+=3)a.push(i.slice(_,_+3));return a}}function eT(r){const t=r.length;t>2&&r[t-1].equals(r[0])&&r.pop()}function tT(r,t){for(let n=0;n<t.length;n++)r.push(t[n].x),r.push(t[n].y)}class gg extends ln{constructor(t=new Xl([new mt(.5,.5),new mt(-.5,.5),new mt(-.5,-.5),new mt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const s=this,o=[],a=[];for(let i=0,_=t.length;i<_;i++){const g=t[i];y(g)}this.setAttribute("position",new zt(o,3)),this.setAttribute("uv",new zt(a,2)),this.computeVertexNormals();function y(i){const _=[],g=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,l=n.depth!==void 0?n.depth:1;let d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,v=n.bevelThickness!==void 0?n.bevelThickness:.2,x=n.bevelSize!==void 0?n.bevelSize:v-.1,p=n.bevelOffset!==void 0?n.bevelOffset:0,f=n.bevelSegments!==void 0?n.bevelSegments:3;const u=n.extrudePath,c=n.UVGenerator!==void 0?n.UVGenerator:NV;let m,b=!1,S,w,M,A;u&&(m=u.getSpacedPoints(h),b=!0,d=!1,S=u.computeFrenetFrames(h,!1),w=new Re,M=new Re,A=new Re),d||(f=0,v=0,x=0,p=0);const P=i.extractPoints(g);let R=P.shape;const k=P.holes;if(!uo.isClockWise(R)){R=R.reverse();for(let $=0,re=k.length;$<re;$++){const de=k[$];uo.isClockWise(de)&&(k[$]=de.reverse())}}const B=uo.triangulateShape(R,k),I=R;for(let $=0,re=k.length;$<re;$++){const de=k[$];R=R.concat(de)}function F($,re,de){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().addScaledVector(re,de)}const z=R.length,G=B.length;function N($,re,de){let ge,ve,we;const Se=$.x-re.x,ae=$.y-re.y,oe=de.x-$.x,Ee=de.y-$.y,Oe=Se*Se+ae*ae,ze=Se*Ee-ae*oe;if(Math.abs(ze)>Number.EPSILON){const Be=Math.sqrt(Oe),dt=Math.sqrt(oe*oe+Ee*Ee),Je=re.x-ae/Be,_e=re.y+Se/Be,Ue=de.x-Ee/dt,Fe=de.y+oe/dt,Ne=((Ue-Je)*Ee-(Fe-_e)*oe)/(Se*Ee-ae*oe);ge=Je+Se*Ne-$.x,ve=_e+ae*Ne-$.y;const ft=ge*ge+ve*ve;if(ft<=2)return new mt(ge,ve);we=Math.sqrt(ft/2)}else{let Be=!1;Se>Number.EPSILON?oe>Number.EPSILON&&(Be=!0):Se<-Number.EPSILON?oe<-Number.EPSILON&&(Be=!0):Math.sign(ae)===Math.sign(Ee)&&(Be=!0),Be?(ge=-ae,ve=Se,we=Math.sqrt(Oe)):(ge=Se,ve=ae,we=Math.sqrt(Oe/2))}return new mt(ge/we,ve/we)}const O=[];for(let $=0,re=I.length,de=re-1,ge=$+1;$<re;$++,de++,ge++)de===re&&(de=0),ge===re&&(ge=0),O[$]=N(I[$],I[de],I[ge]);const H=[];let q,K=O.concat();for(let $=0,re=k.length;$<re;$++){const de=k[$];q=[];for(let ge=0,ve=de.length,we=ve-1,Se=ge+1;ge<ve;ge++,we++,Se++)we===ve&&(we=0),Se===ve&&(Se=0),q[ge]=N(de[ge],de[we],de[Se]);H.push(q),K=K.concat(q)}for(let $=0;$<f;$++){const re=$/f,de=v*Math.cos(re*Math.PI/2),ge=x*Math.sin(re*Math.PI/2)+p;for(let ve=0,we=I.length;ve<we;ve++){const Se=F(I[ve],O[ve],ge);X(Se.x,Se.y,-de)}for(let ve=0,we=k.length;ve<we;ve++){const Se=k[ve];q=H[ve];for(let ae=0,oe=Se.length;ae<oe;ae++){const Ee=F(Se[ae],q[ae],ge);X(Ee.x,Ee.y,-de)}}}const ne=x+p;for(let $=0;$<z;$++){const re=d?F(R[$],K[$],ne):R[$];b?(M.copy(S.normals[0]).multiplyScalar(re.x),w.copy(S.binormals[0]).multiplyScalar(re.y),A.copy(m[0]).add(M).add(w),X(A.x,A.y,A.z)):X(re.x,re.y,0)}for(let $=1;$<=h;$++)for(let re=0;re<z;re++){const de=d?F(R[re],K[re],ne):R[re];b?(M.copy(S.normals[$]).multiplyScalar(de.x),w.copy(S.binormals[$]).multiplyScalar(de.y),A.copy(m[$]).add(M).add(w),X(A.x,A.y,A.z)):X(de.x,de.y,l/h*$)}for(let $=f-1;$>=0;$--){const re=$/f,de=v*Math.cos(re*Math.PI/2),ge=x*Math.sin(re*Math.PI/2)+p;for(let ve=0,we=I.length;ve<we;ve++){const Se=F(I[ve],O[ve],ge);X(Se.x,Se.y,l+de)}for(let ve=0,we=k.length;ve<we;ve++){const Se=k[ve];q=H[ve];for(let ae=0,oe=Se.length;ae<oe;ae++){const Ee=F(Se[ae],q[ae],ge);b?X(Ee.x,Ee.y+m[h-1].y,m[h-1].x+de):X(Ee.x,Ee.y,l+de)}}}ee(),se();function ee(){const $=o.length/3;if(d){let re=0,de=z*re;for(let ge=0;ge<G;ge++){const ve=B[ge];Z(ve[2]+de,ve[1]+de,ve[0]+de)}re=h+f*2,de=z*re;for(let ge=0;ge<G;ge++){const ve=B[ge];Z(ve[0]+de,ve[1]+de,ve[2]+de)}}else{for(let re=0;re<G;re++){const de=B[re];Z(de[2],de[1],de[0])}for(let re=0;re<G;re++){const de=B[re];Z(de[0]+z*h,de[1]+z*h,de[2]+z*h)}}s.addGroup($,o.length/3-$,0)}function se(){const $=o.length/3;let re=0;me(I,re),re+=I.length;for(let de=0,ge=k.length;de<ge;de++){const ve=k[de];me(ve,re),re+=ve.length}s.addGroup($,o.length/3-$,1)}function me($,re){let de=$.length;for(;--de>=0;){const ge=de;let ve=de-1;ve<0&&(ve=$.length-1);for(let we=0,Se=h+f*2;we<Se;we++){const ae=z*we,oe=z*(we+1),Ee=re+ge+ae,Oe=re+ve+ae,ze=re+ve+oe,Be=re+ge+oe;ie(Ee,Oe,ze,Be)}}}function X($,re,de){_.push($),_.push(re),_.push(de)}function Z($,re,de){ye($),ye(re),ye(de);const ge=o.length/3,ve=c.generateTopUV(s,o,ge-3,ge-2,ge-1);fe(ve[0]),fe(ve[1]),fe(ve[2])}function ie($,re,de,ge){ye($),ye(re),ye(ge),ye(re),ye(de),ye(ge);const ve=o.length/3,we=c.generateSideWallUV(s,o,ve-6,ve-3,ve-2,ve-1);fe(we[0]),fe(we[1]),fe(we[3]),fe(we[1]),fe(we[2]),fe(we[3])}function ye($){o.push(_[$*3+0]),o.push(_[$*3+1]),o.push(_[$*3+2])}function fe($){a.push($.x),a.push($.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes,s=this.parameters.options;return UV(n,s,t)}static fromJSON(t,n){const s=[];for(let a=0,y=t.shapes.length;a<y;a++){const i=n[t.shapes[a]];s.push(i)}const o=t.options.extrudePath;return o!==void 0&&(t.options.extrudePath=new Cy[o.type]().fromJSON(o)),new gg(s,t.options)}}const NV={generateTopUV:function(r,t,n,s,o){const a=t[n*3],y=t[n*3+1],i=t[s*3],_=t[s*3+1],g=t[o*3],h=t[o*3+1];return[new mt(a,y),new mt(i,_),new mt(g,h)]},generateSideWallUV:function(r,t,n,s,o,a){const y=t[n*3],i=t[n*3+1],_=t[n*3+2],g=t[s*3],h=t[s*3+1],l=t[s*3+2],d=t[o*3],v=t[o*3+1],x=t[o*3+2],p=t[a*3],f=t[a*3+1],u=t[a*3+2];return Math.abs(i-h)<Math.abs(y-g)?[new mt(y,1-_),new mt(g,1-l),new mt(d,1-x),new mt(p,1-u)]:[new mt(i,1-_),new mt(h,1-l),new mt(v,1-x),new mt(f,1-u)]}};function UV(r,t,n){if(n.shapes=[],Array.isArray(r))for(let s=0,o=r.length;s<o;s++){const a=r[s];n.shapes.push(a.uuid)}else n.shapes.push(r.uuid);return n.options=Object.assign({},t),t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class vg extends Xa{constructor(t=1,n=0){const s=(1+Math.sqrt(5))/2,o=[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,a,t,n),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new vg(t.radius,t.detail)}}class Ef extends Xa{constructor(t=1,n=0){const s=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(s,o,t,n),this.type="OctahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new Ef(t.radius,t.detail)}}class _g extends ln{constructor(t=.5,n=1,s=32,o=1,a=0,y=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:n,thetaSegments:s,phiSegments:o,thetaStart:a,thetaLength:y},s=Math.max(3,s),o=Math.max(1,o);const i=[],_=[],g=[],h=[];let l=t;const d=(n-t)/o,v=new Re,x=new mt;for(let p=0;p<=o;p++){for(let f=0;f<=s;f++){const u=a+f/s*y;v.x=l*Math.cos(u),v.y=l*Math.sin(u),_.push(v.x,v.y,v.z),g.push(0,0,1),x.x=(v.x/n+1)/2,x.y=(v.y/n+1)/2,h.push(x.x,x.y)}l+=d}for(let p=0;p<o;p++){const f=p*(s+1);for(let u=0;u<s;u++){const c=u+f,m=c,b=c+s+1,S=c+s+2,w=c+1;i.push(m,b,w),i.push(b,S,w)}}this.setIndex(i),this.setAttribute("position",new zt(_,3)),this.setAttribute("normal",new zt(g,3)),this.setAttribute("uv",new zt(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _g(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class xg extends ln{constructor(t=new Xl([new mt(0,.5),new mt(-.5,-.5),new mt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:n};const s=[],o=[],a=[],y=[];let i=0,_=0;if(Array.isArray(t)===!1)g(t);else for(let h=0;h<t.length;h++)g(t[h]),this.addGroup(i,_,h),i+=_,_=0;this.setIndex(s),this.setAttribute("position",new zt(o,3)),this.setAttribute("normal",new zt(a,3)),this.setAttribute("uv",new zt(y,2));function g(h){const l=o.length/3,d=h.extractPoints(n);let v=d.shape;const x=d.holes;uo.isClockWise(v)===!1&&(v=v.reverse());for(let f=0,u=x.length;f<u;f++){const c=x[f];uo.isClockWise(c)===!0&&(x[f]=c.reverse())}const p=uo.triangulateShape(v,x);for(let f=0,u=x.length;f<u;f++){const c=x[f];v=v.concat(c)}for(let f=0,u=v.length;f<u;f++){const c=v[f];o.push(c.x,c.y,0),a.push(0,0,1),y.push(c.x,c.y)}for(let f=0,u=p.length;f<u;f++){const c=p[f],m=c[0]+l,b=c[1]+l,S=c[2]+l;s.push(m,b,S),_+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),n=this.parameters.shapes;return FV(n,t)}static fromJSON(t,n){const s=[];for(let o=0,a=t.shapes.length;o<a;o++){const y=n[t.shapes[o]];s.push(y)}return new xg(s,t.curveSegments)}}function FV(r,t){if(t.shapes=[],Array.isArray(r))for(let n=0,s=r.length;n<s;n++){const o=r[n];t.shapes.push(o.uuid)}else t.shapes.push(r.uuid);return t}class Tf extends ln{constructor(t=1,n=32,s=16,o=0,a=Math.PI*2,y=0,i=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:s,phiStart:o,phiLength:a,thetaStart:y,thetaLength:i},n=Math.max(3,Math.floor(n)),s=Math.max(2,Math.floor(s));const _=Math.min(y+i,Math.PI);let g=0;const h=[],l=new Re,d=new Re,v=[],x=[],p=[],f=[];for(let u=0;u<=s;u++){const c=[],m=u/s;let b=0;u===0&&y===0?b=.5/n:u===s&&_===Math.PI&&(b=-.5/n);for(let S=0;S<=n;S++){const w=S/n;l.x=-t*Math.cos(o+w*a)*Math.sin(y+m*i),l.y=t*Math.cos(y+m*i),l.z=t*Math.sin(o+w*a)*Math.sin(y+m*i),x.push(l.x,l.y,l.z),d.copy(l).normalize(),p.push(d.x,d.y,d.z),f.push(w+b,1-m),c.push(g++)}h.push(c)}for(let u=0;u<s;u++)for(let c=0;c<n;c++){const m=h[u][c+1],b=h[u][c],S=h[u+1][c],w=h[u+1][c+1];(u!==0||y>0)&&v.push(m,b,w),(u!==s-1||_<Math.PI)&&v.push(b,S,w)}this.setIndex(v),this.setAttribute("position",new zt(x,3)),this.setAttribute("normal",new zt(p,3)),this.setAttribute("uv",new zt(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Tf(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class bg extends Xa{constructor(t=1,n=0){const s=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(s,o,t,n),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:n}}static fromJSON(t){return new bg(t.radius,t.detail)}}class wg extends ln{constructor(t=1,n=.4,s=12,o=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:n,radialSegments:s,tubularSegments:o,arc:a},s=Math.floor(s),o=Math.floor(o);const y=[],i=[],_=[],g=[],h=new Re,l=new Re,d=new Re;for(let v=0;v<=s;v++)for(let x=0;x<=o;x++){const p=x/o*a,f=v/s*Math.PI*2;l.x=(t+n*Math.cos(f))*Math.cos(p),l.y=(t+n*Math.cos(f))*Math.sin(p),l.z=n*Math.sin(f),i.push(l.x,l.y,l.z),h.x=t*Math.cos(p),h.y=t*Math.sin(p),d.subVectors(l,h).normalize(),_.push(d.x,d.y,d.z),g.push(x/o),g.push(v/s)}for(let v=1;v<=s;v++)for(let x=1;x<=o;x++){const p=(o+1)*v+x-1,f=(o+1)*(v-1)+x-1,u=(o+1)*(v-1)+x,c=(o+1)*v+x;y.push(p,f,c),y.push(f,u,c)}this.setIndex(y),this.setAttribute("position",new zt(i,3)),this.setAttribute("normal",new zt(_,3)),this.setAttribute("uv",new zt(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new wg(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Sg extends ln{constructor(t=1,n=.4,s=64,o=8,a=2,y=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:n,tubularSegments:s,radialSegments:o,p:a,q:y},s=Math.floor(s),o=Math.floor(o);const i=[],_=[],g=[],h=[],l=new Re,d=new Re,v=new Re,x=new Re,p=new Re,f=new Re,u=new Re;for(let m=0;m<=s;++m){const b=m/s*a*Math.PI*2;c(b,a,y,t,v),c(b+.01,a,y,t,x),f.subVectors(x,v),u.addVectors(x,v),p.crossVectors(f,u),u.crossVectors(p,f),p.normalize(),u.normalize();for(let S=0;S<=o;++S){const w=S/o*Math.PI*2,M=-n*Math.cos(w),A=n*Math.sin(w);l.x=v.x+(M*u.x+A*p.x),l.y=v.y+(M*u.y+A*p.y),l.z=v.z+(M*u.z+A*p.z),_.push(l.x,l.y,l.z),d.subVectors(l,v).normalize(),g.push(d.x,d.y,d.z),h.push(m/s),h.push(S/o)}}for(let m=1;m<=s;m++)for(let b=1;b<=o;b++){const S=(o+1)*(m-1)+(b-1),w=(o+1)*m+(b-1),M=(o+1)*m+b,A=(o+1)*(m-1)+b;i.push(S,w,A),i.push(w,M,A)}this.setIndex(i),this.setAttribute("position",new zt(_,3)),this.setAttribute("normal",new zt(g,3)),this.setAttribute("uv",new zt(h,2));function c(m,b,S,w,M){const A=Math.cos(m),P=Math.sin(m),R=S/b*m,k=Math.cos(R);M.x=w*(2+k)*.5*A,M.y=w*(2+k)*P*.5,M.z=w*Math.sin(R)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Sg(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Mg extends ln{constructor(t=new Yb(new Re(-1,-1,0),new Re(-1,1,0),new Re(1,1,0)),n=64,s=1,o=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:n,radius:s,radialSegments:o,closed:a};const y=t.computeFrenetFrames(n,a);this.tangents=y.tangents,this.normals=y.normals,this.binormals=y.binormals;const i=new Re,_=new Re,g=new mt;let h=new Re;const l=[],d=[],v=[],x=[];p(),this.setIndex(x),this.setAttribute("position",new zt(l,3)),this.setAttribute("normal",new zt(d,3)),this.setAttribute("uv",new zt(v,2));function p(){for(let m=0;m<n;m++)f(m);f(a===!1?n:0),c(),u()}function f(m){h=t.getPointAt(m/n,h);const b=y.normals[m],S=y.binormals[m];for(let w=0;w<=o;w++){const M=w/o*Math.PI*2,A=Math.sin(M),P=-Math.cos(M);_.x=P*b.x+A*S.x,_.y=P*b.y+A*S.y,_.z=P*b.z+A*S.z,_.normalize(),d.push(_.x,_.y,_.z),i.x=h.x+s*_.x,i.y=h.y+s*_.y,i.z=h.z+s*_.z,l.push(i.x,i.y,i.z)}}function u(){for(let m=1;m<=n;m++)for(let b=1;b<=o;b++){const S=(o+1)*(m-1)+(b-1),w=(o+1)*m+(b-1),M=(o+1)*m+b,A=(o+1)*(m-1)+b;x.push(S,w,A),x.push(w,M,A)}}function c(){for(let m=0;m<=n;m++)for(let b=0;b<=o;b++)g.x=m/n,g.y=b/o,v.push(g.x,g.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Mg(new Cy[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class dj extends ln{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const n=[],s=new Set,o=new Re,a=new Re;if(t.index!==null){const y=t.attributes.position,i=t.index;let _=t.groups;_.length===0&&(_=[{start:0,count:i.count,materialIndex:0}]);for(let g=0,h=_.length;g<h;++g){const l=_[g],d=l.start,v=l.count;for(let x=d,p=d+v;x<p;x+=3)for(let f=0;f<3;f++){const u=i.getX(x+f),c=i.getX(x+(f+1)%3);o.fromBufferAttribute(y,u),a.fromBufferAttribute(y,c),nT(o,a,s)===!0&&(n.push(o.x,o.y,o.z),n.push(a.x,a.y,a.z))}}}else{const y=t.attributes.position;for(let i=0,_=y.count/3;i<_;i++)for(let g=0;g<3;g++){const h=3*i+g,l=3*i+(g+1)%3;o.fromBufferAttribute(y,h),a.fromBufferAttribute(y,l),nT(o,a,s)===!0&&(n.push(o.x,o.y,o.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new zt(n,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function nT(r,t,n){const s=`${r.x},${r.y},${r.z}-${t.x},${t.y},${t.z}`,o=`${t.x},${t.y},${t.z}-${r.x},${r.y},${r.z}`;return n.has(s)===!0||n.has(o)===!0?!1:(n.add(s),n.add(o),!0)}var rT=Object.freeze({__proto__:null,BoxGeometry:su,CapsuleGeometry:hg,CircleGeometry:fg,ConeGeometry:pg,CylinderGeometry:ed,DodecahedronGeometry:mg,EdgesGeometry:aj,ExtrudeGeometry:gg,IcosahedronGeometry:vg,LatheGeometry:Mf,OctahedronGeometry:Ef,PlaneGeometry:Qc,PolyhedronGeometry:Xa,RingGeometry:_g,ShapeGeometry:xg,SphereGeometry:Tf,TetrahedronGeometry:bg,TorusGeometry:wg,TorusKnotGeometry:Sg,TubeGeometry:Mg,WireframeGeometry:dj});class hj extends ci{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ot(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class fj extends Ws{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Kb extends ci{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class pj extends Kb{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ot(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ot(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ot(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class mj extends ci{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ot(16777215),this.specular=new Ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class yj extends ci{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ot(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class gj extends ci{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class vj extends ci{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=gf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _j extends ci{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ot(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class xj extends Mi{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function Nl(r,t,n){return!r||!n&&r.constructor===t?r:typeof t.BYTES_PER_ELEMENT=="number"?new t(r):Array.prototype.slice.call(r)}function bj(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function wj(r){function t(o,a){return r[o]-r[a]}const n=r.length,s=new Array(n);for(let o=0;o!==n;++o)s[o]=o;return s.sort(t),s}function F_(r,t,n){const s=r.length,o=new r.constructor(s);for(let a=0,y=0;y!==s;++a){const i=n[a]*t;for(let _=0;_!==t;++_)o[y++]=r[i+_]}return o}function Jb(r,t,n,s){let o=1,a=r[0];for(;a!==void 0&&a[s]===void 0;)a=r[o++];if(a===void 0)return;let y=a[s];if(y!==void 0)if(Array.isArray(y))do y=a[s],y!==void 0&&(t.push(a.time),n.push.apply(n,y)),a=r[o++];while(a!==void 0);else if(y.toArray!==void 0)do y=a[s],y!==void 0&&(t.push(a.time),y.toArray(n,n.length)),a=r[o++];while(a!==void 0);else do y=a[s],y!==void 0&&(t.push(a.time),n.push(y)),a=r[o++];while(a!==void 0)}function BV(r,t,n,s,o=30){const a=r.clone();a.name=t;const y=[];for(let _=0;_<a.tracks.length;++_){const g=a.tracks[_],h=g.getValueSize(),l=[],d=[];for(let v=0;v<g.times.length;++v){const x=g.times[v]*o;if(!(x<n||x>=s)){l.push(g.times[v]);for(let p=0;p<h;++p)d.push(g.values[v*h+p])}}l.length!==0&&(g.times=Nl(l,g.times.constructor),g.values=Nl(d,g.values.constructor),y.push(g))}a.tracks=y;let i=1/0;for(let _=0;_<a.tracks.length;++_)i>a.tracks[_].times[0]&&(i=a.tracks[_].times[0]);for(let _=0;_<a.tracks.length;++_)a.tracks[_].shift(-1*i);return a.resetDuration(),a}function zV(r,t=0,n=r,s=30){s<=0&&(s=30);const o=n.tracks.length,a=t/s;for(let y=0;y<o;++y){const i=n.tracks[y],_=i.ValueTypeName;if(_==="bool"||_==="string")continue;const g=r.tracks.find(function(u){return u.name===i.name&&u.ValueTypeName===_});if(g===void 0)continue;let h=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=l/3);let d=0;const v=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=v/3);const x=i.times.length-1;let p;if(a<=i.times[0]){const u=h,c=l-h;p=i.values.slice(u,c)}else if(a>=i.times[x]){const u=x*l+h,c=u+l-h;p=i.values.slice(u,c)}else{const u=i.createInterpolant(),c=h,m=l-h;u.evaluate(a),p=u.resultBuffer.slice(c,m)}_==="quaternion"&&new Di().fromArray(p).normalize().conjugate().toArray(p);const f=g.times.length;for(let u=0;u<f;++u){const c=u*v+d;if(_==="quaternion")Di.multiplyQuaternionsFlat(g.values,c,p,0,g.values,c);else{const m=v-d*2;for(let b=0;b<m;++b)g.values[c+b]-=p[b]}}}return r.blendMode=Ab,r}const VV={convertArray:Nl,isTypedArray:bj,getKeyframeOrder:wj,sortedArray:F_,flattenJSON:Jb,subclip:BV,makeClipAdditive:zV};class Af{constructor(t,n,s,o){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new n.constructor(s),this.sampleValues=n,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let s=this._cachedIndex,o=n[s],a=n[s-1];e:{t:{let y;n:{r:if(!(t<o)){for(let i=s+2;;){if(o===void 0){if(t<a)break r;return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===i)break;if(a=o,o=n[++s],t<o)break t}y=n.length;break n}if(!(t>=a)){const i=n[1];t<i&&(s=2,a=i);for(let _=s-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===_)break;if(o=a,a=n[--s-1],t>=a)break t}y=s,s=0;break n}break e}for(;s<y;){const i=s+y>>>1;t<n[i]?y=i:s=i+1}if(o=n[s],a=n[s-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return s=n.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,a,o)}return this.interpolate_(s,a,t,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o;for(let y=0;y!==o;++y)n[y]=s[a+y];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Sj extends Af{constructor(t,n,s,o){super(t,n,s,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Il,endingEnd:Il}}intervalChanged_(t,n,s){const o=this.parameterPositions;let a=t-2,y=t+1,i=o[a],_=o[y];if(i===void 0)switch(this.getSettings_().endingStart){case Ol:a=t,i=2*n-s;break;case Xh:a=o.length-2,i=n+o[a]-o[a+1];break;default:a=t,i=s}if(_===void 0)switch(this.getSettings_().endingEnd){case Ol:y=t,_=2*s-n;break;case Xh:y=1,_=s+o[1]-o[0];break;default:y=t-1,_=n}const g=(s-n)*.5,h=this.valueSize;this._weightPrev=g/(n-i),this._weightNext=g/(_-s),this._offsetPrev=a*h,this._offsetNext=y*h}interpolate_(t,n,s,o){const a=this.resultBuffer,y=this.sampleValues,i=this.valueSize,_=t*i,g=_-i,h=this._offsetPrev,l=this._offsetNext,d=this._weightPrev,v=this._weightNext,x=(s-n)/(o-n),p=x*x,f=p*x,u=-d*f+2*d*p-d*x,c=(1+d)*f+(-1.5-2*d)*p+(-.5+d)*x+1,m=(-1-v)*f+(1.5+v)*p+.5*x,b=v*f-v*p;for(let S=0;S!==i;++S)a[S]=u*y[h+S]+c*y[g+S]+m*y[_+S]+b*y[l+S];return a}}class Qb extends Af{constructor(t,n,s,o){super(t,n,s,o)}interpolate_(t,n,s,o){const a=this.resultBuffer,y=this.sampleValues,i=this.valueSize,_=t*i,g=_-i,h=(s-n)/(o-n),l=1-h;for(let d=0;d!==i;++d)a[d]=y[g+d]*l+y[_+d]*h;return a}}class Mj extends Af{constructor(t,n,s,o){super(t,n,s,o)}interpolate_(t){return this.copySampleValue_(t-1)}}class qs{constructor(t,n,s,o){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Nl(n,this.TimeBufferType),this.values=Nl(s,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let s;if(n.toJSON!==this.toJSON)s=n.toJSON(t);else{s={name:t.name,times:Nl(t.times,Array),values:Nl(t.values,Array)};const o=t.getInterpolation();o!==t.DefaultInterpolation&&(s.interpolation=o)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new Mj(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Qb(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Sj(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case Hh:n=this.InterpolantFactoryMethodDiscrete;break;case Wh:n=this.InterpolantFactoryMethodLinear;break;case Gm:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(s);return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Hh;case this.InterpolantFactoryMethodLinear:return Wh;case this.InterpolantFactoryMethodSmooth:return Gm}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const n=this.times;for(let s=0,o=n.length;s!==o;++s)n[s]+=t}return this}scale(t){if(t!==1){const n=this.times;for(let s=0,o=n.length;s!==o;++s)n[s]*=t}return this}trim(t,n){const s=this.times,o=s.length;let a=0,y=o-1;for(;a!==o&&s[a]<t;)++a;for(;y!==-1&&s[y]>n;)--y;if(++y,a!==0||y!==o){a>=y&&(y=Math.max(y,1),a=y-1);const i=this.getValueSize();this.times=s.slice(a,y),this.values=this.values.slice(a*i,y*i)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,o=this.values,a=s.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let y=null;for(let i=0;i!==a;i++){const _=s[i];if(typeof _=="number"&&isNaN(_)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,_),t=!1;break}if(y!==null&&y>_){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,_,y),t=!1;break}y=_}if(o!==void 0&&bj(o))for(let i=0,_=o.length;i!==_;++i){const g=o[i];if(isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,i,g),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),s=this.getValueSize(),o=this.getInterpolation()===Gm,a=t.length-1;let y=1;for(let i=1;i<a;++i){let _=!1;const g=t[i],h=t[i+1];if(g!==h&&(i!==1||g!==t[0]))if(o)_=!0;else{const l=i*s,d=l-s,v=l+s;for(let x=0;x!==s;++x){const p=n[l+x];if(p!==n[d+x]||p!==n[v+x]){_=!0;break}}}if(_){if(i!==y){t[y]=t[i];const l=i*s,d=y*s;for(let v=0;v!==s;++v)n[d+v]=n[l+v]}++y}}if(a>0){t[y]=t[a];for(let i=a*s,_=y*s,g=0;g!==s;++g)n[_+g]=n[i+g];++y}return y!==t.length?(this.times=t.slice(0,y),this.values=n.slice(0,y*s)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),s=this.constructor,o=new s(this.name,t,n);return o.createInterpolant=this.createInterpolant,o}}qs.prototype.TimeBufferType=Float32Array;qs.prototype.ValueBufferType=Float32Array;qs.prototype.DefaultInterpolation=Wh;class ou extends qs{}ou.prototype.ValueTypeName="bool";ou.prototype.ValueBufferType=Array;ou.prototype.DefaultInterpolation=Hh;ou.prototype.InterpolantFactoryMethodLinear=void 0;ou.prototype.InterpolantFactoryMethodSmooth=void 0;class $b extends qs{}$b.prototype.ValueTypeName="color";class rf extends qs{}rf.prototype.ValueTypeName="number";class Ej extends Af{constructor(t,n,s,o){super(t,n,s,o)}interpolate_(t,n,s,o){const a=this.resultBuffer,y=this.sampleValues,i=this.valueSize,_=(s-n)/(o-n);let g=t*i;for(let h=g+i;g!==h;g+=4)Di.slerpFlat(a,0,y,g-i,y,g,_);return a}}class td extends qs{InterpolantFactoryMethodLinear(t){return new Ej(this.times,this.values,this.getValueSize(),t)}}td.prototype.ValueTypeName="quaternion";td.prototype.DefaultInterpolation=Wh;td.prototype.InterpolantFactoryMethodSmooth=void 0;class au extends qs{}au.prototype.ValueTypeName="string";au.prototype.ValueBufferType=Array;au.prototype.DefaultInterpolation=Hh;au.prototype.InterpolantFactoryMethodLinear=void 0;au.prototype.InterpolantFactoryMethodSmooth=void 0;class sf extends qs{}sf.prototype.ValueTypeName="vector";class of{constructor(t,n=-1,s,o=ng){this.name=t,this.tracks=s,this.duration=n,this.blendMode=o,this.uuid=Qi(),this.duration<0&&this.resetDuration()}static parse(t){const n=[],s=t.tracks,o=1/(t.fps||1);for(let y=0,i=s.length;y!==i;++y)n.push(HV(s[y]).scale(o));const a=new this(t.name,t.duration,n,t.blendMode);return a.uuid=t.uuid,a}static toJSON(t){const n=[],s=t.tracks,o={name:t.name,duration:t.duration,tracks:n,uuid:t.uuid,blendMode:t.blendMode};for(let a=0,y=s.length;a!==y;++a)n.push(qs.toJSON(s[a]));return o}static CreateFromMorphTargetSequence(t,n,s,o){const a=n.length,y=[];for(let i=0;i<a;i++){let _=[],g=[];_.push((i+a-1)%a,i,(i+1)%a),g.push(0,1,0);const h=wj(_);_=F_(_,1,h),g=F_(g,1,h),!o&&_[0]===0&&(_.push(a),g.push(g[0])),y.push(new rf(".morphTargetInfluences["+n[i].name+"]",_,g).scale(1/s))}return new this(t,-1,y)}static findByName(t,n){let s=t;if(!Array.isArray(t)){const o=t;s=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<s.length;o++)if(s[o].name===n)return s[o];return null}static CreateClipsFromMorphTargetSequences(t,n,s){const o={},a=/^([\w-]*?)([\d]+)$/;for(let i=0,_=t.length;i<_;i++){const g=t[i],h=g.name.match(a);if(h&&h.length>1){const l=h[1];let d=o[l];d||(o[l]=d=[]),d.push(g)}}const y=[];for(const i in o)y.push(this.CreateFromMorphTargetSequence(i,o[i],n,s));return y}static parseAnimation(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(l,d,v,x,p){if(v.length!==0){const f=[],u=[];Jb(v,f,u,x),f.length!==0&&p.push(new l(d,f,u))}},o=[],a=t.name||"default",y=t.fps||30,i=t.blendMode;let _=t.length||-1;const g=t.hierarchy||[];for(let l=0;l<g.length;l++){const d=g[l].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const v={};let x;for(x=0;x<d.length;x++)if(d[x].morphTargets)for(let p=0;p<d[x].morphTargets.length;p++)v[d[x].morphTargets[p]]=-1;for(const p in v){const f=[],u=[];for(let c=0;c!==d[x].morphTargets.length;++c){const m=d[x];f.push(m.time),u.push(m.morphTarget===p?1:0)}o.push(new rf(".morphTargetInfluence["+p+"]",f,u))}_=v.length*y}else{const v=".bones["+n[l].name+"]";s(sf,v+".position",d,"pos",o),s(td,v+".quaternion",d,"rot",o),s(sf,v+".scale",d,"scl",o)}}return o.length===0?null:new this(a,_,o,i)}resetDuration(){const t=this.tracks;let n=0;for(let s=0,o=t.length;s!==o;++s){const a=this.tracks[s];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let n=0;n<this.tracks.length;n++)t=t&&this.tracks[n].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function GV(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rf;case"vector":case"vector2":case"vector3":case"vector4":return sf;case"color":return $b;case"quaternion":return td;case"bool":case"boolean":return ou;case"string":return au}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function HV(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=GV(r.type);if(r.times===void 0){const n=[],s=[];Jb(r.keys,n,s,"value"),r.times=n,r.values=s}return t.parse!==void 0?t.parse(r):new t(r.name,r.times,r.values,r.interpolation)}const Lo={enabled:!1,files:{},add:function(r,t){this.enabled!==!1&&(this.files[r]=t)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class ew{constructor(t,n,s){const o=this;let a=!1,y=0,i=0,_;const g=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=s,this.itemStart=function(h){i++,a===!1&&o.onStart!==void 0&&o.onStart(h,y,i),a=!0},this.itemEnd=function(h){y++,o.onProgress!==void 0&&o.onProgress(h,y,i),y===i&&(a=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(h){o.onError!==void 0&&o.onError(h)},this.resolveURL=function(h){return _?_(h):h},this.setURLModifier=function(h){return _=h,this},this.addHandler=function(h,l){return g.push(h,l),this},this.removeHandler=function(h){const l=g.indexOf(h);return l!==-1&&g.splice(l,2),this},this.getHandler=function(h){for(let l=0,d=g.length;l<d;l+=2){const v=g[l],x=g[l+1];if(v.global&&(v.lastIndex=0),v.test(h))return x}return null}}}const Tj=new ew;class Ni{constructor(t){this.manager=t!==void 0?t:Tj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const s=this;return new Promise(function(o,a){s.load(t,o,n,a)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Ni.DEFAULT_MATERIAL_NAME="__DEFAULT";const Eo={};class WV extends Error{constructor(t,n){super(t),this.response=n}}class Ho extends Ni{constructor(t){super(t)}load(t,n,s,o){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=Lo.get(t);if(a!==void 0)return this.manager.itemStart(t),setTimeout(()=>{n&&n(a),this.manager.itemEnd(t)},0),a;if(Eo[t]!==void 0){Eo[t].push({onLoad:n,onProgress:s,onError:o});return}Eo[t]=[],Eo[t].push({onLoad:n,onProgress:s,onError:o});const y=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),i=this.mimeType,_=this.responseType;fetch(y).then(g=>{if(g.status===200||g.status===0){if(g.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||g.body===void 0||g.body.getReader===void 0)return g;const h=Eo[t],l=g.body.getReader(),d=g.headers.get("Content-Length")||g.headers.get("X-File-Size"),v=d?parseInt(d):0,x=v!==0;let p=0;const f=new ReadableStream({start(u){c();function c(){l.read().then(({done:m,value:b})=>{if(m)u.close();else{p+=b.byteLength;const S=new ProgressEvent("progress",{lengthComputable:x,loaded:p,total:v});for(let w=0,M=h.length;w<M;w++){const A=h[w];A.onProgress&&A.onProgress(S)}u.enqueue(b),c()}})}}});return new Response(f)}else throw new WV(`fetch for "${g.url}" responded with ${g.status}: ${g.statusText}`,g)}).then(g=>{switch(_){case"arraybuffer":return g.arrayBuffer();case"blob":return g.blob();case"document":return g.text().then(h=>new DOMParser().parseFromString(h,i));case"json":return g.json();default:if(i===void 0)return g.text();{const l=/charset="?([^;"\s]*)"?/i.exec(i),d=l&&l[1]?l[1].toLowerCase():void 0,v=new TextDecoder(d);return g.arrayBuffer().then(x=>v.decode(x))}}}).then(g=>{Lo.add(t,g);const h=Eo[t];delete Eo[t];for(let l=0,d=h.length;l<d;l++){const v=h[l];v.onLoad&&v.onLoad(g)}}).catch(g=>{const h=Eo[t];if(h===void 0)throw this.manager.itemError(t),g;delete Eo[t];for(let l=0,d=h.length;l<d;l++){const v=h[l];v.onError&&v.onError(g)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class XV extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=this,y=new Ho(this.manager);y.setPath(this.path),y.setRequestHeader(this.requestHeader),y.setWithCredentials(this.withCredentials),y.load(t,function(i){try{n(a.parse(JSON.parse(i)))}catch(_){o?o(_):console.error(_),a.manager.itemError(t)}},s,o)}parse(t){const n=[];for(let s=0;s<t.length;s++){const o=of.parse(t[s]);n.push(o)}return n}}class qV extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=this,y=[],i=new cg,_=new Ho(this.manager);_.setPath(this.path),_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setWithCredentials(a.withCredentials);let g=0;function h(l){_.load(t[l],function(d){const v=a.parse(d,!0);y[l]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},g+=1,g===6&&(v.mipmapCount===1&&(i.minFilter=rr),i.image=y,i.format=v.format,i.needsUpdate=!0,n&&n(i))},s,o)}if(Array.isArray(t))for(let l=0,d=t.length;l<d;++l)h(l);else _.load(t,function(l){const d=a.parse(l,!0);if(d.isCubemap){const v=d.mipmaps.length/d.mipmapCount;for(let x=0;x<v;x++){y[x]={mipmaps:[]};for(let p=0;p<d.mipmapCount;p++)y[x].mipmaps.push(d.mipmaps[x*d.mipmapCount+p]),y[x].format=d.format,y[x].width=d.width,y[x].height=d.height}i.image=y}else i.image.width=d.width,i.image.height=d.height,i.mipmaps=d.mipmaps;d.mipmapCount===1&&(i.minFilter=rr),i.format=d.format,i.needsUpdate=!0,n&&n(i)},s,o);return i}}class af extends Ni{constructor(t){super(t)}load(t,n,s,o){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,y=Lo.get(t);if(y!==void 0)return a.manager.itemStart(t),setTimeout(function(){n&&n(y),a.manager.itemEnd(t)},0),y;const i=Qh("img");function _(){h(),Lo.add(t,this),n&&n(this),a.manager.itemEnd(t)}function g(l){h(),o&&o(l),a.manager.itemError(t),a.manager.itemEnd(t)}function h(){i.removeEventListener("load",_,!1),i.removeEventListener("error",g,!1)}return i.addEventListener("load",_,!1),i.addEventListener("error",g,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(i.crossOrigin=this.crossOrigin),a.manager.itemStart(t),i.src=t,i}}class YV extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=new bf;a.colorSpace=Lr;const y=new af(this.manager);y.setCrossOrigin(this.crossOrigin),y.setPath(this.path);let i=0;function _(g){y.load(t[g],function(h){a.images[g]=h,i++,i===6&&(a.needsUpdate=!0,n&&n(a))},void 0,o)}for(let g=0;g<t.length;++g)_(g);return a}}class ZV extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=this,y=new Wl,i=new Ho(this.manager);return i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setPath(this.path),i.setWithCredentials(a.withCredentials),i.load(t,function(_){let g;try{g=a.parse(_)}catch(h){if(o!==void 0)o(h);else{console.error(h);return}}g.image!==void 0?y.image=g.image:g.data!==void 0&&(y.image.width=g.width,y.image.height=g.height,y.image.data=g.data),y.wrapS=g.wrapS!==void 0?g.wrapS:oi,y.wrapT=g.wrapT!==void 0?g.wrapT:oi,y.magFilter=g.magFilter!==void 0?g.magFilter:rr,y.minFilter=g.minFilter!==void 0?g.minFilter:rr,y.anisotropy=g.anisotropy!==void 0?g.anisotropy:1,g.colorSpace!==void 0?y.colorSpace=g.colorSpace:g.encoding!==void 0&&(y.encoding=g.encoding),g.flipY!==void 0&&(y.flipY=g.flipY),g.format!==void 0&&(y.format=g.format),g.type!==void 0&&(y.type=g.type),g.mipmaps!==void 0&&(y.mipmaps=g.mipmaps,y.minFilter=to),g.mipmapCount===1&&(y.minFilter=rr),g.generateMipmaps!==void 0&&(y.generateMipmaps=g.generateMipmaps),y.needsUpdate=!0,n&&n(y,g)},s,o),y}}class KV extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=new fr,y=new af(this.manager);return y.setCrossOrigin(this.crossOrigin),y.setPath(this.path),y.load(t,function(i){a.image=i,a.needsUpdate=!0,n!==void 0&&n(a)},s,o),a}}class qa extends jn{constructor(t,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Ot(t),this.intensity=n}dispose(){}copy(t,n){return super.copy(t,n),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const n=super.toJSON(t);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Aj extends qa{constructor(t,n,s){super(t,s),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(jn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ot(n)}copy(t,n){return super.copy(t,n),this.groundColor.copy(t.groundColor),this}}const Rv=new Jt,iT=new Re,sT=new Re;class tw{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wf,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const n=this.camera,s=this.matrix;iT.setFromMatrixPosition(t.matrixWorld),n.position.copy(iT),sT.setFromMatrixPosition(t.target.matrixWorld),n.lookAt(sT),n.updateMatrixWorld(),Rv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rv),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(Rv)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class JV extends tw{constructor(){super(new Br(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const n=this.camera,s=zc*2*t.angle*this.focus,o=this.mapSize.width/this.mapSize.height,a=t.distance||n.far;(s!==n.fov||o!==n.aspect||a!==n.far)&&(n.fov=s,n.aspect=o,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Cj extends qa{constructor(t,n,s=0,o=Math.PI/3,a=0,y=2){super(t,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(jn.DEFAULT_UP),this.updateMatrix(),this.target=new jn,this.distance=s,this.angle=o,this.penumbra=a,this.decay=y,this.map=null,this.shadow=new JV}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const oT=new Jt,Vd=new Re,jv=new Re;class QV extends tw{constructor(){super(new Br(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new Re(1,0,0),new Re(-1,0,0),new Re(0,0,1),new Re(0,0,-1),new Re(0,1,0),new Re(0,-1,0)],this._cubeUps=[new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,1,0),new Re(0,0,1),new Re(0,0,-1)]}updateMatrices(t,n=0){const s=this.camera,o=this.matrix,a=t.distance||s.far;a!==s.far&&(s.far=a,s.updateProjectionMatrix()),Vd.setFromMatrixPosition(t.matrixWorld),s.position.copy(Vd),jv.copy(s.position),jv.add(this._cubeDirections[n]),s.up.copy(this._cubeUps[n]),s.lookAt(jv),s.updateMatrixWorld(),o.makeTranslation(-Vd.x,-Vd.y,-Vd.z),oT.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oT)}}class Pj extends qa{constructor(t,n,s=0,o=2){super(t,n),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=o,this.shadow=new QV}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,n){return super.copy(t,n),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class $V extends tw{constructor(){super(new Sf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Rj extends qa{constructor(t,n){super(t,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(jn.DEFAULT_UP),this.updateMatrix(),this.target=new jn,this.shadow=new $V}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class jj extends qa{constructor(t,n){super(t,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Lj extends qa{constructor(t,n,s=10,o=10){super(t,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=s,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const n=super.toJSON(t);return n.object.width=this.width,n.object.height=this.height,n}}class kj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Re)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const s=t.x,o=t.y,a=t.z,y=this.coefficients;return n.copy(y[0]).multiplyScalar(.282095),n.addScaledVector(y[1],.488603*o),n.addScaledVector(y[2],.488603*a),n.addScaledVector(y[3],.488603*s),n.addScaledVector(y[4],1.092548*(s*o)),n.addScaledVector(y[5],1.092548*(o*a)),n.addScaledVector(y[6],.315392*(3*a*a-1)),n.addScaledVector(y[7],1.092548*(s*a)),n.addScaledVector(y[8],.546274*(s*s-o*o)),n}getIrradianceAt(t,n){const s=t.x,o=t.y,a=t.z,y=this.coefficients;return n.copy(y[0]).multiplyScalar(.886227),n.addScaledVector(y[1],2*.511664*o),n.addScaledVector(y[2],2*.511664*a),n.addScaledVector(y[3],2*.511664*s),n.addScaledVector(y[4],2*.429043*s*o),n.addScaledVector(y[5],2*.429043*o*a),n.addScaledVector(y[6],.743125*a*a-.247708),n.addScaledVector(y[7],2*.429043*s*a),n.addScaledVector(y[8],.429043*(s*s-o*o)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(t.coefficients[s],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let s=0;s<9;s++)this.coefficients[s].lerp(t.coefficients[s],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const s=this.coefficients;for(let o=0;o<9;o++)s[o].fromArray(t,n+o*3);return this}toArray(t=[],n=0){const s=this.coefficients;for(let o=0;o<9;o++)s[o].toArray(t,n+o*3);return t}static getBasisAt(t,n){const s=t.x,o=t.y,a=t.z;n[0]=.282095,n[1]=.488603*o,n[2]=.488603*a,n[3]=.488603*s,n[4]=1.092548*s*o,n[5]=1.092548*o*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*s*a,n[8]=.546274*(s*s-o*o)}}class Ij extends qa{constructor(t=new kj,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const n=super.toJSON(t);return n.object.sh=this.sh.toArray(),n}}class Eg extends Ni{constructor(t){super(t),this.textures={}}load(t,n,s,o){const a=this,y=new Ho(a.manager);y.setPath(a.path),y.setRequestHeader(a.requestHeader),y.setWithCredentials(a.withCredentials),y.load(t,function(i){try{n(a.parse(JSON.parse(i)))}catch(_){o?o(_):console.error(_),a.manager.itemError(t)}},s,o)}parse(t){const n=this.textures;function s(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const o=Eg.createMaterialFromType(t.type);if(t.uuid!==void 0&&(o.uuid=t.uuid),t.name!==void 0&&(o.name=t.name),t.color!==void 0&&o.color!==void 0&&o.color.setHex(t.color),t.roughness!==void 0&&(o.roughness=t.roughness),t.metalness!==void 0&&(o.metalness=t.metalness),t.sheen!==void 0&&(o.sheen=t.sheen),t.sheenColor!==void 0&&(o.sheenColor=new Ot().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(o.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(t.emissive),t.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(t.specular),t.specularIntensity!==void 0&&(o.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(o.shininess=t.shininess),t.clearcoat!==void 0&&(o.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=t.clearcoatRoughness),t.iridescence!==void 0&&(o.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(o.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(o.transmission=t.transmission),t.thickness!==void 0&&(o.thickness=t.thickness),t.attenuationDistance!==void 0&&(o.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(o.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(o.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(o.fog=t.fog),t.flatShading!==void 0&&(o.flatShading=t.flatShading),t.blending!==void 0&&(o.blending=t.blending),t.combine!==void 0&&(o.combine=t.combine),t.side!==void 0&&(o.side=t.side),t.shadowSide!==void 0&&(o.shadowSide=t.shadowSide),t.opacity!==void 0&&(o.opacity=t.opacity),t.transparent!==void 0&&(o.transparent=t.transparent),t.alphaTest!==void 0&&(o.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(o.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(o.depthFunc=t.depthFunc),t.depthTest!==void 0&&(o.depthTest=t.depthTest),t.depthWrite!==void 0&&(o.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(o.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(o.blendSrc=t.blendSrc),t.blendDst!==void 0&&(o.blendDst=t.blendDst),t.blendEquation!==void 0&&(o.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(o.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(o.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(o.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&o.blendColor!==void 0&&o.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(o.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(o.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(o.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(o.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(o.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(o.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(o.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(o.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(o.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(o.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(o.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(o.rotation=t.rotation),t.linewidth!==void 0&&(o.linewidth=t.linewidth),t.dashSize!==void 0&&(o.dashSize=t.dashSize),t.gapSize!==void 0&&(o.gapSize=t.gapSize),t.scale!==void 0&&(o.scale=t.scale),t.polygonOffset!==void 0&&(o.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(o.dithering=t.dithering),t.alphaToCoverage!==void 0&&(o.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(o.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(o.visible=t.visible),t.toneMapped!==void 0&&(o.toneMapped=t.toneMapped),t.userData!==void 0&&(o.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?o.vertexColors=t.vertexColors>0:o.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const a in t.uniforms){const y=t.uniforms[a];switch(o.uniforms[a]={},y.type){case"t":o.uniforms[a].value=s(y.value);break;case"c":o.uniforms[a].value=new Ot().setHex(y.value);break;case"v2":o.uniforms[a].value=new mt().fromArray(y.value);break;case"v3":o.uniforms[a].value=new Re().fromArray(y.value);break;case"v4":o.uniforms[a].value=new Un().fromArray(y.value);break;case"m3":o.uniforms[a].value=new hn().fromArray(y.value);break;case"m4":o.uniforms[a].value=new Jt().fromArray(y.value);break;default:o.uniforms[a].value=y.value}}if(t.defines!==void 0&&(o.defines=t.defines),t.vertexShader!==void 0&&(o.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(o.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(o.glslVersion=t.glslVersion),t.extensions!==void 0)for(const a in t.extensions)o.extensions[a]=t.extensions[a];if(t.lights!==void 0&&(o.lights=t.lights),t.clipping!==void 0&&(o.clipping=t.clipping),t.size!==void 0&&(o.size=t.size),t.sizeAttenuation!==void 0&&(o.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(o.map=s(t.map)),t.matcap!==void 0&&(o.matcap=s(t.matcap)),t.alphaMap!==void 0&&(o.alphaMap=s(t.alphaMap)),t.bumpMap!==void 0&&(o.bumpMap=s(t.bumpMap)),t.bumpScale!==void 0&&(o.bumpScale=t.bumpScale),t.normalMap!==void 0&&(o.normalMap=s(t.normalMap)),t.normalMapType!==void 0&&(o.normalMapType=t.normalMapType),t.normalScale!==void 0){let a=t.normalScale;Array.isArray(a)===!1&&(a=[a,a]),o.normalScale=new mt().fromArray(a)}return t.displacementMap!==void 0&&(o.displacementMap=s(t.displacementMap)),t.displacementScale!==void 0&&(o.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(o.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(o.roughnessMap=s(t.roughnessMap)),t.metalnessMap!==void 0&&(o.metalnessMap=s(t.metalnessMap)),t.emissiveMap!==void 0&&(o.emissiveMap=s(t.emissiveMap)),t.emissiveIntensity!==void 0&&(o.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(o.specularMap=s(t.specularMap)),t.specularIntensityMap!==void 0&&(o.specularIntensityMap=s(t.specularIntensityMap)),t.specularColorMap!==void 0&&(o.specularColorMap=s(t.specularColorMap)),t.envMap!==void 0&&(o.envMap=s(t.envMap)),t.envMapIntensity!==void 0&&(o.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(o.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(o.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(o.lightMap=s(t.lightMap)),t.lightMapIntensity!==void 0&&(o.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(o.aoMap=s(t.aoMap)),t.aoMapIntensity!==void 0&&(o.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(o.gradientMap=s(t.gradientMap)),t.clearcoatMap!==void 0&&(o.clearcoatMap=s(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=s(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=s(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new mt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(o.iridescenceMap=s(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(o.iridescenceThicknessMap=s(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(o.transmissionMap=s(t.transmissionMap)),t.thicknessMap!==void 0&&(o.thicknessMap=s(t.thicknessMap)),t.anisotropyMap!==void 0&&(o.anisotropyMap=s(t.anisotropyMap)),t.sheenColorMap!==void 0&&(o.sheenColorMap=s(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=s(t.sheenRoughnessMap)),o}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){const n={ShadowMaterial:hj,SpriteMaterial:zb,RawShaderMaterial:fj,ShaderMaterial:Ws,PointsMaterial:Gb,MeshPhysicalMaterial:pj,MeshStandardMaterial:Kb,MeshPhongMaterial:mj,MeshToonMaterial:yj,MeshNormalMaterial:gj,MeshLambertMaterial:vj,MeshDepthMaterial:Nb,MeshDistanceMaterial:Ub,MeshBasicMaterial:Wa,MeshMatcapMaterial:_j,LineDashedMaterial:xj,LineBasicMaterial:Mi,Material:ci};return new n[t]}}class B_{static decodeText(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let n="";for(let s=0,o=t.length;s<o;s++)n+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(t){const n=t.lastIndexOf("/");return n===-1?"./":t.slice(0,n+1)}static resolveURL(t,n){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(t)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:n+t)}}class Oj extends ln{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class Dj extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=this,y=new Ho(a.manager);y.setPath(a.path),y.setRequestHeader(a.requestHeader),y.setWithCredentials(a.withCredentials),y.load(t,function(i){try{n(a.parse(JSON.parse(i)))}catch(_){o?o(_):console.error(_),a.manager.itemError(t)}},s,o)}parse(t){const n={},s={};function o(v,x){if(n[x]!==void 0)return n[x];const f=v.interleavedBuffers[x],u=a(v,f.buffer),c=gc(f.type,u),m=new lg(c,f.stride);return m.uuid=f.uuid,n[x]=m,m}function a(v,x){if(s[x]!==void 0)return s[x];const f=v.arrayBuffers[x],u=new Uint32Array(f).buffer;return s[x]=u,u}const y=t.isInstancedBufferGeometry?new Oj:new ln,i=t.data.index;if(i!==void 0){const v=gc(i.type,i.array);y.setIndex(new In(v,1))}const _=t.data.attributes;for(const v in _){const x=_[v];let p;if(x.isInterleavedBufferAttribute){const f=o(t.data,x.data);p=new $l(f,x.itemSize,x.offset,x.normalized)}else{const f=gc(x.type,x.array),u=x.isInstancedBufferAttribute?Gc:In;p=new u(f,x.itemSize,x.normalized)}x.name!==void 0&&(p.name=x.name),x.usage!==void 0&&p.setUsage(x.usage),y.setAttribute(v,p)}const g=t.data.morphAttributes;if(g)for(const v in g){const x=g[v],p=[];for(let f=0,u=x.length;f<u;f++){const c=x[f];let m;if(c.isInterleavedBufferAttribute){const b=o(t.data,c.data);m=new $l(b,c.itemSize,c.offset,c.normalized)}else{const b=gc(c.type,c.array);m=new In(b,c.itemSize,c.normalized)}c.name!==void 0&&(m.name=c.name),p.push(m)}y.morphAttributes[v]=p}t.data.morphTargetsRelative&&(y.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(l!==void 0)for(let v=0,x=l.length;v!==x;++v){const p=l[v];y.addGroup(p.start,p.count,p.materialIndex)}const d=t.data.boundingSphere;if(d!==void 0){const v=new Re;d.center!==void 0&&v.fromArray(d.center),y.boundingSphere=new li(v,d.radius)}return t.name&&(y.name=t.name),t.userData&&(y.userData=t.userData),y}}class eG extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=this,y=this.path===""?B_.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||y;const i=new Ho(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(t,function(_){let g=null;try{g=JSON.parse(_)}catch(l){o!==void 0&&o(l),console.error("THREE:ObjectLoader: Can't parse "+t+".",l.message);return}const h=g.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){o!==void 0&&o(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}a.parse(g,n)},s,o)}async loadAsync(t,n){const s=this,o=this.path===""?B_.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new Ho(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const y=await a.loadAsync(t,n),i=JSON.parse(y),_=i.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await s.parseAsync(i)}parse(t,n){const s=this.parseAnimations(t.animations),o=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,o),y=this.parseImages(t.images,function(){n!==void 0&&n(g)}),i=this.parseTextures(t.textures,y),_=this.parseMaterials(t.materials,i),g=this.parseObject(t.object,a,_,i,s),h=this.parseSkeletons(t.skeletons,g);if(this.bindSkeletons(g,h),n!==void 0){let l=!1;for(const d in y)if(y[d].data instanceof HTMLImageElement){l=!0;break}l===!1&&n(g)}return g}async parseAsync(t){const n=this.parseAnimations(t.animations),s=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,s),a=await this.parseImagesAsync(t.images),y=this.parseTextures(t.textures,a),i=this.parseMaterials(t.materials,y),_=this.parseObject(t.object,o,i,y,n),g=this.parseSkeletons(t.skeletons,_);return this.bindSkeletons(_,g),_}parseShapes(t){const n={};if(t!==void 0)for(let s=0,o=t.length;s<o;s++){const a=new Xl().fromJSON(t[s]);n[a.uuid]=a}return n}parseSkeletons(t,n){const s={},o={};if(n.traverse(function(a){a.isBone&&(o[a.uuid]=a)}),t!==void 0)for(let a=0,y=t.length;a<y;a++){const i=new ug().fromJSON(t[a],o);s[i.uuid]=i}return s}parseGeometries(t,n){const s={};if(t!==void 0){const o=new Dj;for(let a=0,y=t.length;a<y;a++){let i;const _=t[a];switch(_.type){case"BufferGeometry":case"InstancedBufferGeometry":i=o.parse(_);break;default:_.type in rT?i=rT[_.type].fromJSON(_,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${_.type}"`)}i.uuid=_.uuid,_.name!==void 0&&(i.name=_.name),_.userData!==void 0&&(i.userData=_.userData),s[_.uuid]=i}}return s}parseMaterials(t,n){const s={},o={};if(t!==void 0){const a=new Eg;a.setTextures(n);for(let y=0,i=t.length;y<i;y++){const _=t[y];s[_.uuid]===void 0&&(s[_.uuid]=a.parse(_)),o[_.uuid]=s[_.uuid]}}return o}parseAnimations(t){const n={};if(t!==void 0)for(let s=0;s<t.length;s++){const o=t[s],a=of.parse(o);n[a.uuid]=a}return n}parseImages(t,n){const s=this,o={};let a;function y(_){return s.manager.itemStart(_),a.load(_,function(){s.manager.itemEnd(_)},void 0,function(){s.manager.itemError(_),s.manager.itemEnd(_)})}function i(_){if(typeof _=="string"){const g=_,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(g)?g:s.resourcePath+g;return y(h)}else return _.data?{data:gc(_.type,_.data),width:_.width,height:_.height}:null}if(t!==void 0&&t.length>0){const _=new ew(n);a=new af(_),a.setCrossOrigin(this.crossOrigin);for(let g=0,h=t.length;g<h;g++){const l=t[g],d=l.url;if(Array.isArray(d)){const v=[];for(let x=0,p=d.length;x<p;x++){const f=d[x],u=i(f);u!==null&&(u instanceof HTMLImageElement?v.push(u):v.push(new Wl(u.data,u.width,u.height)))}o[l.uuid]=new Dl(v)}else{const v=i(l.url);o[l.uuid]=new Dl(v)}}}return o}async parseImagesAsync(t){const n=this,s={};let o;async function a(y){if(typeof y=="string"){const i=y,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:n.resourcePath+i;return await o.loadAsync(_)}else return y.data?{data:gc(y.type,y.data),width:y.width,height:y.height}:null}if(t!==void 0&&t.length>0){o=new af(this.manager),o.setCrossOrigin(this.crossOrigin);for(let y=0,i=t.length;y<i;y++){const _=t[y],g=_.url;if(Array.isArray(g)){const h=[];for(let l=0,d=g.length;l<d;l++){const v=g[l],x=await a(v);x!==null&&(x instanceof HTMLImageElement?h.push(x):h.push(new Wl(x.data,x.width,x.height)))}s[_.uuid]=new Dl(h)}else{const h=await a(_.url);s[_.uuid]=new Dl(h)}}}return s}parseTextures(t,n){function s(a,y){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),y[a])}const o={};if(t!==void 0)for(let a=0,y=t.length;a<y;a++){const i=t[a];i.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',i.uuid),n[i.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",i.image);const _=n[i.image],g=_.data;let h;Array.isArray(g)?(h=new bf,g.length===6&&(h.needsUpdate=!0)):(g&&g.data?h=new Wl:h=new fr,g&&(h.needsUpdate=!0)),h.source=_,h.uuid=i.uuid,i.name!==void 0&&(h.name=i.name),i.mapping!==void 0&&(h.mapping=s(i.mapping,tG)),i.channel!==void 0&&(h.channel=i.channel),i.offset!==void 0&&h.offset.fromArray(i.offset),i.repeat!==void 0&&h.repeat.fromArray(i.repeat),i.center!==void 0&&h.center.fromArray(i.center),i.rotation!==void 0&&(h.rotation=i.rotation),i.wrap!==void 0&&(h.wrapS=s(i.wrap[0],aT),h.wrapT=s(i.wrap[1],aT)),i.format!==void 0&&(h.format=i.format),i.internalFormat!==void 0&&(h.internalFormat=i.internalFormat),i.type!==void 0&&(h.type=i.type),i.colorSpace!==void 0&&(h.colorSpace=i.colorSpace),i.encoding!==void 0&&(h.encoding=i.encoding),i.minFilter!==void 0&&(h.minFilter=s(i.minFilter,lT)),i.magFilter!==void 0&&(h.magFilter=s(i.magFilter,lT)),i.anisotropy!==void 0&&(h.anisotropy=i.anisotropy),i.flipY!==void 0&&(h.flipY=i.flipY),i.generateMipmaps!==void 0&&(h.generateMipmaps=i.generateMipmaps),i.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=i.premultiplyAlpha),i.unpackAlignment!==void 0&&(h.unpackAlignment=i.unpackAlignment),i.compareFunction!==void 0&&(h.compareFunction=i.compareFunction),i.userData!==void 0&&(h.userData=i.userData),o[i.uuid]=h}return o}parseObject(t,n,s,o,a){let y;function i(d){return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),n[d]}function _(d){if(d!==void 0){if(Array.isArray(d)){const v=[];for(let x=0,p=d.length;x<p;x++){const f=d[x];s[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),v.push(s[f])}return v}return s[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),s[d]}}function g(d){return o[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),o[d]}let h,l;switch(t.type){case"Scene":y=new Bb,t.background!==void 0&&(Number.isInteger(t.background)?y.background=new Ot(t.background):y.background=g(t.background)),t.environment!==void 0&&(y.environment=g(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?y.fog=new ag(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(y.fog=new og(t.fog.color,t.fog.density)),t.fog.name!==""&&(y.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(y.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(y.backgroundIntensity=t.backgroundIntensity);break;case"PerspectiveCamera":y=new Br(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(y.focus=t.focus),t.zoom!==void 0&&(y.zoom=t.zoom),t.filmGauge!==void 0&&(y.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(y.filmOffset=t.filmOffset),t.view!==void 0&&(y.view=Object.assign({},t.view));break;case"OrthographicCamera":y=new Sf(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(y.zoom=t.zoom),t.view!==void 0&&(y.view=Object.assign({},t.view));break;case"AmbientLight":y=new jj(t.color,t.intensity);break;case"DirectionalLight":y=new Rj(t.color,t.intensity);break;case"PointLight":y=new Pj(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":y=new Lj(t.color,t.intensity,t.width,t.height);break;case"SpotLight":y=new Cj(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":y=new Aj(t.color,t.groundColor,t.intensity);break;case"LightProbe":y=new Ij().fromJSON(t);break;case"SkinnedMesh":h=i(t.geometry),l=_(t.material),y=new J3(h,l),t.bindMode!==void 0&&(y.bindMode=t.bindMode),t.bindMatrix!==void 0&&y.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(y.skeleton=t.skeleton);break;case"Mesh":h=i(t.geometry),l=_(t.material),y=new Ar(h,l);break;case"InstancedMesh":h=i(t.geometry),l=_(t.material);const d=t.count,v=t.instanceMatrix,x=t.instanceColor;y=new Q3(h,l,d),y.instanceMatrix=new Gc(new Float32Array(v.array),16),x!==void 0&&(y.instanceColor=new Gc(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":h=i(t.geometry),l=_(t.material),y=new $3(t.maxGeometryCount,t.maxVertexCount,t.maxIndexCount,l),y.geometry=h,y.perObjectFrustumCulled=t.perObjectFrustumCulled,y.sortObjects=t.sortObjects,y._drawRanges=t.drawRanges,y._reservedRanges=t.reservedRanges,y._visibility=t.visibility,y._active=t.active,y._bounds=t.bounds.map(p=>{const f=new bi;f.min.fromArray(p.boxMin),f.max.fromArray(p.boxMax);const u=new li;return u.radius=p.sphereRadius,u.center.fromArray(p.sphereCenter),{boxInitialized:p.boxInitialized,box:f,sphereInitialized:p.sphereInitialized,sphere:u}}),y._maxGeometryCount=t.maxGeometryCount,y._maxVertexCount=t.maxVertexCount,y._maxIndexCount=t.maxIndexCount,y._geometryInitialized=t.geometryInitialized,y._geometryCount=t.geometryCount,y._matricesTexture=g(t.matricesTexture.uuid);break;case"LOD":y=new K3;break;case"Line":y=new Fa(i(t.geometry),_(t.material));break;case"LineLoop":y=new ej(i(t.geometry),_(t.material));break;case"LineSegments":y=new ho(i(t.geometry),_(t.material));break;case"PointCloud":case"Points":y=new tj(i(t.geometry),_(t.material));break;case"Sprite":y=new Z3(_(t.material));break;case"Group":y=new xc;break;case"Bone":y=new Vb;break;default:y=new jn}if(y.uuid=t.uuid,t.name!==void 0&&(y.name=t.name),t.matrix!==void 0?(y.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(y.matrixAutoUpdate=t.matrixAutoUpdate),y.matrixAutoUpdate&&y.matrix.decompose(y.position,y.quaternion,y.scale)):(t.position!==void 0&&y.position.fromArray(t.position),t.rotation!==void 0&&y.rotation.fromArray(t.rotation),t.quaternion!==void 0&&y.quaternion.fromArray(t.quaternion),t.scale!==void 0&&y.scale.fromArray(t.scale)),t.up!==void 0&&y.up.fromArray(t.up),t.castShadow!==void 0&&(y.castShadow=t.castShadow),t.receiveShadow!==void 0&&(y.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(y.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(y.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(y.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&y.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(y.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(y.visible=t.visible),t.frustumCulled!==void 0&&(y.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(y.renderOrder=t.renderOrder),t.userData!==void 0&&(y.userData=t.userData),t.layers!==void 0&&(y.layers.mask=t.layers),t.children!==void 0){const d=t.children;for(let v=0;v<d.length;v++)y.add(this.parseObject(d[v],n,s,o,a))}if(t.animations!==void 0){const d=t.animations;for(let v=0;v<d.length;v++){const x=d[v];y.animations.push(a[x])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(y.autoUpdate=t.autoUpdate);const d=t.levels;for(let v=0;v<d.length;v++){const x=d[v],p=y.getObjectByProperty("uuid",x.object);p!==void 0&&y.addLevel(p,x.distance,x.hysteresis)}}return y}bindSkeletons(t,n){Object.keys(n).length!==0&&t.traverse(function(s){if(s.isSkinnedMesh===!0&&s.skeleton!==void 0){const o=n[s.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",s.skeleton):s.bind(o,s.bindMatrix)}})}}const tG={UVMapping:eg,CubeReflectionMapping:Go,CubeRefractionMapping:Ua,EquirectangularReflectionMapping:Bh,EquirectangularRefractionMapping:zh,CubeUVReflectionMapping:Kc},aT={RepeatWrapping:Vh,ClampToEdgeWrapping:oi,MirroredRepeatWrapping:Gh},lT={NearestFilter:vr,NearestMipmapNearestFilter:Ey,NearestMipmapLinearFilter:Cl,LinearFilter:rr,LinearMipmapNearestFilter:fh,LinearMipmapLinearFilter:to};class nG extends Ni{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,n,s,o){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,y=Lo.get(t);if(y!==void 0){if(a.manager.itemStart(t),y.then){y.then(g=>{n&&n(g),a.manager.itemEnd(t)}).catch(g=>{o&&o(g)});return}return setTimeout(function(){n&&n(y),a.manager.itemEnd(t)},0),y}const i={};i.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",i.headers=this.requestHeader;const _=fetch(t,i).then(function(g){return g.blob()}).then(function(g){return createImageBitmap(g,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(g){return Lo.add(t,g),n&&n(g),a.manager.itemEnd(t),g}).catch(function(g){o&&o(g),Lo.remove(t),a.manager.itemError(t),a.manager.itemEnd(t)});Lo.add(t,_),a.manager.itemStart(t)}}let pm;class nw{static getContext(){return pm===void 0&&(pm=new(window.AudioContext||window.webkitAudioContext)),pm}static setContext(t){pm=t}}class rG extends Ni{constructor(t){super(t)}load(t,n,s,o){const a=this,y=new Ho(this.manager);y.setResponseType("arraybuffer"),y.setPath(this.path),y.setRequestHeader(this.requestHeader),y.setWithCredentials(this.withCredentials),y.load(t,function(_){try{const g=_.slice(0);nw.getContext().decodeAudioData(g,function(l){n(l)}).catch(i)}catch(g){i(g)}},s,o);function i(_){o?o(_):console.error(_),a.manager.itemError(t)}}}const uT=new Jt,cT=new Jt,gl=new Jt;class iG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Br,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Br,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const n=this._cache;if(n.focus!==t.focus||n.fov!==t.fov||n.aspect!==t.aspect*this.aspect||n.near!==t.near||n.far!==t.far||n.zoom!==t.zoom||n.eyeSep!==this.eyeSep){n.focus=t.focus,n.fov=t.fov,n.aspect=t.aspect*this.aspect,n.near=t.near,n.far=t.far,n.zoom=t.zoom,n.eyeSep=this.eyeSep,gl.copy(t.projectionMatrix);const o=n.eyeSep/2,a=o*n.near/n.focus,y=n.near*Math.tan(Vl*n.fov*.5)/n.zoom;let i,_;cT.elements[12]=-o,uT.elements[12]=o,i=-y*n.aspect+a,_=y*n.aspect+a,gl.elements[0]=2*n.near/(_-i),gl.elements[8]=(_+i)/(_-i),this.cameraL.projectionMatrix.copy(gl),i=-y*n.aspect-a,_=y*n.aspect-a,gl.elements[0]=2*n.near/(_-i),gl.elements[8]=(_+i)/(_-i),this.cameraR.projectionMatrix.copy(gl)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(cT),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(uT)}}class rw{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=dT();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}function dT(){return(typeof performance>"u"?Date:performance).now()}const vl=new Re,hT=new Di,sG=new Re,_l=new Re;class oG extends jn{constructor(){super(),this.type="AudioListener",this.context=nw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new rw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const n=this.context.listener,s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vl,hT,sG),_l.set(0,0,-1).applyQuaternion(hT),n.positionX){const o=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(vl.x,o),n.positionY.linearRampToValueAtTime(vl.y,o),n.positionZ.linearRampToValueAtTime(vl.z,o),n.forwardX.linearRampToValueAtTime(_l.x,o),n.forwardY.linearRampToValueAtTime(_l.y,o),n.forwardZ.linearRampToValueAtTime(_l.z,o),n.upX.linearRampToValueAtTime(s.x,o),n.upY.linearRampToValueAtTime(s.y,o),n.upZ.linearRampToValueAtTime(s.z,o)}else n.setPosition(vl.x,vl.y,vl.z),n.setOrientation(_l.x,_l.y,_l.z,s.x,s.y,s.z)}}class Nj extends jn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const xl=new Re,fT=new Di,aG=new Re,bl=new Re;class lG extends Nj{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,n,s){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=s,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xl,fT,aG),bl.set(0,0,1).applyQuaternion(fT);const n=this.panner;if(n.positionX){const s=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(xl.x,s),n.positionY.linearRampToValueAtTime(xl.y,s),n.positionZ.linearRampToValueAtTime(xl.z,s),n.orientationX.linearRampToValueAtTime(bl.x,s),n.orientationY.linearRampToValueAtTime(bl.y,s),n.orientationZ.linearRampToValueAtTime(bl.z,s)}else n.setPosition(xl.x,xl.y,xl.z),n.setOrientation(bl.x,bl.y,bl.z)}}class uG{constructor(t,n=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const n=this.getFrequencyData();for(let s=0;s<n.length;s++)t+=n[s];return t/n.length}}class Uj{constructor(t,n,s){this.binding=t,this.valueSize=s;let o,a,y;switch(n){case"quaternion":o=this._slerp,a=this._slerpAdditive,y=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(s*6),this._workIndex=5;break;case"string":case"bool":o=this._select,a=this._select,y=this._setAdditiveIdentityOther,this.buffer=new Array(s*5);break;default:o=this._lerp,a=this._lerpAdditive,y=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(s*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=a,this._setIdentity=y,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,n){const s=this.buffer,o=this.valueSize,a=t*o+o;let y=this.cumulativeWeight;if(y===0){for(let i=0;i!==o;++i)s[a+i]=s[i];y=n}else{y+=n;const i=n/y;this._mixBufferRegion(s,a,0,i,o)}this.cumulativeWeight=y}accumulateAdditive(t){const n=this.buffer,s=this.valueSize,o=s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,o,0,t,s),this.cumulativeWeightAdditive+=t}apply(t){const n=this.valueSize,s=this.buffer,o=t*n+n,a=this.cumulativeWeight,y=this.cumulativeWeightAdditive,i=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const _=n*this._origIndex;this._mixBufferRegion(s,o,_,1-a,n)}y>0&&this._mixBufferRegionAdditive(s,o,this._addIndex*n,1,n);for(let _=n,g=n+n;_!==g;++_)if(s[_]!==s[_+n]){i.setValue(s,o);break}}saveOriginalState(){const t=this.binding,n=this.buffer,s=this.valueSize,o=s*this._origIndex;t.getValue(n,o);for(let a=s,y=o;a!==y;++a)n[a]=n[o+a%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,n=t+this.valueSize;for(let s=t;s<n;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[n+s]=this.buffer[t+s]}_select(t,n,s,o,a){if(o>=.5)for(let y=0;y!==a;++y)t[n+y]=t[s+y]}_slerp(t,n,s,o){Di.slerpFlat(t,n,t,n,t,s,o)}_slerpAdditive(t,n,s,o,a){const y=this._workIndex*a;Di.multiplyQuaternionsFlat(t,y,t,n,t,s),Di.slerpFlat(t,n,t,n,t,y,o)}_lerp(t,n,s,o,a){const y=1-o;for(let i=0;i!==a;++i){const _=n+i;t[_]=t[_]*y+t[s+i]*o}}_lerpAdditive(t,n,s,o,a){for(let y=0;y!==a;++y){const i=n+y;t[i]=t[i]+t[s+y]*o}}}const iw="\\[\\]\\.:\\/",cG=new RegExp("["+iw+"]","g"),sw="[^"+iw+"]",dG="[^"+iw.replace("\\.","")+"]",hG=/((?:WC+[\/:])*)/.source.replace("WC",sw),fG=/(WCOD+)?/.source.replace("WCOD",dG),pG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sw),mG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sw),yG=new RegExp("^"+hG+fG+pG+mG+"$"),gG=["material","materials","bones","map"];class vG{constructor(t,n,s){const o=s||En.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,o)}getValue(t,n){this.bind();const s=this._targetGroup.nCachedObjects_,o=this._bindings[s];o!==void 0&&o.getValue(t,n)}setValue(t,n){const s=this._bindings;for(let o=this._targetGroup.nCachedObjects_,a=s.length;o!==a;++o)s[o].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=t.length;n!==s;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=t.length;n!==s;++n)t[n].unbind()}}class En{constructor(t,n,s){this.path=n,this.parsedPath=s||En.parseTrackName(n),this.node=En.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,s){return t&&t.isAnimationObjectGroup?new En.Composite(t,n,s):new En(t,n,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(cG,"")}static parseTrackName(t){const n=yG.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=s.nodeName&&s.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const a=s.nodeName.substring(o+1);gG.indexOf(a)!==-1&&(s.nodeName=s.nodeName.substring(0,o),s.objectName=a)}if(s.propertyName===null||s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(n);if(s!==void 0)return s}if(t.children){const s=function(a){for(let y=0;y<a.length;y++){const i=a[y];if(i.name===n||i.uuid===n)return i;const _=s(i.children);if(_)return _}return null},o=s(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)t[n++]=s[o]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)s[o]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)s[o]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const s=this.resolvedProperty;for(let o=0,a=s.length;o!==a;++o)s[o]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,s=n.objectName,o=n.propertyName;let a=n.propertyIndex;if(t||(t=En.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(s){let g=n.objectIndex;switch(s){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===g){g=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[s]}if(g!==void 0){if(t[g]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[g]}}const y=t[o];if(y===void 0){const g=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+g+"."+o+" but it wasn't found.",t);return}let i=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?i=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(i=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(a!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}_=this.BindingType.ArrayElement,this.resolvedProperty=y,this.propertyIndex=a}else y.fromArray!==void 0&&y.toArray!==void 0?(_=this.BindingType.HasFromToArray,this.resolvedProperty=y):Array.isArray(y)?(_=this.BindingType.EntireArray,this.resolvedProperty=y):this.propertyName=o;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][i]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}En.Composite=vG;En.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};En.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};En.prototype.GetterByBindingType=[En.prototype._getValue_direct,En.prototype._getValue_array,En.prototype._getValue_arrayElement,En.prototype._getValue_toArray];En.prototype.SetterByBindingTypeAndVersioning=[[En.prototype._setValue_direct,En.prototype._setValue_direct_setNeedsUpdate,En.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[En.prototype._setValue_array,En.prototype._setValue_array_setNeedsUpdate,En.prototype._setValue_array_setMatrixWorldNeedsUpdate],[En.prototype._setValue_arrayElement,En.prototype._setValue_arrayElement_setNeedsUpdate,En.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[En.prototype._setValue_fromArray,En.prototype._setValue_fromArray_setNeedsUpdate,En.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _G{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Qi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let s=0,o=arguments.length;s!==o;++s)t[arguments[s].uuid]=s;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const t=this._objects,n=this._indicesByUUID,s=this._paths,o=this._parsedPaths,a=this._bindings,y=a.length;let i,_=t.length,g=this.nCachedObjects_;for(let h=0,l=arguments.length;h!==l;++h){const d=arguments[h],v=d.uuid;let x=n[v];if(x===void 0){x=_++,n[v]=x,t.push(d);for(let p=0,f=y;p!==f;++p)a[p].push(new En(d,s[p],o[p]))}else if(x<g){i=t[x];const p=--g,f=t[p];n[f.uuid]=x,t[x]=f,n[v]=p,t[p]=d;for(let u=0,c=y;u!==c;++u){const m=a[u],b=m[p];let S=m[x];m[x]=b,S===void 0&&(S=new En(d,s[u],o[u])),m[p]=S}}else t[x]!==i&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g}remove(){const t=this._objects,n=this._indicesByUUID,s=this._bindings,o=s.length;let a=this.nCachedObjects_;for(let y=0,i=arguments.length;y!==i;++y){const _=arguments[y],g=_.uuid,h=n[g];if(h!==void 0&&h>=a){const l=a++,d=t[l];n[d.uuid]=h,t[h]=d,n[g]=l,t[l]=_;for(let v=0,x=o;v!==x;++v){const p=s[v],f=p[l],u=p[h];p[h]=f,p[l]=u}}}this.nCachedObjects_=a}uncache(){const t=this._objects,n=this._indicesByUUID,s=this._bindings,o=s.length;let a=this.nCachedObjects_,y=t.length;for(let i=0,_=arguments.length;i!==_;++i){const g=arguments[i],h=g.uuid,l=n[h];if(l!==void 0)if(delete n[h],l<a){const d=--a,v=t[d],x=--y,p=t[x];n[v.uuid]=l,t[l]=v,n[p.uuid]=d,t[d]=p,t.pop();for(let f=0,u=o;f!==u;++f){const c=s[f],m=c[d],b=c[x];c[l]=m,c[d]=b,c.pop()}}else{const d=--y,v=t[d];d>0&&(n[v.uuid]=l),t[l]=v,t.pop();for(let x=0,p=o;x!==p;++x){const f=s[x];f[l]=f[d],f.pop()}}}this.nCachedObjects_=a}subscribe_(t,n){const s=this._bindingsIndicesByPath;let o=s[t];const a=this._bindings;if(o!==void 0)return a[o];const y=this._paths,i=this._parsedPaths,_=this._objects,g=_.length,h=this.nCachedObjects_,l=new Array(g);o=a.length,s[t]=o,y.push(t),i.push(n),a.push(l);for(let d=h,v=_.length;d!==v;++d){const x=_[d];l[d]=new En(x,t,n)}return l}unsubscribe_(t){const n=this._bindingsIndicesByPath,s=n[t];if(s!==void 0){const o=this._paths,a=this._parsedPaths,y=this._bindings,i=y.length-1,_=y[i],g=t[i];n[g]=s,y[s]=_,y.pop(),a[s]=a[i],a.pop(),o[s]=o[i],o.pop()}}}class Fj{constructor(t,n,s=null,o=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=s,this.blendMode=o;const a=n.tracks,y=a.length,i=new Array(y),_={endingStart:Il,endingEnd:Il};for(let g=0;g!==y;++g){const h=a[g].createInterpolant(null);i[g]=h,h.settings=_}this._interpolantSettings=_,this._interpolants=i,this._propertyBindings=new Array(y),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,s){if(t.fadeOut(n),this.fadeIn(n),s){const o=this._clip.duration,a=t._clip.duration,y=a/o,i=o/a;t.warp(1,y,n),this.warp(i,1,n)}return this}crossFadeTo(t,n,s){return t.crossFadeFrom(this,n,s)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,s){const o=this._mixer,a=o.time,y=this.timeScale;let i=this._timeScaleInterpolant;i===null&&(i=o._lendControlInterpolant(),this._timeScaleInterpolant=i);const _=i.parameterPositions,g=i.sampleValues;return _[0]=a,_[1]=a+s,g[0]=t/y,g[1]=n/y,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,s,o){if(!this.enabled){this._updateWeight(t);return}const a=this._startTime;if(a!==null){const _=(t-a)*s;_<0||s===0?n=0:(this._startTime=null,n=s*_)}n*=this._updateTimeScale(t);const y=this._updateTime(n),i=this._updateWeight(t);if(i>0){const _=this._interpolants,g=this._propertyBindings;switch(this.blendMode){case Ab:for(let h=0,l=_.length;h!==l;++h)_[h].evaluate(y),g[h].accumulateAdditive(i);break;case ng:default:for(let h=0,l=_.length;h!==l;++h)_[h].evaluate(y),g[h].accumulate(o,i)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const s=this._weightInterpolant;if(s!==null){const o=s.evaluate(t)[0];n*=o,t>s.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const s=this._timeScaleInterpolant;if(s!==null){const o=s.evaluate(t)[0];n*=o,t>s.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,s=this.loop;let o=this.time+t,a=this._loopCount;const y=s===x3;if(t===0)return a===-1?o:y&&(a&1)===1?n-o:o;if(s===v3){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=n)o=n;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(a===-1&&(t>=0?(a=0,this._setEndings(!0,this.repetitions===0,y)):this._setEndings(this.repetitions===0,!0,y)),o>=n||o<0){const i=Math.floor(o/n);o-=n*i,a+=Math.abs(i);const _=this.repetitions-a;if(_<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=t>0?n:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(_===1){const g=t<0;this._setEndings(g,!g,y)}else this._setEndings(!1,!1,y);this._loopCount=a,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=o;if(y&&(a&1)===1)return n-o}return o}_setEndings(t,n,s){const o=this._interpolantSettings;s?(o.endingStart=Ol,o.endingEnd=Ol):(t?o.endingStart=this.zeroSlopeAtStart?Ol:Il:o.endingStart=Xh,n?o.endingEnd=this.zeroSlopeAtEnd?Ol:Il:o.endingEnd=Xh)}_scheduleFading(t,n,s){const o=this._mixer,a=o.time;let y=this._weightInterpolant;y===null&&(y=o._lendControlInterpolant(),this._weightInterpolant=y);const i=y.parameterPositions,_=y.sampleValues;return i[0]=a,_[0]=n,i[1]=a+t,_[1]=s,this}}const xG=new Float32Array(1);class bG extends Xo{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,n){const s=t._localRoot||this._root,o=t._clip.tracks,a=o.length,y=t._propertyBindings,i=t._interpolants,_=s.uuid,g=this._bindingsByRootAndName;let h=g[_];h===void 0&&(h={},g[_]=h);for(let l=0;l!==a;++l){const d=o[l],v=d.name;let x=h[v];if(x!==void 0)++x.referenceCount,y[l]=x;else{if(x=y[l],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,_,v));continue}const p=n&&n._propertyBindings[l].binding.parsedPath;x=new Uj(En.create(s,v,p),d.ValueTypeName,d.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,_,v),y[l]=x}i[l].resultBuffer=x.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const s=(t._localRoot||this._root).uuid,o=t._clip.uuid,a=this._actionsByClip[o];this._bindAction(t,a&&a.knownActions[0]),this._addInactiveAction(t,o,s)}const n=t._propertyBindings;for(let s=0,o=n.length;s!==o;++s){const a=n[s];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const n=t._propertyBindings;for(let s=0,o=n.length;s!==o;++s){const a=n[s];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const n=t._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(t,n,s){const o=this._actions,a=this._actionsByClip;let y=a[n];if(y===void 0)y={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[n]=y;else{const i=y.knownActions;t._byClipCacheIndex=i.length,i.push(t)}t._cacheIndex=o.length,o.push(t),y.actionByRoot[s]=t}_removeInactiveAction(t){const n=this._actions,s=n[n.length-1],o=t._cacheIndex;s._cacheIndex=o,n[o]=s,n.pop(),t._cacheIndex=null;const a=t._clip.uuid,y=this._actionsByClip,i=y[a],_=i.knownActions,g=_[_.length-1],h=t._byClipCacheIndex;g._byClipCacheIndex=h,_[h]=g,_.pop(),t._byClipCacheIndex=null;const l=i.actionByRoot,d=(t._localRoot||this._root).uuid;delete l[d],_.length===0&&delete y[a],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const n=t._propertyBindings;for(let s=0,o=n.length;s!==o;++s){const a=n[s];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(t){const n=this._actions,s=t._cacheIndex,o=this._nActiveActions++,a=n[o];t._cacheIndex=o,n[o]=t,a._cacheIndex=s,n[s]=a}_takeBackAction(t){const n=this._actions,s=t._cacheIndex,o=--this._nActiveActions,a=n[o];t._cacheIndex=o,n[o]=t,a._cacheIndex=s,n[s]=a}_addInactiveBinding(t,n,s){const o=this._bindingsByRootAndName,a=this._bindings;let y=o[n];y===void 0&&(y={},o[n]=y),y[s]=t,t._cacheIndex=a.length,a.push(t)}_removeInactiveBinding(t){const n=this._bindings,s=t.binding,o=s.rootNode.uuid,a=s.path,y=this._bindingsByRootAndName,i=y[o],_=n[n.length-1],g=t._cacheIndex;_._cacheIndex=g,n[g]=_,n.pop(),delete i[a],Object.keys(i).length===0&&delete y[o]}_lendBinding(t){const n=this._bindings,s=t._cacheIndex,o=this._nActiveBindings++,a=n[o];t._cacheIndex=o,n[o]=t,a._cacheIndex=s,n[s]=a}_takeBackBinding(t){const n=this._bindings,s=t._cacheIndex,o=--this._nActiveBindings,a=n[o];t._cacheIndex=o,n[o]=t,a._cacheIndex=s,n[s]=a}_lendControlInterpolant(){const t=this._controlInterpolants,n=this._nActiveControlInterpolants++;let s=t[n];return s===void 0&&(s=new Qb(new Float32Array(2),new Float32Array(2),1,xG),s.__cacheIndex=n,t[n]=s),s}_takeBackControlInterpolant(t){const n=this._controlInterpolants,s=t.__cacheIndex,o=--this._nActiveControlInterpolants,a=n[o];t.__cacheIndex=o,n[o]=t,a.__cacheIndex=s,n[s]=a}clipAction(t,n,s){const o=n||this._root,a=o.uuid;let y=typeof t=="string"?of.findByName(o,t):t;const i=y!==null?y.uuid:t,_=this._actionsByClip[i];let g=null;if(s===void 0&&(y!==null?s=y.blendMode:s=ng),_!==void 0){const l=_.actionByRoot[a];if(l!==void 0&&l.blendMode===s)return l;g=_.knownActions[0],y===null&&(y=g._clip)}if(y===null)return null;const h=new Fj(this,y,n,s);return this._bindAction(h,g),this._addInactiveAction(h,i,a),h}existingAction(t,n){const s=n||this._root,o=s.uuid,a=typeof t=="string"?of.findByName(s,t):t,y=a?a.uuid:t,i=this._actionsByClip[y];return i!==void 0&&i.actionByRoot[o]||null}stopAllAction(){const t=this._actions,n=this._nActiveActions;for(let s=n-1;s>=0;--s)t[s].stop();return this}update(t){t*=this.timeScale;const n=this._actions,s=this._nActiveActions,o=this.time+=t,a=Math.sign(t),y=this._accuIndex^=1;for(let g=0;g!==s;++g)n[g]._update(o,t,a,y);const i=this._bindings,_=this._nActiveBindings;for(let g=0;g!==_;++g)i[g].apply(y);return this}setTime(t){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const n=this._actions,s=t.uuid,o=this._actionsByClip,a=o[s];if(a!==void 0){const y=a.knownActions;for(let i=0,_=y.length;i!==_;++i){const g=y[i];this._deactivateAction(g);const h=g._cacheIndex,l=n[n.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,l._cacheIndex=h,n[h]=l,n.pop(),this._removeInactiveBindingsForAction(g)}delete o[s]}}uncacheRoot(t){const n=t.uuid,s=this._actionsByClip;for(const y in s){const i=s[y].actionByRoot,_=i[n];_!==void 0&&(this._deactivateAction(_),this._removeInactiveAction(_))}const o=this._bindingsByRootAndName,a=o[n];if(a!==void 0)for(const y in a){const i=a[y];i.restoreOriginalState(),this._removeInactiveBinding(i)}}uncacheAction(t,n){const s=this.existingAction(t,n);s!==null&&(this._deactivateAction(s),this._removeInactiveAction(s))}}class ow{constructor(t){this.value=t}clone(){return new ow(this.value.clone===void 0?this.value:this.value.clone())}}let wG=0;class SG extends Xo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:wG++}),this.name="",this.usage=Kh,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const n=this.uniforms.indexOf(t);return n!==-1&&this.uniforms.splice(n,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const n=t.uniforms;this.uniforms.length=0;for(let s=0,o=n.length;s<o;s++){const a=Array.isArray(n[s])?n[s]:[n[s]];for(let y=0;y<a.length;y++)this.uniforms.push(a[y].clone())}return this}clone(){return new this.constructor().copy(this)}}class MG extends lg{constructor(t,n,s=1){super(t,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const n=super.clone(t);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(t){const n=super.toJSON(t);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class EG{constructor(t,n,s,o,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=s,this.elementSize=o,this.count=a,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,n){return this.type=t,this.elementSize=n,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}class Bj{constructor(t,n,s=0,o=1/0){this.ray=new Jc(t,n),this.near=s,this.far=o,this.camera=null,this.layers=new Hl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,n){this.ray.set(t,n)}setFromCamera(t,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(t,n=!0,s=[]){return z_(t,this,s,n),s.sort(pT),s}intersectObjects(t,n=!0,s=[]){for(let o=0,a=t.length;o<a;o++)z_(t[o],this,s,n);return s.sort(pT),s}}function pT(r,t){return r.distance-t.distance}function z_(r,t,n,s){if(r.layers.test(t.layers)&&r.raycast(t,n),s===!0){const o=r.children;for(let a=0,y=o.length;a<y;a++)z_(o[a],t,n,!0)}}class TG{constructor(t=1,n=0,s=0){return this.radius=t,this.phi=n,this.theta=s,this}set(t,n,s){return this.radius=t,this.phi=n,this.theta=s,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,s){return this.radius=Math.sqrt(t*t+n*n+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,s),this.phi=Math.acos(hr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class AG{constructor(t=1,n=0,s=0){return this.radius=t,this.theta=n,this.y=s,this}set(t,n,s){return this.radius=t,this.theta=n,this.y=s,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,s){return this.radius=Math.sqrt(t*t+s*s),this.theta=Math.atan2(t,s),this.y=n,this}clone(){return new this.constructor().copy(this)}}const mT=new mt;class CG{constructor(t=new mt(1/0,1/0),n=new mt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,s=t.length;n<s;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const s=mT.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,mT).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const yT=new Re,mm=new Re;class PG{constructor(t=new Re,n=new Re){this.start=t,this.end=n}set(t,n){return this.start.copy(t),this.end.copy(n),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,n){return this.delta(n).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,n){yT.subVectors(t,this.start),mm.subVectors(this.end,this.start);const s=mm.dot(mm);let a=mm.dot(yT)/s;return n&&(a=hr(a,0,1)),a}closestPointToPoint(t,n,s){const o=this.closestPointToPointParameter(t,n);return this.delta(s).multiplyScalar(o).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const gT=new Re;class RG extends jn{constructor(t,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const s=new ln,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let y=0,i=1,_=32;y<_;y++,i++){const g=y/_*Math.PI*2,h=i/_*Math.PI*2;o.push(Math.cos(g),Math.sin(g),1,Math.cos(h),Math.sin(h),1)}s.setAttribute("position",new zt(o,3));const a=new Mi({fog:!1,toneMapped:!1});this.cone=new ho(s,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),gT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ha=new Re,ym=new Jt,Lv=new Jt;class jG extends ho{constructor(t){const n=zj(t),s=new ln,o=[],a=[],y=new Ot(0,0,1),i=new Ot(0,1,0);for(let g=0;g<n.length;g++){const h=n[g];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),a.push(y.r,y.g,y.b),a.push(i.r,i.g,i.b))}s.setAttribute("position",new zt(o,3)),s.setAttribute("color",new zt(a,3));const _=new Mi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(s,_),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,s=this.geometry,o=s.getAttribute("position");Lv.copy(this.root.matrixWorld).invert();for(let a=0,y=0;a<n.length;a++){const i=n[a];i.parent&&i.parent.isBone&&(ym.multiplyMatrices(Lv,i.matrixWorld),ha.setFromMatrixPosition(ym),o.setXYZ(y,ha.x,ha.y,ha.z),ym.multiplyMatrices(Lv,i.parent.matrixWorld),ha.setFromMatrixPosition(ym),o.setXYZ(y+1,ha.x,ha.y,ha.z),y+=2)}s.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function zj(r){const t=[];r.isBone===!0&&t.push(r);for(let n=0;n<r.children.length;n++)t.push.apply(t,zj(r.children[n]));return t}class LG extends Ar{constructor(t,n,s){const o=new Tf(n,4,2),a=new Wa({wireframe:!0,fog:!1,toneMapped:!1});super(o,a),this.light=t,this.color=s,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const kG=new Re,vT=new Ot,_T=new Ot;class IG extends jn{constructor(t,n,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="HemisphereLightHelper";const o=new Ef(n);o.rotateY(Math.PI*.5),this.material=new Wa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=o.getAttribute("position"),y=new Float32Array(a.count*3);o.setAttribute("color",new In(y,3)),this.add(new Ar(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=t.geometry.getAttribute("color");vT.copy(this.light.color),_T.copy(this.light.groundColor);for(let s=0,o=n.count;s<o;s++){const a=s<o/2?vT:_T;n.setXYZ(s,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(kG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class OG extends ho{constructor(t=10,n=10,s=4473924,o=8947848){s=new Ot(s),o=new Ot(o);const a=n/2,y=t/n,i=t/2,_=[],g=[];for(let d=0,v=0,x=-i;d<=n;d++,x+=y){_.push(-i,0,x,i,0,x),_.push(x,0,-i,x,0,i);const p=d===a?s:o;p.toArray(g,v),v+=3,p.toArray(g,v),v+=3,p.toArray(g,v),v+=3,p.toArray(g,v),v+=3}const h=new ln;h.setAttribute("position",new zt(_,3)),h.setAttribute("color",new zt(g,3));const l=new Mi({vertexColors:!0,toneMapped:!1});super(h,l),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class DG extends ho{constructor(t=10,n=16,s=8,o=64,a=4473924,y=8947848){a=new Ot(a),y=new Ot(y);const i=[],_=[];if(n>1)for(let l=0;l<n;l++){const d=l/n*(Math.PI*2),v=Math.sin(d)*t,x=Math.cos(d)*t;i.push(0,0,0),i.push(v,0,x);const p=l&1?a:y;_.push(p.r,p.g,p.b),_.push(p.r,p.g,p.b)}for(let l=0;l<s;l++){const d=l&1?a:y,v=t-t/s*l;for(let x=0;x<o;x++){let p=x/o*(Math.PI*2),f=Math.sin(p)*v,u=Math.cos(p)*v;i.push(f,0,u),_.push(d.r,d.g,d.b),p=(x+1)/o*(Math.PI*2),f=Math.sin(p)*v,u=Math.cos(p)*v,i.push(f,0,u),_.push(d.r,d.g,d.b)}}const g=new ln;g.setAttribute("position",new zt(i,3)),g.setAttribute("color",new zt(_,3));const h=new Mi({vertexColors:!0,toneMapped:!1});super(g,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xT=new Re,gm=new Re,bT=new Re;class NG extends jn{constructor(t,n,s){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="DirectionalLightHelper",n===void 0&&(n=1);let o=new ln;o.setAttribute("position",new zt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new Mi({fog:!1,toneMapped:!1});this.lightPlane=new Fa(o,a),this.add(this.lightPlane),o=new ln,o.setAttribute("position",new zt([0,0,0,0,0,1],3)),this.targetLine=new Fa(o,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xT.setFromMatrixPosition(this.light.matrixWorld),gm.setFromMatrixPosition(this.light.target.matrixWorld),bT.subVectors(gm,xT),this.lightPlane.lookAt(gm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gm),this.targetLine.scale.z=bT.length()}}const vm=new Re,ur=new xf;class UG extends ho{constructor(t){const n=new ln,s=new Mi({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],a=[],y={};i("n1","n2"),i("n2","n4"),i("n4","n3"),i("n3","n1"),i("f1","f2"),i("f2","f4"),i("f4","f3"),i("f3","f1"),i("n1","f1"),i("n2","f2"),i("n3","f3"),i("n4","f4"),i("p","n1"),i("p","n2"),i("p","n3"),i("p","n4"),i("u1","u2"),i("u2","u3"),i("u3","u1"),i("c","t"),i("p","c"),i("cn1","cn2"),i("cn3","cn4"),i("cf1","cf2"),i("cf3","cf4");function i(x,p){_(x),_(p)}function _(x){o.push(0,0,0),a.push(0,0,0),y[x]===void 0&&(y[x]=[]),y[x].push(o.length/3-1)}n.setAttribute("position",new zt(o,3)),n.setAttribute("color",new zt(a,3)),super(n,s),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=y,this.update();const g=new Ot(16755200),h=new Ot(16711680),l=new Ot(43775),d=new Ot(16777215),v=new Ot(3355443);this.setColors(g,h,l,d,v)}setColors(t,n,s,o,a){const i=this.geometry.getAttribute("color");i.setXYZ(0,t.r,t.g,t.b),i.setXYZ(1,t.r,t.g,t.b),i.setXYZ(2,t.r,t.g,t.b),i.setXYZ(3,t.r,t.g,t.b),i.setXYZ(4,t.r,t.g,t.b),i.setXYZ(5,t.r,t.g,t.b),i.setXYZ(6,t.r,t.g,t.b),i.setXYZ(7,t.r,t.g,t.b),i.setXYZ(8,t.r,t.g,t.b),i.setXYZ(9,t.r,t.g,t.b),i.setXYZ(10,t.r,t.g,t.b),i.setXYZ(11,t.r,t.g,t.b),i.setXYZ(12,t.r,t.g,t.b),i.setXYZ(13,t.r,t.g,t.b),i.setXYZ(14,t.r,t.g,t.b),i.setXYZ(15,t.r,t.g,t.b),i.setXYZ(16,t.r,t.g,t.b),i.setXYZ(17,t.r,t.g,t.b),i.setXYZ(18,t.r,t.g,t.b),i.setXYZ(19,t.r,t.g,t.b),i.setXYZ(20,t.r,t.g,t.b),i.setXYZ(21,t.r,t.g,t.b),i.setXYZ(22,t.r,t.g,t.b),i.setXYZ(23,t.r,t.g,t.b),i.setXYZ(24,n.r,n.g,n.b),i.setXYZ(25,n.r,n.g,n.b),i.setXYZ(26,n.r,n.g,n.b),i.setXYZ(27,n.r,n.g,n.b),i.setXYZ(28,n.r,n.g,n.b),i.setXYZ(29,n.r,n.g,n.b),i.setXYZ(30,n.r,n.g,n.b),i.setXYZ(31,n.r,n.g,n.b),i.setXYZ(32,s.r,s.g,s.b),i.setXYZ(33,s.r,s.g,s.b),i.setXYZ(34,s.r,s.g,s.b),i.setXYZ(35,s.r,s.g,s.b),i.setXYZ(36,s.r,s.g,s.b),i.setXYZ(37,s.r,s.g,s.b),i.setXYZ(38,o.r,o.g,o.b),i.setXYZ(39,o.r,o.g,o.b),i.setXYZ(40,a.r,a.g,a.b),i.setXYZ(41,a.r,a.g,a.b),i.setXYZ(42,a.r,a.g,a.b),i.setXYZ(43,a.r,a.g,a.b),i.setXYZ(44,a.r,a.g,a.b),i.setXYZ(45,a.r,a.g,a.b),i.setXYZ(46,a.r,a.g,a.b),i.setXYZ(47,a.r,a.g,a.b),i.setXYZ(48,a.r,a.g,a.b),i.setXYZ(49,a.r,a.g,a.b),i.needsUpdate=!0}update(){const t=this.geometry,n=this.pointMap,s=1,o=1;ur.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),yr("c",n,t,ur,0,0,-1),yr("t",n,t,ur,0,0,1),yr("n1",n,t,ur,-s,-o,-1),yr("n2",n,t,ur,s,-o,-1),yr("n3",n,t,ur,-s,o,-1),yr("n4",n,t,ur,s,o,-1),yr("f1",n,t,ur,-s,-o,1),yr("f2",n,t,ur,s,-o,1),yr("f3",n,t,ur,-s,o,1),yr("f4",n,t,ur,s,o,1),yr("u1",n,t,ur,s*.7,o*1.1,-1),yr("u2",n,t,ur,-s*.7,o*1.1,-1),yr("u3",n,t,ur,0,o*2,-1),yr("cf1",n,t,ur,-s,0,1),yr("cf2",n,t,ur,s,0,1),yr("cf3",n,t,ur,0,-o,1),yr("cf4",n,t,ur,0,o,1),yr("cn1",n,t,ur,-s,0,-1),yr("cn2",n,t,ur,s,0,-1),yr("cn3",n,t,ur,0,-o,-1),yr("cn4",n,t,ur,0,o,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function yr(r,t,n,s,o,a,y){vm.set(o,a,y).unproject(s);const i=t[r];if(i!==void 0){const _=n.getAttribute("position");for(let g=0,h=i.length;g<h;g++)_.setXYZ(i[g],vm.x,vm.y,vm.z)}}const _m=new bi;class FG extends ho{constructor(t,n=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),a=new ln;a.setIndex(new In(s,1)),a.setAttribute("position",new In(o,3)),super(a,new Mi({color:n,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_m.setFromObject(this.object),_m.isEmpty())return;const n=_m.min,s=_m.max,o=this.geometry.attributes.position,a=o.array;a[0]=s.x,a[1]=s.y,a[2]=s.z,a[3]=n.x,a[4]=s.y,a[5]=s.z,a[6]=n.x,a[7]=n.y,a[8]=s.z,a[9]=s.x,a[10]=n.y,a[11]=s.z,a[12]=s.x,a[13]=s.y,a[14]=n.z,a[15]=n.x,a[16]=s.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=s.x,a[22]=n.y,a[23]=n.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,n){return super.copy(t,n),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class BG extends ho{constructor(t,n=16776960){const s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new ln;a.setIndex(new In(s,1)),a.setAttribute("position",new zt(o,3)),super(a,new Mi({color:n,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class zG extends Fa{constructor(t,n=1,s=16776960){const o=s,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],y=new ln;y.setAttribute("position",new zt(a,3)),y.computeBoundingSphere(),super(y,new Mi({color:o,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=n;const i=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],_=new ln;_.setAttribute("position",new zt(i,3)),_.computeBoundingSphere(),this.add(new Ar(_,new Wa({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wT=new Re;let xm,kv;class VG extends jn{constructor(t=new Re(0,0,1),n=new Re(0,0,0),s=1,o=16776960,a=s*.2,y=a*.2){super(),this.type="ArrowHelper",xm===void 0&&(xm=new ln,xm.setAttribute("position",new zt([0,0,0,0,1,0],3)),kv=new ed(0,.5,1,5,1),kv.translate(0,-.5,0)),this.position.copy(n),this.line=new Fa(xm,new Mi({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ar(kv,new Wa({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(s,a,y)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{wT.set(t.z,0,-t.x).normalize();const n=Math.acos(t.y);this.quaternion.setFromAxisAngle(wT,n)}}setLength(t,n=t*.2,s=n*.2){this.line.scale.set(1,Math.max(1e-4,t-n),1),this.line.updateMatrix(),this.cone.scale.set(s,n,s),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class GG extends ho{constructor(t=1){const n=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new ln;o.setAttribute("position",new zt(n,3)),o.setAttribute("color",new zt(s,3));const a=new Mi({vertexColors:!0,toneMapped:!1});super(o,a),this.type="AxesHelper"}setColors(t,n,s){const o=new Ot,a=this.geometry.attributes.color.array;return o.set(t),o.toArray(a,0),o.toArray(a,3),o.set(n),o.toArray(a,6),o.toArray(a,9),o.set(s),o.toArray(a,12),o.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class HG{constructor(){this.type="ShapePath",this.color=new Ot,this.subPaths=[],this.currentPath=null}moveTo(t,n){return this.currentPath=new $h,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,n),this}lineTo(t,n){return this.currentPath.lineTo(t,n),this}quadraticCurveTo(t,n,s,o){return this.currentPath.quadraticCurveTo(t,n,s,o),this}bezierCurveTo(t,n,s,o,a,y){return this.currentPath.bezierCurveTo(t,n,s,o,a,y),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(u){const c=[];for(let m=0,b=u.length;m<b;m++){const S=u[m],w=new Xl;w.curves=S.curves,c.push(w)}return c}function s(u,c){const m=c.length;let b=!1;for(let S=m-1,w=0;w<m;S=w++){let M=c[S],A=c[w],P=A.x-M.x,R=A.y-M.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(M=c[w],P=-P,A=c[S],R=-R),u.y<M.y||u.y>A.y)continue;if(u.y===M.y){if(u.x===M.x)return!0}else{const k=R*(u.x-M.x)-P*(u.y-M.y);if(k===0)return!0;if(k<0)continue;b=!b}}else{if(u.y!==M.y)continue;if(A.x<=u.x&&u.x<=M.x||M.x<=u.x&&u.x<=A.x)return!0}}return b}const o=uo.isClockWise,a=this.subPaths;if(a.length===0)return[];let y,i,_;const g=[];if(a.length===1)return i=a[0],_=new Xl,_.curves=i.curves,g.push(_),g;let h=!o(a[0].getPoints());h=t?!h:h;const l=[],d=[];let v=[],x=0,p;d[x]=void 0,v[x]=[];for(let u=0,c=a.length;u<c;u++)i=a[u],p=i.getPoints(),y=o(p),y=t?!y:y,y?(!h&&d[x]&&x++,d[x]={s:new Xl,p},d[x].s.curves=i.curves,h&&x++,v[x]=[]):v[x].push({h:i,p:p[0]});if(!d[0])return n(a);if(d.length>1){let u=!1,c=0;for(let m=0,b=d.length;m<b;m++)l[m]=[];for(let m=0,b=d.length;m<b;m++){const S=v[m];for(let w=0;w<S.length;w++){const M=S[w];let A=!0;for(let P=0;P<d.length;P++)s(M.p,d[P].p)&&(m!==P&&c++,A?(A=!1,l[P].push(M)):u=!0);A&&l[m].push(M)}}c>0&&u===!1&&(v=l)}let f;for(let u=0,c=d.length;u<c;u++){_=d[u].s,g.push(_),f=v[u];for(let m=0,b=f.length;m<b;m++)_.holes.push(f[m].h)}return g}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Qy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Qy);const WG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:_b,AddEquation:xa,AddOperation:r3,AdditiveAnimationBlendMode:Ab,AdditiveBlending:e_,AgXToneMapping:l3,AlphaFormat:h3,AlwaysCompare:R3,AlwaysDepth:KR,AlwaysStencilFunc:j_,AmbientLight:jj,AnimationAction:Fj,AnimationClip:of,AnimationLoader:XV,AnimationMixer:bG,AnimationObjectGroup:_G,AnimationUtils:VV,ArcCurve:nj,ArrayCamera:X3,ArrowHelper:VG,AttachedBindMode:s_,Audio:Nj,AudioAnalyser:uG,AudioContext:nw,AudioListener:oG,AudioLoader:rG,AxesHelper:GG,BackSide:xi,BasicDepthPacking:b3,BasicShadowMap:LR,BatchedMesh:$3,Bone:Vb,BooleanKeyframeTrack:ou,Box2:CG,Box3:bi,Box3Helper:BG,BoxGeometry:su,BoxHelper:FG,BufferAttribute:In,BufferGeometry:ln,BufferGeometryLoader:Dj,ByteType:c3,Cache:Lo,Camera:xf,CameraHelper:UG,CanvasTexture:hV,CapsuleGeometry:hg,CatmullRomCurve3:rj,CineonToneMapping:o3,CircleGeometry:fg,ClampToEdgeWrapping:oi,Clock:rw,Color:Ot,ColorKeyframeTrack:$b,ColorManagement:Nn,CompressedArrayTexture:cV,CompressedCubeTexture:dV,CompressedTexture:cg,CompressedTextureLoader:qV,ConeGeometry:pg,ConstantAlphaFactor:qR,ConstantColorFactor:WR,CubeCamera:N3,CubeReflectionMapping:Go,CubeRefractionMapping:Ua,CubeTexture:bf,CubeTextureLoader:YV,CubeUVReflectionMapping:Kc,CubicBezierCurve:Wb,CubicBezierCurve3:ij,CubicInterpolant:Sj,CullFaceBack:$1,CullFaceFront:jR,CullFaceFrontBack:J5,CullFaceNone:RR,Curve:Xs,CurvePath:oj,CustomBlending:kR,CustomToneMapping:a3,CylinderGeometry:ed,Cylindrical:AG,Data3DTexture:Lb,DataArrayTexture:ig,DataTexture:Wl,DataTextureLoader:ZV,DataUtils:oF,DecrementStencilOp:lU,DecrementWrapStencilOp:cU,DefaultLoadingManager:Tj,DepthFormat:La,DepthStencilFormat:Ql,DepthTexture:Db,DetachedBindMode:u3,DirectionalLight:Rj,DirectionalLightHelper:NG,DiscreteInterpolant:Mj,DisplayP3ColorSpace:rg,DodecahedronGeometry:mg,DoubleSide:eo,DstAlphaFactor:BR,DstColorFactor:VR,DynamicCopyUsage:EU,DynamicDrawUsage:_U,DynamicReadUsage:wU,EdgesGeometry:aj,EllipseCurve:dg,EqualCompare:T3,EqualDepth:QR,EqualStencilFunc:pU,EquirectangularReflectionMapping:Bh,EquirectangularRefractionMapping:zh,Euler:_f,EventDispatcher:Xo,ExtrudeGeometry:gg,FileLoader:Ho,Float16BufferAttribute:hF,Float32BufferAttribute:zt,Float64BufferAttribute:fF,FloatType:ys,Fog:ag,FogExp2:og,FramebufferTexture:uV,FrontSide:Vo,Frustum:wf,GLBufferAttribute:EG,GLSL1:AU,GLSL3:L_,GreaterCompare:A3,GreaterDepth:e3,GreaterEqualCompare:P3,GreaterEqualDepth:$R,GreaterEqualStencilFunc:vU,GreaterStencilFunc:yU,GridHelper:OG,Group:xc,HalfFloatType:Bc,HemisphereLight:Aj,HemisphereLightHelper:IG,IcosahedronGeometry:vg,ImageBitmapLoader:nG,ImageLoader:af,ImageUtils:jb,IncrementStencilOp:aU,IncrementWrapStencilOp:uU,InstancedBufferAttribute:Gc,InstancedBufferGeometry:Oj,InstancedInterleavedBuffer:MG,InstancedMesh:Q3,Int16BufferAttribute:cF,Int32BufferAttribute:dF,Int8BufferAttribute:aF,IntType:xb,InterleavedBuffer:lg,InterleavedBufferAttribute:$l,Interpolant:Af,InterpolateDiscrete:Hh,InterpolateLinear:Wh,InterpolateSmooth:Gm,InvertStencilOp:dU,KeepStencilOp:Tl,KeyframeTrack:qs,LOD:K3,LatheGeometry:Mf,Layers:Hl,LessCompare:E3,LessDepth:JR,LessEqualCompare:Pb,LessEqualDepth:Fh,LessEqualStencilFunc:mU,LessStencilFunc:fU,Light:qa,LightProbe:Ij,Line:Fa,Line3:PG,LineBasicMaterial:Mi,LineCurve:Xb,LineCurve3:sj,LineDashedMaterial:xj,LineLoop:ej,LineSegments:ho,LinearDisplayP3ColorSpace:vf,LinearEncoding:Cb,LinearFilter:rr,LinearInterpolant:Qb,LinearMipMapLinearFilter:tU,LinearMipMapNearestFilter:eU,LinearMipmapLinearFilter:to,LinearMipmapNearestFilter:fh,LinearSRGBColorSpace:co,LinearToneMapping:i3,LinearTransfer:qh,Loader:Ni,LoaderUtils:B_,LoadingManager:ew,LoopOnce:v3,LoopPingPong:x3,LoopRepeat:_3,LuminanceAlphaFormat:p3,LuminanceFormat:f3,MOUSE:Z5,Material:ci,MaterialLoader:Eg,MathUtils:VU,Matrix3:hn,Matrix4:Jt,MaxEquation:i_,Mesh:Ar,MeshBasicMaterial:Wa,MeshDepthMaterial:Nb,MeshDistanceMaterial:Ub,MeshLambertMaterial:vj,MeshMatcapMaterial:_j,MeshNormalMaterial:gj,MeshPhongMaterial:mj,MeshPhysicalMaterial:pj,MeshStandardMaterial:Kb,MeshToonMaterial:yj,MinEquation:r_,MirroredRepeatWrapping:Gh,MixOperation:n3,MultiplyBlending:n_,MultiplyOperation:gf,NearestFilter:vr,NearestMipMapLinearFilter:$5,NearestMipMapNearestFilter:Q5,NearestMipmapLinearFilter:Cl,NearestMipmapNearestFilter:Ey,NeverCompare:M3,NeverDepth:ZR,NeverStencilFunc:hU,NoBlending:Do,NoColorSpace:qi,NoToneMapping:ao,NormalAnimationBlendMode:ng,NormalBlending:zl,NotEqualCompare:C3,NotEqualDepth:t3,NotEqualStencilFunc:gU,NumberKeyframeTrack:rf,Object3D:jn,ObjectLoader:eG,ObjectSpaceNormalMap:S3,OctahedronGeometry:Ef,OneFactor:NR,OneMinusConstantAlphaFactor:YR,OneMinusConstantColorFactor:XR,OneMinusDstAlphaFactor:zR,OneMinusDstColorFactor:GR,OneMinusSrcAlphaFactor:My,OneMinusSrcColorFactor:FR,OrthographicCamera:Sf,P3Primaries:Zh,PCFShadowMap:$y,PCFSoftShadowMap:hh,PMREMGenerator:I_,Path:$h,PerspectiveCamera:Br,Plane:ya,PlaneGeometry:Qc,PlaneHelper:zG,PointLight:Pj,PointLightHelper:LG,Points:tj,PointsMaterial:Gb,PolarGridHelper:DG,PolyhedronGeometry:Xa,PositionalAudio:lG,PropertyBinding:En,PropertyMixer:Uj,QuadraticBezierCurve:qb,QuadraticBezierCurve3:Yb,Quaternion:Di,QuaternionKeyframeTrack:td,QuaternionLinearInterpolant:Ej,RED_GREEN_RGTC2_Format:P_,RED_RGTC1_Format:g3,REVISION:Qy,RGBADepthPacking:w3,RGBAFormat:gi,RGBAIntegerFormat:Eb,RGBA_ASTC_10x10_Format:S_,RGBA_ASTC_10x5_Format:x_,RGBA_ASTC_10x6_Format:b_,RGBA_ASTC_10x8_Format:w_,RGBA_ASTC_12x10_Format:M_,RGBA_ASTC_12x12_Format:E_,RGBA_ASTC_4x4_Format:h_,RGBA_ASTC_5x4_Format:f_,RGBA_ASTC_5x5_Format:p_,RGBA_ASTC_6x5_Format:m_,RGBA_ASTC_6x6_Format:y_,RGBA_ASTC_8x5_Format:g_,RGBA_ASTC_8x6_Format:v_,RGBA_ASTC_8x8_Format:__,RGBA_BPTC_Format:Vm,RGBA_ETC2_EAC_Format:d_,RGBA_PVRTC_2BPPV1_Format:u_,RGBA_PVRTC_4BPPV1_Format:l_,RGBA_S3TC_DXT1_Format:Fm,RGBA_S3TC_DXT3_Format:Bm,RGBA_S3TC_DXT5_Format:zm,RGB_BPTC_SIGNED_Format:T_,RGB_BPTC_UNSIGNED_Format:A_,RGB_ETC1_Format:Tb,RGB_ETC2_Format:c_,RGB_PVRTC_2BPPV1_Format:a_,RGB_PVRTC_4BPPV1_Format:o_,RGB_S3TC_DXT1_Format:Um,RGFormat:y3,RGIntegerFormat:Mb,RawShaderMaterial:fj,Ray:Jc,Raycaster:Bj,Rec709Primaries:Yh,RectAreaLight:Lj,RedFormat:m3,RedIntegerFormat:Sb,ReinhardToneMapping:s3,RenderTarget:k3,RepeatWrapping:Vh,ReplaceStencilOp:oU,ReverseSubtractEquation:OR,RingGeometry:_g,SIGNED_RED_GREEN_RGTC2_Format:R_,SIGNED_RED_RGTC1_Format:C_,SRGBColorSpace:Lr,SRGBTransfer:Hn,Scene:Bb,ShaderChunk:an,ShaderLib:Bs,ShaderMaterial:Ws,ShadowMaterial:hj,Shape:Xl,ShapeGeometry:xg,ShapePath:HG,ShapeUtils:uo,ShortType:d3,Skeleton:ug,SkeletonHelper:jG,SkinnedMesh:J3,Source:Dl,Sphere:li,SphereGeometry:Tf,Spherical:TG,SphericalHarmonics3:kj,SplineCurve:Zb,SpotLight:Cj,SpotLightHelper:RG,Sprite:Z3,SpriteMaterial:zb,SrcAlphaFactor:Sy,SrcAlphaSaturateFactor:HR,SrcColorFactor:UR,StaticCopyUsage:MU,StaticDrawUsage:Kh,StaticReadUsage:bU,StereoCamera:iG,StreamCopyUsage:TU,StreamDrawUsage:xU,StreamReadUsage:SU,StringKeyframeTrack:au,SubtractEquation:IR,SubtractiveBlending:t_,TOUCH:K5,TangentSpaceNormalMap:Ha,TetrahedronGeometry:bg,Texture:fr,TextureLoader:KV,TorusGeometry:wg,TorusKnotGeometry:Sg,Triangle:Yi,TriangleFanDrawMode:iU,TriangleStripDrawMode:rU,TrianglesDrawMode:nU,TubeGeometry:Mg,UVMapping:eg,Uint16BufferAttribute:kb,Uint32BufferAttribute:Ib,Uint8BufferAttribute:lF,Uint8ClampedBufferAttribute:uF,Uniform:ow,UniformsGroup:SG,UniformsLib:Ct,UniformsUtils:D3,UnsignedByteType:lo,UnsignedInt248Type:ja,UnsignedIntType:jo,UnsignedShort4444Type:bb,UnsignedShort5551Type:wb,UnsignedShortType:tg,VSMShadowMap:Ns,Vector2:mt,Vector3:Re,Vector4:Un,VectorKeyframeTrack:sf,VideoTexture:lV,WebGL1Renderer:q3,WebGL3DRenderTarget:YU,WebGLArrayRenderTarget:qU,WebGLCoordinateSystem:no,WebGLCubeRenderTarget:U3,WebGLMultipleRenderTargets:ZU,WebGLRenderTarget:Hs,WebGLRenderer:Fb,WebGLUtils:W3,WebGPUCoordinateSystem:Jh,WireframeGeometry:dj,WrapAroundEnding:Xh,ZeroCurvatureEnding:Il,ZeroFactor:DR,ZeroSlopeEnding:Ol,ZeroStencilOp:sU,_SRGBAFormat:Ty,createCanvasElement:L3,sRGBEncoding:ka},Symbol.toStringTag,{value:"Module"}));var Vj={exports:{}},lu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */lu.ConcurrentRoot=1;lu.ContinuousEventPriority=4;lu.DefaultEventPriority=16;lu.DiscreteEventPriority=1;lu.IdleEventPriority=536870912;lu.LegacyRoot=0;Vj.exports=lu;var wc=Vj.exports;function XG(r){let t;const n=new Set,s=(g,h)=>{const l=typeof g=="function"?g(t):g;if(l!==t){const d=t;t=h?l:Object.assign({},t,l),n.forEach(v=>v(t,d))}},o=()=>t,a=(g,h=o,l=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=h(t);function v(){const x=h(t);if(!l(d,x)){const p=d;g(d=x,p)}}return n.add(v),()=>n.delete(v)},_={setState:s,getState:o,subscribe:(g,h,l)=>h||l?a(g,h,l):(n.add(g),()=>n.delete(g)),destroy:()=>n.clear()};return t=r(s,o,_),_}const qG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ST=qG?at.useEffect:at.useLayoutEffect;function YG(r){const t=typeof r=="function"?XG(r):r,n=(s=t.getState,o=Object.is)=>{const[,a]=at.useReducer(f=>f+1,0),y=t.getState(),i=at.useRef(y),_=at.useRef(s),g=at.useRef(o),h=at.useRef(!1),l=at.useRef();l.current===void 0&&(l.current=s(y));let d,v=!1;(i.current!==y||_.current!==s||g.current!==o||h.current)&&(d=s(y),v=!o(l.current,d)),ST(()=>{v&&(l.current=d),i.current=y,_.current=s,g.current=o,h.current=!1});const x=at.useRef(y);ST(()=>{const f=()=>{try{const c=t.getState(),m=_.current(c);g.current(l.current,m)||(i.current=c,l.current=m,a())}catch{h.current=!0,a()}},u=t.subscribe(f);return t.getState()!==x.current&&f(),u},[]);const p=v?d:l.current;return at.useDebugValue(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const s=[n,t];return{next(){const o=s.length<=0;return{value:s.shift(),done:o}}}},n}var Gj={exports:{}},Iv={exports:{}},Ov={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function ZG(){return MT||(MT=1,function(r){function t(N,O){var H=N.length;N.push(O);e:for(;0<H;){var q=H-1>>>1,K=N[q];if(0<o(K,O))N[q]=O,N[H]=K,H=q;else break e}}function n(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var O=N[0],H=N.pop();if(H!==O){N[0]=H;e:for(var q=0,K=N.length,ne=K>>>1;q<ne;){var ee=2*(q+1)-1,se=N[ee],me=ee+1,X=N[me];if(0>o(se,H))me<K&&0>o(X,se)?(N[q]=X,N[me]=H,q=me):(N[q]=se,N[ee]=H,q=ee);else if(me<K&&0>o(X,H))N[q]=X,N[me]=H,q=me;else break e}}return O}function o(N,O){var H=N.sortIndex-O.sortIndex;return H!==0?H:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var y=Date,i=y.now();r.unstable_now=function(){return y.now()-i}}var _=[],g=[],h=1,l=null,d=3,v=!1,x=!1,p=!1,f=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var O=n(g);O!==null;){if(O.callback===null)s(g);else if(O.startTime<=N)s(g),O.sortIndex=O.expirationTime,t(_,O);else break;O=n(g)}}function b(N){if(p=!1,m(N),!x)if(n(_)!==null)x=!0,z(S);else{var O=n(g);O!==null&&G(b,O.startTime-N)}}function S(N,O){x=!1,p&&(p=!1,u(A),A=-1),v=!0;var H=d;try{for(m(O),l=n(_);l!==null&&(!(l.expirationTime>O)||N&&!k());){var q=l.callback;if(typeof q=="function"){l.callback=null,d=l.priorityLevel;var K=q(l.expirationTime<=O);O=r.unstable_now(),typeof K=="function"?l.callback=K:l===n(_)&&s(_),m(O)}else s(_);l=n(_)}if(l!==null)var ne=!0;else{var ee=n(g);ee!==null&&G(b,ee.startTime-O),ne=!1}return ne}finally{l=null,d=H,v=!1}}var w=!1,M=null,A=-1,P=5,R=-1;function k(){return!(r.unstable_now()-R<P)}function L(){if(M!==null){var N=r.unstable_now();R=N;var O=!0;try{O=M(!0,N)}finally{O?B():(w=!1,M=null)}}else w=!1}var B;if(typeof c=="function")B=function(){c(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=L,B=function(){F.postMessage(null)}}else B=function(){f(L,0)};function z(N){M=N,w||(w=!0,B())}function G(N,O){A=f(function(){N(r.unstable_now())},O)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,z(S))},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return n(_)},r.unstable_next=function(N){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var H=d;d=O;try{return N()}finally{d=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=d;d=N;try{return O()}finally{d=H}},r.unstable_scheduleCallback=function(N,O,H){var q=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,N={id:h++,callback:O,priorityLevel:N,startTime:H,expirationTime:K,sortIndex:-1},H>q?(N.sortIndex=H,t(g,N),n(_)===null&&N===n(g)&&(p?(u(A),A=-1):p=!0,G(b,H-q))):(N.sortIndex=K,t(_,N),x||v||(x=!0,z(S))),N},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(N){var O=d;return function(){var H=d;d=O;try{return N.apply(this,arguments)}finally{d=H}}}}(Ov)),Ov}var ET;function KG(){return ET||(ET=1,Iv.exports=ZG()),Iv.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JG=function(t){var n={},s=at,o=KG(),a=Object.assign;function y(E){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+E,U=1;U<arguments.length;U++)C+="&args[]="+encodeURIComponent(arguments[U]);return"Minified React error #"+E+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),g=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),S=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=S&&E[S]||E["@@iterator"],typeof E=="function"?E:null)}function M(E){if(E==null)return null;if(typeof E=="function")return E.displayName||E.name||null;if(typeof E=="string")return E;switch(E){case h:return"Fragment";case g:return"Portal";case d:return"Profiler";case l:return"StrictMode";case f:return"Suspense";case u:return"SuspenseList"}if(typeof E=="object")switch(E.$$typeof){case x:return(E.displayName||"Context")+".Consumer";case v:return(E._context.displayName||"Context")+".Provider";case p:var C=E.render;return E=E.displayName,E||(E=C.displayName||C.name||"",E=E!==""?"ForwardRef("+E+")":"ForwardRef"),E;case c:return C=E.displayName||null,C!==null?C:M(E.type)||"Memo";case m:C=E._payload,E=E._init;try{return M(E(C))}catch{}}return null}function A(E){var C=E.type;switch(E.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return E=C.render,E=E.displayName||E.name||"",C.displayName||(E!==""?"ForwardRef("+E+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(C);case 8:return C===l?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function P(E){var C=E,U=E;if(E.alternate)for(;C.return;)C=C.return;else{E=C;do C=E,C.flags&4098&&(U=C.return),E=C.return;while(E)}return C.tag===3?U:null}function R(E){if(P(E)!==E)throw Error(y(188))}function k(E){var C=E.alternate;if(!C){if(C=P(E),C===null)throw Error(y(188));return C!==E?null:E}for(var U=E,W=C;;){var J=U.return;if(J===null)break;var le=J.alternate;if(le===null){if(W=J.return,W!==null){U=W;continue}break}if(J.child===le.child){for(le=J.child;le;){if(le===U)return R(J),E;if(le===W)return R(J),C;le=le.sibling}throw Error(y(188))}if(U.return!==W.return)U=J,W=le;else{for(var Le=!1,Ge=J.child;Ge;){if(Ge===U){Le=!0,U=J,W=le;break}if(Ge===W){Le=!0,W=J,U=le;break}Ge=Ge.sibling}if(!Le){for(Ge=le.child;Ge;){if(Ge===U){Le=!0,U=le,W=J;break}if(Ge===W){Le=!0,W=le,U=J;break}Ge=Ge.sibling}if(!Le)throw Error(y(189))}}if(U.alternate!==W)throw Error(y(190))}if(U.tag!==3)throw Error(y(188));return U.stateNode.current===U?E:C}function L(E){return E=k(E),E!==null?B(E):null}function B(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){var C=B(E);if(C!==null)return C;E=E.sibling}return null}function I(E){if(E.tag===5||E.tag===6)return E;for(E=E.child;E!==null;){if(E.tag!==4){var C=I(E);if(C!==null)return C}E=E.sibling}return null}var F=Array.isArray,z=t.getPublicInstance,G=t.getRootHostContext,N=t.getChildHostContext,O=t.prepareForCommit,H=t.resetAfterCommit,q=t.createInstance,K=t.appendInitialChild,ne=t.finalizeInitialChildren,ee=t.prepareUpdate,se=t.shouldSetTextContent,me=t.createTextInstance,X=t.scheduleTimeout,Z=t.cancelTimeout,ie=t.noTimeout,ye=t.isPrimaryRenderer,fe=t.supportsMutation,$=t.supportsPersistence,re=t.supportsHydration,de=t.getInstanceFromNode,ge=t.preparePortalMount,ve=t.getCurrentEventPriority,we=t.detachDeletedInstance,Se=t.supportsMicrotasks,ae=t.scheduleMicrotask,oe=t.supportsTestSelectors,Ee=t.findFiberRoot,Oe=t.getBoundingRect,ze=t.getTextContent,Be=t.isHiddenSubtree,dt=t.matchAccessibilityRole,Je=t.setFocusIfFocusable,_e=t.setupIntersectionObserver,Ue=t.appendChild,Fe=t.appendChildToContainer,Ne=t.commitTextUpdate,ft=t.commitMount,vt=t.commitUpdate,ht=t.insertBefore,lt=t.insertInContainerBefore,ce=t.removeChild,ue=t.removeChildFromContainer,he=t.resetTextContent,be=t.hideInstance,je=t.hideTextInstance,We=t.unhideInstance,xe=t.unhideTextInstance,Ve=t.clearContainer,Ce=t.cloneInstance,Qe=t.createContainerChildSet,ut=t.appendChildToContainerChildSet,Rt=t.finalizeContainerChildren,Nt=t.replaceContainerChildren,Bt=t.cloneHiddenInstance,Vt=t.cloneHiddenTextInstance,jt=t.canHydrateInstance,Yt=t.canHydrateTextInstance,on=t.canHydrateSuspenseInstance,$n=t.isSuspenseInstancePending,xn=t.isSuspenseInstanceFallback,On=t.registerSuspenseInstanceRetry,Gn=t.getNextHydratableSibling,un=t.getFirstHydratableChild,lr=t.getFirstHydratableChildWithinContainer,er=t.getFirstHydratableChildWithinSuspenseInstance,An=t.hydrateInstance,qo=t.hydrateTextInstance,Yo=t.hydrateSuspenseInstance,Ae=t.getNextHydratableInstanceAfterSuspenseInstance,Ye=t.commitHydratedContainer,nt=t.commitHydratedSuspenseInstance,pe=t.clearSuspenseBoundary,Ie=t.clearSuspenseBoundaryFromContainer,st=t.shouldDeleteUnhydratedTailInstances,Ke=t.didNotMatchHydratedContainerTextInstance,Mt=t.didNotMatchHydratedTextInstance,Ze;function Lt(E){if(Ze===void 0)try{throw Error()}catch(U){var C=U.stack.trim().match(/\n( *(at )?)/);Ze=C&&C[1]||""}return`
`+Ze+E}var pt=!1;function Tt(E,C){if(!E||pt)return"";pt=!0;var U=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(St){var W=St}Reflect.construct(E,[],C)}else{try{C.call()}catch(St){W=St}E.call(C.prototype)}else{try{throw Error()}catch(St){W=St}E()}}catch(St){if(St&&W&&typeof St.stack=="string"){for(var J=St.stack.split(`
`),le=W.stack.split(`
`),Le=J.length-1,Ge=le.length-1;1<=Le&&0<=Ge&&J[Le]!==le[Ge];)Ge--;for(;1<=Le&&0<=Ge;Le--,Ge--)if(J[Le]!==le[Ge]){if(Le!==1||Ge!==1)do if(Le--,Ge--,0>Ge||J[Le]!==le[Ge]){var ct=`
`+J[Le].replace(" at new "," at ");return E.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",E.displayName)),ct}while(1<=Le&&0<=Ge);break}}}finally{pt=!1,Error.prepareStackTrace=U}return(E=E?E.displayName||E.name:"")?Lt(E):""}var _t=Object.prototype.hasOwnProperty,vn=[],$t=-1;function Ln(E){return{current:E}}function It(E){0>$t||(E.current=vn[$t],vn[$t]=null,$t--)}function bt(E,C){$t++,vn[$t]=E.current,E.current=C}var Dn={},Wt=Ln(Dn),fn=Ln(!1),rs=Dn;function di(E,C){var U=E.type.contextTypes;if(!U)return Dn;var W=E.stateNode;if(W&&W.__reactInternalMemoizedUnmaskedChildContext===C)return W.__reactInternalMemoizedMaskedChildContext;var J={},le;for(le in U)J[le]=C[le];return W&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=C,E.__reactInternalMemoizedMaskedChildContext=J),J}function xr(E){return E=E.childContextTypes,E!=null}function tr(){It(fn),It(Wt)}function is(E,C,U){if(Wt.current!==Dn)throw Error(y(168));bt(Wt,C),bt(fn,U)}function Zo(E,C,U){var W=E.stateNode;if(C=C.childContextTypes,typeof W.getChildContext!="function")return U;W=W.getChildContext();for(var J in W)if(!(J in C))throw Error(y(108,A(E)||"Unknown",J));return a({},U,W)}function Cr(E){return E=(E=E.stateNode)&&E.__reactInternalMemoizedMergedChildContext||Dn,rs=Wt.current,bt(Wt,E),bt(fn,fn.current),!0}function Dr(E,C,U){var W=E.stateNode;if(!W)throw Error(y(169));U?(E=Zo(E,C,rs),W.__reactInternalMemoizedMergedChildContext=E,It(fn),It(Wt),bt(Wt,E)):It(fn),bt(fn,U)}var br=Math.clz32?Math.clz32:Ag,fo=Math.log,Tg=Math.LN2;function Ag(E){return E>>>=0,E===0?32:31-(fo(E)/Tg|0)|0}var uu=64,cu=4194304;function Ko(E){switch(E&-E){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return E&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return E}}function Ya(E,C){var U=E.pendingLanes;if(U===0)return 0;var W=0,J=E.suspendedLanes,le=E.pingedLanes,Le=U&268435455;if(Le!==0){var Ge=Le&~J;Ge!==0?W=Ko(Ge):(le&=Le,le!==0&&(W=Ko(le)))}else Le=U&~J,Le!==0?W=Ko(Le):le!==0&&(W=Ko(le));if(W===0)return 0;if(C!==0&&C!==W&&!(C&J)&&(J=W&-W,le=C&-C,J>=le||J===16&&(le&4194240)!==0))return C;if(W&4&&(W|=U&16),C=E.entangledLanes,C!==0)for(E=E.entanglements,C&=W;0<C;)U=31-br(C),J=1<<U,W|=E[U],C&=~J;return W}function Pf(E,C){switch(E){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(E,C){for(var U=E.suspendedLanes,W=E.pingedLanes,J=E.expirationTimes,le=E.pendingLanes;0<le;){var Le=31-br(le),Ge=1<<Le,ct=J[Le];ct===-1?(!(Ge&U)||Ge&W)&&(J[Le]=Pf(Ge,C)):ct<=C&&(E.expiredLanes|=Ge),le&=~Ge}}function du(E){return E=E.pendingLanes&-1073741825,E!==0?E:E&1073741824?1073741824:0}function nd(E){for(var C=[],U=0;31>U;U++)C.push(E);return C}function po(E,C,U){E.pendingLanes|=C,C!==536870912&&(E.suspendedLanes=0,E.pingedLanes=0),E=E.eventTimes,C=31-br(C),E[C]=U}function Rf(E,C){var U=E.pendingLanes&~C;E.pendingLanes=C,E.suspendedLanes=0,E.pingedLanes=0,E.expiredLanes&=C,E.mutableReadLanes&=C,E.entangledLanes&=C,C=E.entanglements;var W=E.eventTimes;for(E=E.expirationTimes;0<U;){var J=31-br(U),le=1<<J;C[J]=0,W[J]=-1,E[J]=-1,U&=~le}}function hu(E,C){var U=E.entangledLanes|=C;for(E=E.entanglements;U;){var W=31-br(U),J=1<<W;J&C|E[W]&C&&(E[W]|=C),U&=~J}}var mn=0;function Za(E){return E&=-E,1<E?4<E?E&268435455?16:536870912:4:1}var Ei=o.unstable_scheduleCallback,rd=o.unstable_cancelCallback,jf=o.unstable_shouldYield,Jo=o.unstable_requestPaint,pr=o.unstable_now,id=o.unstable_ImmediatePriority,sd=o.unstable_UserBlockingPriority,fu=o.unstable_NormalPriority,Pg=o.unstable_IdlePriority,Ka=null,Ui=null;function Rg(E){if(Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(Ka,E,void 0,(E.current.flags&128)===128)}catch{}}function Lf(E,C){return E===C&&(E!==0||1/E===1/C)||E!==E&&C!==C}var ss=typeof Object.is=="function"?Object.is:Lf,bs=null,pu=!1,od=!1;function ad(E){bs===null?bs=[E]:bs.push(E)}function os(E){pu=!0,ad(E)}function wr(){if(!od&&bs!==null){od=!0;var E=0,C=mn;try{var U=bs;for(mn=1;E<U.length;E++){var W=U[E];do W=W(!0);while(W!==null)}bs=null,pu=!1}catch(J){throw bs!==null&&(bs=bs.slice(E+1)),Ei(id,wr),J}finally{mn=C,od=!1}}return null}var Ja=i.ReactCurrentBatchConfig;function Ys(E,C){if(ss(E,C))return!0;if(typeof E!="object"||E===null||typeof C!="object"||C===null)return!1;var U=Object.keys(E),W=Object.keys(C);if(U.length!==W.length)return!1;for(W=0;W<U.length;W++){var J=U[W];if(!_t.call(C,J)||!ss(E[J],C[J]))return!1}return!0}function ws(E){switch(E.tag){case 5:return Lt(E.type);case 16:return Lt("Lazy");case 13:return Lt("Suspense");case 19:return Lt("SuspenseList");case 0:case 2:case 15:return E=Tt(E.type,!1),E;case 11:return E=Tt(E.type.render,!1),E;case 1:return E=Tt(E.type,!0),E;default:return""}}function Vr(E,C){if(E&&E.defaultProps){C=a({},C),E=E.defaultProps;for(var U in E)C[U]===void 0&&(C[U]=E[U]);return C}return C}var mu=Ln(null),Fi=null,Ss=null,yu=null;function gu(){yu=Ss=Fi=null}function ld(E,C,U){ye?(bt(mu,C._currentValue),C._currentValue=U):(bt(mu,C._currentValue2),C._currentValue2=U)}function vu(E){var C=mu.current;It(mu),ye?E._currentValue=C:E._currentValue2=C}function _u(E,C,U){for(;E!==null;){var W=E.alternate;if((E.childLanes&C)!==C?(E.childLanes|=C,W!==null&&(W.childLanes|=C)):W!==null&&(W.childLanes&C)!==C&&(W.childLanes|=C),E===U)break;E=E.return}}function mo(E,C){Fi=E,yu=Ss=null,E=E.dependencies,E!==null&&E.firstContext!==null&&(E.lanes&C&&(Vi=!0),E.firstContext=null)}function Zr(E){var C=ye?E._currentValue:E._currentValue2;if(yu!==E)if(E={context:E,memoizedValue:C,next:null},Ss===null){if(Fi===null)throw Error(y(308));Ss=E,Fi.dependencies={lanes:0,firstContext:E}}else Ss=Ss.next=E;return C}var Bi=null,Ms=!1;function xu(E){E.updateQueue={baseState:E.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ud(E,C){E=E.updateQueue,C.updateQueue===E&&(C.updateQueue={baseState:E.baseState,firstBaseUpdate:E.firstBaseUpdate,lastBaseUpdate:E.lastBaseUpdate,shared:E.shared,effects:E.effects})}function as(E,C){return{eventTime:E,lane:C,tag:0,payload:null,callback:null,next:null}}function Es(E,C){var U=E.updateQueue;U!==null&&(U=U.shared,Sr!==null&&E.mode&1&&!(pn&2)?(E=U.interleaved,E===null?(C.next=C,Bi===null?Bi=[U]:Bi.push(U)):(C.next=E.next,E.next=C),U.interleaved=C):(E=U.pending,E===null?C.next=C:(C.next=E.next,E.next=C),U.pending=C))}function Qa(E,C,U){if(C=C.updateQueue,C!==null&&(C=C.shared,(U&4194240)!==0)){var W=C.lanes;W&=E.pendingLanes,U|=W,C.lanes=U,hu(E,U)}}function cd(E,C){var U=E.updateQueue,W=E.alternate;if(W!==null&&(W=W.updateQueue,U===W)){var J=null,le=null;if(U=U.firstBaseUpdate,U!==null){do{var Le={eventTime:U.eventTime,lane:U.lane,tag:U.tag,payload:U.payload,callback:U.callback,next:null};le===null?J=le=Le:le=le.next=Le,U=U.next}while(U!==null);le===null?J=le=C:le=le.next=C}else J=le=C;U={baseState:W.baseState,firstBaseUpdate:J,lastBaseUpdate:le,shared:W.shared,effects:W.effects},E.updateQueue=U;return}E=U.lastBaseUpdate,E===null?U.firstBaseUpdate=C:E.next=C,U.lastBaseUpdate=C}function $a(E,C,U,W){var J=E.updateQueue;Ms=!1;var le=J.firstBaseUpdate,Le=J.lastBaseUpdate,Ge=J.shared.pending;if(Ge!==null){J.shared.pending=null;var ct=Ge,St=ct.next;ct.next=null,Le===null?le=St:Le.next=St,Le=ct;var Ft=E.alternate;Ft!==null&&(Ft=Ft.updateQueue,Ge=Ft.lastBaseUpdate,Ge!==Le&&(Ge===null?Ft.firstBaseUpdate=St:Ge.next=St,Ft.lastBaseUpdate=ct))}if(le!==null){var en=J.baseState;Le=0,Ft=St=ct=null,Ge=le;do{var Xt=Ge.lane,Vn=Ge.eventTime;if((W&Xt)===Xt){Ft!==null&&(Ft=Ft.next={eventTime:Vn,lane:0,tag:Ge.tag,payload:Ge.payload,callback:Ge.callback,next:null});e:{var Ht=E,Qr=Ge;switch(Xt=C,Vn=U,Qr.tag){case 1:if(Ht=Qr.payload,typeof Ht=="function"){en=Ht.call(Vn,en,Xt);break e}en=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Qr.payload,Xt=typeof Ht=="function"?Ht.call(Vn,en,Xt):Ht,Xt==null)break e;en=a({},en,Xt);break e;case 2:Ms=!0}}Ge.callback!==null&&Ge.lane!==0&&(E.flags|=64,Xt=J.effects,Xt===null?J.effects=[Ge]:Xt.push(Ge))}else Vn={eventTime:Vn,lane:Xt,tag:Ge.tag,payload:Ge.payload,callback:Ge.callback,next:null},Ft===null?(St=Ft=Vn,ct=en):Ft=Ft.next=Vn,Le|=Xt;if(Ge=Ge.next,Ge===null){if(Ge=J.shared.pending,Ge===null)break;Xt=Ge,Ge=Xt.next,Xt.next=null,J.lastBaseUpdate=Xt,J.shared.pending=null}}while(!0);if(Ft===null&&(ct=en),J.baseState=ct,J.firstBaseUpdate=St,J.lastBaseUpdate=Ft,C=J.shared.interleaved,C!==null){J=C;do Le|=J.lane,J=J.next;while(J!==C)}else le===null&&(J.shared.lanes=0);Tu|=Le,E.lanes=Le,E.memoizedState=en}}function bu(E,C,U){if(E=C.effects,C.effects=null,E!==null)for(C=0;C<E.length;C++){var W=E[C],J=W.callback;if(J!==null){if(W.callback=null,W=U,typeof J!="function")throw Error(y(191,J));J.call(W)}}}var el=new s.Component().refs;function tl(E,C,U,W){C=E.memoizedState,U=U(W,C),U=U==null?C:a({},C,U),E.memoizedState=U,E.lanes===0&&(E.updateQueue.baseState=U)}var nl={isMounted:function(E){return(E=E._reactInternals)?P(E)===E:!1},enqueueSetState:function(E,C,U){E=E._reactInternals;var W=fi(),J=ea(E),le=as(W,J);le.payload=C,U!=null&&(le.callback=U),Es(E,le),C=ls(E,J,W),C!==null&&Qa(C,E,J)},enqueueReplaceState:function(E,C,U){E=E._reactInternals;var W=fi(),J=ea(E),le=as(W,J);le.tag=1,le.payload=C,U!=null&&(le.callback=U),Es(E,le),C=ls(E,J,W),C!==null&&Qa(C,E,J)},enqueueForceUpdate:function(E,C){E=E._reactInternals;var U=fi(),W=ea(E),J=as(U,W);J.tag=2,C!=null&&(J.callback=C),Es(E,J),C=ls(E,W,U),C!==null&&Qa(C,E,W)}};function Ts(E,C,U,W,J,le,Le){return E=E.stateNode,typeof E.shouldComponentUpdate=="function"?E.shouldComponentUpdate(W,le,Le):C.prototype&&C.prototype.isPureReactComponent?!Ys(U,W)||!Ys(J,le):!0}function As(E,C,U){var W=!1,J=Dn,le=C.contextType;return typeof le=="object"&&le!==null?le=Zr(le):(J=xr(C)?rs:Wt.current,W=C.contextTypes,le=(W=W!=null)?di(E,J):Dn),C=new C(U,le),E.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=nl,E.stateNode=C,C._reactInternals=E,W&&(E=E.stateNode,E.__reactInternalMemoizedUnmaskedChildContext=J,E.__reactInternalMemoizedMaskedChildContext=le),C}function Dt(E,C,U,W){E=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(U,W),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(U,W),C.state!==E&&nl.enqueueReplaceState(C,C.state,null)}function dd(E,C,U,W){var J=E.stateNode;J.props=U,J.state=E.memoizedState,J.refs=el,xu(E);var le=C.contextType;typeof le=="object"&&le!==null?J.context=Zr(le):(le=xr(C)?rs:Wt.current,J.context=di(E,le)),J.state=E.memoizedState,le=C.getDerivedStateFromProps,typeof le=="function"&&(tl(E,C,le,U),J.state=E.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(C=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),C!==J.state&&nl.enqueueReplaceState(J,J.state,null),$a(E,U,J,W),J.state=E.memoizedState),typeof J.componentDidMount=="function"&&(E.flags|=4194308)}var yo=[],zi=0,wu=null,Su=0,cn=[],Ti=0,Pr=null,Cs=1,Ps="";function go(E,C){yo[zi++]=Su,yo[zi++]=wu,wu=E,Su=C}function kf(E,C,U){cn[Ti++]=Cs,cn[Ti++]=Ps,cn[Ti++]=Pr,Pr=E;var W=Cs;E=Ps;var J=32-br(W)-1;W&=~(1<<J),U+=1;var le=32-br(C)+J;if(30<le){var Le=J-J%5;le=(W&(1<<Le)-1).toString(32),W>>=Le,J-=Le,Cs=1<<32-br(C)+J|U<<J|W,Ps=le+E}else Cs=1<<le|U<<J|W,Ps=E}function hd(E){E.return!==null&&(go(E,1),kf(E,1,0))}function Mu(E){for(;E===wu;)wu=yo[--zi],yo[zi]=null,Su=yo[--zi],yo[zi]=null;for(;E===Pr;)Pr=cn[--Ti],cn[Ti]=null,Ps=cn[--Ti],cn[Ti]=null,Cs=cn[--Ti],cn[Ti]=null}var wn=null,Gr=null,T=!1,j=!1,D=null;function V(E,C){var U=us(5,null,null,0);U.elementType="DELETED",U.stateNode=C,U.return=E,C=E.deletions,C===null?(E.deletions=[U],E.flags|=16):C.push(U)}function Y(E,C){switch(E.tag){case 5:return C=jt(C,E.type,E.pendingProps),C!==null?(E.stateNode=C,wn=E,Gr=un(C),!0):!1;case 6:return C=Yt(C,E.pendingProps),C!==null?(E.stateNode=C,wn=E,Gr=null,!0):!1;case 13:if(C=on(C),C!==null){var U=Pr!==null?{id:Cs,overflow:Ps}:null;return E.memoizedState={dehydrated:C,treeContext:U,retryLane:1073741824},U=us(18,null,null,0),U.stateNode=C,U.return=E,E.child=U,wn=E,Gr=null,!0}return!1;default:return!1}}function Q(E){return(E.mode&1)!==0&&(E.flags&128)===0}function te(E){if(T){var C=Gr;if(C){var U=C;if(!Y(E,C)){if(Q(E))throw Error(y(418));C=Gn(U);var W=wn;C&&Y(E,C)?V(W,U):(E.flags=E.flags&-4097|2,T=!1,wn=E)}}else{if(Q(E))throw Error(y(418));E.flags=E.flags&-4097|2,T=!1,wn=E}}}function Me(E){for(E=E.return;E!==null&&E.tag!==5&&E.tag!==3&&E.tag!==13;)E=E.return;wn=E}function Te(E){if(!re||E!==wn)return!1;if(!T)return Me(E),T=!0,!1;if(E.tag!==3&&(E.tag!==5||st(E.type)&&!se(E.type,E.memoizedProps))){var C=Gr;if(C){if(Q(E)){for(E=Gr;E;)E=Gn(E);throw Error(y(418))}for(;C;)V(E,C),C=Gn(C)}}if(Me(E),E.tag===13){if(!re)throw Error(y(316));if(E=E.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(y(317));Gr=Ae(E)}else Gr=wn?Gn(E.stateNode):null;return!0}function Pe(){re&&(Gr=wn=null,j=T=!1)}function De(E){D===null?D=[E]:D.push(E)}function He(E,C,U){if(E=U.ref,E!==null&&typeof E!="function"&&typeof E!="object"){if(U._owner){if(U=U._owner,U){if(U.tag!==1)throw Error(y(309));var W=U.stateNode}if(!W)throw Error(y(147,E));var J=W,le=""+E;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===le?C.ref:(C=function(Le){var Ge=J.refs;Ge===el&&(Ge=J.refs={}),Le===null?delete Ge[le]:Ge[le]=Le},C._stringRef=le,C)}if(typeof E!="string")throw Error(y(284));if(!U._owner)throw Error(y(290,E))}return E}function Xe(E,C){throw E=Object.prototype.toString.call(C),Error(y(31,E==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":E))}function ke(E){var C=E._init;return C(E._payload)}function yt(E){function C(et,qe){if(E){var ot=et.deletions;ot===null?(et.deletions=[qe],et.flags|=16):ot.push(qe)}}function U(et,qe){if(!E)return null;for(;qe!==null;)C(et,qe),qe=qe.sibling;return null}function W(et,qe){for(et=new Map;qe!==null;)qe.key!==null?et.set(qe.key,qe):et.set(qe.index,qe),qe=qe.sibling;return et}function J(et,qe){return et=na(et,qe),et.index=0,et.sibling=null,et}function le(et,qe,ot){return et.index=ot,E?(ot=et.alternate,ot!==null?(ot=ot.index,ot<qe?(et.flags|=2,qe):ot):(et.flags|=2,qe)):(et.flags|=1048576,qe)}function Le(et){return E&&et.alternate===null&&(et.flags|=2),et}function Ge(et,qe,ot,kt){return qe===null||qe.tag!==6?(qe=u0(ot,et.mode,kt),qe.return=et,qe):(qe=J(qe,ot),qe.return=et,qe)}function ct(et,qe,ot,kt){var Gt=ot.type;return Gt===h?Ft(et,qe,ot.props.children,kt,ot.key):qe!==null&&(qe.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===m&&ke(Gt)===qe.type)?(kt=J(qe,ot.props),kt.ref=He(et,qe,ot),kt.return=et,kt):(kt=ap(ot.type,ot.key,ot.props,null,et.mode,kt),kt.ref=He(et,qe,ot),kt.return=et,kt)}function St(et,qe,ot,kt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==ot.containerInfo||qe.stateNode.implementation!==ot.implementation?(qe=c0(ot,et.mode,kt),qe.return=et,qe):(qe=J(qe,ot.children||[]),qe.return=et,qe)}function Ft(et,qe,ot,kt,Gt){return qe===null||qe.tag!==7?(qe=cl(ot,et.mode,kt,Gt),qe.return=et,qe):(qe=J(qe,ot),qe.return=et,qe)}function en(et,qe,ot){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return qe=u0(""+qe,et.mode,ot),qe.return=et,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case _:return ot=ap(qe.type,qe.key,qe.props,null,et.mode,ot),ot.ref=He(et,null,qe),ot.return=et,ot;case g:return qe=c0(qe,et.mode,ot),qe.return=et,qe;case m:var kt=qe._init;return en(et,kt(qe._payload),ot)}if(F(qe)||w(qe))return qe=cl(qe,et.mode,ot,null),qe.return=et,qe;Xe(et,qe)}return null}function Xt(et,qe,ot,kt){var Gt=qe!==null?qe.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return Gt!==null?null:Ge(et,qe,""+ot,kt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case _:return ot.key===Gt?ct(et,qe,ot,kt):null;case g:return ot.key===Gt?St(et,qe,ot,kt):null;case m:return Gt=ot._init,Xt(et,qe,Gt(ot._payload),kt)}if(F(ot)||w(ot))return Gt!==null?null:Ft(et,qe,ot,kt,null);Xe(et,ot)}return null}function Vn(et,qe,ot,kt,Gt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return et=et.get(ot)||null,Ge(qe,et,""+kt,Gt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case _:return et=et.get(kt.key===null?ot:kt.key)||null,ct(qe,et,kt,Gt);case g:return et=et.get(kt.key===null?ot:kt.key)||null,St(qe,et,kt,Gt);case m:var dn=kt._init;return Vn(et,qe,ot,dn(kt._payload),Gt)}if(F(kt)||w(kt))return et=et.get(ot)||null,Ft(qe,et,kt,Gt,null);Xe(qe,kt)}return null}function Ht(et,qe,ot,kt){for(var Gt=null,dn=null,tn=qe,Pn=qe=0,Nr=null;tn!==null&&Pn<ot.length;Pn++){tn.index>Pn?(Nr=tn,tn=null):Nr=tn.sibling;var Rn=Xt(et,tn,ot[Pn],kt);if(Rn===null){tn===null&&(tn=Nr);break}E&&tn&&Rn.alternate===null&&C(et,tn),qe=le(Rn,qe,Pn),dn===null?Gt=Rn:dn.sibling=Rn,dn=Rn,tn=Nr}if(Pn===ot.length)return U(et,tn),T&&go(et,Pn),Gt;if(tn===null){for(;Pn<ot.length;Pn++)tn=en(et,ot[Pn],kt),tn!==null&&(qe=le(tn,qe,Pn),dn===null?Gt=tn:dn.sibling=tn,dn=tn);return T&&go(et,Pn),Gt}for(tn=W(et,tn);Pn<ot.length;Pn++)Nr=Vn(tn,et,Pn,ot[Pn],kt),Nr!==null&&(E&&Nr.alternate!==null&&tn.delete(Nr.key===null?Pn:Nr.key),qe=le(Nr,qe,Pn),dn===null?Gt=Nr:dn.sibling=Nr,dn=Nr);return E&&tn.forEach(function(ra){return C(et,ra)}),T&&go(et,Pn),Gt}function Qr(et,qe,ot,kt){var Gt=w(ot);if(typeof Gt!="function")throw Error(y(150));if(ot=Gt.call(ot),ot==null)throw Error(y(151));for(var dn=Gt=null,tn=qe,Pn=qe=0,Nr=null,Rn=ot.next();tn!==null&&!Rn.done;Pn++,Rn=ot.next()){tn.index>Pn?(Nr=tn,tn=null):Nr=tn.sibling;var ra=Xt(et,tn,Rn.value,kt);if(ra===null){tn===null&&(tn=Nr);break}E&&tn&&ra.alternate===null&&C(et,tn),qe=le(ra,qe,Pn),dn===null?Gt=ra:dn.sibling=ra,dn=ra,tn=Nr}if(Rn.done)return U(et,tn),T&&go(et,Pn),Gt;if(tn===null){for(;!Rn.done;Pn++,Rn=ot.next())Rn=en(et,Rn.value,kt),Rn!==null&&(qe=le(Rn,qe,Pn),dn===null?Gt=Rn:dn.sibling=Rn,dn=Rn);return T&&go(et,Pn),Gt}for(tn=W(et,tn);!Rn.done;Pn++,Rn=ot.next())Rn=Vn(tn,et,Pn,Rn.value,kt),Rn!==null&&(E&&Rn.alternate!==null&&tn.delete(Rn.key===null?Pn:Rn.key),qe=le(Rn,qe,Pn),dn===null?Gt=Rn:dn.sibling=Rn,dn=Rn);return E&&tn.forEach(function(OL){return C(et,OL)}),T&&go(et,Pn),Gt}function cs(et,qe,ot,kt){if(typeof ot=="object"&&ot!==null&&ot.type===h&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case _:e:{for(var Gt=ot.key,dn=qe;dn!==null;){if(dn.key===Gt){if(Gt=ot.type,Gt===h){if(dn.tag===7){U(et,dn.sibling),qe=J(dn,ot.props.children),qe.return=et,et=qe;break e}}else if(dn.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===m&&ke(Gt)===dn.type){U(et,dn.sibling),qe=J(dn,ot.props),qe.ref=He(et,dn,ot),qe.return=et,et=qe;break e}U(et,dn);break}else C(et,dn);dn=dn.sibling}ot.type===h?(qe=cl(ot.props.children,et.mode,kt,ot.key),qe.return=et,et=qe):(kt=ap(ot.type,ot.key,ot.props,null,et.mode,kt),kt.ref=He(et,qe,ot),kt.return=et,et=kt)}return Le(et);case g:e:{for(dn=ot.key;qe!==null;){if(qe.key===dn)if(qe.tag===4&&qe.stateNode.containerInfo===ot.containerInfo&&qe.stateNode.implementation===ot.implementation){U(et,qe.sibling),qe=J(qe,ot.children||[]),qe.return=et,et=qe;break e}else{U(et,qe);break}else C(et,qe);qe=qe.sibling}qe=c0(ot,et.mode,kt),qe.return=et,et=qe}return Le(et);case m:return dn=ot._init,cs(et,qe,dn(ot._payload),kt)}if(F(ot))return Ht(et,qe,ot,kt);if(w(ot))return Qr(et,qe,ot,kt);Xe(et,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"?(ot=""+ot,qe!==null&&qe.tag===6?(U(et,qe.sibling),qe=J(qe,ot),qe.return=et,et=qe):(U(et,qe),qe=u0(ot,et.mode,kt),qe.return=et,et=qe),Le(et)):U(et,qe)}return cs}var $e=yt(!0),it=yt(!1),tt={},rt=Ln(tt),At=Ln(tt),Et=Ln(tt);function wt(E){if(E===tt)throw Error(y(174));return E}function nn(E,C){bt(Et,C),bt(At,E),bt(rt,tt),E=G(C),It(rt),bt(rt,E)}function Qt(){It(rt),It(At),It(Et)}function Cn(E){var C=wt(Et.current),U=wt(rt.current);C=N(U,E.type,C),U!==C&&(bt(At,E),bt(rt,C))}function Bn(E){At.current===E&&(It(rt),It(At))}var Zt=Ln(0);function Sn(E){for(var C=E;C!==null;){if(C.tag===13){var U=C.memoizedState;if(U!==null&&(U=U.dehydrated,U===null||$n(U)||xn(U)))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if(C.flags&128)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===E)break;for(;C.sibling===null;){if(C.return===null||C.return===E)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var Kt=[];function Jn(){for(var E=0;E<Kt.length;E++){var C=Kt[E];ye?C._workInProgressVersionPrimary=null:C._workInProgressVersionSecondary=null}Kt.length=0}var zn=i.ReactCurrentDispatcher,Mn=i.ReactCurrentBatchConfig,_n=0,rn=null,yn=null,bn=null,kn=!1,Xn=!1,Rs=0,rl=0;function Kr(){throw Error(y(321))}function jg(E,C){if(C===null)return!1;for(var U=0;U<C.length&&U<E.length;U++)if(!ss(E[U],C[U]))return!1;return!0}function Lg(E,C,U,W,J,le){if(_n=le,rn=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,zn.current=E===null||E.memoizedState===null?cL:dL,E=U(W,J),Xn){le=0;do{if(Xn=!1,Rs=0,25<=le)throw Error(y(301));le+=1,bn=yn=null,C.updateQueue=null,zn.current=hL,E=U(W,J)}while(Xn)}if(zn.current=Uf,C=yn!==null&&yn.next!==null,_n=0,bn=yn=rn=null,kn=!1,C)throw Error(y(300));return E}function kg(){var E=Rs!==0;return Rs=0,E}function vo(){var E={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?rn.memoizedState=bn=E:bn=bn.next=E,bn}function Zs(){if(yn===null){var E=rn.alternate;E=E!==null?E.memoizedState:null}else E=yn.next;var C=bn===null?rn.memoizedState:bn.next;if(C!==null)bn=C,yn=E;else{if(E===null)throw Error(y(310));yn=E,E={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},bn===null?rn.memoizedState=bn=E:bn=bn.next=E}return bn}function il(E,C){return typeof C=="function"?C(E):C}function If(E){var C=Zs(),U=C.queue;if(U===null)throw Error(y(311));U.lastRenderedReducer=E;var W=yn,J=W.baseQueue,le=U.pending;if(le!==null){if(J!==null){var Le=J.next;J.next=le.next,le.next=Le}W.baseQueue=J=le,U.pending=null}if(J!==null){le=J.next,W=W.baseState;var Ge=Le=null,ct=null,St=le;do{var Ft=St.lane;if((_n&Ft)===Ft)ct!==null&&(ct=ct.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),W=St.hasEagerState?St.eagerState:E(W,St.action);else{var en={lane:Ft,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};ct===null?(Ge=ct=en,Le=W):ct=ct.next=en,rn.lanes|=Ft,Tu|=Ft}St=St.next}while(St!==null&&St!==le);ct===null?Le=W:ct.next=Ge,ss(W,C.memoizedState)||(Vi=!0),C.memoizedState=W,C.baseState=Le,C.baseQueue=ct,U.lastRenderedState=W}if(E=U.interleaved,E!==null){J=E;do le=J.lane,rn.lanes|=le,Tu|=le,J=J.next;while(J!==E)}else J===null&&(U.lanes=0);return[C.memoizedState,U.dispatch]}function Of(E){var C=Zs(),U=C.queue;if(U===null)throw Error(y(311));U.lastRenderedReducer=E;var W=U.dispatch,J=U.pending,le=C.memoizedState;if(J!==null){U.pending=null;var Le=J=J.next;do le=E(le,Le.action),Le=Le.next;while(Le!==J);ss(le,C.memoizedState)||(Vi=!0),C.memoizedState=le,C.baseQueue===null&&(C.baseState=le),U.lastRenderedState=le}return[le,W]}function uw(){}function cw(E,C){var U=rn,W=Zs(),J=C(),le=!ss(W.memoizedState,J);if(le&&(W.memoizedState=J,Vi=!0),W=W.queue,pd(fw.bind(null,U,W,E),[E]),W.getSnapshot!==C||le||bn!==null&&bn.memoizedState.tag&1){if(U.flags|=2048,fd(9,hw.bind(null,U,W,J,C),void 0,null),Sr===null)throw Error(y(349));_n&30||dw(U,C,J)}return J}function dw(E,C,U){E.flags|=16384,E={getSnapshot:C,value:U},C=rn.updateQueue,C===null?(C={lastEffect:null,stores:null},rn.updateQueue=C,C.stores=[E]):(U=C.stores,U===null?C.stores=[E]:U.push(E))}function hw(E,C,U,W){C.value=U,C.getSnapshot=W,pw(C)&&ls(E,1,-1)}function fw(E,C,U){return U(function(){pw(C)&&ls(E,1,-1)})}function pw(E){var C=E.getSnapshot;E=E.value;try{var U=C();return!ss(E,U)}catch{return!0}}function Ig(E){var C=vo();return typeof E=="function"&&(E=E()),C.memoizedState=C.baseState=E,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:E},C.queue=E,E=E.dispatch=uL.bind(null,rn,E),[C.memoizedState,E]}function fd(E,C,U,W){return E={tag:E,create:C,destroy:U,deps:W,next:null},C=rn.updateQueue,C===null?(C={lastEffect:null,stores:null},rn.updateQueue=C,C.lastEffect=E.next=E):(U=C.lastEffect,U===null?C.lastEffect=E.next=E:(W=U.next,U.next=E,E.next=W,C.lastEffect=E)),E}function mw(){return Zs().memoizedState}function Df(E,C,U,W){var J=vo();rn.flags|=E,J.memoizedState=fd(1|C,U,void 0,W===void 0?null:W)}function Nf(E,C,U,W){var J=Zs();W=W===void 0?null:W;var le=void 0;if(yn!==null){var Le=yn.memoizedState;if(le=Le.destroy,W!==null&&jg(W,Le.deps)){J.memoizedState=fd(C,U,le,W);return}}rn.flags|=E,J.memoizedState=fd(1|C,U,le,W)}function Og(E,C){return Df(8390656,8,E,C)}function pd(E,C){return Nf(2048,8,E,C)}function yw(E,C){return Nf(4,2,E,C)}function gw(E,C){return Nf(4,4,E,C)}function vw(E,C){if(typeof C=="function")return E=E(),C(E),function(){C(null)};if(C!=null)return E=E(),C.current=E,function(){C.current=null}}function _w(E,C,U){return U=U!=null?U.concat([E]):null,Nf(4,4,vw.bind(null,C,E),U)}function Dg(){}function xw(E,C){var U=Zs();C=C===void 0?null:C;var W=U.memoizedState;return W!==null&&C!==null&&jg(C,W[1])?W[0]:(U.memoizedState=[E,C],E)}function bw(E,C){var U=Zs();C=C===void 0?null:C;var W=U.memoizedState;return W!==null&&C!==null&&jg(C,W[1])?W[0]:(E=E(),U.memoizedState=[E,C],E)}function aL(E,C){var U=mn;mn=U!==0&&4>U?U:4,E(!0);var W=Mn.transition;Mn.transition={};try{E(!1),C()}finally{mn=U,Mn.transition=W}}function ww(){return Zs().memoizedState}function lL(E,C,U){var W=ea(E);U={lane:W,action:U,hasEagerState:!1,eagerState:null,next:null},Sw(E)?Mw(C,U):(Ew(E,C,U),U=fi(),E=ls(E,W,U),E!==null&&Tw(E,C,W))}function uL(E,C,U){var W=ea(E),J={lane:W,action:U,hasEagerState:!1,eagerState:null,next:null};if(Sw(E))Mw(C,J);else{Ew(E,C,J);var le=E.alternate;if(E.lanes===0&&(le===null||le.lanes===0)&&(le=C.lastRenderedReducer,le!==null))try{var Le=C.lastRenderedState,Ge=le(Le,U);if(J.hasEagerState=!0,J.eagerState=Ge,ss(Ge,Le))return}catch{}finally{}U=fi(),E=ls(E,W,U),E!==null&&Tw(E,C,W)}}function Sw(E){var C=E.alternate;return E===rn||C!==null&&C===rn}function Mw(E,C){Xn=kn=!0;var U=E.pending;U===null?C.next=C:(C.next=U.next,U.next=C),E.pending=C}function Ew(E,C,U){Sr!==null&&E.mode&1&&!(pn&2)?(E=C.interleaved,E===null?(U.next=U,Bi===null?Bi=[C]:Bi.push(C)):(U.next=E.next,E.next=U),C.interleaved=U):(E=C.pending,E===null?U.next=U:(U.next=E.next,E.next=U),C.pending=U)}function Tw(E,C,U){if(U&4194240){var W=C.lanes;W&=E.pendingLanes,U|=W,C.lanes=U,hu(E,U)}}var Uf={readContext:Zr,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},cL={readContext:Zr,useCallback:function(E,C){return vo().memoizedState=[E,C===void 0?null:C],E},useContext:Zr,useEffect:Og,useImperativeHandle:function(E,C,U){return U=U!=null?U.concat([E]):null,Df(4194308,4,vw.bind(null,C,E),U)},useLayoutEffect:function(E,C){return Df(4194308,4,E,C)},useInsertionEffect:function(E,C){return Df(4,2,E,C)},useMemo:function(E,C){var U=vo();return C=C===void 0?null:C,E=E(),U.memoizedState=[E,C],E},useReducer:function(E,C,U){var W=vo();return C=U!==void 0?U(C):C,W.memoizedState=W.baseState=C,E={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:E,lastRenderedState:C},W.queue=E,E=E.dispatch=lL.bind(null,rn,E),[W.memoizedState,E]},useRef:function(E){var C=vo();return E={current:E},C.memoizedState=E},useState:Ig,useDebugValue:Dg,useDeferredValue:function(E){var C=Ig(E),U=C[0],W=C[1];return Og(function(){var J=Mn.transition;Mn.transition={};try{W(E)}finally{Mn.transition=J}},[E]),U},useTransition:function(){var E=Ig(!1),C=E[0];return E=aL.bind(null,E[1]),vo().memoizedState=E,[C,E]},useMutableSource:function(){},useSyncExternalStore:function(E,C,U){var W=rn,J=vo();if(T){if(U===void 0)throw Error(y(407));U=U()}else{if(U=C(),Sr===null)throw Error(y(349));_n&30||dw(W,C,U)}J.memoizedState=U;var le={value:U,getSnapshot:C};return J.queue=le,Og(fw.bind(null,W,le,E),[E]),W.flags|=2048,fd(9,hw.bind(null,W,le,U,C),void 0,null),U},useId:function(){var E=vo(),C=Sr.identifierPrefix;if(T){var U=Ps,W=Cs;U=(W&~(1<<32-br(W)-1)).toString(32)+U,C=":"+C+"R"+U,U=Rs++,0<U&&(C+="H"+U.toString(32)),C+=":"}else U=rl++,C=":"+C+"r"+U.toString(32)+":";return E.memoizedState=C},unstable_isNewReconciler:!1},dL={readContext:Zr,useCallback:xw,useContext:Zr,useEffect:pd,useImperativeHandle:_w,useInsertionEffect:yw,useLayoutEffect:gw,useMemo:bw,useReducer:If,useRef:mw,useState:function(){return If(il)},useDebugValue:Dg,useDeferredValue:function(E){var C=If(il),U=C[0],W=C[1];return pd(function(){var J=Mn.transition;Mn.transition={};try{W(E)}finally{Mn.transition=J}},[E]),U},useTransition:function(){var E=If(il)[0],C=Zs().memoizedState;return[E,C]},useMutableSource:uw,useSyncExternalStore:cw,useId:ww,unstable_isNewReconciler:!1},hL={readContext:Zr,useCallback:xw,useContext:Zr,useEffect:pd,useImperativeHandle:_w,useInsertionEffect:yw,useLayoutEffect:gw,useMemo:bw,useReducer:Of,useRef:mw,useState:function(){return Of(il)},useDebugValue:Dg,useDeferredValue:function(E){var C=Of(il),U=C[0],W=C[1];return pd(function(){var J=Mn.transition;Mn.transition={};try{W(E)}finally{Mn.transition=J}},[E]),U},useTransition:function(){var E=Of(il)[0],C=Zs().memoizedState;return[E,C]},useMutableSource:uw,useSyncExternalStore:cw,useId:ww,unstable_isNewReconciler:!1};function Ng(E,C){try{var U="",W=C;do U+=ws(W),W=W.return;while(W);var J=U}catch(le){J=`
Error generating stack: `+le.message+`
`+le.stack}return{value:E,source:C,stack:J}}function Ug(E,C){try{console.error(C.value)}catch(U){setTimeout(function(){throw U})}}var fL=typeof WeakMap=="function"?WeakMap:Map;function Aw(E,C,U){U=as(-1,U),U.tag=3,U.payload={element:null};var W=C.value;return U.callback=function(){ep||(ep=!0,n0=W),Ug(E,C)},U}function Cw(E,C,U){U=as(-1,U),U.tag=3;var W=E.type.getDerivedStateFromError;if(typeof W=="function"){var J=C.value;U.payload=function(){return W(J)},U.callback=function(){Ug(E,C)}}var le=E.stateNode;return le!==null&&typeof le.componentDidCatch=="function"&&(U.callback=function(){Ug(E,C),typeof W!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var Le=C.stack;this.componentDidCatch(C.value,{componentStack:Le!==null?Le:""})}),U}function Pw(E,C,U){var W=E.pingCache;if(W===null){W=E.pingCache=new fL;var J=new Set;W.set(C,J)}else J=W.get(C),J===void 0&&(J=new Set,W.set(C,J));J.has(U)||(J.add(U),E=AL.bind(null,E,C,U),C.then(E,E))}function Rw(E){do{var C;if((C=E.tag===13)&&(C=E.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return E;E=E.return}while(E!==null);return null}function jw(E,C,U,W,J){return E.mode&1?(E.flags|=65536,E.lanes=J,E):(E===C?E.flags|=65536:(E.flags|=128,U.flags|=131072,U.flags&=-52805,U.tag===1&&(U.alternate===null?U.tag=17:(C=as(-1,1),C.tag=2,Es(U,C))),U.lanes|=1),E)}function Ks(E){E.flags|=4}function Lw(E,C){if(E!==null&&E.child===C.child)return!0;if(C.flags&16)return!1;for(E=C.child;E!==null;){if(E.flags&12854||E.subtreeFlags&12854)return!1;E=E.sibling}return!0}var md,yd,Ff,Bf;if(fe)md=function(E,C){for(var U=C.child;U!==null;){if(U.tag===5||U.tag===6)K(E,U.stateNode);else if(U.tag!==4&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===C)break;for(;U.sibling===null;){if(U.return===null||U.return===C)return;U=U.return}U.sibling.return=U.return,U=U.sibling}},yd=function(){},Ff=function(E,C,U,W,J){if(E=E.memoizedProps,E!==W){var le=C.stateNode,Le=wt(rt.current);U=ee(le,U,E,W,J,Le),(C.updateQueue=U)&&Ks(C)}},Bf=function(E,C,U,W){U!==W&&Ks(C)};else if($){md=function(E,C,U,W){for(var J=C.child;J!==null;){if(J.tag===5){var le=J.stateNode;U&&W&&(le=Bt(le,J.type,J.memoizedProps,J)),K(E,le)}else if(J.tag===6)le=J.stateNode,U&&W&&(le=Vt(le,J.memoizedProps,J)),K(E,le);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)le=J.child,le!==null&&(le.return=J),md(E,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===C)break;for(;J.sibling===null;){if(J.return===null||J.return===C)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};var kw=function(E,C,U,W){for(var J=C.child;J!==null;){if(J.tag===5){var le=J.stateNode;U&&W&&(le=Bt(le,J.type,J.memoizedProps,J)),ut(E,le)}else if(J.tag===6)le=J.stateNode,U&&W&&(le=Vt(le,J.memoizedProps,J)),ut(E,le);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)le=J.child,le!==null&&(le.return=J),kw(E,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===C)break;for(;J.sibling===null;){if(J.return===null||J.return===C)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};yd=function(E,C){var U=C.stateNode;if(!Lw(E,C)){E=U.containerInfo;var W=Qe(E);kw(W,C,!1,!1),U.pendingChildren=W,Ks(C),Rt(E,W)}},Ff=function(E,C,U,W,J){var le=E.stateNode,Le=E.memoizedProps;if((E=Lw(E,C))&&Le===W)C.stateNode=le;else{var Ge=C.stateNode,ct=wt(rt.current),St=null;Le!==W&&(St=ee(Ge,U,Le,W,J,ct)),E&&St===null?C.stateNode=le:(le=Ce(le,St,U,Le,W,C,E,Ge),ne(le,U,W,J,ct)&&Ks(C),C.stateNode=le,E?Ks(C):md(le,C,!1,!1))}},Bf=function(E,C,U,W){U!==W?(E=wt(Et.current),U=wt(rt.current),C.stateNode=me(W,E,U,C),Ks(C)):C.stateNode=E.stateNode}}else yd=function(){},Ff=function(){},Bf=function(){};function gd(E,C){if(!T)switch(E.tailMode){case"hidden":C=E.tail;for(var U=null;C!==null;)C.alternate!==null&&(U=C),C=C.sibling;U===null?E.tail=null:U.sibling=null;break;case"collapsed":U=E.tail;for(var W=null;U!==null;)U.alternate!==null&&(W=U),U=U.sibling;W===null?C||E.tail===null?E.tail=null:E.tail.sibling=null:W.sibling=null}}function Jr(E){var C=E.alternate!==null&&E.alternate.child===E.child,U=0,W=0;if(C)for(var J=E.child;J!==null;)U|=J.lanes|J.childLanes,W|=J.subtreeFlags&14680064,W|=J.flags&14680064,J.return=E,J=J.sibling;else for(J=E.child;J!==null;)U|=J.lanes|J.childLanes,W|=J.subtreeFlags,W|=J.flags,J.return=E,J=J.sibling;return E.subtreeFlags|=W,E.childLanes=U,C}function pL(E,C,U){var W=C.pendingProps;switch(Mu(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(C),null;case 1:return xr(C.type)&&tr(),Jr(C),null;case 3:return W=C.stateNode,Qt(),It(fn),It(Wt),Jn(),W.pendingContext&&(W.context=W.pendingContext,W.pendingContext=null),(E===null||E.child===null)&&(Te(C)?Ks(C):E===null||E.memoizedState.isDehydrated&&!(C.flags&256)||(C.flags|=1024,D!==null&&(s0(D),D=null))),yd(E,C),Jr(C),null;case 5:Bn(C),U=wt(Et.current);var J=C.type;if(E!==null&&C.stateNode!=null)Ff(E,C,J,W,U),E.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!W){if(C.stateNode===null)throw Error(y(166));return Jr(C),null}if(E=wt(rt.current),Te(C)){if(!re)throw Error(y(175));E=An(C.stateNode,C.type,C.memoizedProps,U,E,C,!j),C.updateQueue=E,E!==null&&Ks(C)}else{var le=q(J,W,U,E,C);md(le,C,!1,!1),C.stateNode=le,ne(le,J,W,U,E)&&Ks(C)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return Jr(C),null;case 6:if(E&&C.stateNode!=null)Bf(E,C,E.memoizedProps,W);else{if(typeof W!="string"&&C.stateNode===null)throw Error(y(166));if(E=wt(Et.current),U=wt(rt.current),Te(C)){if(!re)throw Error(y(176));if(E=C.stateNode,W=C.memoizedProps,(U=qo(E,W,C,!j))&&(J=wn,J!==null))switch(le=(J.mode&1)!==0,J.tag){case 3:Ke(J.stateNode.containerInfo,E,W,le);break;case 5:Mt(J.type,J.memoizedProps,J.stateNode,E,W,le)}U&&Ks(C)}else C.stateNode=me(W,E,U,C)}return Jr(C),null;case 13:if(It(Zt),W=C.memoizedState,T&&Gr!==null&&C.mode&1&&!(C.flags&128)){for(E=Gr;E;)E=Gn(E);return Pe(),C.flags|=98560,C}if(W!==null&&W.dehydrated!==null){if(W=Te(C),E===null){if(!W)throw Error(y(318));if(!re)throw Error(y(344));if(E=C.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(y(317));Yo(E,C)}else Pe(),!(C.flags&128)&&(C.memoizedState=null),C.flags|=4;return Jr(C),null}return D!==null&&(s0(D),D=null),C.flags&128?(C.lanes=U,C):(W=W!==null,U=!1,E===null?Te(C):U=E.memoizedState!==null,W&&!U&&(C.child.flags|=8192,C.mode&1&&(E===null||Zt.current&1?Rr===0&&(Rr=3):a0())),C.updateQueue!==null&&(C.flags|=4),Jr(C),null);case 4:return Qt(),yd(E,C),E===null&&ge(C.stateNode.containerInfo),Jr(C),null;case 10:return vu(C.type._context),Jr(C),null;case 17:return xr(C.type)&&tr(),Jr(C),null;case 19:if(It(Zt),J=C.memoizedState,J===null)return Jr(C),null;if(W=(C.flags&128)!==0,le=J.rendering,le===null)if(W)gd(J,!1);else{if(Rr!==0||E!==null&&E.flags&128)for(E=C.child;E!==null;){if(le=Sn(E),le!==null){for(C.flags|=128,gd(J,!1),E=le.updateQueue,E!==null&&(C.updateQueue=E,C.flags|=4),C.subtreeFlags=0,E=U,W=C.child;W!==null;)U=W,J=E,U.flags&=14680066,le=U.alternate,le===null?(U.childLanes=0,U.lanes=J,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=le.childLanes,U.lanes=le.lanes,U.child=le.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=le.memoizedProps,U.memoizedState=le.memoizedState,U.updateQueue=le.updateQueue,U.type=le.type,J=le.dependencies,U.dependencies=J===null?null:{lanes:J.lanes,firstContext:J.firstContext}),W=W.sibling;return bt(Zt,Zt.current&1|2),C.child}E=E.sibling}J.tail!==null&&pr()>t0&&(C.flags|=128,W=!0,gd(J,!1),C.lanes=4194304)}else{if(!W)if(E=Sn(le),E!==null){if(C.flags|=128,W=!0,E=E.updateQueue,E!==null&&(C.updateQueue=E,C.flags|=4),gd(J,!0),J.tail===null&&J.tailMode==="hidden"&&!le.alternate&&!T)return Jr(C),null}else 2*pr()-J.renderingStartTime>t0&&U!==1073741824&&(C.flags|=128,W=!0,gd(J,!1),C.lanes=4194304);J.isBackwards?(le.sibling=C.child,C.child=le):(E=J.last,E!==null?E.sibling=le:C.child=le,J.last=le)}return J.tail!==null?(C=J.tail,J.rendering=C,J.tail=C.sibling,J.renderingStartTime=pr(),C.sibling=null,E=Zt.current,bt(Zt,W?E&1|2:E&1),C):(Jr(C),null);case 22:case 23:return o0(),W=C.memoizedState!==null,E!==null&&E.memoizedState!==null!==W&&(C.flags|=8192),W&&C.mode&1?Gi&1073741824&&(Jr(C),fe&&C.subtreeFlags&6&&(C.flags|=8192)):Jr(C),null;case 24:return null;case 25:return null}throw Error(y(156,C.tag))}var mL=i.ReactCurrentOwner,Vi=!1;function hi(E,C,U,W){C.child=E===null?it(C,null,U,W):$e(C,E.child,U,W)}function Iw(E,C,U,W,J){U=U.render;var le=C.ref;return mo(C,J),W=Lg(E,C,U,W,le,J),U=kg(),E!==null&&!Vi?(C.updateQueue=E.updateQueue,C.flags&=-2053,E.lanes&=~J,_o(E,C,J)):(T&&U&&hd(C),C.flags|=1,hi(E,C,W,J),C.child)}function Ow(E,C,U,W,J){if(E===null){var le=U.type;return typeof le=="function"&&!l0(le)&&le.defaultProps===void 0&&U.compare===null&&U.defaultProps===void 0?(C.tag=15,C.type=le,Dw(E,C,le,W,J)):(E=ap(U.type,null,W,C,C.mode,J),E.ref=C.ref,E.return=C,C.child=E)}if(le=E.child,!(E.lanes&J)){var Le=le.memoizedProps;if(U=U.compare,U=U!==null?U:Ys,U(Le,W)&&E.ref===C.ref)return _o(E,C,J)}return C.flags|=1,E=na(le,W),E.ref=C.ref,E.return=C,C.child=E}function Dw(E,C,U,W,J){if(E!==null&&Ys(E.memoizedProps,W)&&E.ref===C.ref)if(Vi=!1,(E.lanes&J)!==0)E.flags&131072&&(Vi=!0);else return C.lanes=E.lanes,_o(E,C,J);return Fg(E,C,U,W,J)}function Nw(E,C,U){var W=C.pendingProps,J=W.children,le=E!==null?E.memoizedState:null;if(W.mode==="hidden")if(!(C.mode&1))C.memoizedState={baseLanes:0,cachePool:null},bt(Eu,Gi),Gi|=U;else if(U&1073741824)C.memoizedState={baseLanes:0,cachePool:null},W=le!==null?le.baseLanes:U,bt(Eu,Gi),Gi|=W;else return E=le!==null?le.baseLanes|U:U,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:E,cachePool:null},C.updateQueue=null,bt(Eu,Gi),Gi|=E,null;else le!==null?(W=le.baseLanes|U,C.memoizedState=null):W=U,bt(Eu,Gi),Gi|=W;return hi(E,C,J,U),C.child}function Uw(E,C){var U=C.ref;(E===null&&U!==null||E!==null&&E.ref!==U)&&(C.flags|=512,C.flags|=2097152)}function Fg(E,C,U,W,J){var le=xr(U)?rs:Wt.current;return le=di(C,le),mo(C,J),U=Lg(E,C,U,W,le,J),W=kg(),E!==null&&!Vi?(C.updateQueue=E.updateQueue,C.flags&=-2053,E.lanes&=~J,_o(E,C,J)):(T&&W&&hd(C),C.flags|=1,hi(E,C,U,J),C.child)}function Fw(E,C,U,W,J){if(xr(U)){var le=!0;Cr(C)}else le=!1;if(mo(C,J),C.stateNode===null)E!==null&&(E.alternate=null,C.alternate=null,C.flags|=2),As(C,U,W),dd(C,U,W,J),W=!0;else if(E===null){var Le=C.stateNode,Ge=C.memoizedProps;Le.props=Ge;var ct=Le.context,St=U.contextType;typeof St=="object"&&St!==null?St=Zr(St):(St=xr(U)?rs:Wt.current,St=di(C,St));var Ft=U.getDerivedStateFromProps,en=typeof Ft=="function"||typeof Le.getSnapshotBeforeUpdate=="function";en||typeof Le.UNSAFE_componentWillReceiveProps!="function"&&typeof Le.componentWillReceiveProps!="function"||(Ge!==W||ct!==St)&&Dt(C,Le,W,St),Ms=!1;var Xt=C.memoizedState;Le.state=Xt,$a(C,W,Le,J),ct=C.memoizedState,Ge!==W||Xt!==ct||fn.current||Ms?(typeof Ft=="function"&&(tl(C,U,Ft,W),ct=C.memoizedState),(Ge=Ms||Ts(C,U,Ge,W,Xt,ct,St))?(en||typeof Le.UNSAFE_componentWillMount!="function"&&typeof Le.componentWillMount!="function"||(typeof Le.componentWillMount=="function"&&Le.componentWillMount(),typeof Le.UNSAFE_componentWillMount=="function"&&Le.UNSAFE_componentWillMount()),typeof Le.componentDidMount=="function"&&(C.flags|=4194308)):(typeof Le.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=W,C.memoizedState=ct),Le.props=W,Le.state=ct,Le.context=St,W=Ge):(typeof Le.componentDidMount=="function"&&(C.flags|=4194308),W=!1)}else{Le=C.stateNode,ud(E,C),Ge=C.memoizedProps,St=C.type===C.elementType?Ge:Vr(C.type,Ge),Le.props=St,en=C.pendingProps,Xt=Le.context,ct=U.contextType,typeof ct=="object"&&ct!==null?ct=Zr(ct):(ct=xr(U)?rs:Wt.current,ct=di(C,ct));var Vn=U.getDerivedStateFromProps;(Ft=typeof Vn=="function"||typeof Le.getSnapshotBeforeUpdate=="function")||typeof Le.UNSAFE_componentWillReceiveProps!="function"&&typeof Le.componentWillReceiveProps!="function"||(Ge!==en||Xt!==ct)&&Dt(C,Le,W,ct),Ms=!1,Xt=C.memoizedState,Le.state=Xt,$a(C,W,Le,J);var Ht=C.memoizedState;Ge!==en||Xt!==Ht||fn.current||Ms?(typeof Vn=="function"&&(tl(C,U,Vn,W),Ht=C.memoizedState),(St=Ms||Ts(C,U,St,W,Xt,Ht,ct)||!1)?(Ft||typeof Le.UNSAFE_componentWillUpdate!="function"&&typeof Le.componentWillUpdate!="function"||(typeof Le.componentWillUpdate=="function"&&Le.componentWillUpdate(W,Ht,ct),typeof Le.UNSAFE_componentWillUpdate=="function"&&Le.UNSAFE_componentWillUpdate(W,Ht,ct)),typeof Le.componentDidUpdate=="function"&&(C.flags|=4),typeof Le.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof Le.componentDidUpdate!="function"||Ge===E.memoizedProps&&Xt===E.memoizedState||(C.flags|=4),typeof Le.getSnapshotBeforeUpdate!="function"||Ge===E.memoizedProps&&Xt===E.memoizedState||(C.flags|=1024),C.memoizedProps=W,C.memoizedState=Ht),Le.props=W,Le.state=Ht,Le.context=ct,W=St):(typeof Le.componentDidUpdate!="function"||Ge===E.memoizedProps&&Xt===E.memoizedState||(C.flags|=4),typeof Le.getSnapshotBeforeUpdate!="function"||Ge===E.memoizedProps&&Xt===E.memoizedState||(C.flags|=1024),W=!1)}return Bg(E,C,U,W,le,J)}function Bg(E,C,U,W,J,le){Uw(E,C);var Le=(C.flags&128)!==0;if(!W&&!Le)return J&&Dr(C,U,!1),_o(E,C,le);W=C.stateNode,mL.current=C;var Ge=Le&&typeof U.getDerivedStateFromError!="function"?null:W.render();return C.flags|=1,E!==null&&Le?(C.child=$e(C,E.child,null,le),C.child=$e(C,null,Ge,le)):hi(E,C,Ge,le),C.memoizedState=W.state,J&&Dr(C,U,!0),C.child}function Bw(E){var C=E.stateNode;C.pendingContext?is(E,C.pendingContext,C.pendingContext!==C.context):C.context&&is(E,C.context,!1),nn(E,C.containerInfo)}function zw(E,C,U,W,J){return Pe(),De(J),C.flags|=256,hi(E,C,U,W),C.child}var zf={dehydrated:null,treeContext:null,retryLane:0};function Vf(E){return{baseLanes:E,cachePool:null}}function Vw(E,C,U){var W=C.pendingProps,J=Zt.current,le=!1,Le=(C.flags&128)!==0,Ge;if((Ge=Le)||(Ge=E!==null&&E.memoizedState===null?!1:(J&2)!==0),Ge?(le=!0,C.flags&=-129):(E===null||E.memoizedState!==null)&&(J|=1),bt(Zt,J&1),E===null)return te(C),E=C.memoizedState,E!==null&&(E=E.dehydrated,E!==null)?(C.mode&1?xn(E)?C.lanes=8:C.lanes=1073741824:C.lanes=1,null):(J=W.children,E=W.fallback,le?(W=C.mode,le=C.child,J={mode:"hidden",children:J},!(W&1)&&le!==null?(le.childLanes=0,le.pendingProps=J):le=lp(J,W,0,null),E=cl(E,W,U,null),le.return=C,E.return=C,le.sibling=E,C.child=le,C.child.memoizedState=Vf(U),C.memoizedState=zf,E):zg(C,J));if(J=E.memoizedState,J!==null){if(Ge=J.dehydrated,Ge!==null){if(Le)return C.flags&256?(C.flags&=-257,Gf(E,C,U,Error(y(422)))):C.memoizedState!==null?(C.child=E.child,C.flags|=128,null):(le=W.fallback,J=C.mode,W=lp({mode:"visible",children:W.children},J,0,null),le=cl(le,J,U,null),le.flags|=2,W.return=C,le.return=C,W.sibling=le,C.child=W,C.mode&1&&$e(C,E.child,null,U),C.child.memoizedState=Vf(U),C.memoizedState=zf,le);if(!(C.mode&1))C=Gf(E,C,U,null);else if(xn(Ge))C=Gf(E,C,U,Error(y(419)));else if(W=(U&E.childLanes)!==0,Vi||W){if(W=Sr,W!==null){switch(U&-U){case 4:le=2;break;case 16:le=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:le=32;break;case 536870912:le=268435456;break;default:le=0}W=le&(W.suspendedLanes|U)?0:le,W!==0&&W!==J.retryLane&&(J.retryLane=W,ls(E,W,-1))}a0(),C=Gf(E,C,U,Error(y(421)))}else $n(Ge)?(C.flags|=128,C.child=E.child,C=CL.bind(null,E),On(Ge,C),C=null):(U=J.treeContext,re&&(Gr=er(Ge),wn=C,T=!0,D=null,j=!1,U!==null&&(cn[Ti++]=Cs,cn[Ti++]=Ps,cn[Ti++]=Pr,Cs=U.id,Ps=U.overflow,Pr=C)),C=zg(C,C.pendingProps.children),C.flags|=4096);return C}return le?(W=Hw(E,C,W.children,W.fallback,U),le=C.child,J=E.child.memoizedState,le.memoizedState=J===null?Vf(U):{baseLanes:J.baseLanes|U,cachePool:null},le.childLanes=E.childLanes&~U,C.memoizedState=zf,W):(U=Gw(E,C,W.children,U),C.memoizedState=null,U)}return le?(W=Hw(E,C,W.children,W.fallback,U),le=C.child,J=E.child.memoizedState,le.memoizedState=J===null?Vf(U):{baseLanes:J.baseLanes|U,cachePool:null},le.childLanes=E.childLanes&~U,C.memoizedState=zf,W):(U=Gw(E,C,W.children,U),C.memoizedState=null,U)}function zg(E,C){return C=lp({mode:"visible",children:C},E.mode,0,null),C.return=E,E.child=C}function Gw(E,C,U,W){var J=E.child;return E=J.sibling,U=na(J,{mode:"visible",children:U}),!(C.mode&1)&&(U.lanes=W),U.return=C,U.sibling=null,E!==null&&(W=C.deletions,W===null?(C.deletions=[E],C.flags|=16):W.push(E)),C.child=U}function Hw(E,C,U,W,J){var le=C.mode;E=E.child;var Le=E.sibling,Ge={mode:"hidden",children:U};return!(le&1)&&C.child!==E?(U=C.child,U.childLanes=0,U.pendingProps=Ge,C.deletions=null):(U=na(E,Ge),U.subtreeFlags=E.subtreeFlags&14680064),Le!==null?W=na(Le,W):(W=cl(W,le,J,null),W.flags|=2),W.return=C,U.return=C,U.sibling=W,C.child=U,W}function Gf(E,C,U,W){return W!==null&&De(W),$e(C,E.child,null,U),E=zg(C,C.pendingProps.children),E.flags|=2,C.memoizedState=null,E}function Ww(E,C,U){E.lanes|=C;var W=E.alternate;W!==null&&(W.lanes|=C),_u(E.return,C,U)}function Vg(E,C,U,W,J){var le=E.memoizedState;le===null?E.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:W,tail:U,tailMode:J}:(le.isBackwards=C,le.rendering=null,le.renderingStartTime=0,le.last=W,le.tail=U,le.tailMode=J)}function Xw(E,C,U){var W=C.pendingProps,J=W.revealOrder,le=W.tail;if(hi(E,C,W.children,U),W=Zt.current,W&2)W=W&1|2,C.flags|=128;else{if(E!==null&&E.flags&128)e:for(E=C.child;E!==null;){if(E.tag===13)E.memoizedState!==null&&Ww(E,U,C);else if(E.tag===19)Ww(E,U,C);else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===C)break e;for(;E.sibling===null;){if(E.return===null||E.return===C)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}W&=1}if(bt(Zt,W),!(C.mode&1))C.memoizedState=null;else switch(J){case"forwards":for(U=C.child,J=null;U!==null;)E=U.alternate,E!==null&&Sn(E)===null&&(J=U),U=U.sibling;U=J,U===null?(J=C.child,C.child=null):(J=U.sibling,U.sibling=null),Vg(C,!1,J,U,le);break;case"backwards":for(U=null,J=C.child,C.child=null;J!==null;){if(E=J.alternate,E!==null&&Sn(E)===null){C.child=J;break}E=J.sibling,J.sibling=U,U=J,J=E}Vg(C,!0,U,null,le);break;case"together":Vg(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function _o(E,C,U){if(E!==null&&(C.dependencies=E.dependencies),Tu|=C.lanes,!(U&C.childLanes))return null;if(E!==null&&C.child!==E.child)throw Error(y(153));if(C.child!==null){for(E=C.child,U=na(E,E.pendingProps),C.child=U,U.return=C;E.sibling!==null;)E=E.sibling,U=U.sibling=na(E,E.pendingProps),U.return=C;U.sibling=null}return C.child}function yL(E,C,U){switch(C.tag){case 3:Bw(C),Pe();break;case 5:Cn(C);break;case 1:xr(C.type)&&Cr(C);break;case 4:nn(C,C.stateNode.containerInfo);break;case 10:ld(C,C.type._context,C.memoizedProps.value);break;case 13:var W=C.memoizedState;if(W!==null)return W.dehydrated!==null?(bt(Zt,Zt.current&1),C.flags|=128,null):U&C.child.childLanes?Vw(E,C,U):(bt(Zt,Zt.current&1),E=_o(E,C,U),E!==null?E.sibling:null);bt(Zt,Zt.current&1);break;case 19:if(W=(U&C.childLanes)!==0,E.flags&128){if(W)return Xw(E,C,U);C.flags|=128}var J=C.memoizedState;if(J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),bt(Zt,Zt.current),W)break;return null;case 22:case 23:return C.lanes=0,Nw(E,C,U)}return _o(E,C,U)}function gL(E,C){switch(Mu(C),C.tag){case 1:return xr(C.type)&&tr(),E=C.flags,E&65536?(C.flags=E&-65537|128,C):null;case 3:return Qt(),It(fn),It(Wt),Jn(),E=C.flags,E&65536&&!(E&128)?(C.flags=E&-65537|128,C):null;case 5:return Bn(C),null;case 13:if(It(Zt),E=C.memoizedState,E!==null&&E.dehydrated!==null){if(C.alternate===null)throw Error(y(340));Pe()}return E=C.flags,E&65536?(C.flags=E&-65537|128,C):null;case 19:return It(Zt),null;case 4:return Qt(),null;case 10:return vu(C.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var Hf=!1,sl=!1,vL=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Wf(E,C){var U=E.ref;if(U!==null)if(typeof U=="function")try{U(null)}catch(W){Pi(E,C,W)}else U.current=null}function Gg(E,C,U){try{U()}catch(W){Pi(E,C,W)}}var qw=!1;function _L(E,C){for(O(E.containerInfo),Pt=C;Pt!==null;)if(E=Pt,C=E.child,(E.subtreeFlags&1028)!==0&&C!==null)C.return=E,Pt=C;else for(;Pt!==null;){E=Pt;try{var U=E.alternate;if(E.flags&1024)switch(E.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var W=U.memoizedProps,J=U.memoizedState,le=E.stateNode,Le=le.getSnapshotBeforeUpdate(E.elementType===E.type?W:Vr(E.type,W),J);le.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:fe&&Ve(E.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(y(163))}}catch(Ge){Pi(E,E.return,Ge)}if(C=E.sibling,C!==null){C.return=E.return,Pt=C;break}Pt=E.return}return U=qw,qw=!1,U}function ol(E,C,U){var W=C.updateQueue;if(W=W!==null?W.lastEffect:null,W!==null){var J=W=W.next;do{if((J.tag&E)===E){var le=J.destroy;J.destroy=void 0,le!==void 0&&Gg(C,U,le)}J=J.next}while(J!==W)}}function vd(E,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var U=C=C.next;do{if((U.tag&E)===E){var W=U.create;U.destroy=W()}U=U.next}while(U!==C)}}function Hg(E){var C=E.ref;if(C!==null){var U=E.stateNode;switch(E.tag){case 5:E=z(U);break;default:E=U}typeof C=="function"?C(E):C.current=E}}function Yw(E,C,U){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(Ka,C)}catch{}switch(C.tag){case 0:case 11:case 14:case 15:if(E=C.updateQueue,E!==null&&(E=E.lastEffect,E!==null)){var W=E=E.next;do{var J=W,le=J.destroy;J=J.tag,le!==void 0&&(J&2||J&4)&&Gg(C,U,le),W=W.next}while(W!==E)}break;case 1:if(Wf(C,U),E=C.stateNode,typeof E.componentWillUnmount=="function")try{E.props=C.memoizedProps,E.state=C.memoizedState,E.componentWillUnmount()}catch(Le){Pi(C,U,Le)}break;case 5:Wf(C,U);break;case 4:fe?eS(E,C,U):$&&$&&(C=C.stateNode.containerInfo,U=Qe(C),Nt(C,U))}}function Zw(E,C,U){for(var W=C;;)if(Yw(E,W,U),W.child===null||fe&&W.tag===4){if(W===C)break;for(;W.sibling===null;){if(W.return===null||W.return===C)return;W=W.return}W.sibling.return=W.return,W=W.sibling}else W.child.return=W,W=W.child}function Kw(E){var C=E.alternate;C!==null&&(E.alternate=null,Kw(C)),E.child=null,E.deletions=null,E.sibling=null,E.tag===5&&(C=E.stateNode,C!==null&&we(C)),E.stateNode=null,E.return=null,E.dependencies=null,E.memoizedProps=null,E.memoizedState=null,E.pendingProps=null,E.stateNode=null,E.updateQueue=null}function Jw(E){return E.tag===5||E.tag===3||E.tag===4}function Qw(E){e:for(;;){for(;E.sibling===null;){if(E.return===null||Jw(E.return))return null;E=E.return}for(E.sibling.return=E.return,E=E.sibling;E.tag!==5&&E.tag!==6&&E.tag!==18;){if(E.flags&2||E.child===null||E.tag===4)continue e;E.child.return=E,E=E.child}if(!(E.flags&2))return E.stateNode}}function $w(E){if(fe){e:{for(var C=E.return;C!==null;){if(Jw(C))break e;C=C.return}throw Error(y(160))}var U=C;switch(U.tag){case 5:C=U.stateNode,U.flags&32&&(he(C),U.flags&=-33),U=Qw(E),Xg(E,U,C);break;case 3:case 4:C=U.stateNode.containerInfo,U=Qw(E),Wg(E,U,C);break;default:throw Error(y(161))}}}function Wg(E,C,U){var W=E.tag;if(W===5||W===6)E=E.stateNode,C?lt(U,E,C):Fe(U,E);else if(W!==4&&(E=E.child,E!==null))for(Wg(E,C,U),E=E.sibling;E!==null;)Wg(E,C,U),E=E.sibling}function Xg(E,C,U){var W=E.tag;if(W===5||W===6)E=E.stateNode,C?ht(U,E,C):Ue(U,E);else if(W!==4&&(E=E.child,E!==null))for(Xg(E,C,U),E=E.sibling;E!==null;)Xg(E,C,U),E=E.sibling}function eS(E,C,U){for(var W=C,J=!1,le,Le;;){if(!J){J=W.return;e:for(;;){if(J===null)throw Error(y(160));switch(le=J.stateNode,J.tag){case 5:Le=!1;break e;case 3:le=le.containerInfo,Le=!0;break e;case 4:le=le.containerInfo,Le=!0;break e}J=J.return}J=!0}if(W.tag===5||W.tag===6)Zw(E,W,U),Le?ue(le,W.stateNode):ce(le,W.stateNode);else if(W.tag===18)Le?Ie(le,W.stateNode):pe(le,W.stateNode);else if(W.tag===4){if(W.child!==null){le=W.stateNode.containerInfo,Le=!0,W.child.return=W,W=W.child;continue}}else if(Yw(E,W,U),W.child!==null){W.child.return=W,W=W.child;continue}if(W===C)break;for(;W.sibling===null;){if(W.return===null||W.return===C)return;W=W.return,W.tag===4&&(J=!1)}W.sibling.return=W.return,W=W.sibling}}function qg(E,C){if(fe){switch(C.tag){case 0:case 11:case 14:case 15:ol(3,C,C.return),vd(3,C),ol(5,C,C.return);return;case 1:return;case 5:var U=C.stateNode;if(U!=null){var W=C.memoizedProps;E=E!==null?E.memoizedProps:W;var J=C.type,le=C.updateQueue;C.updateQueue=null,le!==null&&vt(U,le,J,E,W,C)}return;case 6:if(C.stateNode===null)throw Error(y(162));U=C.memoizedProps,Ne(C.stateNode,E!==null?E.memoizedProps:U,U);return;case 3:re&&E!==null&&E.memoizedState.isDehydrated&&Ye(C.stateNode.containerInfo);return;case 12:return;case 13:Xf(C);return;case 19:Xf(C);return;case 17:return}throw Error(y(163))}switch(C.tag){case 0:case 11:case 14:case 15:ol(3,C,C.return),vd(3,C),ol(5,C,C.return);return;case 12:return;case 13:Xf(C);return;case 19:Xf(C);return;case 3:re&&E!==null&&E.memoizedState.isDehydrated&&Ye(C.stateNode.containerInfo);break;case 22:case 23:return}e:if($){switch(C.tag){case 1:case 5:case 6:break e;case 3:case 4:C=C.stateNode,Nt(C.containerInfo,C.pendingChildren);break e}throw Error(y(163))}}function Xf(E){var C=E.updateQueue;if(C!==null){E.updateQueue=null;var U=E.stateNode;U===null&&(U=E.stateNode=new vL),C.forEach(function(W){var J=PL.bind(null,E,W);U.has(W)||(U.add(W),W.then(J,J))})}}function xL(E,C){for(Pt=C;Pt!==null;){C=Pt;var U=C.deletions;if(U!==null)for(var W=0;W<U.length;W++){var J=U[W];try{var le=E;fe?eS(le,J,C):Zw(le,J,C);var Le=J.alternate;Le!==null&&(Le.return=null),J.return=null}catch(Gt){Pi(J,C,Gt)}}if(U=C.child,C.subtreeFlags&12854&&U!==null)U.return=C,Pt=U;else for(;Pt!==null;){C=Pt;try{var Ge=C.flags;if(Ge&32&&fe&&he(C.stateNode),Ge&512){var ct=C.alternate;if(ct!==null){var St=ct.ref;St!==null&&(typeof St=="function"?St(null):St.current=null)}}if(Ge&8192)switch(C.tag){case 13:if(C.memoizedState!==null){var Ft=C.alternate;(Ft===null||Ft.memoizedState===null)&&(e0=pr())}break;case 22:var en=C.memoizedState!==null,Xt=C.alternate,Vn=Xt!==null&&Xt.memoizedState!==null;if(U=C,fe){e:if(W=U,J=en,le=null,fe)for(var Ht=W;;){if(Ht.tag===5){if(le===null){le=Ht;var Qr=Ht.stateNode;J?be(Qr):We(Ht.stateNode,Ht.memoizedProps)}}else if(Ht.tag===6){if(le===null){var cs=Ht.stateNode;J?je(cs):xe(cs,Ht.memoizedProps)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===W)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===W)break;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===W)break e;le===Ht&&(le=null),Ht=Ht.return}le===Ht&&(le=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}if(en&&!Vn&&U.mode&1){Pt=U;for(var et=U.child;et!==null;){for(U=Pt=et;Pt!==null;){W=Pt;var qe=W.child;switch(W.tag){case 0:case 11:case 14:case 15:ol(4,W,W.return);break;case 1:Wf(W,W.return);var ot=W.stateNode;if(typeof ot.componentWillUnmount=="function"){var kt=W.return;try{ot.props=W.memoizedProps,ot.state=W.memoizedState,ot.componentWillUnmount()}catch(Gt){Pi(W,kt,Gt)}}break;case 5:Wf(W,W.return);break;case 22:if(W.memoizedState!==null){rS(U);continue}}qe!==null?(qe.return=W,Pt=qe):rS(U)}et=et.sibling}}}switch(Ge&4102){case 2:$w(C),C.flags&=-3;break;case 6:$w(C),C.flags&=-3,qg(C.alternate,C);break;case 4096:C.flags&=-4097;break;case 4100:C.flags&=-4097,qg(C.alternate,C);break;case 4:qg(C.alternate,C)}}catch(Gt){Pi(C,C.return,Gt)}if(U=C.sibling,U!==null){U.return=C.return,Pt=U;break}Pt=C.return}}}function bL(E,C,U){Pt=E,tS(E)}function tS(E,C,U){for(var W=(E.mode&1)!==0;Pt!==null;){var J=Pt,le=J.child;if(J.tag===22&&W){var Le=J.memoizedState!==null||Hf;if(!Le){var Ge=J.alternate,ct=Ge!==null&&Ge.memoizedState!==null||sl;Ge=Hf;var St=sl;if(Hf=Le,(sl=ct)&&!St)for(Pt=J;Pt!==null;)Le=Pt,ct=Le.child,Le.tag===22&&Le.memoizedState!==null?iS(J):ct!==null?(ct.return=Le,Pt=ct):iS(J);for(;le!==null;)Pt=le,tS(le),le=le.sibling;Pt=J,Hf=Ge,sl=St}nS(E)}else J.subtreeFlags&8772&&le!==null?(le.return=J,Pt=le):nS(E)}}function nS(E){for(;Pt!==null;){var C=Pt;if(C.flags&8772){var U=C.alternate;try{if(C.flags&8772)switch(C.tag){case 0:case 11:case 15:sl||vd(5,C);break;case 1:var W=C.stateNode;if(C.flags&4&&!sl)if(U===null)W.componentDidMount();else{var J=C.elementType===C.type?U.memoizedProps:Vr(C.type,U.memoizedProps);W.componentDidUpdate(J,U.memoizedState,W.__reactInternalSnapshotBeforeUpdate)}var le=C.updateQueue;le!==null&&bu(C,le,W);break;case 3:var Le=C.updateQueue;if(Le!==null){if(U=null,C.child!==null)switch(C.child.tag){case 5:U=z(C.child.stateNode);break;case 1:U=C.child.stateNode}bu(C,Le,U)}break;case 5:var Ge=C.stateNode;U===null&&C.flags&4&&ft(Ge,C.type,C.memoizedProps,C);break;case 6:break;case 4:break;case 12:break;case 13:if(re&&C.memoizedState===null){var ct=C.alternate;if(ct!==null){var St=ct.memoizedState;if(St!==null){var Ft=St.dehydrated;Ft!==null&&nt(Ft)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(y(163))}sl||C.flags&512&&Hg(C)}catch(en){Pi(C,C.return,en)}}if(C===E){Pt=null;break}if(U=C.sibling,U!==null){U.return=C.return,Pt=U;break}Pt=C.return}}function rS(E){for(;Pt!==null;){var C=Pt;if(C===E){Pt=null;break}var U=C.sibling;if(U!==null){U.return=C.return,Pt=U;break}Pt=C.return}}function iS(E){for(;Pt!==null;){var C=Pt;try{switch(C.tag){case 0:case 11:case 15:var U=C.return;try{vd(4,C)}catch(ct){Pi(C,U,ct)}break;case 1:var W=C.stateNode;if(typeof W.componentDidMount=="function"){var J=C.return;try{W.componentDidMount()}catch(ct){Pi(C,J,ct)}}var le=C.return;try{Hg(C)}catch(ct){Pi(C,le,ct)}break;case 5:var Le=C.return;try{Hg(C)}catch(ct){Pi(C,Le,ct)}}}catch(ct){Pi(C,C.return,ct)}if(C===E){Pt=null;break}var Ge=C.sibling;if(Ge!==null){Ge.return=C.return,Pt=Ge;break}Pt=C.return}}var qf=0,Yf=1,Zf=2,Kf=3,Jf=4;if(typeof Symbol=="function"&&Symbol.for){var _d=Symbol.for;qf=_d("selector.component"),Yf=_d("selector.has_pseudo_class"),Zf=_d("selector.role"),Kf=_d("selector.test_id"),Jf=_d("selector.text")}function Yg(E){var C=de(E);if(C!=null){if(typeof C.memoizedProps["data-testname"]!="string")throw Error(y(364));return C}if(E=Ee(E),E===null)throw Error(y(362));return E.stateNode.current}function Zg(E,C){switch(C.$$typeof){case qf:if(E.type===C.value)return!0;break;case Yf:e:{C=C.value,E=[E,0];for(var U=0;U<E.length;){var W=E[U++],J=E[U++],le=C[J];if(W.tag!==5||!Be(W)){for(;le!=null&&Zg(W,le);)J++,le=C[J];if(J===C.length){C=!0;break e}else for(W=W.child;W!==null;)E.push(W,J),W=W.sibling}}C=!1}return C;case Zf:if(E.tag===5&&dt(E.stateNode,C.value))return!0;break;case Jf:if((E.tag===5||E.tag===6)&&(E=ze(E),E!==null&&0<=E.indexOf(C.value)))return!0;break;case Kf:if(E.tag===5&&(E=E.memoizedProps["data-testname"],typeof E=="string"&&E.toLowerCase()===C.value.toLowerCase()))return!0;break;default:throw Error(y(365))}return!1}function Kg(E){switch(E.$$typeof){case qf:return"<"+(M(E.value)||"Unknown")+">";case Yf:return":has("+(Kg(E)||"")+")";case Zf:return'[role="'+E.value+'"]';case Jf:return'"'+E.value+'"';case Kf:return'[data-testname="'+E.value+'"]';default:throw Error(y(365))}}function sS(E,C){var U=[];E=[E,0];for(var W=0;W<E.length;){var J=E[W++],le=E[W++],Le=C[le];if(J.tag!==5||!Be(J)){for(;Le!=null&&Zg(J,Le);)le++,Le=C[le];if(le===C.length)U.push(J);else for(J=J.child;J!==null;)E.push(J,le),J=J.sibling}}return U}function Jg(E,C){if(!oe)throw Error(y(363));E=Yg(E),E=sS(E,C),C=[],E=Array.from(E);for(var U=0;U<E.length;){var W=E[U++];if(W.tag===5)Be(W)||C.push(W.stateNode);else for(W=W.child;W!==null;)E.push(W),W=W.sibling}return C}var wL=Math.ceil,Qf=i.ReactCurrentDispatcher,Qg=i.ReactCurrentOwner,mr=i.ReactCurrentBatchConfig,pn=0,Sr=null,Mr=null,Hr=0,Gi=0,Eu=Ln(0),Rr=0,xd=null,Tu=0,$f=0,$g=0,bd=null,Ai=null,e0=0,t0=1/0;function Au(){t0=pr()+500}var ep=!1,n0=null,Qo=null,tp=!1,$o=null,np=0,wd=0,r0=null,rp=-1,ip=0;function fi(){return pn&6?pr():rp!==-1?rp:rp=pr()}function ea(E){return E.mode&1?pn&2&&Hr!==0?Hr&-Hr:Ja.transition!==null?(ip===0&&(E=uu,uu<<=1,!(uu&4194240)&&(uu=64),ip=E),ip):(E=mn,E!==0?E:ve()):1}function ls(E,C,U){if(50<wd)throw wd=0,r0=null,Error(y(185));var W=sp(E,C);return W===null?null:(po(W,C,U),(!(pn&2)||W!==Sr)&&(W===Sr&&(!(pn&2)&&($f|=C),Rr===4&&ta(W,Hr)),Ci(W,U),C===1&&pn===0&&!(E.mode&1)&&(Au(),pu&&wr())),W)}function sp(E,C){E.lanes|=C;var U=E.alternate;for(U!==null&&(U.lanes|=C),U=E,E=E.return;E!==null;)E.childLanes|=C,U=E.alternate,U!==null&&(U.childLanes|=C),U=E,E=E.return;return U.tag===3?U.stateNode:null}function Ci(E,C){var U=E.callbackNode;Cg(E,C);var W=Ya(E,E===Sr?Hr:0);if(W===0)U!==null&&rd(U),E.callbackNode=null,E.callbackPriority=0;else if(C=W&-W,E.callbackPriority!==C){if(U!=null&&rd(U),C===1)E.tag===0?os(aS.bind(null,E)):ad(aS.bind(null,E)),Se?ae(function(){pn===0&&wr()}):Ei(id,wr),U=null;else{switch(Za(W)){case 1:U=id;break;case 4:U=sd;break;case 16:U=fu;break;case 536870912:U=Pg;break;default:U=fu}U=yS(U,oS.bind(null,E))}E.callbackPriority=C,E.callbackNode=U}}function oS(E,C){if(rp=-1,ip=0,pn&6)throw Error(y(327));var U=E.callbackNode;if(ul()&&E.callbackNode!==U)return null;var W=Ya(E,E===Sr?Hr:0);if(W===0)return null;if(W&30||W&E.expiredLanes||C)C=op(E,W);else{C=W;var J=pn;pn|=2;var le=cS();(Sr!==E||Hr!==C)&&(Au(),al(E,C));do try{EL();break}catch(Ge){uS(E,Ge)}while(!0);gu(),Qf.current=le,pn=J,Mr!==null?C=0:(Sr=null,Hr=0,C=Rr)}if(C!==0){if(C===2&&(J=du(E),J!==0&&(W=J,C=i0(E,J))),C===1)throw U=xd,al(E,0),ta(E,W),Ci(E,pr()),U;if(C===6)ta(E,W);else{if(J=E.current.alternate,!(W&30)&&!SL(J)&&(C=op(E,W),C===2&&(le=du(E),le!==0&&(W=le,C=i0(E,le))),C===1))throw U=xd,al(E,0),ta(E,W),Ci(E,pr()),U;switch(E.finishedWork=J,E.finishedLanes=W,C){case 0:case 1:throw Error(y(345));case 2:ll(E,Ai);break;case 3:if(ta(E,W),(W&130023424)===W&&(C=e0+500-pr(),10<C)){if(Ya(E,0)!==0)break;if(J=E.suspendedLanes,(J&W)!==W){fi(),E.pingedLanes|=E.suspendedLanes&J;break}E.timeoutHandle=X(ll.bind(null,E,Ai),C);break}ll(E,Ai);break;case 4:if(ta(E,W),(W&4194240)===W)break;for(C=E.eventTimes,J=-1;0<W;){var Le=31-br(W);le=1<<Le,Le=C[Le],Le>J&&(J=Le),W&=~le}if(W=J,W=pr()-W,W=(120>W?120:480>W?480:1080>W?1080:1920>W?1920:3e3>W?3e3:4320>W?4320:1960*wL(W/1960))-W,10<W){E.timeoutHandle=X(ll.bind(null,E,Ai),W);break}ll(E,Ai);break;case 5:ll(E,Ai);break;default:throw Error(y(329))}}}return Ci(E,pr()),E.callbackNode===U?oS.bind(null,E):null}function i0(E,C){var U=bd;return E.current.memoizedState.isDehydrated&&(al(E,C).flags|=256),E=op(E,C),E!==2&&(C=Ai,Ai=U,C!==null&&s0(C)),E}function s0(E){Ai===null?Ai=E:Ai.push.apply(Ai,E)}function SL(E){for(var C=E;;){if(C.flags&16384){var U=C.updateQueue;if(U!==null&&(U=U.stores,U!==null))for(var W=0;W<U.length;W++){var J=U[W],le=J.getSnapshot;J=J.value;try{if(!ss(le(),J))return!1}catch{return!1}}}if(U=C.child,C.subtreeFlags&16384&&U!==null)U.return=C,C=U;else{if(C===E)break;for(;C.sibling===null;){if(C.return===null||C.return===E)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function ta(E,C){for(C&=~$g,C&=~$f,E.suspendedLanes|=C,E.pingedLanes&=~C,E=E.expirationTimes;0<C;){var U=31-br(C),W=1<<U;E[U]=-1,C&=~W}}function aS(E){if(pn&6)throw Error(y(327));ul();var C=Ya(E,0);if(!(C&1))return Ci(E,pr()),null;var U=op(E,C);if(E.tag!==0&&U===2){var W=du(E);W!==0&&(C=W,U=i0(E,W))}if(U===1)throw U=xd,al(E,0),ta(E,C),Ci(E,pr()),U;if(U===6)throw Error(y(345));return E.finishedWork=E.current.alternate,E.finishedLanes=C,ll(E,Ai),Ci(E,pr()),null}function lS(E){$o!==null&&$o.tag===0&&!(pn&6)&&ul();var C=pn;pn|=1;var U=mr.transition,W=mn;try{if(mr.transition=null,mn=1,E)return E()}finally{mn=W,mr.transition=U,pn=C,!(pn&6)&&wr()}}function o0(){Gi=Eu.current,It(Eu)}function al(E,C){E.finishedWork=null,E.finishedLanes=0;var U=E.timeoutHandle;if(U!==ie&&(E.timeoutHandle=ie,Z(U)),Mr!==null)for(U=Mr.return;U!==null;){var W=U;switch(Mu(W),W.tag){case 1:W=W.type.childContextTypes,W!=null&&tr();break;case 3:Qt(),It(fn),It(Wt),Jn();break;case 5:Bn(W);break;case 4:Qt();break;case 13:It(Zt);break;case 19:It(Zt);break;case 10:vu(W.type._context);break;case 22:case 23:o0()}U=U.return}if(Sr=E,Mr=E=na(E.current,null),Hr=Gi=C,Rr=0,xd=null,$g=$f=Tu=0,Ai=bd=null,Bi!==null){for(C=0;C<Bi.length;C++)if(U=Bi[C],W=U.interleaved,W!==null){U.interleaved=null;var J=W.next,le=U.pending;if(le!==null){var Le=le.next;le.next=J,W.next=Le}U.pending=W}Bi=null}return E}function uS(E,C){do{var U=Mr;try{if(gu(),zn.current=Uf,kn){for(var W=rn.memoizedState;W!==null;){var J=W.queue;J!==null&&(J.pending=null),W=W.next}kn=!1}if(_n=0,bn=yn=rn=null,Xn=!1,Rs=0,Qg.current=null,U===null||U.return===null){Rr=1,xd=C,Mr=null;break}e:{var le=E,Le=U.return,Ge=U,ct=C;if(C=Hr,Ge.flags|=32768,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var St=ct,Ft=Ge,en=Ft.tag;if(!(Ft.mode&1)&&(en===0||en===11||en===15)){var Xt=Ft.alternate;Xt?(Ft.updateQueue=Xt.updateQueue,Ft.memoizedState=Xt.memoizedState,Ft.lanes=Xt.lanes):(Ft.updateQueue=null,Ft.memoizedState=null)}var Vn=Rw(Le);if(Vn!==null){Vn.flags&=-257,jw(Vn,Le,Ge,le,C),Vn.mode&1&&Pw(le,St,C),C=Vn,ct=St;var Ht=C.updateQueue;if(Ht===null){var Qr=new Set;Qr.add(ct),C.updateQueue=Qr}else Ht.add(ct);break e}else{if(!(C&1)){Pw(le,St,C),a0();break e}ct=Error(y(426))}}else if(T&&Ge.mode&1){var cs=Rw(Le);if(cs!==null){!(cs.flags&65536)&&(cs.flags|=256),jw(cs,Le,Ge,le,C),De(ct);break e}}le=ct,Rr!==4&&(Rr=2),bd===null?bd=[le]:bd.push(le),ct=Ng(ct,Ge),Ge=Le;do{switch(Ge.tag){case 3:Ge.flags|=65536,C&=-C,Ge.lanes|=C;var et=Aw(Ge,ct,C);cd(Ge,et);break e;case 1:le=ct;var qe=Ge.type,ot=Ge.stateNode;if(!(Ge.flags&128)&&(typeof qe.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(Qo===null||!Qo.has(ot)))){Ge.flags|=65536,C&=-C,Ge.lanes|=C;var kt=Cw(Ge,le,C);cd(Ge,kt);break e}}Ge=Ge.return}while(Ge!==null)}hS(U)}catch(Gt){C=Gt,Mr===U&&U!==null&&(Mr=U=U.return);continue}break}while(!0)}function cS(){var E=Qf.current;return Qf.current=Uf,E===null?Uf:E}function a0(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),Sr===null||!(Tu&268435455)&&!($f&268435455)||ta(Sr,Hr)}function op(E,C){var U=pn;pn|=2;var W=cS();Sr===E&&Hr===C||al(E,C);do try{ML();break}catch(J){uS(E,J)}while(!0);if(gu(),pn=U,Qf.current=W,Mr!==null)throw Error(y(261));return Sr=null,Hr=0,Rr}function ML(){for(;Mr!==null;)dS(Mr)}function EL(){for(;Mr!==null&&!jf();)dS(Mr)}function dS(E){var C=mS(E.alternate,E,Gi);E.memoizedProps=E.pendingProps,C===null?hS(E):Mr=C,Qg.current=null}function hS(E){var C=E;do{var U=C.alternate;if(E=C.return,C.flags&32768){if(U=gL(U,C),U!==null){U.flags&=32767,Mr=U;return}if(E!==null)E.flags|=32768,E.subtreeFlags=0,E.deletions=null;else{Rr=6,Mr=null;return}}else if(U=pL(U,C,Gi),U!==null){Mr=U;return}if(C=C.sibling,C!==null){Mr=C;return}Mr=C=E}while(C!==null);Rr===0&&(Rr=5)}function ll(E,C){var U=mn,W=mr.transition;try{mr.transition=null,mn=1,TL(E,C,U)}finally{mr.transition=W,mn=U}return null}function TL(E,C,U){do ul();while($o!==null);if(pn&6)throw Error(y(327));var W=E.finishedWork,J=E.finishedLanes;if(W===null)return null;if(E.finishedWork=null,E.finishedLanes=0,W===E.current)throw Error(y(177));E.callbackNode=null,E.callbackPriority=0;var le=W.lanes|W.childLanes;if(Rf(E,le),E===Sr&&(Mr=Sr=null,Hr=0),!(W.subtreeFlags&2064)&&!(W.flags&2064)||tp||(tp=!0,yS(fu,function(){return ul(),null})),le=(W.flags&15990)!==0,W.subtreeFlags&15990||le){le=mr.transition,mr.transition=null;var Le=mn;mn=1;var Ge=pn;pn|=4,Qg.current=null,_L(E,W),xL(E,W),H(E.containerInfo),E.current=W,bL(W),Jo(),pn=Ge,mn=Le,mr.transition=le}else E.current=W;if(tp&&(tp=!1,$o=E,np=J),le=E.pendingLanes,le===0&&(Qo=null),Rg(W.stateNode),Ci(E,pr()),C!==null)for(U=E.onRecoverableError,W=0;W<C.length;W++)U(C[W]);if(ep)throw ep=!1,E=n0,n0=null,E;return np&1&&E.tag!==0&&ul(),le=E.pendingLanes,le&1?E===r0?wd++:(wd=0,r0=E):wd=0,wr(),null}function ul(){if($o!==null){var E=Za(np),C=mr.transition,U=mn;try{if(mr.transition=null,mn=16>E?16:E,$o===null)var W=!1;else{if(E=$o,$o=null,np=0,pn&6)throw Error(y(331));var J=pn;for(pn|=4,Pt=E.current;Pt!==null;){var le=Pt,Le=le.child;if(Pt.flags&16){var Ge=le.deletions;if(Ge!==null){for(var ct=0;ct<Ge.length;ct++){var St=Ge[ct];for(Pt=St;Pt!==null;){var Ft=Pt;switch(Ft.tag){case 0:case 11:case 15:ol(8,Ft,le)}var en=Ft.child;if(en!==null)en.return=Ft,Pt=en;else for(;Pt!==null;){Ft=Pt;var Xt=Ft.sibling,Vn=Ft.return;if(Kw(Ft),Ft===St){Pt=null;break}if(Xt!==null){Xt.return=Vn,Pt=Xt;break}Pt=Vn}}}var Ht=le.alternate;if(Ht!==null){var Qr=Ht.child;if(Qr!==null){Ht.child=null;do{var cs=Qr.sibling;Qr.sibling=null,Qr=cs}while(Qr!==null)}}Pt=le}}if(le.subtreeFlags&2064&&Le!==null)Le.return=le,Pt=Le;else e:for(;Pt!==null;){if(le=Pt,le.flags&2048)switch(le.tag){case 0:case 11:case 15:ol(9,le,le.return)}var et=le.sibling;if(et!==null){et.return=le.return,Pt=et;break e}Pt=le.return}}var qe=E.current;for(Pt=qe;Pt!==null;){Le=Pt;var ot=Le.child;if(Le.subtreeFlags&2064&&ot!==null)ot.return=Le,Pt=ot;else e:for(Le=qe;Pt!==null;){if(Ge=Pt,Ge.flags&2048)try{switch(Ge.tag){case 0:case 11:case 15:vd(9,Ge)}}catch(Gt){Pi(Ge,Ge.return,Gt)}if(Ge===Le){Pt=null;break e}var kt=Ge.sibling;if(kt!==null){kt.return=Ge.return,Pt=kt;break e}Pt=Ge.return}}if(pn=J,wr(),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(Ka,E)}catch{}W=!0}return W}finally{mn=U,mr.transition=C}}return!1}function fS(E,C,U){C=Ng(U,C),C=Aw(E,C,1),Es(E,C),C=fi(),E=sp(E,1),E!==null&&(po(E,1,C),Ci(E,C))}function Pi(E,C,U){if(E.tag===3)fS(E,E,U);else for(;C!==null;){if(C.tag===3){fS(C,E,U);break}else if(C.tag===1){var W=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof W.componentDidCatch=="function"&&(Qo===null||!Qo.has(W))){E=Ng(U,E),E=Cw(C,E,1),Es(C,E),E=fi(),C=sp(C,1),C!==null&&(po(C,1,E),Ci(C,E));break}}C=C.return}}function AL(E,C,U){var W=E.pingCache;W!==null&&W.delete(C),C=fi(),E.pingedLanes|=E.suspendedLanes&U,Sr===E&&(Hr&U)===U&&(Rr===4||Rr===3&&(Hr&130023424)===Hr&&500>pr()-e0?al(E,0):$g|=U),Ci(E,C)}function pS(E,C){C===0&&(E.mode&1?(C=cu,cu<<=1,!(cu&130023424)&&(cu=4194304)):C=1);var U=fi();E=sp(E,C),E!==null&&(po(E,C,U),Ci(E,U))}function CL(E){var C=E.memoizedState,U=0;C!==null&&(U=C.retryLane),pS(E,U)}function PL(E,C){var U=0;switch(E.tag){case 13:var W=E.stateNode,J=E.memoizedState;J!==null&&(U=J.retryLane);break;case 19:W=E.stateNode;break;default:throw Error(y(314))}W!==null&&W.delete(C),pS(E,U)}var mS;mS=function(E,C,U){if(E!==null)if(E.memoizedProps!==C.pendingProps||fn.current)Vi=!0;else{if(!(E.lanes&U)&&!(C.flags&128))return Vi=!1,yL(E,C,U);Vi=!!(E.flags&131072)}else Vi=!1,T&&C.flags&1048576&&kf(C,Su,C.index);switch(C.lanes=0,C.tag){case 2:var W=C.type;E!==null&&(E.alternate=null,C.alternate=null,C.flags|=2),E=C.pendingProps;var J=di(C,Wt.current);mo(C,U),J=Lg(null,C,W,E,J,U);var le=kg();return C.flags|=1,typeof J=="object"&&J!==null&&typeof J.render=="function"&&J.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,xr(W)?(le=!0,Cr(C)):le=!1,C.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,xu(C),J.updater=nl,C.stateNode=J,J._reactInternals=C,dd(C,W,E,U),C=Bg(null,C,W,!0,le,U)):(C.tag=0,T&&le&&hd(C),hi(null,C,J,U),C=C.child),C;case 16:W=C.elementType;e:{switch(E!==null&&(E.alternate=null,C.alternate=null,C.flags|=2),E=C.pendingProps,J=W._init,W=J(W._payload),C.type=W,J=C.tag=jL(W),E=Vr(W,E),J){case 0:C=Fg(null,C,W,E,U);break e;case 1:C=Fw(null,C,W,E,U);break e;case 11:C=Iw(null,C,W,E,U);break e;case 14:C=Ow(null,C,W,Vr(W.type,E),U);break e}throw Error(y(306,W,""))}return C;case 0:return W=C.type,J=C.pendingProps,J=C.elementType===W?J:Vr(W,J),Fg(E,C,W,J,U);case 1:return W=C.type,J=C.pendingProps,J=C.elementType===W?J:Vr(W,J),Fw(E,C,W,J,U);case 3:e:{if(Bw(C),E===null)throw Error(y(387));W=C.pendingProps,le=C.memoizedState,J=le.element,ud(E,C),$a(C,W,null,U);var Le=C.memoizedState;if(W=Le.element,re&&le.isDehydrated)if(le={element:W,isDehydrated:!1,cache:Le.cache,transitions:Le.transitions},C.updateQueue.baseState=le,C.memoizedState=le,C.flags&256){J=Error(y(423)),C=zw(E,C,W,U,J);break e}else if(W!==J){J=Error(y(424)),C=zw(E,C,W,U,J);break e}else for(re&&(Gr=lr(C.stateNode.containerInfo),wn=C,T=!0,D=null,j=!1),U=it(C,null,W,U),C.child=U;U;)U.flags=U.flags&-3|4096,U=U.sibling;else{if(Pe(),W===J){C=_o(E,C,U);break e}hi(E,C,W,U)}C=C.child}return C;case 5:return Cn(C),E===null&&te(C),W=C.type,J=C.pendingProps,le=E!==null?E.memoizedProps:null,Le=J.children,se(W,J)?Le=null:le!==null&&se(W,le)&&(C.flags|=32),Uw(E,C),hi(E,C,Le,U),C.child;case 6:return E===null&&te(C),null;case 13:return Vw(E,C,U);case 4:return nn(C,C.stateNode.containerInfo),W=C.pendingProps,E===null?C.child=$e(C,null,W,U):hi(E,C,W,U),C.child;case 11:return W=C.type,J=C.pendingProps,J=C.elementType===W?J:Vr(W,J),Iw(E,C,W,J,U);case 7:return hi(E,C,C.pendingProps,U),C.child;case 8:return hi(E,C,C.pendingProps.children,U),C.child;case 12:return hi(E,C,C.pendingProps.children,U),C.child;case 10:e:{if(W=C.type._context,J=C.pendingProps,le=C.memoizedProps,Le=J.value,ld(C,W,Le),le!==null)if(ss(le.value,Le)){if(le.children===J.children&&!fn.current){C=_o(E,C,U);break e}}else for(le=C.child,le!==null&&(le.return=C);le!==null;){var Ge=le.dependencies;if(Ge!==null){Le=le.child;for(var ct=Ge.firstContext;ct!==null;){if(ct.context===W){if(le.tag===1){ct=as(-1,U&-U),ct.tag=2;var St=le.updateQueue;if(St!==null){St=St.shared;var Ft=St.pending;Ft===null?ct.next=ct:(ct.next=Ft.next,Ft.next=ct),St.pending=ct}}le.lanes|=U,ct=le.alternate,ct!==null&&(ct.lanes|=U),_u(le.return,U,C),Ge.lanes|=U;break}ct=ct.next}}else if(le.tag===10)Le=le.type===C.type?null:le.child;else if(le.tag===18){if(Le=le.return,Le===null)throw Error(y(341));Le.lanes|=U,Ge=Le.alternate,Ge!==null&&(Ge.lanes|=U),_u(Le,U,C),Le=le.sibling}else Le=le.child;if(Le!==null)Le.return=le;else for(Le=le;Le!==null;){if(Le===C){Le=null;break}if(le=Le.sibling,le!==null){le.return=Le.return,Le=le;break}Le=Le.return}le=Le}hi(E,C,J.children,U),C=C.child}return C;case 9:return J=C.type,W=C.pendingProps.children,mo(C,U),J=Zr(J),W=W(J),C.flags|=1,hi(E,C,W,U),C.child;case 14:return W=C.type,J=Vr(W,C.pendingProps),J=Vr(W.type,J),Ow(E,C,W,J,U);case 15:return Dw(E,C,C.type,C.pendingProps,U);case 17:return W=C.type,J=C.pendingProps,J=C.elementType===W?J:Vr(W,J),E!==null&&(E.alternate=null,C.alternate=null,C.flags|=2),C.tag=1,xr(W)?(E=!0,Cr(C)):E=!1,mo(C,U),As(C,W,J),dd(C,W,J,U),Bg(null,C,W,!0,E,U);case 19:return Xw(E,C,U);case 22:return Nw(E,C,U)}throw Error(y(156,C.tag))};function yS(E,C){return Ei(E,C)}function RL(E,C,U,W){this.tag=E,this.key=U,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=W,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(E,C,U,W){return new RL(E,C,U,W)}function l0(E){return E=E.prototype,!(!E||!E.isReactComponent)}function jL(E){if(typeof E=="function")return l0(E)?1:0;if(E!=null){if(E=E.$$typeof,E===p)return 11;if(E===c)return 14}return 2}function na(E,C){var U=E.alternate;return U===null?(U=us(E.tag,C,E.key,E.mode),U.elementType=E.elementType,U.type=E.type,U.stateNode=E.stateNode,U.alternate=E,E.alternate=U):(U.pendingProps=C,U.type=E.type,U.flags=0,U.subtreeFlags=0,U.deletions=null),U.flags=E.flags&14680064,U.childLanes=E.childLanes,U.lanes=E.lanes,U.child=E.child,U.memoizedProps=E.memoizedProps,U.memoizedState=E.memoizedState,U.updateQueue=E.updateQueue,C=E.dependencies,U.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},U.sibling=E.sibling,U.index=E.index,U.ref=E.ref,U}function ap(E,C,U,W,J,le){var Le=2;if(W=E,typeof E=="function")l0(E)&&(Le=1);else if(typeof E=="string")Le=5;else e:switch(E){case h:return cl(U.children,J,le,C);case l:Le=8,J|=8;break;case d:return E=us(12,U,C,J|2),E.elementType=d,E.lanes=le,E;case f:return E=us(13,U,C,J),E.elementType=f,E.lanes=le,E;case u:return E=us(19,U,C,J),E.elementType=u,E.lanes=le,E;case b:return lp(U,J,le,C);default:if(typeof E=="object"&&E!==null)switch(E.$$typeof){case v:Le=10;break e;case x:Le=9;break e;case p:Le=11;break e;case c:Le=14;break e;case m:Le=16,W=null;break e}throw Error(y(130,E==null?E:typeof E,""))}return C=us(Le,U,C,J),C.elementType=E,C.type=W,C.lanes=le,C}function cl(E,C,U,W){return E=us(7,E,W,C),E.lanes=U,E}function lp(E,C,U,W){return E=us(22,E,W,C),E.elementType=b,E.lanes=U,E.stateNode={},E}function u0(E,C,U){return E=us(6,E,null,C),E.lanes=U,E}function c0(E,C,U){return C=us(4,E.children!==null?E.children:[],E.key,C),C.lanes=U,C.stateNode={containerInfo:E.containerInfo,pendingChildren:null,implementation:E.implementation},C}function LL(E,C,U,W,J){this.tag=C,this.containerInfo=E,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ie,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nd(0),this.expirationTimes=nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nd(0),this.identifierPrefix=W,this.onRecoverableError=J,re&&(this.mutableSourceEagerHydrationData=null)}function gS(E,C,U,W,J,le,Le,Ge,ct){return E=new LL(E,C,U,Ge,ct),C===1?(C=1,le===!0&&(C|=8)):C=0,le=us(3,null,null,C),E.current=le,le.stateNode=E,le.memoizedState={element:W,isDehydrated:U,cache:null,transitions:null},xu(le),E}function vS(E){if(!E)return Dn;E=E._reactInternals;e:{if(P(E)!==E||E.tag!==1)throw Error(y(170));var C=E;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(xr(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(y(171))}if(E.tag===1){var U=E.type;if(xr(U))return Zo(E,U,C)}return C}function _S(E){var C=E._reactInternals;if(C===void 0)throw typeof E.render=="function"?Error(y(188)):(E=Object.keys(E).join(","),Error(y(268,E)));return E=L(C),E===null?null:E.stateNode}function xS(E,C){if(E=E.memoizedState,E!==null&&E.dehydrated!==null){var U=E.retryLane;E.retryLane=U!==0&&U<C?U:C}}function d0(E,C){xS(E,C),(E=E.alternate)&&xS(E,C)}function kL(E){return E=L(E),E===null?null:E.stateNode}function IL(){return null}return n.attemptContinuousHydration=function(E){if(E.tag===13){var C=fi();ls(E,134217728,C),d0(E,134217728)}},n.attemptHydrationAtCurrentPriority=function(E){if(E.tag===13){var C=fi(),U=ea(E);ls(E,U,C),d0(E,U)}},n.attemptSynchronousHydration=function(E){switch(E.tag){case 3:var C=E.stateNode;if(C.current.memoizedState.isDehydrated){var U=Ko(C.pendingLanes);U!==0&&(hu(C,U|1),Ci(C,pr()),!(pn&6)&&(Au(),wr()))}break;case 13:var W=fi();lS(function(){return ls(E,1,W)}),d0(E,1)}},n.batchedUpdates=function(E,C){var U=pn;pn|=1;try{return E(C)}finally{pn=U,pn===0&&(Au(),pu&&wr())}},n.createComponentSelector=function(E){return{$$typeof:qf,value:E}},n.createContainer=function(E,C,U,W,J,le,Le){return gS(E,C,!1,null,U,W,J,le,Le)},n.createHasPseudoClassSelector=function(E){return{$$typeof:Yf,value:E}},n.createHydrationContainer=function(E,C,U,W,J,le,Le,Ge,ct){return E=gS(U,W,!0,E,J,le,Le,Ge,ct),E.context=vS(null),U=E.current,W=fi(),J=ea(U),le=as(W,J),le.callback=C??null,Es(U,le),E.current.lanes=J,po(E,J,W),Ci(E,W),E},n.createPortal=function(E,C,U){var W=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g,key:W==null?null:""+W,children:E,containerInfo:C,implementation:U}},n.createRoleSelector=function(E){return{$$typeof:Zf,value:E}},n.createTestNameSelector=function(E){return{$$typeof:Kf,value:E}},n.createTextSelector=function(E){return{$$typeof:Jf,value:E}},n.deferredUpdates=function(E){var C=mn,U=mr.transition;try{return mr.transition=null,mn=16,E()}finally{mn=C,mr.transition=U}},n.discreteUpdates=function(E,C,U,W,J){var le=mn,Le=mr.transition;try{return mr.transition=null,mn=1,E(C,U,W,J)}finally{mn=le,mr.transition=Le,pn===0&&Au()}},n.findAllNodes=Jg,n.findBoundingRects=function(E,C){if(!oe)throw Error(y(363));C=Jg(E,C),E=[];for(var U=0;U<C.length;U++)E.push(Oe(C[U]));for(C=E.length-1;0<C;C--){U=E[C];for(var W=U.x,J=W+U.width,le=U.y,Le=le+U.height,Ge=C-1;0<=Ge;Ge--)if(C!==Ge){var ct=E[Ge],St=ct.x,Ft=St+ct.width,en=ct.y,Xt=en+ct.height;if(W>=St&&le>=en&&J<=Ft&&Le<=Xt){E.splice(C,1);break}else if(W!==St||U.width!==ct.width||Xt<le||en>Le){if(!(le!==en||U.height!==ct.height||Ft<W||St>J)){St>W&&(ct.width+=St-W,ct.x=W),Ft<J&&(ct.width=J-St),E.splice(C,1);break}}else{en>le&&(ct.height+=en-le,ct.y=le),Xt<Le&&(ct.height=Le-en),E.splice(C,1);break}}}return E},n.findHostInstance=_S,n.findHostInstanceWithNoPortals=function(E){return E=k(E),E=E!==null?I(E):null,E===null?null:E.stateNode},n.findHostInstanceWithWarning=function(E){return _S(E)},n.flushControlled=function(E){var C=pn;pn|=1;var U=mr.transition,W=mn;try{mr.transition=null,mn=1,E()}finally{mn=W,mr.transition=U,pn=C,pn===0&&(Au(),wr())}},n.flushPassiveEffects=ul,n.flushSync=lS,n.focusWithin=function(E,C){if(!oe)throw Error(y(363));for(E=Yg(E),C=sS(E,C),C=Array.from(C),E=0;E<C.length;){var U=C[E++];if(!Be(U)){if(U.tag===5&&Je(U.stateNode))return!0;for(U=U.child;U!==null;)C.push(U),U=U.sibling}}return!1},n.getCurrentUpdatePriority=function(){return mn},n.getFindAllNodesFailureDescription=function(E,C){if(!oe)throw Error(y(363));var U=0,W=[];E=[Yg(E),0];for(var J=0;J<E.length;){var le=E[J++],Le=E[J++],Ge=C[Le];if((le.tag!==5||!Be(le))&&(Zg(le,Ge)&&(W.push(Kg(Ge)),Le++,Le>U&&(U=Le)),Le<C.length))for(le=le.child;le!==null;)E.push(le,Le),le=le.sibling}if(U<C.length){for(E=[];U<C.length;U++)E.push(Kg(C[U]));return`findAllNodes was able to match part of the selector:
  `+(W.join(" > ")+`

No matching component was found for:
  `)+E.join(" > ")}return null},n.getPublicRootInstance=function(E){if(E=E.current,!E.child)return null;switch(E.child.tag){case 5:return z(E.child.stateNode);default:return E.child.stateNode}},n.injectIntoDevTools=function(E){if(E={bundleType:E.bundleType,version:E.version,rendererPackageName:E.rendererPackageName,rendererConfig:E.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:i.ReactCurrentDispatcher,findHostInstanceByFiber:kL,findFiberByHostInstance:E.findFiberByHostInstance||IL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")E=!1;else{var C=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(C.isDisabled||!C.supportsFiber)E=!0;else{try{Ka=C.inject(E),Ui=C}catch{}E=!!C.checkDCE}}return E},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(E,C,U,W){if(!oe)throw Error(y(363));E=Jg(E,C);var J=_e(E,U,W).disconnect;return{disconnect:function(){J()}}},n.registerMutableSourceForHydration=function(E,C){var U=C._getVersion;U=U(C._source),E.mutableSourceEagerHydrationData==null?E.mutableSourceEagerHydrationData=[C,U]:E.mutableSourceEagerHydrationData.push(C,U)},n.runWithPriority=function(E,C){var U=mn;try{return mn=E,C()}finally{mn=U}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(E,C,U,W){var J=C.current,le=fi(),Le=ea(J);return U=vS(U),C.context===null?C.context=U:C.pendingContext=U,C=as(le,Le),C.payload={element:E},W=W===void 0?null:W,W!==null&&(C.callback=W),Es(J,C),E=ls(J,Le,le),E!==null&&Qa(E,J,Le),Le},n};Gj.exports=JG;var QG=Gj.exports;const $G=zT(QG);var Hj={exports:{}},Wj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(N,O){var H=N.length;N.push(O);e:for(;0<H;){var q=H-1>>>1,K=N[q];if(0<o(K,O))N[q]=O,N[H]=K,H=q;else break e}}function n(N){return N.length===0?null:N[0]}function s(N){if(N.length===0)return null;var O=N[0],H=N.pop();if(H!==O){N[0]=H;e:for(var q=0,K=N.length,ne=K>>>1;q<ne;){var ee=2*(q+1)-1,se=N[ee],me=ee+1,X=N[me];if(0>o(se,H))me<K&&0>o(X,se)?(N[q]=X,N[me]=H,q=me):(N[q]=se,N[ee]=H,q=ee);else if(me<K&&0>o(X,H))N[q]=X,N[me]=H,q=me;else break e}}return O}function o(N,O){var H=N.sortIndex-O.sortIndex;return H!==0?H:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var y=Date,i=y.now();r.unstable_now=function(){return y.now()-i}}var _=[],g=[],h=1,l=null,d=3,v=!1,x=!1,p=!1,f=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var O=n(g);O!==null;){if(O.callback===null)s(g);else if(O.startTime<=N)s(g),O.sortIndex=O.expirationTime,t(_,O);else break;O=n(g)}}function b(N){if(p=!1,m(N),!x)if(n(_)!==null)x=!0,z(S);else{var O=n(g);O!==null&&G(b,O.startTime-N)}}function S(N,O){x=!1,p&&(p=!1,u(A),A=-1),v=!0;var H=d;try{for(m(O),l=n(_);l!==null&&(!(l.expirationTime>O)||N&&!k());){var q=l.callback;if(typeof q=="function"){l.callback=null,d=l.priorityLevel;var K=q(l.expirationTime<=O);O=r.unstable_now(),typeof K=="function"?l.callback=K:l===n(_)&&s(_),m(O)}else s(_);l=n(_)}if(l!==null)var ne=!0;else{var ee=n(g);ee!==null&&G(b,ee.startTime-O),ne=!1}return ne}finally{l=null,d=H,v=!1}}var w=!1,M=null,A=-1,P=5,R=-1;function k(){return!(r.unstable_now()-R<P)}function L(){if(M!==null){var N=r.unstable_now();R=N;var O=!0;try{O=M(!0,N)}finally{O?B():(w=!1,M=null)}}else w=!1}var B;if(typeof c=="function")B=function(){c(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=L,B=function(){F.postMessage(null)}}else B=function(){f(L,0)};function z(N){M=N,w||(w=!0,B())}function G(N,O){A=f(function(){N(r.unstable_now())},O)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,z(S))},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return n(_)},r.unstable_next=function(N){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var H=d;d=O;try{return N()}finally{d=H}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=d;d=N;try{return O()}finally{d=H}},r.unstable_scheduleCallback=function(N,O,H){var q=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,N={id:h++,callback:O,priorityLevel:N,startTime:H,expirationTime:K,sortIndex:-1},H>q?(N.sortIndex=H,t(g,N),n(_)===null&&N===n(g)&&(p?(u(A),A=-1):p=!0,G(b,H-q))):(N.sortIndex=K,t(_,N),x||v||(x=!0,z(S))),N},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(N){var O=d;return function(){var H=d;d=O;try{return N.apply(this,arguments)}finally{d=H}}}})(Wj);Hj.exports=Wj;var TT=Hj.exports;const aw={},eH=r=>void Object.assign(aw,r);function tH(r,t){function n(h,{args:l=[],attach:d,...v},x){let p=`${h[0].toUpperCase()}${h.slice(1)}`,f;if(h==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const u=v.object;f=Qu(u,{type:h,root:x,attach:d,primitive:!0})}else{const u=aw[p];if(!u)throw new Error(`R3F: ${p} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(l))throw new Error("R3F: The args prop must be an array!");f=Qu(new u(...l),{type:h,root:x,attach:d,memoizedProps:{args:l}})}return f.__r3f.attach===void 0&&(f.isBufferGeometry?f.__r3f.attach="geometry":f.isMaterial&&(f.__r3f.attach="material")),p!=="inject"&&Uv(f,v),f}function s(h,l){let d=!1;if(l){var v,x;(v=l.__r3f)!=null&&v.attach?Nv(h,l,l.__r3f.attach):l.isObject3D&&h.isObject3D&&(h.add(l),d=!0),d||(x=h.__r3f)==null||x.objects.push(l),l.__r3f||Qu(l,{}),l.__r3f.parent=h,G_(l),$u(l)}}function o(h,l,d){let v=!1;if(l){var x,p;if((x=l.__r3f)!=null&&x.attach)Nv(h,l,l.__r3f.attach);else if(l.isObject3D&&h.isObject3D){l.parent=h,l.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:l});const f=h.children.filter(c=>c!==l),u=f.indexOf(d);h.children=[...f.slice(0,u),l,...f.slice(u)],v=!0}v||(p=h.__r3f)==null||p.objects.push(l),l.__r3f||Qu(l,{}),l.__r3f.parent=h,G_(l),$u(l)}}function a(h,l,d=!1){h&&[...h].forEach(v=>y(l,v,d))}function y(h,l,d){if(l){var v,x,p;if(l.__r3f&&(l.__r3f.parent=null),(v=h.__r3f)!=null&&v.objects&&(h.__r3f.objects=h.__r3f.objects.filter(b=>b!==l)),(x=l.__r3f)!=null&&x.attach)jT(h,l,l.__r3f.attach);else if(l.isObject3D&&h.isObject3D){var f;h.remove(l),(f=l.__r3f)!=null&&f.root&&uH(Wm(l),l)}const c=(p=l.__r3f)==null?void 0:p.primitive,m=!c&&(d===void 0?l.dispose!==null:d);if(!c){var u;a((u=l.__r3f)==null?void 0:u.objects,l,m),a(l.children,l,m)}if(delete l.__r3f,m&&l.dispose&&l.type!=="Scene"){const b=()=>{try{l.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?TT.unstable_scheduleCallback(TT.unstable_IdlePriority,b):b()}$u(h)}}function i(h,l,d,v){var x;const p=(x=h.__r3f)==null?void 0:x.parent;if(!p)return;const f=n(l,d,h.__r3f.root);if(h.children){for(const u of h.children)u.__r3f&&s(f,u);h.children=h.children.filter(u=>!u.__r3f)}h.__r3f.objects.forEach(u=>s(f,u)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||y(p,h),f.parent&&(f.__r3f.autoRemovedBeforeAppend=!0),s(p,f),f.raycast&&f.__r3f.eventCount&&Wm(f).getState().internal.interaction.push(f),[v,v.alternate].forEach(u=>{u!==null&&(u.stateNode=f,u.ref&&(typeof u.ref=="function"?u.ref(f):u.ref.current=f))})}const _=()=>{};return{reconciler:$G({createInstance:n,removeChild:y,appendChild:s,appendInitialChild:s,insertBefore:o,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,l)=>{if(!l)return;const d=h.getState().scene;d.__r3f&&(d.__r3f.root=h,s(d,l))},removeChildFromContainer:(h,l)=>{l&&y(h.getState().scene,l)},insertInContainerBefore:(h,l,d)=>{if(!l||!d)return;const v=h.getState().scene;v.__r3f&&o(v,l,d)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var l;return!!((l=h==null?void 0:h.__r3f)!=null?l:{}).handlers},prepareUpdate(h,l,d,v){var x;if(((x=h==null?void 0:h.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==h)return[!0];{const{args:f=[],children:u,...c}=v,{args:m=[],children:b,...S}=d;if(!Array.isArray(f))throw new Error("R3F: the args prop must be an array!");if(f.some((M,A)=>M!==m[A]))return[!0];const w=Qj(h,c,S,!0);return w.changes.length?[!1,w]:null}},commitUpdate(h,[l,d],v,x,p,f){l?i(h,v,p,f):Uv(h,d)},commitMount(h,l,d,v){var x;const p=(x=h.__r3f)!=null?x:{};h.raycast&&p.handlers&&p.eventCount&&Wm(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Qu(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var l;const{attach:d,parent:v}=(l=h.__r3f)!=null?l:{};d&&v&&jT(v,h,d),h.isObject3D&&(h.visible=!1),$u(h)},unhideInstance(h,l){var d;const{attach:v,parent:x}=(d=h.__r3f)!=null?d:{};v&&x&&Nv(x,h,v),(h.isObject3D&&l.visible==null||l.visible)&&(h.visible=!0),$u(h)},createTextInstance:_,hideTextInstance:_,unhideTextInstance:_,getCurrentEventPriority:()=>t?t():wc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Yn.fun(performance.now)?performance.now:Yn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Yn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Yn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Uv}}var AT,CT;const Dv=r=>"colorSpace"in r||"outputColorSpace"in r,Xj=()=>{var r;return(r=aw.ColorManagement)!=null?r:null},qj=r=>r&&r.isOrthographicCamera,nH=r=>r&&r.hasOwnProperty("current"),Cf=typeof window<"u"&&((AT=window.document)!=null&&AT.createElement||((CT=window.navigator)==null?void 0:CT.product)==="ReactNative")?at.useLayoutEffect:at.useEffect;function Yj(r){const t=at.useRef(r);return Cf(()=>void(t.current=r),[r]),t}function rH({set:r}){return Cf(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class Zj extends at.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Zj.getDerivedStateFromError=()=>({error:!0});const Kj="__default",PT=new Map,iH=r=>r&&!!r.memoized&&!!r.changes;function Jj(r){var t;const n=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],n),r[1]):r}const Gd=r=>{var t;return(t=r.__r3f)==null?void 0:t.root.getState()};function Wm(r){let t=r.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const Yn={obj:r=>r===Object(r)&&!Yn.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,t,{arrays:n="shallow",objects:s="reference",strict:o=!0}={}){if(typeof r!=typeof t||!!r!=!!t)return!1;if(Yn.str(r)||Yn.num(r)||Yn.boo(r))return r===t;const a=Yn.obj(r);if(a&&s==="reference")return r===t;const y=Yn.arr(r);if(y&&n==="reference")return r===t;if((y||a)&&r===t)return!0;let i;for(i in r)if(!(i in t))return!1;if(a&&n==="shallow"&&s==="shallow"){for(i in o?t:r)if(!Yn.equ(r[i],t[i],{strict:o,objects:"reference"}))return!1}else for(i in o?t:r)if(r[i]!==t[i])return!1;if(Yn.und(i)){if(y&&r.length===0&&t.length===0||a&&Object.keys(r).length===0&&Object.keys(t).length===0)return!0;if(r!==t)return!1}return!0}};function sH(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const t in r)t.dispose==null||t.dispose(),delete r[t]}function Qu(r,t){const n=r;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},r}function V_(r,t){let n=r;if(t.includes("-")){const s=t.split("-"),o=s.pop();return n=s.reduce((a,y)=>a[y],r),{target:n,key:o}}else return{target:n,key:t}}const RT=/-\d+$/;function Nv(r,t,n){if(Yn.str(n)){if(RT.test(n)){const a=n.replace(RT,""),{target:y,key:i}=V_(r,a);Array.isArray(y[i])||(y[i]=[])}const{target:s,key:o}=V_(r,n);t.__r3f.previousAttach=s[o],s[o]=t}else t.__r3f.previousAttach=n(r,t)}function jT(r,t,n){var s,o;if(Yn.str(n)){const{target:a,key:y}=V_(r,n),i=t.__r3f.previousAttach;i===void 0?delete a[y]:a[y]=i}else(s=t.__r3f)==null||s.previousAttach==null||s.previousAttach(r,t);(o=t.__r3f)==null||delete o.previousAttach}function Qj(r,{children:t,key:n,ref:s,...o},{children:a,key:y,ref:i,..._}={},g=!1){const h=r.__r3f,l=Object.entries(o),d=[];if(g){const x=Object.keys(_);for(let p=0;p<x.length;p++)o.hasOwnProperty(x[p])||l.unshift([x[p],Kj+"remove"])}l.forEach(([x,p])=>{var f;if((f=r.__r3f)!=null&&f.primitive&&x==="object"||Yn.equ(p,_[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return d.push([x,p,!0,[]]);let u=[];x.includes("-")&&(u=x.split("-")),d.push([x,p,!1,u]);for(const c in o){const m=o[c];c.startsWith(`${x}-`)&&d.push([c,m,!1,c.split("-")])}});const v={...o};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:d}}const oH=typeof process<"u"&&!1;function Uv(r,t){var n;const s=r.__r3f,o=s==null?void 0:s.root,a=o==null||o.getState==null?void 0:o.getState(),{memoized:y,changes:i}=iH(t)?t:Qj(r,t),_=s==null?void 0:s.eventCount;r.__r3f&&(r.__r3f.memoizedProps=y);for(let d=0;d<i.length;d++){let[v,x,p,f]=i[d];if(Dv(r)){const b="srgb",S="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?b:S):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?b:S)}let u=r,c=u[v];if(f.length&&(c=f.reduce((m,b)=>m[b],r),!(c&&c.set))){const[m,...b]=f.reverse();u=b.reverse().reduce((S,w)=>S[w],r),v=m}if(x===Kj+"remove")if(u.constructor){let m=PT.get(u.constructor);m||(m=new u.constructor,PT.set(u.constructor,m)),x=m[v]}else x=0;if(p&&s)x?s.handlers[v]=x:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(c&&c.set&&(c.copy||c instanceof Hl)){if(Array.isArray(x))c.fromArray?c.fromArray(x):c.set(...x);else if(c.copy&&x&&x.constructor&&(oH?c.constructor.name===x.constructor.name:c.constructor===x.constructor))c.copy(x);else if(x!==void 0){var g;const m=(g=c)==null?void 0:g.isColor;!m&&c.setScalar?c.setScalar(x):c instanceof Hl&&x instanceof Hl?c.mask=x.mask:c.set(x),!Xj()&&a&&!a.linear&&m&&c.convertSRGBToLinear()}}else{var h;if(u[v]=x,(h=u[v])!=null&&h.isTexture&&u[v].format===gi&&u[v].type===lo&&a){const m=u[v];Dv(m)&&Dv(a.gl)?m.colorSpace=a.gl.outputColorSpace:m.encoding=a.gl.outputEncoding}}$u(r)}if(s&&s.parent&&r.raycast&&_!==s.eventCount){const d=Wm(r).getState().internal,v=d.interaction.indexOf(r);v>-1&&d.interaction.splice(v,1),s.eventCount&&d.interaction.push(r)}return!(i.length===1&&i[0][0]==="onUpdate")&&i.length&&(n=r.__r3f)!=null&&n.parent&&G_(r),r}function $u(r){var t,n;const s=(t=r.__r3f)==null||(n=t.root)==null||n.getState==null?void 0:n.getState();s&&s.internal.frames===0&&s.invalidate()}function G_(r){r.onUpdate==null||r.onUpdate(r)}function aH(r,t){r.manual||(qj(r)?(r.left=t.width/-2,r.right=t.width/2,r.top=t.height/2,r.bottom=t.height/-2):r.aspect=t.width/t.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function bm(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function lH(){var r;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return wc.DefaultEventPriority;switch((r=t.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return wc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return wc.ContinuousEventPriority;default:return wc.DefaultEventPriority}}function $j(r,t,n,s){const o=n.get(t);o&&(n.delete(t),n.size===0&&(r.delete(s),o.target.releasePointerCapture(s)))}function uH(r,t){const{internal:n}=r.getState();n.interaction=n.interaction.filter(s=>s!==t),n.initialHits=n.initialHits.filter(s=>s!==t),n.hovered.forEach((s,o)=>{(s.eventObject===t||s.object===t)&&n.hovered.delete(o)}),n.capturedMap.forEach((s,o)=>{$j(n.capturedMap,t,s,o)})}function cH(r){function t(_){const{internal:g}=r.getState(),h=_.offsetX-g.initialClick[0],l=_.offsetY-g.initialClick[1];return Math.round(Math.sqrt(h*h+l*l))}function n(_){return _.filter(g=>["Move","Over","Enter","Out","Leave"].some(h=>{var l;return(l=g.__r3f)==null?void 0:l.handlers["onPointer"+h]}))}function s(_,g){const h=r.getState(),l=new Set,d=[],v=g?g(h.internal.interaction):h.internal.interaction;for(let u=0;u<v.length;u++){const c=Gd(v[u]);c&&(c.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(_,h);function x(u){const c=Gd(u);if(!c||!c.events.enabled||c.raycaster.camera===null)return[];if(c.raycaster.camera===void 0){var m;c.events.compute==null||c.events.compute(_,c,(m=c.previousRoot)==null?void 0:m.getState()),c.raycaster.camera===void 0&&(c.raycaster.camera=null)}return c.raycaster.camera?c.raycaster.intersectObject(u,!0):[]}let p=v.flatMap(x).sort((u,c)=>{const m=Gd(u.object),b=Gd(c.object);return!m||!b?u.distance-c.distance:b.events.priority-m.events.priority||u.distance-c.distance}).filter(u=>{const c=bm(u);return l.has(c)?!1:(l.add(c),!0)});h.events.filter&&(p=h.events.filter(p,h));for(const u of p){let c=u.object;for(;c;){var f;(f=c.__r3f)!=null&&f.eventCount&&d.push({...u,eventObject:c}),c=c.parent}}if("pointerId"in _&&h.internal.capturedMap.has(_.pointerId))for(let u of h.internal.capturedMap.get(_.pointerId).values())l.has(bm(u.intersection))||d.push(u.intersection);return d}function o(_,g,h,l){const d=r.getState();if(_.length){const v={stopped:!1};for(const x of _){const p=Gd(x.object)||d,{raycaster:f,pointer:u,camera:c,internal:m}=p,b=new Re(u.x,u.y,0).unproject(c),S=R=>{var k,L;return(k=(L=m.capturedMap.get(R))==null?void 0:L.has(x.eventObject))!=null?k:!1},w=R=>{const k={intersection:x,target:g.target};m.capturedMap.has(R)?m.capturedMap.get(R).set(x.eventObject,k):m.capturedMap.set(R,new Map([[x.eventObject,k]])),g.target.setPointerCapture(R)},M=R=>{const k=m.capturedMap.get(R);k&&$j(m.capturedMap,x.eventObject,k,R)};let A={};for(let R in g){let k=g[R];typeof k!="function"&&(A[R]=k)}let P={...x,...A,pointer:u,intersections:_,stopped:v.stopped,delta:h,unprojectedPoint:b,ray:f.ray,camera:c,stopPropagation(){const R="pointerId"in g&&m.capturedMap.get(g.pointerId);if((!R||R.has(x.eventObject))&&(P.stopped=v.stopped=!0,m.hovered.size&&Array.from(m.hovered.values()).find(k=>k.eventObject===x.eventObject))){const k=_.slice(0,_.indexOf(x));a([...k,x])}},target:{hasPointerCapture:S,setPointerCapture:w,releasePointerCapture:M},currentTarget:{hasPointerCapture:S,setPointerCapture:w,releasePointerCapture:M},nativeEvent:g};if(l(P),v.stopped===!0)break}}return _}function a(_){const{internal:g}=r.getState();for(const h of g.hovered.values())if(!_.length||!_.find(l=>l.object===h.object&&l.index===h.index&&l.instanceId===h.instanceId)){const d=h.eventObject.__r3f,v=d==null?void 0:d.handlers;if(g.hovered.delete(bm(h)),d!=null&&d.eventCount){const x={...h,intersections:_};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function y(_,g){for(let h=0;h<g.length;h++){const l=g[h].__r3f;l==null||l.handlers.onPointerMissed==null||l.handlers.onPointerMissed(_)}}function i(_){switch(_){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return g=>{const{internal:h}=r.getState();"pointerId"in g&&h.capturedMap.has(g.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(g.pointerId)&&(h.capturedMap.delete(g.pointerId),a([]))})}}return function(h){const{onPointerMissed:l,internal:d}=r.getState();d.lastEvent.current=h;const v=_==="onPointerMove",x=_==="onClick"||_==="onContextMenu"||_==="onDoubleClick",f=s(h,v?n:void 0),u=x?t(h):0;_==="onPointerDown"&&(d.initialClick=[h.offsetX,h.offsetY],d.initialHits=f.map(m=>m.eventObject)),x&&!f.length&&u<=2&&(y(h,d.interaction),l&&l(h)),v&&a(f);function c(m){const b=m.eventObject,S=b.__r3f,w=S==null?void 0:S.handlers;if(S!=null&&S.eventCount)if(v){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const M=bm(m),A=d.hovered.get(M);A?A.stopped&&m.stopPropagation():(d.hovered.set(M,m),w.onPointerOver==null||w.onPointerOver(m),w.onPointerEnter==null||w.onPointerEnter(m))}w.onPointerMove==null||w.onPointerMove(m)}else{const M=w[_];M?(!x||d.initialHits.includes(b))&&(y(h,d.interaction.filter(A=>!d.initialHits.includes(A))),M(m)):x&&d.initialHits.includes(b)&&y(h,d.interaction.filter(A=>!d.initialHits.includes(A)))}}o(f,h,u,c)}}return{handlePointer:i}}const eL=r=>!!(r!=null&&r.render),tL=at.createContext(null),dH=(r,t)=>{const n=YG((i,_)=>{const g=new Re,h=new Re,l=new Re;function d(u=_().camera,c=h,m=_().size){const{width:b,height:S,top:w,left:M}=m,A=b/S;c.isVector3?l.copy(c):l.set(...c);const P=u.getWorldPosition(g).distanceTo(l);if(qj(u))return{width:b/u.zoom,height:S/u.zoom,top:w,left:M,factor:1,distance:P,aspect:A};{const R=u.fov*Math.PI/180,k=2*Math.tan(R/2)*P,L=k*(b/S);return{width:L,height:k,top:w,left:M,factor:b/L,distance:P,aspect:A}}}let v;const x=u=>i(c=>({performance:{...c.performance,current:u}})),p=new mt;return{set:i,get:_,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(u=1)=>r(_(),u),advance:(u,c)=>t(u,c,_()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new rw,pointer:p,mouse:p,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const u=_();v&&clearTimeout(v),u.performance.current!==u.performance.min&&x(u.performance.min),v=setTimeout(()=>x(_().performance.max),u.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:u=>i(c=>({...c,events:{...c.events,...u}})),setSize:(u,c,m,b,S)=>{const w=_().camera,M={width:u,height:c,top:b||0,left:S||0,updateStyle:m};i(A=>({size:M,viewport:{...A.viewport,...d(w,h,M)}}))},setDpr:u=>i(c=>{const m=Jj(u);return{viewport:{...c.viewport,dpr:m,initialDpr:c.viewport.initialDpr||m}}}),setFrameloop:(u="always")=>{const c=_().clock;c.stop(),c.elapsedTime=0,u!=="never"&&(c.start(),c.elapsedTime=0),i(()=>({frameloop:u}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:at.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(u,c,m)=>{const b=_().internal;return b.priority=b.priority+(c>0?1:0),b.subscribers.push({ref:u,priority:c,store:m}),b.subscribers=b.subscribers.sort((S,w)=>S.priority-w.priority),()=>{const S=_().internal;S!=null&&S.subscribers&&(S.priority=S.priority-(c>0?1:0),S.subscribers=S.subscribers.filter(w=>w.ref!==u))}}}}}),s=n.getState();let o=s.size,a=s.viewport.dpr,y=s.camera;return n.subscribe(()=>{const{camera:i,size:_,viewport:g,gl:h,set:l}=n.getState();if(_.width!==o.width||_.height!==o.height||g.dpr!==a){var d;o=_,a=g.dpr,aH(i,_),h.setPixelRatio(g.dpr);const v=(d=_.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(_.width,_.height,v)}i!==y&&(y=i,l(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(i)}})))}),n.subscribe(i=>r(i)),n};let wm,hH=new Set,fH=new Set,pH=new Set;function Fv(r,t){if(r.size)for(const{callback:n}of r.values())n(t)}function Hd(r,t){switch(r){case"before":return Fv(hH,t);case"after":return Fv(fH,t);case"tail":return Fv(pH,t)}}let Bv,zv;function Vv(r,t,n){let s=t.clock.getDelta();for(t.frameloop==="never"&&typeof r=="number"&&(s=r-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=r),Bv=t.internal.subscribers,wm=0;wm<Bv.length;wm++)zv=Bv[wm],zv.ref.current(zv.store.getState(),s,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function mH(r){let t=!1,n=!1,s,o,a;function y(g){o=requestAnimationFrame(y),t=!0,s=0,Hd("before",g),n=!0;for(const l of r.values()){var h;a=l.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((h=a.gl.xr)!=null&&h.isPresenting)&&(s+=Vv(g,a))}if(n=!1,Hd("after",g),s===0)return Hd("tail",g),t=!1,cancelAnimationFrame(o)}function i(g,h=1){var l;if(!g)return r.forEach(d=>i(d.store.getState(),h));(l=g.gl.xr)!=null&&l.isPresenting||!g.internal.active||g.frameloop==="never"||(h>1?g.internal.frames=Math.min(60,g.internal.frames+h):n?g.internal.frames=2:g.internal.frames=1,t||(t=!0,requestAnimationFrame(y)))}function _(g,h=!0,l,d){if(h&&Hd("before",g),l)Vv(g,l,d);else for(const v of r.values())Vv(g,v.store.getState());h&&Hd("after",g)}return{loop:y,invalidate:i,advance:_}}function yH(){const r=at.useContext(tL);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function gH(r,t=0){const n=yH(),s=n.getState().internal.subscribe,o=Yj(r);return Cf(()=>s(o,t,n),[t,s,n]),null}const Hc=new Map,{invalidate:LT,advance:kT}=mH(Hc),{reconciler:Py,applyProps:Ku}=tH(Hc,lH),Ju={objects:"shallow",strict:!1},vH=(r,t)=>{const n=typeof r=="function"?r(t):r;return eL(n)?n:new Fb({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...r})};function _H(r,t){const n=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(t){const{width:s,height:o,top:a,left:y,updateStyle:i=n}=t;return{width:s,height:o,top:a,left:y,updateStyle:i}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:s,height:o,top:a,left:y}=r.parentElement.getBoundingClientRect();return{width:s,height:o,top:a,left:y,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function xH(r){const t=Hc.get(r),n=t==null?void 0:t.fiber,s=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,a=s||dH(LT,kT),y=n||Py.createContainer(a,wc.ConcurrentRoot,null,!1,null,"",o,null);t||Hc.set(r,{fiber:y,store:a});let i,_=!1,g;return{configure(h={}){let{gl:l,size:d,scene:v,events:x,onCreated:p,shadows:f=!1,linear:u=!1,flat:c=!1,legacy:m=!1,orthographic:b=!1,frameloop:S="always",dpr:w=[1,2],performance:M,raycaster:A,camera:P,onPointerMissed:R}=h,k=a.getState(),L=k.gl;k.gl||k.set({gl:L=vH(l,r)});let B=k.raycaster;B||k.set({raycaster:B=new Bj});const{params:I,...F}=A||{};if(Yn.equ(F,B,Ju)||Ku(B,{...F}),Yn.equ(I,B.params,Ju)||Ku(B,{params:{...B.params,...I}}),!k.camera||k.camera===g&&!Yn.equ(g,P,Ju)){g=P;const H=P instanceof xf,q=H?P:b?new Sf(0,0,0,0,.1,1e3):new Br(75,0,.1,1e3);H||(q.position.z=5,P&&(Ku(q,P),("aspect"in P||"left"in P||"right"in P||"bottom"in P||"top"in P)&&(q.manual=!0,q.updateProjectionMatrix())),!k.camera&&!(P!=null&&P.rotation)&&q.lookAt(0,0,0)),k.set({camera:q}),B.camera=q}if(!k.scene){let H;v!=null&&v.isScene?H=v:(H=new Bb,v&&Ku(H,v)),k.set({scene:Qu(H)})}if(!k.xr){var z;const H=(ne,ee)=>{const se=a.getState();se.frameloop!=="never"&&kT(ne,!0,se,ee)},q=()=>{const ne=a.getState();ne.gl.xr.enabled=ne.gl.xr.isPresenting,ne.gl.xr.setAnimationLoop(ne.gl.xr.isPresenting?H:null),ne.gl.xr.isPresenting||LT(ne)},K={connect(){const ne=a.getState().gl;ne.xr.addEventListener("sessionstart",q),ne.xr.addEventListener("sessionend",q)},disconnect(){const ne=a.getState().gl;ne.xr.removeEventListener("sessionstart",q),ne.xr.removeEventListener("sessionend",q)}};typeof((z=L.xr)==null?void 0:z.addEventListener)=="function"&&K.connect(),k.set({xr:K})}if(L.shadowMap){const H=L.shadowMap.enabled,q=L.shadowMap.type;if(L.shadowMap.enabled=!!f,Yn.boo(f))L.shadowMap.type=hh;else if(Yn.str(f)){var G;const K={basic:LR,percentage:$y,soft:hh,variance:Ns};L.shadowMap.type=(G=K[f])!=null?G:hh}else Yn.obj(f)&&Object.assign(L.shadowMap,f);(H!==L.shadowMap.enabled||q!==L.shadowMap.type)&&(L.shadowMap.needsUpdate=!0)}const N=Xj();N&&("enabled"in N?N.enabled=!m:"legacyMode"in N&&(N.legacyMode=m)),_||Ku(L,{outputEncoding:u?3e3:3001,toneMapping:c?ao:_b}),k.legacy!==m&&k.set(()=>({legacy:m})),k.linear!==u&&k.set(()=>({linear:u})),k.flat!==c&&k.set(()=>({flat:c})),l&&!Yn.fun(l)&&!eL(l)&&!Yn.equ(l,L,Ju)&&Ku(L,l),x&&!k.events.handlers&&k.set({events:x(a)});const O=_H(r,d);return Yn.equ(O,k.size,Ju)||k.setSize(O.width,O.height,O.updateStyle,O.top,O.left),w&&k.viewport.dpr!==Jj(w)&&k.setDpr(w),k.frameloop!==S&&k.setFrameloop(S),k.onPointerMissed||k.set({onPointerMissed:R}),M&&!Yn.equ(M,k.performance,Ju)&&k.set(H=>({performance:{...H.performance,...M}})),i=p,_=!0,this},render(h){return _||this.configure(),Py.updateContainer(gt.jsx(bH,{store:a,children:h,onCreated:i,rootElement:r}),y,null,()=>{}),a},unmount(){nL(r)}}}function bH({store:r,children:t,onCreated:n,rootElement:s}){return Cf(()=>{const o=r.getState();o.set(a=>({internal:{...a.internal,active:!0}})),n&&n(o),r.getState().events.connected||o.events.connect==null||o.events.connect(s)},[]),gt.jsx(tL.Provider,{value:r,children:t})}function nL(r,t){const n=Hc.get(r),s=n==null?void 0:n.fiber;if(s){const o=n==null?void 0:n.store.getState();o&&(o.internal.active=!1),Py.updateContainer(null,s,null,()=>{o&&setTimeout(()=>{try{var a,y,i,_;o.events.disconnect==null||o.events.disconnect(),(a=o.gl)==null||(y=a.renderLists)==null||y.dispose==null||y.dispose(),(i=o.gl)==null||i.forceContextLoss==null||i.forceContextLoss(),(_=o.gl)!=null&&_.xr&&o.xr.disconnect(),sH(o),Hc.delete(r)}catch{}},500)})}}Py.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:at.version});const Gv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function wH(r){const{handlePointer:t}=cH(r);return{priority:1,enabled:!0,compute(n,s,o){s.pointer.set(n.offsetX/s.size.width*2-1,-(n.offsetY/s.size.height)*2+1),s.raycaster.setFromCamera(s.pointer,s.camera)},connected:void 0,handlers:Object.keys(Gv).reduce((n,s)=>({...n,[s]:t(s)}),{}),update:()=>{var n;const{events:s,internal:o}=r.getState();(n=o.lastEvent)!=null&&n.current&&s.handlers&&s.handlers.onPointerMove(o.lastEvent.current)},connect:n=>{var s;const{set:o,events:a}=r.getState();a.disconnect==null||a.disconnect(),o(y=>({events:{...y.events,connected:n}})),Object.entries((s=a.handlers)!=null?s:[]).forEach(([y,i])=>{const[_,g]=Gv[y];n.addEventListener(_,i,{passive:g})})},disconnect:()=>{const{set:n,events:s}=r.getState();if(s.connected){var o;Object.entries((o=s.handlers)!=null?o:[]).forEach(([a,y])=>{if(s&&s.connected instanceof HTMLElement){const[i]=Gv[a];s.connected.removeEventListener(i,y)}}),n(a=>({events:{...a.events,connected:void 0}}))}}}}function IT(r,t){let n;return(...s)=>{window.clearTimeout(n),n=window.setTimeout(()=>r(...s),t)}}function SH({debounce:r,scroll:t,polyfill:n,offsetSize:s}={debounce:0,scroll:!1,offsetSize:!1}){const o=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,y]=at.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),i=at.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),_=r?typeof r=="number"?r:r.scroll:null,g=r?typeof r=="number"?r:r.resize:null,h=at.useRef(!1);at.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[l,d,v]=at.useMemo(()=>{const u=()=>{if(!i.current.element)return;const{left:c,top:m,width:b,height:S,bottom:w,right:M,x:A,y:P}=i.current.element.getBoundingClientRect(),R={left:c,top:m,width:b,height:S,bottom:w,right:M,x:A,y:P};i.current.element instanceof HTMLElement&&s&&(R.height=i.current.element.offsetHeight,R.width=i.current.element.offsetWidth),Object.freeze(R),h.current&&!AH(i.current.lastBounds,R)&&y(i.current.lastBounds=R)};return[u,g?IT(u,g):u,_?IT(u,_):u]},[y,s,_,g]);function x(){i.current.scrollContainers&&(i.current.scrollContainers.forEach(u=>u.removeEventListener("scroll",v,!0)),i.current.scrollContainers=null),i.current.resizeObserver&&(i.current.resizeObserver.disconnect(),i.current.resizeObserver=null),i.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",i.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",i.current.orientationHandler))}function p(){i.current.element&&(i.current.resizeObserver=new o(v),i.current.resizeObserver.observe(i.current.element),t&&i.current.scrollContainers&&i.current.scrollContainers.forEach(u=>u.addEventListener("scroll",v,{capture:!0,passive:!0})),i.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",i.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",i.current.orientationHandler))}const f=u=>{!u||u===i.current.element||(x(),i.current.element=u,i.current.scrollContainers=rL(u),p())};return EH(v,!!t),MH(d),at.useEffect(()=>{x(),p()},[t,v,d]),at.useEffect(()=>x,[]),[f,a,l]}function MH(r){at.useEffect(()=>{const t=r;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[r])}function EH(r,t){at.useEffect(()=>{if(t){const n=r;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[r,t])}function rL(r){const t=[];if(!r||r===document.body)return t;const{overflow:n,overflowX:s,overflowY:o}=window.getComputedStyle(r);return[n,s,o].some(a=>a==="auto"||a==="scroll")&&t.push(r),[...t,...rL(r.parentElement)]}const TH=["x","y","top","bottom","left","right","width","height"],AH=(r,t)=>TH.every(n=>r[n]===t[n]);var CH=Object.defineProperty,PH=Object.defineProperties,RH=Object.getOwnPropertyDescriptors,OT=Object.getOwnPropertySymbols,jH=Object.prototype.hasOwnProperty,LH=Object.prototype.propertyIsEnumerable,DT=(r,t,n)=>t in r?CH(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,NT=(r,t)=>{for(var n in t||(t={}))jH.call(t,n)&&DT(r,n,t[n]);if(OT)for(var n of OT(t))LH.call(t,n)&&DT(r,n,t[n]);return r},kH=(r,t)=>PH(r,RH(t)),UT,FT;typeof window<"u"&&((UT=window.document)!=null&&UT.createElement||((FT=window.navigator)==null?void 0:FT.product)==="ReactNative")?at.useLayoutEffect:at.useEffect;function iL(r,t,n){if(!r)return;if(n(r)===!0)return r;let s=r.child;for(;s;){const o=iL(s,t,n);if(o)return o;s=s.sibling}}function sL(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const BT=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=BT;return}return BT.apply(this,arguments)};const lw=sL(at.createContext(null));class oL extends at.Component{render(){return at.createElement(lw.Provider,{value:this._reactInternals},this.props.children)}}function IH(){const r=at.useContext(lw);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=at.useId();return at.useMemo(()=>{for(const s of[r,r==null?void 0:r.alternate]){if(!s)continue;const o=iL(s,!1,a=>{let y=a.memoizedState;for(;y;){if(y.memoizedState===t)return!0;y=y.next}});if(o)return o}},[r,t])}function OH(){const r=IH(),[t]=at.useState(()=>new Map);t.clear();let n=r;for(;n;){if(n.type&&typeof n.type=="object"){const o=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;o&&o!==lw&&!t.has(o)&&t.set(o,at.useContext(sL(o)))}n=n.return}return t}function DH(){const r=OH();return at.useMemo(()=>Array.from(r.keys()).reduce((t,n)=>s=>at.createElement(t,null,at.createElement(n.Provider,kH(NT({},s),{value:r.get(n)}))),t=>at.createElement(oL,NT({},t))),[r])}const NH=at.forwardRef(function({children:t,fallback:n,resize:s,style:o,gl:a,events:y=wH,eventSource:i,eventPrefix:_,shadows:g,linear:h,flat:l,legacy:d,orthographic:v,frameloop:x,dpr:p,performance:f,raycaster:u,camera:c,scene:m,onPointerMissed:b,onCreated:S,...w},M){at.useMemo(()=>eH(WG),[]);const A=DH(),[P,R]=SH({scroll:!0,debounce:{scroll:50,resize:0},...s}),k=at.useRef(null),L=at.useRef(null);at.useImperativeHandle(M,()=>k.current);const B=Yj(b),[I,F]=at.useState(!1),[z,G]=at.useState(!1);if(I)throw I;if(z)throw z;const N=at.useRef(null);Cf(()=>{const H=k.current;R.width>0&&R.height>0&&H&&(N.current||(N.current=xH(H)),N.current.configure({gl:a,events:y,shadows:g,linear:h,flat:l,legacy:d,orthographic:v,frameloop:x,dpr:p,performance:f,raycaster:u,camera:c,scene:m,size:R,onPointerMissed:(...q)=>B.current==null?void 0:B.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(i?nH(i)?i.current:i:L.current),_&&q.setEvents({compute:(K,ne)=>{const ee=K[_+"X"],se=K[_+"Y"];ne.pointer.set(ee/ne.size.width*2-1,-(se/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),S==null||S(q)}}),N.current.render(gt.jsx(A,{children:gt.jsx(Zj,{set:G,children:gt.jsx(at.Suspense,{fallback:gt.jsx(rH,{set:F}),children:t??null})})})))}),at.useEffect(()=>{const H=k.current;if(H)return()=>nL(H)},[]);const O=i?"none":"auto";return gt.jsx("div",{ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O,...o},...w,children:gt.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:gt.jsx("canvas",{ref:k,style:{display:"block"},children:n})})})}),UH=at.forwardRef(function(t,n){return gt.jsx(oL,{children:gt.jsx(NH,{...t,ref:n})})});function H_(){return H_=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},H_.apply(null,arguments)}function FH(r,t){const n=r+"Geometry";return at.forwardRef(({args:s,children:o,...a},y)=>{const i=at.useRef(null);return at.useImperativeHandle(y,()=>i.current),at.useLayoutEffect(()=>void(t==null?void 0:t(i.current))),at.createElement("mesh",H_({ref:i},a),at.createElement(n,{attach:"geometry",args:s}),o)})}const BH=FH("sphere");function zH(){const r=at.useRef(null),t=at.useRef(null);gH((a,y)=>{r.current&&(r.current.rotation.y+=y*.1),t.current&&(t.current.rotation.y+=y*.08)});const n=new ln,s=2e3,o=new Float32Array(s*3);for(let a=0;a<s*3;a++)o[a]=(Math.random()-.5)*5;return n.setAttribute("position",new In(o,3)),gt.jsxs("group",{scale:[2,2,2],children:[gt.jsx(BH,{ref:r,args:[1,64,64],children:gt.jsx("meshBasicMaterial",{color:"#ffffff",wireframe:!0,transparent:!0,opacity:.4})}),gt.jsxs("points",{ref:t,children:[gt.jsx("bufferGeometry",{attach:"geometry",...n}),gt.jsx("pointsMaterial",{attach:"material",size:.02,color:"#ffffff",transparent:!0,opacity:.6})]})]})}function VH(){const[r,t]=at.useState(!0),n=async s=>{s.preventDefault();const o=new FormData(s.currentTarget);try{(await fetch("https://formspree.io/f/chinmaydjain@gmail.com",{method:"POST",body:o,headers:{Accept:"application/json"}})).ok?(alert("Message sent successfully!"),s.target.reset()):alert("Error sending message. Please try again.")}catch{alert("Error sending message. Please try again.")}};return r?gt.jsx(O5,{onComplete:()=>t(!1)}):gt.jsxs("div",{className:"min-h-screen bg-black text-white",children:[gt.jsx(Y5,{}),gt.jsx(W5,{}),gt.jsxs("section",{id:"home",className:"h-screen relative overflow-hidden",children:[gt.jsx("div",{className:"absolute inset-0 bg-transparent",children:gt.jsxs(UH,{camera:{position:[0,0,5]},children:[gt.jsx("ambientLight",{intensity:.5}),gt.jsx("pointLight",{position:[10,10,10]}),gt.jsx(zH,{})]})}),gt.jsxs("div",{className:"relative z-10 h-full flex flex-col items-center justify-center px-4",children:[gt.jsxs(_a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center max-w-4xl",children:[gt.jsx("h1",{className:"text-4xl md:text-7xl font-bold mb-6 font-orbitron",children:"Bringing the Future to You"}),gt.jsx("p",{className:"text-xl md:text-3xl mb-8 text-gray-300 font-rajdhani tracking-wider",children:"Innovative IT Solutions Worldwide"}),gt.jsxs("div",{className:"space-y-4 md:space-y-0 md:space-x-6 flex flex-col md:flex-row justify-center",children:[gt.jsx("a",{href:"#services",className:"px-8 py-4 bg-white text-black font-bold rounded-lg hover-glow transform hover:scale-105 transition-all duration-300 font-orbitron",children:"Explore Solutions"}),gt.jsx("a",{href:"#contact",className:"px-8 py-4 border border-white text-white font-bold rounded-lg hover-glow transform hover:scale-105 transition-all duration-300 font-orbitron",children:"Contact Us"})]})]}),gt.jsx(_a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:1},className:"absolute bottom-10 w-full max-w-6xl mx-auto px-4",children:gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[{number:"100+",text:"Projects Completed"},{number:"50+",text:"Global Clients"},{number:"5",text:"Years of Innovation"}].map((s,o)=>gt.jsxs("div",{className:"backdrop-blur-sm bg-white/5 rounded-lg p-4 hover-glow",children:[gt.jsx("h3",{className:"text-3xl font-bold mb-2 font-orbitron",children:s.number}),gt.jsx("p",{className:"text-gray-300 font-rajdhani",children:s.text})]},o))})})]})]}),gt.jsx("section",{id:"services",className:"py-20 px-4",children:gt.jsxs("div",{className:"max-w-7xl mx-auto",children:[gt.jsx("h2",{className:"text-3xl md:text-5xl text-center mb-16 font-orbitron",children:"Our Services"}),gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{icon:F5,title:"Website Development",desc:"Crafting seamless digital experiences with cutting-edge technologies"},{icon:G5,title:"Mobile App Development",desc:"Building innovative mobile solutions for iOS and Android"},{icon:B5,title:"Software Development",desc:"Creating custom software solutions tailored to your needs"},{icon:U5,title:"AI Solutions",desc:"Implementing intelligent systems for tomorrow's challenges"}].map(s=>gt.jsxs(_a.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"p-6 border border-white/20 rounded-lg hover-glow backdrop-blur-sm bg-white/5",children:[gt.jsx(s.icon,{className:"w-12 h-12 mb-4"}),gt.jsx("h3",{className:"text-xl font-bold mb-4 font-orbitron",children:s.title}),gt.jsx("p",{className:"text-gray-300 font-rajdhani",children:s.desc})]},s.title))})]})}),gt.jsx("section",{id:"about",className:"py-20 px-4 bg-white/5",children:gt.jsxs("div",{className:"max-w-7xl mx-auto",children:[gt.jsx("h2",{className:"text-3xl md:text-5xl text-center mb-16 font-orbitron",children:"About Us"}),gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[gt.jsxs(_a.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},children:[gt.jsx("h3",{className:"text-2xl md:text-3xl mb-6 font-orbitron",children:"Our Vision"}),gt.jsx("p",{className:"text-gray-300 mb-6 font-rajdhani text-lg",children:"At Jains Technology Solutions, we envision a world where innovation knows no boundaries. Founded by Chinmay Jain, we're committed to delivering cutting-edge technology solutions that empower businesses worldwide."}),gt.jsx("p",{className:"text-gray-300 font-rajdhani text-lg",children:"Our team of experts combines creativity with technical excellence to transform your ideas into reality, ensuring your business stays ahead in the digital age."})]}),gt.jsx(_a.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5},className:"grid grid-cols-2 gap-4",children:["Innovative Solutions","Global Reach","Expert Team","24/7 Support"].map((s,o)=>gt.jsx("div",{className:"p-4 border border-white/20 rounded-lg text-center hover-glow",children:gt.jsx("p",{className:"font-orbitron",children:s})},o))})]})]})}),gt.jsx("section",{id:"contact",className:"py-20 px-4",children:gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[gt.jsx("h2",{className:"text-3xl md:text-5xl text-center mb-16 font-orbitron",children:"Get in Touch"}),gt.jsxs("form",{onSubmit:n,className:"space-y-6",children:[gt.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[gt.jsxs("div",{children:[gt.jsx("label",{htmlFor:"name",className:"block mb-2 font-rajdhani",children:"Name"}),gt.jsx("input",{type:"text",id:"name",name:"name",required:!0,className:"w-full p-3 bg-white/5 border border-white/20 rounded-lg focus:outline-none focus:border-white font-rajdhani"})]}),gt.jsxs("div",{children:[gt.jsx("label",{htmlFor:"email",className:"block mb-2 font-rajdhani",children:"Email"}),gt.jsx("input",{type:"email",id:"email",name:"email",required:!0,className:"w-full p-3 bg-white/5 border border-white/20 rounded-lg focus:outline-none focus:border-white font-rajdhani"})]})]}),gt.jsxs("div",{children:[gt.jsx("label",{htmlFor:"message",className:"block mb-2 font-rajdhani",children:"Message"}),gt.jsx("textarea",{id:"message",name:"message",required:!0,rows:6,className:"w-full p-3 bg-white/5 border border-white/20 rounded-lg focus:outline-none focus:border-white font-rajdhani"})]}),gt.jsxs("button",{type:"submit",className:"w-full md:w-auto px-8 py-4 bg-white text-black font-bold rounded-lg hover-glow transform hover:scale-105 transition-all duration-300 font-orbitron flex items-center justify-center gap-2",children:[gt.jsx(V5,{className:"w-5 h-5"}),"Send Message"]})]})]})})]})}eP(document.getElementById("root")).render(gt.jsx(at.StrictMode,{children:gt.jsx(VH,{})}));
